(()=>{var __webpack_modules__={8972:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.convertKeywordStringToANMap=function(e){return(0,a.isStr)(e)&&""!==e?f(e.split(/\s*(?:,)\s*/)):{}},t.getANKewyordParamFromMaps=v,t.getANKeywordParam=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return v.apply(void 0,[g(e),m(e)].concat(r))},t.getANMapFromOrtbKeywords=g,t.getANMapFromOrtbSegments=m,t.transformBidderParamKeywords=p;var i=n(r(8832)),o=n(r(147)),a=r(1779),s=r(5674),d=r(1604),c={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid",501:"perid"},u=["user.data"].concat(d.CLIENT_SECTIONS.map((function(e){return"".concat(e,".content.data")})));function l(e,t,r){return null==t?r:(0,a.isStr)(t)?t:(0,a.isNumber)(t)?t.toString():void(0,a.logWarn)("Unsuported type for param: "+e+" required type: String")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",r=[];return(0,a._each)(e,(function(e,n){if((0,a.isArray)(e)){var i=[];(0,a._each)(e,(function(e){((e=l(t+"."+n,e))||""===e)&&i.push(e)})),e=i}else{if(e=l(t+"."+n,e),!(0,a.isStr)(e))return;e=[e]}e=e.filter((function(e){return""!==e}));var o={key:n};e.length>0&&(o.value=e),r.push(o)})),r}function f(e){var t={};return e.forEach((function(e){if(-1!==e.indexOf("=")){var r=e.split("="),n=r[0],i=r[1];t.hasOwnProperty(n)?t[n].push(i):t[n]=[i]}else t.hasOwnProperty(e)||(t[e]=[])})),t}function g(e){return f((0,s.getAllOrtbKeywords)(e))}function v(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p(a.mergeDeep.apply(void 0,(0,o.default)(t.map((function(e){return Object.fromEntries(Object.entries(e||{}).map((function(e){var t=(0,i.default)(e,2),r=t[0],n=t[1];return[r,(0,a.isNumber)(n)||(0,a.isStr)(n)?[n]:n]})))})))))}function m(e){var t={};return u.forEach((function(r){((0,a.deepAccess)(e,r)||[]).forEach((function(e){var r=c[(0,a.deepAccess)(e,"ext.segtax")];r&&e.segment.forEach((function(e){t[r]?t[r].push(e.id):t[r]=[e.id]}))}))})),t}},7243:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertCamelToUnderscore=function(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")},t.fill=function(e,t){for(var r=[],i=0;i<t;i++){var o=(0,n.isPlainObject)(e)?(0,n.deepClone)(e):e;r.push(o)}return r};var n=r(1779)},5039:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APPNEXUS_CATEGORY_MAPPING=void 0;t.APPNEXUS_CATEGORY_MAPPING={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"}},8884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunk=function(e,t){for(var r=[],n=0;n<Math.ceil(e.length/t);n++){var i=n*t,o=i+t;r.push(e.slice(i,o))}return r}},1703:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.MODE_RETURN=t.MODE_MIXED=t.MODE_CALLBACK=void 0,t.cmpClient=function(e){var t=e.apiName,r=e.apiVersion,n=e.apiArgs,d=void 0===n?["command","callback","parameter","version"]:n,f=e.callbackArgs,g=void 0===f?["returnValue","success"]:f,v=e.mode,m=void 0===v?u:v,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,h={},y="".concat(t,"Call"),I="".concat(t,"Return");function E(e){var t,r="string"==typeof e.data&&e.data.includes(I)?JSON.parse(e.data):e.data;if(null!=r&&null!==(t=r[I])&&void 0!==t&&t.callId){var n=r[I];h.hasOwnProperty(n.callId)&&h[n.callId].apply(h,(0,a.default)(g.map((function(e){return n[e]}))))}}var _,A=function(){for(var e,r=b,n=!1;null!=r;){try{if("function"==typeof r[t]){e=r,n=!0;break}}catch(e){}try{if(r.frames["".concat(t,"Locator")]){e=r;break}}catch(e){}if(r===b.top)break;r=r.parent}return[e,n]}(),O=(0,o.default)(A,2),S=O[0],T=O[1];if(!S)return;function w(e){return e=Object.assign({version:r},e),d.map((function(t){return[t,e[t]]}))}function C(e,t,r,n){var i="function"==typeof e;return function(o,a){(n&&n(),m!==l)&&(null==a||a?t:r)(i?void 0:o);i&&e.apply(this,arguments)}}T?_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new s.GreedyPromise((function(r,n){var i=S[t].apply(S,(0,a.default)(w(c(c({},e),{},{callback:e.callback||m===p?C(e.callback,r,n):void 0})).map((function(e){var t=(0,o.default)(e,2);t[0];return t[1]}))));(m===l||null==e.callback&&m===u)&&r(i)}))}:(b.addEventListener("message",E,!1),_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new s.GreedyPromise((function(r,n){var a=Math.random().toString(),s=(0,i.default)({},y,c(c({},Object.fromEntries(w(e).filter((function(e){return"callback"!==(0,o.default)(e,1)[0]})))),{},{callId:a}));h[a]=C(null==e?void 0:e.callback,r,n,(t||null==(null==e?void 0:e.callback))&&function(){delete h[a]}),S.postMessage(s,"*"),m===l&&r()}))});return Object.assign(_,{isDirect:T,close:function(){!T&&b.removeEventListener("message",E)}})};var i=n(r(8212)),o=n(r(8832)),a=n(r(147)),s=r(8145);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=0;t.MODE_MIXED=u;var l=1;t.MODE_RETURN=l;var p=2;t.MODE_CALLBACK=p},9344:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.PREBID_RESPONSE=t.PREBID_REQUEST=t.PREBID_NATIVE=t.PREBID_EVENT=t.NO_AD=t.EXCEPTION=t.AD_RENDER_SUCCEEDED=t.AD_RENDER_FAILED=void 0;var i=n(r(5404));t.PREBID_NATIVE="Prebid Native";t.PREBID_REQUEST="Prebid Request";t.PREBID_RESPONSE="Prebid Response";t.PREBID_EVENT="Prebid Event";var o=i.default.EVENTS.AD_RENDER_SUCCEEDED;t.AD_RENDER_SUCCEEDED=o;var a=i.default.EVENTS.AD_RENDER_FAILED;t.AD_RENDER_FAILED=a;var s=i.default.AD_RENDER_FAILED_REASON.NO_AD;t.NO_AD=s;var d=i.default.AD_RENDER_FAILED_REASON.EXCEPTION;t.EXCEPTION=d},8584:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.renderAdDirect=function(e,t,r){var n;function l(r){null!=r?(0,i.emitAdRenderFail)(Object.assign({id:t,bid:n},r)):(0,i.emitAdRenderSucceeded)({doc:e,bid:n,adId:t})}try{if(t&&e){var p=(n=a.auctionManager.findBidByAdId(t))&&a.auctionManager.index.getAdUnit(n),f=(0,c.getGlobal)().videoModule;if(null!=p&&p.video&&f)return void f.renderBid(p.video.divId,n);e!==document||(0,d.inIframe)()?(0,i.handleRender)((function(t){(0,o.writeAd)(t,l,e),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t.width,e.defaultView.frameElement.height=t.height);var r=document.createComment("Creative ".concat(n.creativeId," served by ").concat(n.bidder," Prebid.js Header Bidding"));(0,d.insertElement)(r,e,"html")}),{adId:t,options:{clickUrl:null==r?void 0:r.clickThrough},bidResponse:n,doc:e}):l({reason:s.default.AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:"renderAd was prevented from writing to the main document."})}else l({reason:s.default.AD_RENDER_FAILED_REASON.MISSING_DOC_OR_ADID,message:"missing ".concat(t?"doc":"adId")})}catch(e){l({reason:u.EXCEPTION,message:e.message})}};var i=r(8977),o=r(6190),a=r(6572),s=n(r(5404)),d=r(1779),c=r(8851),u=r(9344)},6190:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.mkFrame=s,t.writeAd=function(e,t){var r=e.ad,n=e.adUrl,i=e.width,a=e.height,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;r||n?(n&&!r?s(d,{width:i,height:a,src:n}):(d.write(r),d.close()),t()):t({reason:o.NO_AD,message:"Missing ad markup or URL"})};var i=n(r(8832)),o=r(9344),a={frameBorder:0,scrolling:"no",marginHeight:0,marginWidth:0,topMargin:0,leftMargin:0,allowTransparency:"true"};function s(e,t){var r=e.createElement("iframe");return t=Object.assign({},t,a),Object.entries(t).forEach((function(e){var t=(0,i.default)(e,2),n=t[0],o=t[1];return r.setAttribute(n,o)})),e.body.appendChild(r),r}},3801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertCurrency=o,t.currencyCompare=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return[e.cpm,e.currency]},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();return(0,i.keyCompare)((function(r){return t.apply(null,e(r))}))},t.currencyNormalizer=a;var n=r(8851),i=r(7463);function o(e,t,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t===r)return e;var o=e;try{o=(0,n.getGlobal)().convertCurrency(e,t,r)}catch(e){if(!i)throw e}return o}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(n,i){return null==e&&(e=i),r(n,i,e,t)}}},301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainOverrideToRootDomain=function(e,t){return function(){for(var r,n,i=document.domain.split("."),o="_gd".concat(Date.now(),"_").concat(t),a=0;a<i.length;a++){var s=i.slice(a).join(".");if(e.setCookie(o,"1",void 0,void 0,s),n=e.getCookie(o),e.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,s),"1"!==n)return r;r=s}}}},6454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrigin=function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}},9558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGptSlotForAdUnitCode=a,t.getGptSlotInfoForAdUnitCode=function(e){var t=a(e);if(t)return{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()};return{}},t.isSlotMatchingAdUnitCode=o;var n=r(9635),i=r(1779);function o(e){return function(t){return(0,i.compareCodeAndSlot)(t,e)}}function a(e){var t;return(0,i.isGptPubadsDefined)()&&(t=(0,n.find)(window.googletag.pubads().getSlots(),o(e))),t}},5674:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllOrtbKeywords=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d.apply(void 0,(0,i.default)(s.map((function(t){return(0,a.deepAccess)(e,t)}))).concat(r))},t.mergeKeywords=d;var i=n(r(147)),o=r(1604),a=r(1779),s=["user.keywords"].concat(o.CLIENT_SECTIONS.flatMap((function(e){return["keywords","content.keywords"].map((function(t){return"".concat(e,".").concat(t)}))})));function d(){for(var e=new Set,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.filter((function(e){return e})).flatMap((function(e){return Array.isArray(e)?e:e.split(",")})).map((function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")})).filter((function(e){return e})).forEach((function(t){return e.add(t)})),Array.from(e.keys())}},672:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.objectGuard=function(e){var t={},r=[];e.forEach((function(e){e.wp&&r.push(e),e.get&&e.paths.forEach((function(r){var n=t;r.split(".").forEach((function(e){n.children=n.children||{},n.children[e]=n.children[e]||{},n=n.children[e]})),n.rule=e}))}));var n=(0,o.objectTransformer)(r);function a(e,t,r){return new Proxy(e,{get:function(e,n,s){var d=Reflect.get(e,n,s);if(t.hasOwnProperty(n)){var c=t[n],u=c.children,l=c.rule;if(u&&null!=d&&"object"===(0,i.default)(d))return a(d,u,r);if(l&&(0,o.isData)(d)&&r(l))return l.get(d)}return d}})}return function(e){for(var r,i={},s=arguments.length,d=new Array(s>1?s-1:0),c=1;c<s;c++)d[c-1]=arguments[c];return{obj:a(e,t.children||{},o.sessionedApplies.apply(void 0,[i].concat(d))),verify:(r=n.apply(void 0,[i,e].concat(d)),function(){r.forEach((function(e){return e()}))})}}},t.writeProtectRule=function(e){return Object.assign({wp:!0,run:function(e,t,r,n,s){var d=r&&r.hasOwnProperty(n),c=d?r[n]:void 0,u=d&&null!=c&&"object"===(0,i.default)(c)?(0,a.deepClone)(c):c;return function(){var r=null==t?e:(0,a.deepAccess)(e,t),i=r&&(0,o.isData)(r[n]),l=i?r[n]:void 0;!d&&i&&s()?delete r[n]:d===i&&l===c&&(0,a.deepEqual)(l,u)||!s()||(0,a.deepSetValue)(e,(null==t?[]:[t]).concat(n).join("."),u)}}},e)};var i=n(r(4319)),o=r(2156),a=r(1779)},2428:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.guardOrtb2Fragments=void 0,t.ortb2FragmentsGuardFactory=p,t.ortb2Guard=void 0,t.ortb2GuardFactory=u;var i=n(r(8832)),o=r(1681),a=r(353),s=r(2156),d=r(672),c=r(1779);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isActivityAllowed;return(0,d.objectGuard)((0,s.ortb2TransmitRules)(e).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isActivityAllowed;return[{name:a.ACTIVITY_ENRICH_EIDS,paths:s.ORTB_EIDS_PATHS,applies:(0,s.appliesWhenActivityDenied)(a.ACTIVITY_ENRICH_EIDS,e)},{name:a.ACTIVITY_ENRICH_UFPD,paths:s.ORTB_UFPD_PATHS,applies:(0,s.appliesWhenActivityDenied)(a.ACTIVITY_ENRICH_UFPD,e)}].map(d.writeProtectRule)}(e)))}var l=u();function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return function(t,r){t.global=t.global||{},t.bidder=t.bidder||{};var n=new Set(Object.keys(t.bidder)),o=[];function a(t){var n=e(t,r);return o.push(n.verify),n.obj}var s={global:a(t.global),bidder:Object.fromEntries(Object.entries(t.bidder).map((function(e){var t=(0,i.default)(e,2);return[t[0],a(t[1])]})))};return{obj:s,verify:function(){Object.entries(s.bidder).filter((function(e){var t=(0,i.default)(e,1)[0];return!n.has(t)})).forEach((function(n){var o=(0,i.default)(n,2),a=o[0],s=o[1],d={},u=e(d,r);(0,c.mergeDeep)(u.obj,s),u.verify(),t.bidder[a]=d})),o.forEach((function(e){return e()}))}}}}t.ortb2Guard=l;var f=p();t.guardOrtb2Fragments=f},6337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProcessors=void 0,t.ortbConverter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=void 0===t?{}:t,o=e.processors,s=void 0===o?d:o,c=e.overrides,u=void 0===c?{}:c,l=e.imp,p=e.request,f=e.bidResponse,g=e.response,v=new WeakMap;function m(e,t,r,i){var o;return function(){return null==o&&(o=function(){var o=r.bind(this,(0,n.compose)(s()[e]||{},u[e]||{}));return t&&(o=t.bind(this,o)),function(){try{return o.apply(this,arguments)}catch(e){i.call.apply(i,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),o.apply(this,arguments)}}var b=m(a.IMP,l,(function(e,t,r){var n={};return e(n,t,r),n}),(function(e,t,r){(0,i.logError)("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:r})})),h=m(a.REQUEST,p,(function(e,t,r,n){var i={imp:t};return e(i,r,n),i}),(function(e,t,r,n){throw(0,i.logError)("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:r,context:n}),e})),y=m(a.BID_RESPONSE,f,(function(e,t,r){var n={};return e(n,t,r),n}),(function(e,t,r){(0,i.logError)("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:r})})),I=m(a.RESPONSE,g,(function(e,t,r,n){var i={bids:t};return e(i,r,n),i}),(function(e,t,r,n){throw(0,i.logError)("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:r,context:n}),e}));return{toORTB:function(e){var t=e.bidderRequest,n=e.bidRequests,o=e.context,a=void 0===o?{}:o;n=n||t.bids;var s={req:Object.assign({bidRequests:n},r,a),imp:{}};s.req.impContext=s.imp;var d=n.map((function(e){var n=Object.assign({bidderRequest:t,reqContext:s.req},r,a),o=b(e,n);if(null!=o){if(o.hasOwnProperty("id"))return Object.assign(n,{bidRequest:e,imp:o}),s.imp[o.id]=n,o;(0,i.logError)("Converted ORTB imp does not specify an id, ignoring bid request",e,o)}})).filter(Boolean),c=h(d,t,s.req);return s.req.bidderRequest=t,null!=c&&v.set(c,s),c},fromORTB:function(e){var t=e.request,r=e.response,n=v.get(t);if(null==n)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},r,e)}var a=Object.fromEntries((t.imp||[]).map((function(e){return[e.id,e]}))),s=(r.seatbid||[]).flatMap((function(e){return(e.bid||[]).map((function(t){if(a.hasOwnProperty(t.impid)&&n.imp.hasOwnProperty(t.impid))return y(t,o(n.imp[t.impid],{imp:a[t.impid],seatbid:e,ortbResponse:r}));(0,i.logError)("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)}))})).filter(Boolean);return I(s,r,o(n.req))}}};var n=r(6755),i=r(1779),o=r(6018),a=r(9502),s=r(2176);var d=(0,i.memoize)((function(){return(0,s.mergeProcessors)(o.DEFAULT_PROCESSORS,(0,a.getProcessors)(a.DEFAULT))}));t.defaultProcessors=d},6755:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.compose=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o.has(e)){var r=Object.entries(e);r.sort((function(e,t){return(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1})),o.set(e,r.map((function(e){var t=(0,i.default)(e,2);return[t[0],t[1].fn]})))}var n=o.get(e).filter((function(e){var r=(0,i.default)(e,1)[0];return!t.hasOwnProperty(r)||t[r]})).map((function(e){var r=(0,i.default)(e,2),n=r[0],o=r[1];return t.hasOwnProperty(n)?t[n].bind(this,o):o}));return function(){var e=this,t=Array.from(arguments);n.forEach((function(r){r.apply(e,t)}))}};var i=n(r(8832)),o=new WeakMap},2176:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeProcessors=function e(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r.shift(),a=r.length>1?e.apply(void 0,r):r[0];return Object.fromEntries(n.PROCESSOR_TYPES.map((function(e){return[e,Object.assign({},o[e],a[e])]})))};var n=r(9502)},2627:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.sizesToFormat=function(e){return(e=(0,o.parseSizesInput)(e)).map((function(e){var t=e.split("x"),r=(0,i.default)(t,2),n=r[0],o=r[1];return{w:parseInt(n,10),h:parseInt(o,10)}}))};var i=n(r(8832)),o=r(1779)},5293:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bannerResponseProcessor=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createPixel,t=void 0===e?function(e){return(0,n.createTrackPixelHtml)(decodeURIComponent(e))}:e;return function(e,r){e.mediaType===i.BANNER&&(r.adm&&r.nurl?(e.ad=r.adm,e.ad+=t(r.nurl)):r.adm?e.ad=r.adm:r.nurl&&(e.adUrl=r.nurl))}},t.fillBannerImp=function(e,t,r){if(r.mediaType&&r.mediaType!==i.BANNER)return;var a=(0,n.deepAccess)(t,"mediaTypes.banner");if(a){var s={topframe:!0===(0,n.inIframe)()?0:1};a.sizes&&(s.format=(0,o.sizesToFormat)(a.sizes)),a.hasOwnProperty("pos")&&(s.pos=a.pos),e.banner=(0,n.mergeDeep)(s,e.banner)}};var n=r(1779),i=r(6613),o=r(2627)},6018:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROCESSORS=void 0;var i,o=n(r(8212)),a=n(r(8832)),s=r(1779),d=r(5293),c=r(7612),u=r(9559),l=r(3652),p=r(9502),f=r(1604),g=(i={},(0,o.default)(i,p.REQUEST,{fpd:{priority:99,fn:function(e,t){(0,s.mergeDeep)(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:(0,f.clientSectionChecker)("ORTB request")},props:{fn:function(e,t){Object.assign(e,{id:e.id||(0,s.generateUUID)(),test:e.test||0});var r=parseInt(t.timeout,10);isNaN(r)||(e.tmax=r)}}}),(0,o.default)(i,p.IMP,{fpd:{priority:99,fn:function(e,t){(0,s.mergeDeep)(e,t.ortb2Imp)}},id:{fn:function(e,t){e.id=t.bidId}},banner:{fn:d.fillBannerImp},pbadslot:{fn:function(e){var t,r,n,i,o=null===(t=e.ext)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.pbadslot;o&&"string"==typeof o||(null===(n=e.ext)||void 0===n||(null===(i=n.data)||void 0===i||delete i.pbadslot))}}}),(0,o.default)(i,p.BID_RESPONSE,{mediaType:{priority:99,fn:u.setResponseMediaType},banner:{fn:(0,d.bannerResponseProcessor)()},props:{fn:function(e,t,r){var n;Object.entries({requestId:null===(n=r.bidRequest)||void 0===n?void 0:n.bidId,seatBidId:t.id,cpm:t.price,currency:r.ortbResponse.cur||r.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||r.ttl,netRevenue:r.netRevenue}).filter((function(e){var t=(0,a.default)(e,2);t[0];return void 0!==t[1]})).forEach((function(t){var r=(0,a.default)(t,2),n=r[0],i=r[1];return e[n]=i})),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain)}}}),i);t.DEFAULT_PROCESSORS=g,g[p.IMP].native={fn:l.fillNativeImp},g[p.BID_RESPONSE].native={fn:l.fillNativeResponse},g[p.IMP].video={fn:c.fillVideoImp},g[p.BID_RESPONSE].video={fn:c.fillVideoResponse}},9559:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_MTYPES=void 0,t.setResponseMediaType=function(e,t,r){if(e.mediaType)return;var n=r.mediaType;if(!n&&!i.hasOwnProperty(t.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=n||i[t.mtype]};var n=r(6613),i={1:n.BANNER,2:n.VIDEO,4:n.NATIVE};t.ORTB_MTYPES=i},3652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillNativeImp=function(e,t,r){if(r.mediaType&&r.mediaType!==i.NATIVE)return;var o=t.nativeOrtbRequest;if(o){var a;null!==(a=(o=Object.assign({},r.nativeRequest,o)).assets)&&void 0!==a&&a.length?e.native=(0,n.mergeDeep)({},{request:JSON.stringify(o),ver:o.ver},e.native):(0,n.logWarn)("mediaTypes.native is set, but no assets were specified. Native request skipped.",t)}},t.fillNativeResponse=function(e,t){if(e.mediaType===i.NATIVE){var r;if(r="string"==typeof t.adm?JSON.parse(t.adm):t.adm,!(0,n.isPlainObject)(r)||!Array.isArray(r.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:r}}};var n=r(1779),i=r(6613)},7612:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.fillVideoImp=function(e,t,r){if(r.mediaType&&r.mediaType!==a.VIDEO)return;var n=(0,o.deepAccess)(t,"mediaTypes.video");if(!(0,o.isEmpty)(n)){var u=Object.fromEntries(Object.entries(n).filter((function(e){var t=(0,i.default)(e,1)[0];return d.has(t)})));if(n.playerSize){var l=(0,s.sizesToFormat)(n.playerSize);l.length>1&&(0,o.logWarn)("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(u,l[0])}var p=c[n.context];null!=p&&(u.placement=p),e.video=(0,o.mergeDeep)(u,e.video)}},t.fillVideoResponse=function(e,t,r){if(e.mediaType===a.VIDEO){if((0,o.deepAccess)(r.imp,"video.w")&&(0,o.deepAccess)(r.imp,"video.h")){var n=[r.imp.video.w,r.imp.video.h];e.playerWidth=n[0],e.playerHeight=n[1]}t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl)}};var i=n(r(8832)),o=r(1779),a=r(6613),s=r(2627),d=new Set(["pos","placement","plcmt","api","mimes","protocols","playbackmethod","minduration","maxduration","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","minbitrate","maxbitrate","delivery","playbackend"]),c={instream:1}},6364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbsExtensions=void 0;var n=r(2176),i=r(7360),o=r(9502),a=r(6337),s=(0,r(1779).memoize)((function(){return(0,n.mergeProcessors)((0,a.defaultProcessors)(),i.PBS_PROCESSORS,(0,o.getProcessors)(o.PBS))}));t.pbsExtensions=s},5621:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImpAdUnitCode=function(e,t){var r=t.adUnitCode;r&&(0,n.deepSetValue)(e,"ext.prebid.adunitcode",r)};var n=r(1779)},475:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.setRequestExtPrebidAliases=function(e,t,r){var n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).am,a=void 0===n?i.default:n;if(a.aliasRegistry[t.bidderCode]){var s=a.bidderRegistry[t.bidderCode];s&&s.getSpec().skipPbsAliasing||(0,o.deepSetValue)(e,"ext.prebid.aliases.".concat(t.bidderCode),a.aliasRegistry[t.bidderCode])}};var i=n(r(1442)),o=r(1779)},8519:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.SUPPORTED_MEDIA_TYPES=void 0,t.extPrebidMediaType=function(e,t,r){var n=r.mediaType;if(!n){var i,o;n=s.ORTB_MTYPES.hasOwnProperty(t.mtype)?s.ORTB_MTYPES[t.mtype]:null===(i=t.ext)||void 0===i||null===(o=i.prebid)||void 0===o?void 0:o.type,d.hasOwnProperty(n)||(n=a.BANNER)}e.mediaType=n};var i,o=n(r(8212)),a=r(6613),s=r(9559),d=(i={},(0,o.default)(i,a.BANNER,"banner"),(0,o.default)(i,a.NATIVE,"native"),(0,o.default)(i,a.VIDEO,"video"),i);t.SUPPORTED_MEDIA_TYPES=d},4175:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.setImpBidParams=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=n.adUnit,d=n.bidderRequests,c=n.index,u=void 0===c?i.auctionManager.index:c,l=n.bidderRegistry,p=void 0===l?o.default.bidderRegistry:l,f=t.params,g=p[t.bidder];g&&g.getSpec().transformBidParams&&(s=s||u.getAdUnit(t),d=d||[r.bidderRequest],f=g.getSpec().transformBidParams(f,!0,s,d));f&&(0,a.deepSetValue)(e,"ext.prebid.bidder.".concat(t.bidder),f)};var i=r(6572),o=n(r(1442)),a=r(1779)},7360:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.PBS_PROCESSORS=void 0;var i,o=n(r(8212)),a=n(r(8832)),s=r(9502),d=r(1779),c=r(8519),u=r(475),l=r(4175),p=r(5621),f=r(5767),g=r(3836),v=(i={},(0,o.default)(i,s.REQUEST,{extPrebid:{fn:f.setRequestExtPrebid},extPrebidChannel:{fn:f.setRequestExtPrebidChannel},extPrebidAliases:{fn:u.setRequestExtPrebidAliases}}),(0,o.default)(i,s.IMP,{params:{fn:l.setImpBidParams},adUnitCode:{fn:p.setImpAdUnitCode}}),(0,o.default)(i,s.BID_RESPONSE,{mediaType:{fn:c.extPrebidMediaType,priority:99},videoCache:{fn:g.setBidResponseVideoCache,priority:-10},bidderCode:{fn:function(e,t,r){var n;e.bidderCode=r.seatbid.seat,e.adapterCode=(0,d.deepAccess)(t,"ext.prebid.meta.adaptercode")||(null===(n=r.bidRequest)||void 0===n?void 0:n.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,t){var r=(0,d.deepAccess)(t,"ext.prebid.bidid");(0,d.isStr)(r)&&(e.pbsBidId=r)}},adserverTargeting:{fn:function(e,t){var r=(0,d.deepAccess)(t,"ext.prebid.targeting");(0,d.isPlainObject)(r)&&(e.adserverTargeting=r)}},extPrebidMeta:{fn:function(e,t){e.meta=(0,d.mergeDeep)({},(0,d.deepAccess)(t,"ext.prebid.meta"),e.meta)}},pbsWurl:{fn:function(e,t){var r=(0,d.deepAccess)(t,"ext.prebid.events.win");(0,d.isStr)(r)&&(e.pbsWurl=r)}}}),(0,o.default)(i,s.RESPONSE,{serverSideStats:{fn:function(e,t,r){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach((function(e){var n=(0,a.default)(e,2),i=n[0],o=n[1],s=(0,d.deepAccess)(t,"ext.".concat(i,".").concat(r.bidderRequest.bidderCode));s&&(r.bidderRequest[o]=s,r.bidRequests.forEach((function(e){return e[o]=s})))}))}}}),i);t.PBS_PROCESSORS=v},5767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRequestExtPrebid=function(e,t){var r;(0,n.deepSetValue)(e,"ext.prebid",(0,n.mergeDeep)({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(r=e.ext)||void 0===r?void 0:r.prebid)),i.config.getConfig("debug")&&(e.ext.prebid.debug=!0)},t.setRequestExtPrebidChannel=function(e){var t,r;(0,n.deepSetValue)(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:(0,o.getGlobal)().version},null===(t=e.ext)||void 0===t||null===(r=t.prebid)||void 0===r?void 0:r.channel))};var n=r(1779),i=r(6522),o=r(8851)},3836:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBidResponseVideoCache=function(e,t){if(e.mediaType===n.VIDEO){var r=(0,i.deepAccess)(t,"ext.prebid.cache.vastXml")||{},o=r.cacheId,a=r.url;if(!o||!a){var s=(0,i.deepAccess)(t,"ext.prebid.targeting")||{},d=s.hb_uuid,c=s.hb_cache_host,u=s.hb_cache_path;d&&c&&u&&(o=d,a="https://".concat(c).concat(u,"?uuid=").concat(d))}o&&a&&Object.assign(e,{videoCacheKey:o,vastUrl:a})}};var n=r(6613),i=r(1779)},2039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertTypes=function(e,t){return Object.keys(e).forEach((function(r){var i,o;t[r]&&((0,n.isFn)(e[r])?t[r]=e[r](t[r]):t[r]=(i=e[r],o=t[r],"string"===i?o&&o.toString():"number"===i?Number(o):o),isNaN(t[r])&&delete t.key)})),t};var n=r(1779)},2630:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.UID1_EIDS=void 0;var i=n(r(8212));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s={tdid:{source:"adserver.org",atype:1,getValue:function(e){return e.id?e.id:e},getUidExt:function(e){return a(a({},{rtiPartner:"TDID"}),e.ext)}}};t.UID1_EIDS=s},3712:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UID2_EIDS=void 0;t.UID2_EIDS={uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}}}},4002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryAppendQueryString=function(e,t,r){if(r)return e+t+"="+encodeURIComponent(r)+"&";return e}},7593:(e,t,r)=>{"use strict";var n=r(4293)(r(8832)),i=r(8851),o=r(6522),a=r(1681);function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c="allowActivities",u="".concat(c," config"),l=1;function p(e){var t=new Map,r=new Map,i=new Map;function a(e){return Object.fromEntries(Object.entries(e).filter((function(e){return!(0,n.default)(e,1)[0].startsWith("_")})))}o.config.getConfig(c,(function(o){i.clear(),Array.from(t.values()).flatMap((function(e){return Array.from(e.values())})).forEach((function(e){return e()})),t.clear(),Array.from(r.values()).forEach((function(e){return e()})),r.clear(),Object.entries(o[c]).forEach((function(o){var d=(0,n.default)(o,2),c=d[0],p=d[1];!1===p.default&&function(t){r.has(t)||r.set(t,e(t,u,(function(){return{allow:!1,reason:"activity denied by default"}}),Number.POSITIVE_INFINITY))}(c);var f=new Map;i.set(c,f),(p.rules||[]).forEach((function(e){var t=null==e.priority?l:e.priority;f.has(t)||f.set(t,[]),f.get(t).push(e)})),Array.from(f.keys()).forEach((function(r){return function(r,n){t.has(r)||t.set(r,new Map);var o=t.get(r);o.has(n)||o.set(n,e(r,u,(function(e){var t,o=s(i.get(r).get(n));try{for(o.s();!(t=o.n()).done;){var d=t.value;if(!d.condition||d.condition(a(e)))return{allow:d.allow,reason:d}}}catch(e){o.e(e)}finally{o.f()}}),n))}(c,r)}))}))}))}p(a.registerActivityControl),(0,i.registerModule)("allowActivities")},5001:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(4319)),o=n(r(147)),a=r(8851),s=r(1779),d=r(9723),c=r(6522),u=r(43),l=r(6613),p=r(9635),f=r(4785),g=r(9084),v=r(6059),m=r(8619),b=r(4239),h=r(5039),y=r(8972),I=r(7243),E=r(2039),_=r(8884),A="appnexus",O="https://ib.adnxs.com/ut/v3/prebid",S="https://ib.adnxs-simple.com/ut/v3/prebid",T=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],w=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay"],C=["age","externalUid","external_uid","segments","gender","dnt","language"],x=["geo","device_id"],P=["enabled","dongle","member_id","debug_timeout"],D={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},R={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},j={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},k="<script",N=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,B="trk.js",U=(0,g.getStorageManager)({bidderCode:A}),M={code:A,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"uol",gvlid:32},{code:"adzymic",gvlid:32}],supportedMediaTypes:[l.BANNER,l.VIDEO,l.NATIVE],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var r,n,i,a,d,u=(e=(0,b.convertOrtbRequestToProprietaryNative)(e)).map(q),l=(0,p.find)(e,L),f={};!0===c.config.getConfig("coppa")&&(f={coppa:!0}),l&&Object.keys(l.params.user).filter((function(e){return(0,p.includes)(C,e)})).forEach((function(e){var t=(0,I.convertCamelToUnderscore)(e);if("segments"===e&&(0,s.isArray)(l.params.user[e])){var r=[];l.params.user[e].forEach((function(e){(0,s.isNumber)(e)?r.push({id:e}):(0,s.isPlainObject)(e)&&r.push(e)})),f[t]=r}else"segments"!==e&&(f[t]=l.params.user[e])}));var g,v=(0,p.find)(e,G);v&&v.params&&v.params.app&&(g={},Object.keys(v.params.app).filter((function(e){return(0,p.includes)(x,e)})).forEach((function(e){return g[e]=v.params.app[e]})));var h,A=(0,p.find)(e,z);A&&A.params&&v.params.app&&v.params.app.id&&(h={appid:A.params.app.id});var T={},w={},R=U.getCookie("apn_prebid_debug")||null;if(R)try{T=JSON.parse(R)}catch(e){(0,s.logError)("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(D).forEach((function(e){var t=(0,s.getParameterByName)(e);(0,s.isStr)(t)&&""!==t&&(T[D[e]]=t,T.enabled=!0)})),T=(0,E.convertTypes)({member_id:"number",debug_timeout:"number"},T);var j=(0,p.find)(e,W);j&&j.debug&&(T=j.debug)}T&&T.enabled&&Object.keys(T).filter((function(e){return(0,p.includes)(P,e)})).forEach((function(e){w[e]=T[e]}));var k=(0,p.find)(e,F),N=k?parseInt(k.params.member,10):0,B=e[0].schain,M=(0,p.find)(e,Y),V={tags:(0,o.default)(u),user:f,sdk:{source:"pbjs",version:"8.34.0"},schain:B};M&&(V.iab_support={omidpn:"Appnexus",omidpv:"8.34.0"}),N>0&&(V.member_id=N),v&&(V.device=g),A&&(V.app=h);var J=(0,s.deepClone)(t&&t.ortb2),Q=(0,s.deepClone)(c.config.getConfig("appnexusAuctionKeywords"))||{},X=(0,y.getANKeywordParam)(J,Q);if(X.length>0&&(V.keywords=X),c.config.getConfig("adpod.brandCategoryExclusion")&&(V.brand_category_uniqueness=!0),w.enabled&&(V.debug=w,(0,s.logInfo)("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(w,null,4))),t&&t.gdprConsent&&(V.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var $=t.gdprConsent.addtlConsent,Z=$.substring($.indexOf("~")+1);V.gdpr_consent.addtl_consent=Z.split(".").map((function(e){return parseInt(e,10)}))}if(t&&t.uspConsent&&(V.us_privacy=t.uspConsent),null!=t&&t.gppConsent?V.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!==(r=t.ortb2)&&void 0!==r&&null!==(n=r.regs)&&void 0!==n&&n.gpp&&(V.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var ee={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")},te=t.refererInfo.canonicalUrl;(0,s.isStr)(te)&&""!==te&&(ee.rd_can=te),V.referrer_detection=ee}if((0,p.find)(e,H)&&e.filter(H).forEach((function(e){var t=function(e,t){var r=t.mediaTypes.video,n=r.durationRangeSec,i=r.requireExactDuration,a=function(e){var t=e.adPodDurationSec,r=e.durationRangeSec,n=e.requireExactDuration,i=Math.min.apply(Math,(0,o.default)(r)),a=Math.floor(t/i);return n?Math.max(a,r.length):a}(t.mediaTypes.video),s=Math.max.apply(Math,(0,o.default)(n)),d=e.filter((function(e){return e.uuid===t.bidId})),c=I.fill.apply(void 0,(0,o.default)(d).concat([a]));if(i){var u=Math.ceil(a/n.length),l=(0,_.chunk)(c,u);n.forEach((function(e,t){l[t].map((function(t){K(t,"minduration",e),K(t,"maxduration",e)}))}))}else c.map((function(e){return K(e,"maxduration",s)}));return c}(u,e),r=V.tags.filter((function(t){return t.uuid!==e.bidId}));V.tags=[].concat((0,o.default)(r),(0,o.default)(t))})),e[0].userId){var re=[];e[0].userIdAsEids.forEach((function(e){!e||!e.uids||e.uids.length<1||e.uids.forEach((function(t){var r={source:e.source,id:t.id};"adserver.org"==e.source?r.rti_partner="TDID":"uidapi.com"==e.source&&(r.rti_partner="UID2"),re.push(r)}))})),re.length&&(V.eids=re)}if(null!=t&&null!==(i=t.ortb2)&&void 0!==i&&null!==(a=i.regs)&&void 0!==a&&null!==(d=a.ext)&&void 0!==d&&d.dsa){var ne=t.ortb2.regs.ext.dsa,ie={};if(["dsarequired","pubrender","datatopub"].forEach((function(e){(0,s.isNumber)(ne[e])&&(ie[e]=ne[e])})),(0,s.isArray)(ne.transparency)&&ne.transparency.every((function(e){return(0,s.isPlainObject)(e)}))){var oe=[];ne.transparency.forEach((function(e){(0,s.isStr)(e.domain)&&""!=e.domain&&(0,s.isArray)(e.dsaparams)&&e.dsaparams.every((function(e){return(0,s.isNumber)(e)}))&&oe.push(e)})),oe.length>0&&(ie.transparency=oe)}(0,s.isEmpty)(ie)||(V.dsa=ie)}u[0].publisher_id&&(V.publisher_id=u[0].publisher_id);var ae=function(e,t){var r=[],n={withCredentials:!0},i=O;(0,m.hasPurpose1Consent)(null==t?void 0:t.gdprConsent)||(i=S);"TRUE"!==(0,s.getParameterByName)("apn_test").toUpperCase()&&!0!==c.config.getConfig("apn_test")||(n.customHeaders={"X-Is-Test":1});if(e.tags.length>15){var o=(0,s.deepClone)(e);(0,_.chunk)(e.tags,15).forEach((function(e){o.tags=e;var a=JSON.stringify(o);r.push({method:"POST",url:i,data:a,bidderRequest:t,options:n})}))}else{var a=JSON.stringify(e);r={method:"POST",url:i,data:a,bidderRequest:t,options:n}}return r}(V,t);return ae},interpretResponse:function(e,t){var r=this,n=t.bidderRequest;e=e.body;var i=[];if(!e||e.error){var o="in response for ".concat(n.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),(0,s.logError)(o),i}if(e.tags&&e.tags.forEach((function(e){var t,o=(t=e)&&t.ads&&t.ads.length&&(0,p.find)(t.ads,(function(e){return e.rtb}));if(o&&((!0===v.bidderSettings.get(n.bidderCode,"allowZeroCpmBids")?o.cpm>=0:o.cpm>0)&&(0,p.includes)(r.supportedMediaTypes,o.ad_type))){var a=function(e,t,r){var n=(0,s.getBidRequest)(e.uuid,[r]),i=(0,s.getUniqueIdentifierStr)(),o={adId:i,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:n.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};t.adomain&&(o.meta=Object.assign({},o.meta,{advertiserDomains:[t.adomain]}));t.advertiser_id&&(o.meta=Object.assign({},o.meta,{advertiserId:t.advertiser_id}));t.dsa&&(o.meta=Object.assign({},o.meta,{dsa:t.dsa}));function a(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}t.buyer_member_id&&(o.meta=Object.assign({},o.meta,{dchain:a(t)}));t.brand_id&&(o.meta=Object.assign({},o.meta,{brandId:t.brand_id}));if(t.rtb.video){switch(Object.assign(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),(0,s.deepAccess)(n,"mediaTypes.video.context")){case l.ADPOD:var c=h.APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]?h.APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]:null;o.meta=Object.assign({},o.meta,{primaryCatId:c});var u=t.deal_priority;o.video={context:l.ADPOD,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:u},o.vastUrl=t.rtb.video.asset_url;break;case f.OUTSTREAM:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){var g=(0,p.find)(r.bids,(function(t){return t.bidId===e.uuid})),v=(0,s.deepAccess)(g,"mediaTypes.video.renderer.options");v||(v=(0,s.deepAccess)(g,"renderer.options")),o.renderer=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=d.Renderer.install({id:t.renderer_id,url:t.renderer_url,config:r,loaded:!1,adUnitCode:e});try{n.setRender(J)}catch(e){(0,s.logWarn)("Prebid Error calling setRender on renderer",e)}return n.setEventHandlers({impression:function(){return(0,s.logMessage)("AppNexus outstream video impression event")},loaded:function(){return(0,s.logMessage)("AppNexus outstream video loaded event")},ended:function(){(0,s.logMessage)("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),n}(o.adUnitCode,t,v)}break;case f.INSTREAM:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}}else if(t.rtb[l.NATIVE]){var m,b=t.rtb[l.NATIVE];if(function(e){if(!e||""===e)return!1;var t=e.match(N),r=null!=t&&t.length>=1,n=e.match(B),i=null!=n&&n.length>=1;return e.startsWith(k)&&i&&r}(t.viewability.config)){var y="pbjs_adid="+i+";pbjs_auc="+n.adUnitCode;m=t.viewability.config.replace("dom_id=%native_dom_id%",y)}var I=b.javascript_trackers;null==I?I=m:(0,s.isStr)(I)?I=[I,m]:I.push(m),o[l.NATIVE]={title:b.title,body:b.desc,body2:b.desc2,cta:b.ctatext,rating:b.rating,sponsoredBy:b.sponsored,privacyLink:b.privacy_link,address:b.address,downloads:b.downloads,likes:b.likes,phone:b.phone,price:b.price,salePrice:b.saleprice,clickUrl:b.link.url,displayUrl:b.displayurl,clickTrackers:b.link.click_trackers,impressionTrackers:b.impression_trackers,video:b.video,javascriptTrackers:I},b.main_img&&(o.native.image={url:b.main_img.url,height:b.main_img.height,width:b.main_img.width}),b.icon&&(o.native.icon={url:b.icon.url,height:b.icon.height,width:b.icon.width})}else{Object.assign(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var E=0;E<t.rtb.trackers[0].impression_urls.length;E++){var _=t.rtb.trackers[0].impression_urls[E],A=(0,s.createTrackPixelHtml)(_);o.ad+=A}}catch(e){(0,s.logError)("Error appending tracking pixel",e)}}return o}(e,o,n);a.mediaType=function(e){var t=e.ad_type;return t===l.VIDEO?l.VIDEO:t===l.NATIVE?l.NATIVE:l.BANNER}(o),i.push(a)}})),e.debug&&e.debug.debug_info){var a="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;a=a.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),(0,s.logMessage)("https://console.appnexus.com/docs/understanding-the-debug-auction"),(0,s.logMessage)(a)}return i},getUserSyncs:function(e,t,r,n,i){if(e.iframeEnabled&&(0,m.hasPurpose1Consent)(r))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(e,t,r,n){var i=y.transformBidderParamKeywords;if(!0===t){var o=null,a=c.config.getConfig("s2sConfig");(0,s.isPlainObject)(a)?o=(0,s.deepAccess)(a,"endpoint.p1Consent"):(0,s.isArray)(a)&&a.forEach((function(e){(0,p.includes)(e.bidders,r.bids[0].bidder)&&(o=(0,s.deepAccess)(e,"endpoint.p1Consent"))})),o&&o.match("/openrtb2/prebid")&&(i=X)}return e=(0,E.convertTypes)({member:"string",invCode:"string",placementId:"number",keywords:i,publisherId:"number"},e),t&&(Object.keys(e).forEach((function(t){var r=(0,I.convertCamelToUnderscore)(t);r!==t&&(e[r]=e[t],delete e[t])})),e.use_pmt_rule="boolean"==typeof e.use_payment_rule&&e.use_payment_rule,e.use_payment_rule&&delete e.use_payment_rule),e}};function q(e){var t,r={};Object.keys(e.params).forEach((function(t){var r=(0,I.convertCamelToUnderscore)(t);r!==t&&(e.params[r]=e.params[t],delete e.params[t])})),r.sizes=V(e.sizes),r.primary_size=r.sizes[0],r.ad_types=[],r.uuid=e.bidId,e.params.placement_id?r.id=parseInt(e.params.placement_id,10):r.code=e.params.inv_code,r.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,r.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,r.prebid=!0,r.disable_psa=!0;var n=function(e){if(!(0,s.isFn)(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});if((0,s.isPlainObject)(t)&&!isNaN(t.floor)&&"USD"===t.currency)return t.floor;return null}(e);if(n&&(r.reserve=n),e.params.position)r.position={above:1,below:2}[e.params.position]||0;else{var i=(0,s.deepAccess)(e,"mediaTypes.banner.pos")||(0,s.deepAccess)(e,"mediaTypes.video.pos");0!==i&&1!==i&&3!==i||(r.position=3===i?2:i)}e.params.traffic_source_code&&(r.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(r.private_sizes=V(e.params.private_sizes)),e.params.supply_type&&(r.supply_type=e.params.supply_type),e.params.pub_click&&(r.pubclick=e.params.pub_click),e.params.ext_inv_code&&(r.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(r.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(r.external_imp_id=e.params.external_imp_id);var o=(0,y.getANKewyordParamFromMaps)((0,y.convertKeywordStringToANMap)((0,s.deepAccess)(e,"ortb2Imp.ext.data.keywords")),null===(t=e.params)||void 0===t?void 0:t.keywords);o.length>0&&(r.keywords=o);var a,d,c=(0,s.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,s.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");if(c&&(r.gpid=c),(e.mediaType===l.NATIVE||(0,s.deepAccess)(e,"mediaTypes.".concat(l.NATIVE)))&&(r.ad_types.push(l.NATIVE),0===r.sizes.length&&(r.sizes=V([1,1])),e.nativeParams)){var u=(a=e.nativeParams,d={},Object.keys(a).forEach((function(e){var t=j[e]&&j[e].serverName||j[e]||e,r=j[e]&&j[e].requiredParams;if(d[t]=Object.assign({},r,a[e]),(t===j.image.serverName||t===j.icon.serverName)&&d[t].sizes){var n=d[t].sizes;((0,s.isArrayOfNums)(n)||(0,s.isArray)(n)&&n.length>0&&n.every((function(e){return(0,s.isArrayOfNums)(e)})))&&(d[t].sizes=V(d[t].sizes))}t===j.privacyLink&&(d.privacy_supported=!0)})),d);r[l.NATIVE]={layouts:[u]}}var f=(0,s.deepAccess)(e,"mediaTypes.".concat(l.VIDEO)),g=(0,s.deepAccess)(e,"mediaTypes.video.context");return r.hb_source=f&&"adpod"===g?7:1,(e.mediaType===l.VIDEO||f)&&r.ad_types.push(l.VIDEO),(e.mediaType===l.VIDEO||f&&"outstream"!==g)&&(r.require_asset_url=!0),e.params.video&&(r.video={},Object.keys(e.params.video).filter((function(e){return(0,p.includes)(T,e)})).forEach((function(t){switch(t){case"context":case"playback_method":var n=e.params.video[t];n=(0,s.isArray)(n)?n[0]:n,r.video[t]=R[t][n];break;case"frameworks":break;default:r.video[t]=e.params.video[t]}})),e.params.video.frameworks&&(0,s.isArray)(e.params.video.frameworks)&&(r.video_frameworks=e.params.video.frameworks)),f&&(r.video=r.video||{},Object.keys(f).filter((function(e){return(0,p.includes)(w,e)})).forEach((function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof r.video[e]&&(r.video[e]=f[e]);break;case"skip":"boolean"!=typeof r.video.skippable&&(r.video.skippable=1===f[e]);break;case"skipafter":"number"!=typeof r.video.skipoffset&&(r.video.skippoffset=f[e]);break;case"playbackmethod":if("number"!=typeof r.video.playback_method){var t=f[e];(t=(0,s.isArray)(t)?t[0]:t)>=1&&t<=4&&(r.video.playback_method=t)}break;case"api":if(!r.video_frameworks&&(0,s.isArray)(f[e])){var n=f[e].map((function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((function(e){return e}));r.video_frameworks=n}break;case"startdelay":case"placement":var i="context";if("number"!=typeof r.video[i]){var o=f.placement,a=f.startdelay,d=function(e){if(!e)return;if(2===e)return"in-banner";if(e>2)return"outstream"}(o)||function(e){if(!e)return;if(0===e)return"pre_roll";if(-1===e)return"mid_roll";if(-2===e)return"post_roll"}(a);r.video[i]=R[i][d]}}}))),e.renderer&&(r.video=Object.assign({},r.video,{custom_renderer_present:!0})),e.params.frameworks&&(0,s.isArray)(e.params.frameworks)&&(r.banner_frameworks=e.params.frameworks),(0,s.deepAccess)(e,"mediaTypes.".concat(l.BANNER))&&r.ad_types.push(l.BANNER),0===r.ad_types.length&&delete r.ad_types,r}function V(e){var t=[],r={};if((0,s.isArray)(e)&&2===e.length&&!(0,s.isArray)(e[0]))r.width=parseInt(e[0],10),r.height=parseInt(e[1],10),t.push(r);else if("object"===(0,i.default)(e))for(var n=0;n<e.length;n++){var o=e[n];(r={}).width=parseInt(o[0],10),r.height=parseInt(o[1],10),t.push(r)}return t}function L(e){return!!e.params.user}function F(e){return!!parseInt(e.params.member,10)}function G(e){if(e.params)return!!e.params.app}function z(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function W(e){return!!e.debug}function H(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===l.ADPOD}function Y(e){var t=!1,r=e.params,n=e.params.video;return r.frameworks&&(0,s.isArray)(r.frameworks)&&(t=(0,p.includes)(e.params.frameworks,6)),!t&&n&&n.frameworks&&(0,s.isArray)(n.frameworks)&&(t=(0,p.includes)(e.params.video.frameworks,6)),t}function K(e,t,r){(0,s.isEmpty)(e.video)&&(e.video={}),e.video[t]=r}function J(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push((function(){((null==t?void 0:t.defaultView)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},Q.bind(null,e))}))}function Q(e,t,r){e.renderer.handleVideoEvent({id:t,eventName:r})}function X(e){var t="";return Object.keys(e).forEach((function(r){(0,s.isStr)(e[r])?""!==e[r]?t+="".concat(r,"=").concat(e[r],","):t+="".concat(r,","):(0,s.isArray)(e[r])&&(""===e[r][0]?t+="".concat(r,","):e[r].forEach((function(e){t+="".concat(r,"=").concat(e,",")})))})),t=t.substring(0,t.length-1)}(0,u.registerBidder)(M),(0,a.registerModule)("appnexusBidAdapter")},4748:(e,t,r)=>{"use strict";var n=r(4293);var i,o,a,s,d,c,u=n(r(4319)),l=r(8851),p=r(1779),f=r(6522),g=r(1442),v=r(9635),m=r(1380),b=r(9502),h=r(6978),y=r(1703),I="iab",E=1e4,_=2;var A=!1,O={iab:function(e){var t=e.onSuccess,r=e.onError,n=e.onEvent;var i=(0,y.cmpClient)({apiName:"__tcfapi",apiVersion:_,apiArgs:["command","version","callback","parameter"]});if(!i)return r("TCF2 CMP not found.");i.isDirect?(0,p.logInfo)("Detected CMP API is directly accessible, calling it now..."):(0,p.logInfo)("Detected CMP is outside the current iframe where Prebid.js is located, calling it now...");i({command:"addEventListener",callback:function(e,i){(0,p.logInfo)("Received a response from CMP",e),i?(n(e),!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||w(e,{onSuccess:t,onError:r})):r("CMP unable to register callback function.  Please check CMP setup.")}})},static:function(e){var t=e.onSuccess,r=e.onError;w(s,{onSuccess:t,onError:r})}};function S(e){var t,r,n=!1,a=null,s=!1;function c(e){null!=a&&clearTimeout(a),n||null==e||(0===e?t():a=setTimeout(t,e))}function u(t,r,i){if(c(null),n=!0,g.gdprDataHandler.setConsentData(t),"function"==typeof e){for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];e.apply(void 0,[r,i].concat(a))}}if((0,v.includes)(Object.keys(O),i)){var l={onSuccess:function(e){return u(e,!1)},onError:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];u.apply(void 0,[null,!0,e].concat(r))},onEvent:function(e){r=e,s||(s=!0,null!=d&&c(d))}};t=function(){var e=function(e){u(e,!1,"".concat(s?"Timeout waiting for user action on CMP":"CMP did not load",", continuing auction..."))};w(r,{onSuccess:e,onError:function(){return e(C(void 0))}})},O[i](l),null!=d&&s||c(o)}else u(null,!1,"CMP framework (".concat(i,") is not a supported framework.  Aborting consentManagement module and resuming auction."))}var T=(0,m.timedAuctionHook)("gdpr",(function(e,t){var r;r=function(r,n){if(n){var i=p.logWarn;r&&(i=p.logError,n="".concat(n," Canceling auction as per consentManagement config."));for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];i.apply(void 0,[n].concat(a))}r?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():(0,p.logError)("Error executing bidsBackHandler")):e.call(this,t)},c?((0,p.logInfo)("User consent information already known.  Pulling internally stored information..."),r(!1)):S(r)}));function w(e,t){var r,n,i=t.onSuccess,o=t.onError;r=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:a,n=e&&e.tcString,"boolean"==typeof r&&(!0!==r||n&&(0,p.isStr)(n))?i(C(e)):o("CMP returned unexpected value during lookup process.",e)}function C(e){return c={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:a},e&&e.addtlConsent&&(0,p.isStr)(e.addtlConsent)&&(c.addtlConsent=e.addtlConsent),c.apiVersion=_,c}function x(e){if((e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))&&"object"===(0,u.default)(e)){var t;if((0,p.isStr)(e.cmpApi)?i=e.cmpApi:(i=I,(0,p.logInfo)("consentManagement config did not specify cmp.  Using system default setting (".concat(I,")."))),(0,p.isNumber)(e.timeout)?o=e.timeout:(o=E,(0,p.logInfo)("consentManagement config did not specify timeout.  Using system default setting (".concat(E,")."))),d=(0,p.isNumber)(e.actionTimeout)?e.actionTimeout:null,a=!0===e.defaultGdprScope,(0,p.logInfo)("consentManagement module has been activated..."),"static"===i)if((0,p.isPlainObject)(e.consentData))s=e.consentData,null!=(null===(t=s)||void 0===t?void 0:t.getTCData)&&(s=s.getTCData),o=0;else(0,p.logError)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.");A||(0,l.getGlobal)().requestBids.before(T,50),A=!0,g.gdprDataHandler.enable(),S()}else(0,p.logWarn)("consentManagement (gdpr) config not defined, exiting consent manager")}function P(e,t){return e(t.then((function(e){var t=g.gdprDataHandler.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&(0,p.deepSetValue)(e,"regs.ext.gdpr",t.gdprApplies?1:0),(0,p.deepSetValue)(e,"user.ext.consent",t.consentString)),e})))}function D(e,t){var r,n=null===(r=t.gdprConsent)||void 0===r?void 0:r.addtlConsent;n&&"string"==typeof n&&(0,p.deepSetValue)(e,"user.ext.ConsentedProvidersSettings.consented_providers",n)}f.config.getConfig("consentManagement",(function(e){return x(e.consentManagement)})),h.enrichFPD.before(P),(0,b.registerOrtbProcessor)({type:b.REQUEST,name:"gdprAddtlConsent",fn:D}),(0,l.registerModule)("consentManagement")},9763:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var __webpack_unused_export__,_interopRequireDefault=__webpack_require__(4293);__webpack_unused_export__={value:!0},__webpack_unused_export__=__webpack_unused_export__=__webpack_unused_export__=void 0,__webpack_unused_export__=canFastBid,__webpack_unused_export__=getFastBidUrl,__webpack_unused_export__=__webpack_unused_export__=void 0,__webpack_unused_export__=tryGetCriteoFastBid;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(147)),_defineProperty2=_interopRequireDefault(__webpack_require__(8212)),_prebidGlobal=__webpack_require__(8851),_utils=__webpack_require__(1779),_adloader=__webpack_require__(1794),_bidderFactory=__webpack_require__(43),_config=__webpack_require__(6522),_mediaTypes=__webpack_require__(6613),_storageManager=__webpack_require__(9084),_refererDetection=__webpack_require__(4080),_gpdr=__webpack_require__(8619),_Renderer=__webpack_require__(9723),_video=__webpack_require__(4785),_ajax=__webpack_require__(6150),_verify=__webpack_require__(9882);function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,_defineProperty2.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var GVLID=91,ADAPTER_VERSION=36;__webpack_unused_export__=ADAPTER_VERSION;var BIDDER_CODE="criteo",CDB_ENDPOINT="https://bidder.criteo.com/cdb",PROFILE_ID_INLINE=207,FLEDGE_SELLER_DOMAIN="https://grid-mercury.criteo.com",FLEDGE_SELLER_TIMEOUT=500,FLEDGE_DECISION_LOGIC_URL="https://grid-mercury.criteo.com/fledge/decision",PROFILE_ID_PUBLISHERTAG=185;__webpack_unused_export__=PROFILE_ID_PUBLISHERTAG;var storage=(0,_storageManager.getStorageManager)({bidderCode:BIDDER_CODE});__webpack_unused_export__=storage;var LOG_PREFIX="Criteo: ",FAST_BID_VERSION_PLACEHOLDER="%FAST_BID_VERSION%",FAST_BID_VERSION_CURRENT=144;__webpack_unused_export__=FAST_BID_VERSION_CURRENT;var FAST_BID_VERSION_LATEST="latest",FAST_BID_VERSION_NONE="none",PUBLISHER_TAG_URL_TEMPLATE="https://static.criteo.net/js/ld/publishertag.prebid"+FAST_BID_VERSION_PLACEHOLDER+".js",PUBLISHER_TAG_OUTSTREAM_SRC="https://static.criteo.net/js/ld/publishertag.renderer.js",FAST_BID_PUBKEY_E=65537,FAST_BID_PUBKEY_N="ztQYwCE5BU7T9CDM5he6rKoabstXRmkzx54zFPZkWbK530dwtLBDeaWBMxHBUT55CYyboR/EZ4efghPi3CoNGfGWezpjko9P6p2EwGArtHEeS4slhu/SpSIFMjG6fdrpRoNuIAMhq1Z+Pr/+HOd1pThFKeGFr2/NhtAg+TXAzaU=",OPTOUT_COOKIE_NAME="cto_optout",BUNDLE_COOKIE_NAME="cto_bundle",GUID_RETENTION_TIME_HOUR=9360,OPTOUT_RETENTION_TIME_HOUR=43200,spec={code:BIDDER_CODE,gvlid:GVLID,supportedMediaTypes:[_mediaTypes.BANNER,_mediaTypes.VIDEO,_mediaTypes.NATIVE],getUserSyncs:function(e,t,r,n){if(canFastBid(_config.config.getConfig("criteo.fastBidVersion")))return[];var i=(0,_refererDetection.getRefererInfo)(),o="criteoPrebidAdapter";if(e.iframeEnabled&&(0,_gpdr.hasPurpose1Consent)(r)){var a=[];a.push("origin=".concat(o)),a.push("topUrl=".concat(i.domain)),r&&(r.gdprApplies&&a.push("gdpr=".concat(1==r.gdprApplies?1:0)),r.consentString&&a.push("gdpr_consent=".concat(r.consentString))),n&&a.push("us_privacy=".concat(n));var s=Math.random().toString(),d={bundle:readFromAllStorages(BUNDLE_COOKIE_NAME),cw:storage.cookiesAreEnabled(),lsw:storage.localStorageIsEnabled(),optoutCookie:readFromAllStorages(OPTOUT_COOKIE_NAME),origin:o,requestId:s,tld:i.domain,topUrl:i.domain,version:"8.34.0".replace(/\./g,"_")};window.addEventListener("message",(function e(t){if(t.data&&"https://gum.criteo.com"==t.origin&&t.data.requestId===s){this.removeEventListener("message",e),t.stopImmediatePropagation();var r=t.data;r.optout?(deleteFromAllStorages(BUNDLE_COOKIE_NAME),saveOnAllStorages(OPTOUT_COOKIE_NAME,!0,OPTOUT_RETENTION_TIME_HOUR)):r.bundle&&saveOnAllStorages(BUNDLE_COOKIE_NAME,r.bundle,GUID_RETENTION_TIME_HOUR)}}),!0);var c=JSON.stringify(d).replace(/"/g,"%22");return[{type:"iframe",url:"https://gum.criteo.com/syncframe?".concat(a.join("&"),"#").concat(c)}]}return[]},isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId)&&!(hasVideoMediaType(e)&&!hasValidVideoMediaType(e))},buildRequests:function(e,t){var r,n,i,o,a=t.ortb2||{};Object.assign(t,{publisherExt:null===(r=a.site)||void 0===r?void 0:r.ext,userExt:null===(n=a.user)||void 0===n?void 0:n.ext,ceh:_config.config.getConfig("criteo.ceh"),coppa:_config.config.getConfig("coppa")});var s=_config.config.getConfig("criteo.fastBidVersion"),d=canFastBid(s);if(!publisherTagAvailable()&&d){window.Criteo=window.Criteo||{},window.Criteo.usePrebidEvents=!1;var c=getFastBidUrl(s);setTimeout((function(){(0,_adloader.loadExternalScript)(c,BIDDER_CODE)}),t.timeout)}if(publisherTagAvailable()){var u=new Criteo.PubTag.Adapters.Prebid(PROFILE_ID_PUBLISHERTAG,ADAPTER_VERSION,e,t,"8.34.0",{createOutstreamVideoRenderer});i=u.buildCdbUrl(),o=u.buildCdbRequest()}else{var l=buildContext(e,t);i=buildCdbUrl(l),o=buildCdbRequest(l,e,t)}if(o)return{method:"POST",url:i,data:o,bidRequests:e}},interpretResponse:function(e,t){var r,n=e.body||e;if(publisherTagAvailable()){var i=Criteo.PubTag.Adapters.Prebid.GetAdapter(t);if(i)return i.interpretResponse(n,t)}var o=[],a=[];if(n&&n.slots&&(0,_utils.isArray)(n.slots)&&n.slots.forEach((function(r){var i=getAssociatedBidRequest(t.bidRequests,r);if(i){var a,s,d,c,u,l,p=i.bidId,f={requestId:p,cpm:r.cpm,currency:r.currency,netRevenue:!0,ttl:r.ttl||60,creativeId:r.creativecode,width:r.width,height:r.height,dealId:r.deal};if(null!==(a=n.ext)&&void 0!==a&&null!==(s=a.paf)&&void 0!==s&&s.transmission&&null!==(d=r.ext)&&void 0!==d&&null!==(c=d.paf)&&void 0!==c&&c.content_id){var g={content_id:r.ext.paf.content_id,transmission:e.ext.paf.transmission};f.meta=Object.assign({},f.meta,{paf:g})}if(r.adomain&&(f.meta=Object.assign({},f.meta,{advertiserDomains:[r.adomain].flat()})),null!==(u=r.ext)&&void 0!==u&&null!==(l=u.meta)&&void 0!==l&&l.networkName&&(f.meta=Object.assign({},f.meta,{networkName:r.ext.meta.networkName})),r.native)i.params.nativeCallback?f.ad=createNativeAd(p,r.native,i.params.nativeCallback):(f.native=createPrebidNativeAd(r.native),f.mediaType=_mediaTypes.NATIVE);else if(r.video){f.vastUrl=r.displayurl,f.mediaType=_mediaTypes.VIDEO,(0,_utils.deepAccess)(i,"mediaTypes.video.context")===_video.OUTSTREAM&&(f.renderer=createOutstreamVideoRenderer(r))}else f.ad=r.creative;o.push(f)}})),(0,_utils.isArray)(null===(r=n.ext)||void 0===r?void 0:r.igbid)){var s=n.ext.seller||FLEDGE_SELLER_DOMAIN,d=n.ext.sellerTimeout||FLEDGE_SELLER_TIMEOUT;n.ext.igbid.forEach((function(e){var r,i={};e.igbuyer.forEach((function(e){i[e.origin]=e.buyerdata}));var o=t.bidRequests.find((function(t){return t.bidId===e.impid})),c=o.bidId,u=n.ext.sellerSignals||{};if(!u.floor&&o.params.bidFloor&&(u.floor=o.params.bidFloor),!u.sellerCurrency&&o.params.bidFloorCur&&(u.sellerCurrency=o.params.bidFloorCur),void 0!==(null==n||null===(r=n.ext)||void 0===r?void 0:r.sellerSignalsPerImp)){var l=n.ext.sellerSignalsPerImp[c];void 0!==l&&(u=_objectSpread(_objectSpread({},u),l))}a.push({bidId:c,config:{seller:s,sellerSignals:u,sellerTimeout:d,perBuyerSignals:i,auctionSignals:{},decisionLogicUrl:FLEDGE_DECISION_LOGIC_URL,interestGroupBuyers:Object.keys(i)}})}))}return a.length?{bids:o,fledgeAuctionConfigs:a}:o},onTimeout:function(e){if(publisherTagAvailable()&&Array.isArray(e)){var t=[];e.forEach((function(e){-1===t.indexOf(e.auctionId)&&(t.push(e.auctionId),Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidTimeout())}))}},onBidWon:function(e){publisherTagAvailable()&&e&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidWon(e)},onSetTargeting:function(e){publisherTagAvailable()&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleSetTargeting(e)},onDataDeletionRequest:function(e){var t=readFromAllStorages(BUNDLE_COOKIE_NAME);t&&(deleteFromAllStorages(BUNDLE_COOKIE_NAME),(0,_ajax.ajax)("https://privacy.criteo.com/api/privacy/datadeletionrequest",null,JSON.stringify({publisherUserId:t}),{contentType:"application/json",method:"POST"}))}};function readFromAllStorages(e){var t=storage.getCookie(e),r=storage.getDataFromLocalStorage(e);return t||r||void 0}function saveOnAllStorages(e,t,r){var n=new Date;n.setTime(n.getTime()+60*r*60*1e3);var i="expires=".concat(n.toUTCString());storage.setCookie(e,t,i),storage.setDataInLocalStorage(e,t)}function deleteFromAllStorages(e){storage.setCookie(e,"",0),storage.removeDataFromLocalStorage(e)}function publisherTagAvailable(){return"undefined"!=typeof Criteo&&Criteo.PubTag&&Criteo.PubTag.Adapters&&Criteo.PubTag.Adapters.Prebid}function buildContext(e,t){var r,n="";t&&t.refererInfo&&(n=t.refererInfo.page);var i=(0,_utils.parseUrl)(null==t||null===(r=t.refererInfo)||void 0===r?void 0:r.topmostLocation).search,o={url:n,debug:"1"===i.pbt_debug,noLog:"1"===i.pbt_nolog,amp:!1};return e.forEach((function(e){"amp"===e.params.integrationMode&&(o.amp=!0)})),o}function buildCdbUrl(e){var t=CDB_ENDPOINT;t+="?profileId="+PROFILE_ID_INLINE,t+="&av="+String(ADAPTER_VERSION),t+="&wv="+encodeURIComponent("8.34.0"),t+="&cb="+String(Math.floor(99999999999*Math.random())),storage.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0",e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1");var r=readFromAllStorages(BUNDLE_COOKIE_NAME);return r&&(t+="&bundle=".concat(r)),readFromAllStorages(OPTOUT_COOKIE_NAME)&&(t+="&optout=1"),t}function checkNativeSendId(e){return!(e.nativeParams&&(e.nativeParams.image&&(!0!==e.nativeParams.image.sendId||!0===e.nativeParams.image.sendTargetingKeys)||e.nativeParams.icon&&(!0!==e.nativeParams.icon.sendId||!0===e.nativeParams.icon.sendTargetingKeys)||e.nativeParams.clickUrl&&(!0!==e.nativeParams.clickUrl.sendId||!0===e.nativeParams.clickUrl.sendTargetingKeys)||e.nativeParams.displayUrl&&(!0!==e.nativeParams.displayUrl.sendId||!0===e.nativeParams.displayUrl.sendTargetingKeys)||e.nativeParams.privacyLink&&(!0!==e.nativeParams.privacyLink.sendId||!0===e.nativeParams.privacyLink.sendTargetingKeys)||e.nativeParams.privacyIcon&&(!0!==e.nativeParams.privacyIcon.sendId||!0===e.nativeParams.privacyIcon.sendTargetingKeys)))}function buildCdbRequest(e,t,r){var n,i,o,a,s,d,c,u,l,p,f,g,v,m,b,h,y,I,E,_,A={id:(0,_utils.generateUUID)(),publisher:{url:e.url,ext:r.publisherExt},regs:{coppa:!0===r.coppa?1:!1===r.coppa?0:void 0,gpp:null===(n=r.ortb2)||void 0===n||null===(i=n.regs)||void 0===i?void 0:i.gpp,gpp_sid:null===(o=r.ortb2)||void 0===o||null===(a=o.regs)||void 0===a?void 0:a.gpp_sid},slots:t.map((function(e){var t,n,i,o;I||(I=e.userIdAsEids),h=e.params.networkId||h,y=e.schain||y;var a={slotid:e.bidId,impid:e.adUnitCode,transactionid:null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.tid};if(e.params.zoneId&&(a.zoneid=e.params.zoneId),(0,_utils.deepAccess)(e,"ortb2Imp.ext")&&(a.ext=e.ortb2Imp.ext),(0,_utils.deepAccess)(e,"ortb2Imp.rwdd")&&(a.rwdd=e.ortb2Imp.rwdd),e.params.ext&&(a.ext=Object.assign({},a.ext,e.params.ext)),null!==(i=e.nativeOrtbRequest)&&void 0!==i&&i.assets&&(a.ext=Object.assign({},a.ext,{assets:e.nativeOrtbRequest.assets})),e.params.publisherSubId&&(a.publishersubid=e.params.publisherSubId),(e.params.nativeCallback||hasNativeMediaType(e))&&(a.native=!0,checkNativeSendId(e)||(0,_utils.logWarn)(LOG_PREFIX+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)")),hasBannerMediaType(e)?a.sizes=parseSizes((0,_utils.deepAccess)(e,"mediaTypes.banner.sizes"),parseSize):a.sizes=[],hasVideoMediaType(e)){var s={context:e.mediaTypes.video.context,playersizes:parseSizes((0,_utils.deepAccess)(e,"mediaTypes.video.playerSize"),parseSize),mimes:e.mediaTypes.video.mimes,protocols:e.mediaTypes.video.protocols,maxduration:e.mediaTypes.video.maxduration,api:e.mediaTypes.video.api,skip:e.mediaTypes.video.skip,placement:e.mediaTypes.video.placement,minduration:e.mediaTypes.video.minduration,playbackmethod:e.mediaTypes.video.playbackmethod,startdelay:e.mediaTypes.video.startdelay,plcmt:e.mediaTypes.video.plcmt,w:e.mediaTypes.video.w,h:e.mediaTypes.video.h,linearity:e.mediaTypes.video.linearity,skipmin:e.mediaTypes.video.skipmin,skipafter:e.mediaTypes.video.skipafter,minbitrate:e.mediaTypes.video.minbitrate,maxbitrate:e.mediaTypes.video.maxbitrate,delivery:e.mediaTypes.video.delivery,pos:e.mediaTypes.video.pos,playbackend:e.mediaTypes.video.playbackend,adPodDurationSec:e.mediaTypes.video.adPodDurationSec,durationRangeSec:e.mediaTypes.video.durationRangeSec},d=e.params.video;void 0!==d&&(s.skip=s.skip||d.skip||0,s.placement=s.placement||d.placement,s.minduration=s.minduration||d.minduration,s.playbackmethod=s.playbackmethod||d.playbackmethod,s.startdelay=s.startdelay||d.startdelay||0),a.video=s}return enrichSlotWithFloors(a,e),!r.fledgeEnabled&&null!==(o=a.ext)&&void 0!==o&&o.ae&&delete a.ext.ae,a}))};(h&&(A.publisher.networkid=h),A.source={tid:null===(s=r.ortb2)||void 0===s||null===(d=s.source)||void 0===d?void 0:d.tid},y&&(A.source.ext={schain:y}),A.user=(null===(c=r.ortb2)||void 0===c?void 0:c.user)||{},A.site=(null===(u=r.ortb2)||void 0===u?void 0:u.site)||{},A.app=(null===(l=r.ortb2)||void 0===l?void 0:l.app)||{},A.device=(null===(p=r.ortb2)||void 0===p?void 0:p.device)||{},r&&r.ceh&&(A.user.ceh=r.ceh),r&&r.gdprConsent&&(A.gdprConsent={},void 0!==r.gdprConsent.gdprApplies&&(A.gdprConsent.gdprApplies=!!r.gdprConsent.gdprApplies),A.gdprConsent.version=r.gdprConsent.apiVersion,void 0!==r.gdprConsent.consentString&&(A.gdprConsent.consentData=r.gdprConsent.consentString)),r&&r.uspConsent&&(A.user.uspIab=r.uspConsent),r&&null!==(f=r.ortb2)&&void 0!==f&&null!==(g=f.device)&&void 0!==g&&g.sua)&&(A.user.ext=A.user.ext||{},A.user.ext.sua=(null===(E=r.ortb2)||void 0===E||null===(_=E.device)||void 0===_?void 0:_.sua)||{});return I&&(A.user.ext=A.user.ext||{},A.user.ext.eids=(0,_toConsumableArray2.default)(I)),r&&null!==(v=r.ortb2)&&void 0!==v&&v.bcat&&(A.bcat=r.ortb2.bcat),r&&null!==(m=r.ortb2)&&void 0!==m&&m.badv&&(A.badv=r.ortb2.badv),r&&null!==(b=r.ortb2)&&void 0!==b&&b.bapp&&(A.bapp=r.ortb2.bapp),A}function parseSizes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return null==e?[]:Array.isArray(e[0])?e.map((function(e){return t(e)})):[t(e)]}function parseSize(e){return e[0]+"x"+e[1]}function hasVideoMediaType(e){return void 0!==(0,_utils.deepAccess)(e,"mediaTypes.video")}function hasBannerMediaType(e){return void 0!==(0,_utils.deepAccess)(e,"mediaTypes.banner")}function hasNativeMediaType(e){return void 0!==(0,_utils.deepAccess)(e,"mediaTypes.native")}function hasValidVideoMediaType(e){var t=!0;return["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(r){void 0===(0,_utils.deepAccess)(e,"mediaTypes.video."+r)&&void 0===(0,_utils.deepAccess)(e,"params.video."+r)&&(t=!1,(0,_utils.logError)("Criteo Bid Adapter: mediaTypes.video."+r+" is required"))})),t}function createPrebidNativeAd(e){return{sendTargetingKeys:!1,title:e.products[0].title,body:e.products[0].description,sponsoredBy:e.advertiser.description,icon:e.advertiser.logo,image:e.products[0].image,clickUrl:e.products[0].click_url,privacyLink:e.privacy.optout_click_url,privacyIcon:e.privacy.optout_image_url,cta:e.products[0].call_to_action,price:e.products[0].price,impressionTrackers:e.impression_pixels.map((function(e){return e.url}))}}function createNativeAd(e,t,r){var n="criteo_prebid_native_slots";return window[n]=window[n]||{},window[n][e]={callback:r,payload:t},'\n<script type="text/javascript">\nfor (var i = 0; i < 10; ++i) {\n var slots = window.parent.'.concat(n,';\n  if(!slots){continue;}\n  var responseSlot = slots["').concat(e,'"];\n  responseSlot.callback(responseSlot.payload);\n  break;\n}\n<\/script>')}function pickAvailableGetFloorFunc(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{var t=parseFloat(e.params.bidFloor);return function(){return{currency:e.params.bidFloorCur,floor:t}}}catch(e){}}function enrichSlotWithFloors(e,t){try{var r={},n=pickAvailableGetFloorFunc(t);if(n){var i,o,a;if(null!==(i=t.mediaTypes)&&void 0!==i&&i.banner)r.banner={},parseSizes((0,_utils.deepAccess)(t,"mediaTypes.banner.sizes")).forEach((function(e){return r.banner[parseSize(e).toString()]=n.call(t,{size:e,mediaType:_mediaTypes.BANNER})}));if(null!==(o=t.mediaTypes)&&void 0!==o&&o.video)r.video={},parseSizes((0,_utils.deepAccess)(t,"mediaTypes.video.playerSize")).forEach((function(e){return r.video[parseSize(e).toString()]=n.call(t,{size:e,mediaType:_mediaTypes.VIDEO})}));null!==(a=t.mediaTypes)&&void 0!==a&&a.native&&(r.native={},r.native["*"]=n.call(t,{size:"*",mediaType:_mediaTypes.NATIVE})),Object.keys(r).length>0&&(e.ext||(e.ext={}),Object.assign(e.ext,{floors:r}))}}catch(e){(0,_utils.logError)("Could not parse floors from Prebid: "+e)}}function canFastBid(e){return e!==FAST_BID_VERSION_NONE}function getFastBidUrl(e){var t;if(e===FAST_BID_VERSION_LATEST)t="";else if(e){String(e).split(".")[0]<102&&(0,_utils.logWarn)("Specifying a Fastbid version which is not supporting version selection."),t="."+e}else t="."+FAST_BID_VERSION_CURRENT;return PUBLISHER_TAG_URL_TEMPLATE.replace(FAST_BID_VERSION_PLACEHOLDER,t)}function createOutstreamVideoRenderer(e){if(void 0!==e.ext.videoPlayerConfig&&void 0!==e.ext.videoPlayerType){var t=_Renderer.Renderer.install({url:PUBLISHER_TAG_OUTSTREAM_SRC,config:{documentResolver:function(e,t,r){return null!=r?r:t}}});return t.setRender((function(t,r){var n={slotid:e.impid,vastUrl:e.displayurl,vastXml:e.creative,documentContext:r},i=e.ext.videoPlayerConfig;window.CriteoOutStream[e.ext.videoPlayerType].play(n,i)})),t}}function getAssociatedBidRequest(e,t){var r,n=_createForOfIteratorHelper(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.adUnitCode===t.impid){var o,a;if(i.params.zoneId&&parseInt(i.params.zoneId)===t.zoneid)return i;if(t.native){if(null!==(a=i.mediaTypes)&&void 0!==a&&a.native||i.nativeParams)return i}else if(t.video){var s;if(null!==(s=i.mediaTypes)&&void 0!==s&&s.video)return i}else if(null!==(o=i.mediaTypes)&&void 0!==o&&o.banner||i.sizes)return i}}}catch(e){n.e(e)}finally{n.f()}}function tryGetCriteoFastBid(){try{var fastBidStorageKey="criteo_fast_bid",hashPrefix="// Hash: ",fastBidFromStorage=storage.getDataFromLocalStorage(fastBidStorageKey);if(null!==fastBidFromStorage){var firstLineEndPosition=fastBidFromStorage.indexOf("\n"),firstLine=fastBidFromStorage.substr(0,firstLineEndPosition).trim();if(firstLine.substr(0,hashPrefix.length)!==hashPrefix)(0,_utils.logWarn)("No hash found in FastBid"),storage.removeDataFromLocalStorage(fastBidStorageKey);else{var publisherTagHash=firstLine.substr(hashPrefix.length),publisherTag=fastBidFromStorage.substr(firstLineEndPosition+1);(0,_verify.verify)(publisherTag,publisherTagHash,FAST_BID_PUBKEY_N,FAST_BID_PUBKEY_E)?((0,_utils.logInfo)("Using Criteo FastBid"),eval(publisherTag)):((0,_utils.logWarn)("Invalid Criteo FastBid found"),storage.removeDataFromLocalStorage(fastBidStorageKey))}}}catch(e){}}__webpack_unused_export__=spec,(0,_bidderFactory.registerBidder)(spec),(0,_prebidGlobal.registerModule)("criteoBidAdapter")},4153:(e,t,r)=>{"use strict";var n=r(8851),i=r(1779),o=r(6150),a=r(4080),s=r(4627),d=r(9084),c=r(7343),u=r(1442),l="criteo",p=(0,d.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:l});var f="cto_bidid",g="cto_bundle",v="html5",m="cookie",b=new Date(0).toString(),h=new Date((0,i.timestamp)()+33696e6).toString();function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,i.parseUrl)(e,{noDecodeWholeURL:!0});return t?"".concat(r.hostname):"".concat(r.protocol,"://").concat(r.hostname).concat(r.port?":"+r.port:"","/")}function I(e,t){var r,n;return(null==e||null===(r=e.storage)||void 0===r?void 0:r.type)===v?p.getDataFromLocalStorage(t):(null==e||null===(n=e.storage)||void 0===n?void 0:n.type)===m?p.getCookie(t):p.getCookie(t)||p.getDataFromLocalStorage(t)}function E(e,t,r,n){var i,o;t&&r&&((null==e||null===(i=e.storage)||void 0===i?void 0:i.type)===v?p.setDataInLocalStorage(t,r):((null==e||null===(o=e.storage)||void 0===o?void 0:o.type)===m||p.setDataInLocalStorage(t,r),_(t,r,h,n,!0)))}function _(e,t,r,n,i){for(var o=n.split("."),a=0;a<o.length;++a){var s=o.slice(o.length-a-1,o.length).join(".");try{if(p.setCookie(e,t,r,null,"."+s),i){var d=p.getCookie(e);if(d&&d===t)break}}catch(e){}}}function A(e,t,r){var n,s,d,c,l=(void 0===(null==e||null===(n=e.storage)||void 0===n?void 0:n.type)||(null==e||null===(s=e.storage)||void 0===s?void 0:s.type)===m)&&p.cookiesAreEnabled(),h=(void 0===(null==e||null===(d=e.storage)||void 0===d?void 0:d.type)||(null==e||null===(c=e.storage)||void 0===c?void 0:c.type)===v)&&p.localStorageIsEnabled(),I=y((0,a.getRefererInfo)().page),A=y(document.location.href,!0),O="undefined"!=typeof criteo_pubtag,S=function(e,t,r,n,i,o,a){var s="https://gum.criteo.com/sid/json?origin=prebid"+"".concat(e?"&topUrl="+encodeURIComponent(e):"")+"".concat(t?"&domain="+encodeURIComponent(t):"")+"".concat(r?"&bundle="+encodeURIComponent(r):"")+"".concat(n?"&info="+encodeURIComponent(n):"")+"".concat(i?"&cw=1":"")+"".concat(a?"&pbt=1":"")+"".concat(o?"&lsw=1":""),d=u.uspDataHandler.getConsentData();d&&(s+="&us_privacy=".concat(encodeURIComponent(d)));var c=u.gdprDataHandler.getConsentData();c&&(s+="".concat(c.consentString?"&gdprString="+encodeURIComponent(c.consentString):""),s+="&gdpr=".concat(!0===c.gdprApplies?1:0));var l=u.gppDataHandler.getConsentData();return l&&(s+="".concat(l.gppString?"&gpp="+encodeURIComponent(l.gppString):""),s+="".concat(l.applicableSections?"&gpp_sid="+encodeURIComponent(l.applicableSections):"")),s}(I,A,t.bundle,t.dnaBundle,l,h,O),T={success:function(t){var n,a=JSON.parse(t);(a.pixels&&a.pixels.forEach((function(t){return function(e,t,r){r.writeBundleInStorage&&r.bundlePropertyName&&r.storageKeyName?(0,o.ajax)(r.pixelUrl,{success:function(n){if(n){var i=JSON.parse(n);i&&i[r.bundlePropertyName]&&E(e,r.storageKeyName,i[r.bundlePropertyName],t)}},error:function(e){(0,i.logError)("criteoIdSystem: unable to sync user id",e)}},void 0,{method:"GET",withCredentials:!0}):(0,i.triggerPixel)(r.pixelUrl)}(e,A,t)})),a.acwsUrl)?("string"==typeof a.acwsUrl?[a.acwsUrl]:a.acwsUrl).forEach((function(e){return(0,i.triggerPixel)(e)})):a.bundle&&E(e,g,a.bundle,A);if(a.bidId){E(e,f,a.bidId,A);var s={criteoId:a.bidId};r(s)}else _(n=f,"",b,A,!0),p.removeDataFromLocalStorage(n),r()},error:function(e){(0,i.logError)("criteoIdSystem: unable to sync user id",e),r()}};(0,o.ajax)(S,T,void 0,{method:"GET",contentType:"application/json",withCredentials:!0})}var O={name:l,gvlid:91,decode:function(e){return e},getId:function(e){var t=function(e){return{bundle:I(e,g),dnaBundle:I(e,"cto_dna_bundle"),bidId:I(e,f)}}(e);return{id:t.bidId?{criteoId:t.bidId}:void 0,callback:function(r){return A(e,t,r)}}},eids:{criteoId:{source:"criteo.com",atype:1}}};(0,s.submodule)("userId",O),(0,n.registerModule)("criteoIdSystem")},902:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o=n(r(8212)),a=r(8851),s=r(7943),d=r(8133),c=r(1779),u=r(6522),l=r(4627),p=r(6572),f=r(1442),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),v=n(r(5404)),m=r(4026),b=r(4080);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var y={env:"vp",gdfp_req:1,output:"vast",unviewed_position_start:1},I={};var E={ri:b.getRefererInfo};function _(e){if(e.params||e.url){var t=e.adUnit,r=e.bid||d.targeting.getWinningBids(t.code)[0],n={};if(e.url&&(n=(0,c.parseUrl)(e.url,{noDecodeWholeURL:!0}),(0,c.isEmpty)(e.params)))return function(e,t,r){var n=S(t,e,"search");n&&(e.search.description_url=n);return e.search.cust_params=T(t,r,e.search.cust_params),(0,c.buildUrl)(e)}(n,r,e);var i={correlator:Date.now(),sz:(0,c.parseSizesInput)((0,c.deepAccess)(t,"mediaTypes.video.playerSize")).join("|"),url:encodeURIComponent(location.href)},o=n.search,a=o&&o.sz;a&&(i.sz=a+"|"+i.sz);var s=T(r,e,o&&o.cust_params),u=Object.assign({},y,n.search,i,e.params,{cust_params:s}),l=S(r,e,"params");l&&(u.description_url=l);var p=f.gdprDataHandler.getConsentData();p&&("boolean"==typeof p.gdprApplies&&(u.gdpr=Number(p.gdprApplies)),p.consentString&&(u.gdpr_consent=p.consentString),p.addtlConsent&&(u.addtl_consent=p.addtlConsent));var g=f.uspDataHandler.getConsentData();g&&(u.us_privacy=g);f.gppDataHandler.getConsentData();if(!u.ppid){var v=(0,m.getPPID)();null!=v&&(u.ppid=v)}return(0,c.buildUrl)(Object.assign({protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads"},n,{search:u}))}(0,c.logError)("A params object or a url is required to use pbjs.adServers.dfp.buildVideoUrl")}function A(e){e.call(this,"dfp")}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code,r=e.params,n=e.callback;if(r&&n){var i={correlator:Date.now(),sz:function(e){var t=p.auctionManager.getAdUnits().filter((function(t){return t.code===e})),r=(0,c.deepAccess)(t[0],"mediaTypes.video.playerSize");return(0,c.parseSizesInput)(r).join("|")}(t),url:encodeURIComponent(location.href)};I.getTargeting({codes:[t],callback:function(e,a){var s;if(e)return void n(e,null);var d=(s={},(0,o.default)(s,I.TARGETING_KEY_PB_CAT_DUR,void 0),(0,o.default)(s,I.TARGETING_KEY_CACHE_ID,void 0),s),u={};a[t]&&(u=a[t].reduce((function(e,t){return Object.keys(t)[0]===I.TARGETING_KEY_PB_CAT_DUR?e[I.TARGETING_KEY_PB_CAT_DUR]=void 0!==e[I.TARGETING_KEY_PB_CAT_DUR]?e[I.TARGETING_KEY_PB_CAT_DUR]+","+t[I.TARGETING_KEY_PB_CAT_DUR]:t[I.TARGETING_KEY_PB_CAT_DUR]:Object.keys(t)[0]===I.TARGETING_KEY_CACHE_ID&&(e[I.TARGETING_KEY_CACHE_ID]=t[I.TARGETING_KEY_CACHE_ID]),e}),d));var l=encodeURIComponent((0,c.formatQS)(u)),p=Object.assign({},y,i,r,{cust_params:l}),g=f.gdprDataHandler.getConsentData();g&&("boolean"==typeof g.gdprApplies&&(p.gdpr=Number(g.gdprApplies)),g.consentString&&(p.gdpr_consent=g.consentString),g.addtlConsent&&(p.addtl_consent=g.addtlConsent));var v=f.uspDataHandler.getConsentData();v&&(p.us_privacy=v);var m=(0,c.buildUrl)({protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads",search:p});n(null,m)}})}else(0,c.logError)("A params object and a callback is required to use pbjs.adServers.dfp.buildAdpodVideoUrl")}function S(e,t,r){return(0,c.deepAccess)(t,"".concat(r,".description_url"))||encodeURIComponent(E.ri().page)}function T(e,t,r){var n=e&&e.adserverTargeting||{},i={},a=t&&t.adUnit;if(a){var s=d.targeting.getAllTargeting(a.code);i=s?s[a.code]:{}}var u=Object.assign({},{hb_uuid:e&&e.videoCacheKey},{hb_cache_id:e&&e.videoCacheKey},i,n);g.emit(v.default.EVENTS.SET_TARGETING,(0,o.default)({},a.code,u));var l=(0,c.deepAccess)(t,"params.cust_params"),p=Object.assign({},u,l),f=encodeURIComponent((0,c.formatQS)(p));return r&&(f=r+"%26"+f),f}u.config.getConfig("brandCategoryTranslation.translationFile")&&(0,l.getHook)("registerAdserver").before(A),(0,s.registerVideoSupport)("dfp",{buildVideoUrl:_,buildAdpodVideoUrl:O,getAdpodTargeting:function(e){return I.getTargeting(e)}}),(0,l.submodule)("adpod",I),(0,a.registerModule)("dfpAdServerVideo")},8346:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o=n(r(8832)),a=r(8851),s=r(6522),d=r(4627),c=r(1779),u=r(9502),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),p=n(r(5404)),f=r(3801),g=r(7463),v=r(9558);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var b="fledgeForGpt",h={},y=!1;function I(e){e&&!0===e.enabled?(y||((0,d.getHook)("addComponentAuction").before(A),(0,d.getHook)("makeBidRequests").after(S),l.on(p.default.EVENTS.AUCTION_INIT,E),l.on(p.default.EVENTS.AUCTION_END,_),y=!0),(0,c.logInfo)("".concat(b," enabled (browser ").concat(O()?"supports":"does NOT support"," fledge)"),e)):(y&&((0,d.getHook)("addComponentAuction").getHooks({hook:A}).remove(),(0,d.getHook)("makeBidRequests").getHooks({hook:S}).remove(),l.off(p.default.EVENTS.AUCTION_INIT,E),l.off(p.default.EVENTS.AUCTION_END,_),y=!1),(0,c.logInfo)("".concat(b," disabled"),e))}function E(e){var t=e.auctionId;h[t]={}}function _(e){var t=e.auctionId,r=e.bidsReceived,n=e.bidderRequests;try{var i=null==n?void 0:n.flatMap((function(e){return e.bids}));Object.entries(h[t]).forEach((function(e){var t=(0,o.default)(e,2),n=t[0],a=t[1],s=function(e){return e.adUnitCode===n},d=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r.length>0){var i=r.reduce((0,g.maximum)((0,f.currencyCompare)((function(e){return[e.cpm,e.currency]}))));e=i.cpm,t=i.currency}else{var o=n.map((function(e){return"function"==typeof e.getFloor&&e.getFloor()})).filter((function(e){return e})),a=o.length&&o.reduce((0,g.minimum)((0,f.currencyCompare)((function(e){return[e.floor,e.currency]}))));e=null==a?void 0:a.floor,t=null==a?void 0:a.currency}var s={};return e&&((0,c.deepSetValue)(s,"auctionSignals.prebid.bidfloor",e),t&&(0,c.deepSetValue)(s,"auctionSignals.prebid.bidfloorcur",t)),s}(null==r?void 0:r.filter(s),null==i?void 0:i.filter(s));!function(e,t){var r=(0,v.getGptSlotForAdUnitCode)(e);r&&r.setConfig?(r.setConfig({componentAuction:t.map((function(e){return{configKey:e.seller,auctionConfig:e}}))}),(0,c.logInfo)(b,"register component auction configs for: ".concat(e,": ").concat(r.getAdUnitPath()),t)):(0,c.logWarn)(b,"unable to register component auction config for ".concat(e),t)}(n,a.map((function(e){return(0,c.mergeDeep)({},d,e)})))}))}finally{delete h[t]}}function A(e,t,r){var n,i,o=t.adUnitCode,a=t.auctionId,s=t.ortb2,d=t.ortb2Imp;h.hasOwnProperty(a)?(i={ortb2:s,ortb2Imp:d},(n=r).auctionSignals=(0,c.mergeDeep)({},{prebid:i},n.auctionSignals),!h[a].hasOwnProperty(o)&&(h[a][o]=[]),h[a][o].push(r)):(0,c.logWarn)(b,"Received component auction config for auction that has closed (auction '".concat(a,"', adUnit '").concat(o,"')"),r),e(t,r)}function O(){return"runAdAuction"in navigator&&"joinAdInterestGroup"in navigator}function S(e,t){if(O()){var r,n=s.config.getConfig("fledgeForGpt"),i=null!==(r=null==n?void 0:n.bidders)&&void 0!==r?r:[];t.forEach((function(e){var t=(null==n?void 0:n.enabled)&&(0===i.length||i.includes(e.bidderCode));s.config.runWithBidder(e.bidderCode,(function(){var r,i,o=null!==(r=s.config.getConfig("fledgeEnabled"))&&void 0!==r?r:t?n.enabled:void 0,a=null!==(i=s.config.getConfig("defaultForSlots"))&&void 0!==i?i:t?null==n?void 0:n.defaultForSlots:void 0;Object.assign(e,{fledgeEnabled:o}),e.bids.forEach((function(e){var t,r,n;(0,c.deepSetValue)(e,"ortb2Imp.ext.ae",null!==(t=null===(r=e.ortb2Imp)||void 0===r||null===(n=r.ext)||void 0===n?void 0:n.ae)&&void 0!==t?t:a)}))}))}))}e(t)}function T(e,t,r){var n,i;null!==(n=e.ext)&&void 0!==n&&n.ae&&!r.bidderRequest.fledgeEnabled&&(null===(i=e.ext)||void 0===i||delete i.ae)}function w(e,t,r){var n,i,o;((null===(n=t.ext)||void 0===n||null===(i=n.prebid)||void 0===i||null===(o=i.fledge)||void 0===o?void 0:o.auctionconfigs)||[]).forEach((function(e){var t,n,i=r.impContext[e.impid];null!=i&&null!==(t=i.imp)&&void 0!==t&&null!==(n=t.ext)&&void 0!==n&&n.ae?(i.fledgeConfigs=i.fledgeConfigs||[],i.fledgeConfigs.push(e)):(0,c.logWarn)("Received fledge auction configuration for an impression that was not in the request or did not ask for it",e,null==i?void 0:i.imp)}))}function C(e,t,r){var n=Object.values(r.impContext).flatMap((function(e){return(e.fledgeConfigs||[]).map((function(t){return{bidId:e.bidRequest.bidId,config:t.config}}))}));n.length>0&&(e.fledgeAuctionConfigs=n)}s.config.getConfig("fledgeForGpt",(function(e){return I(e.fledgeForGpt)})),(0,u.registerOrtbProcessor)({type:u.IMP,name:"impExtAe",fn:T}),(0,u.registerOrtbProcessor)({type:u.RESPONSE,name:"extPrebidFledge",fn:w,dialects:[u.PBS]}),(0,u.registerOrtbProcessor)({type:u.RESPONSE,name:"fledgeAuctionConfigs",priority:-1,fn:C,dialects:[u.PBS]}),(0,a.registerModule)("fledgeForGpt")},8768:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o=n(r(8832)),a=r(8851),s=r(1779),d=r(6522),c=h(r(1442)),u=h(r(985)),l=n(r(5404)),p=r(1526),f=r(7343),g=r(8534),v=r(1681),m=r(353);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E="strictStorageEnforcement";var _={purpose:{},feature:{}};var A={purpose:"purpose.consents",feature:"specialFeatureOptins"},O={storage:{type:"purpose",default:{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]},id:1},basicAds:{type:"purpose",id:2,default:{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]}},personalizedAds:{type:"purpose",id:4},measurement:{type:"purpose",id:7},transmitPreciseGeo:{type:"feature",id:1}},S=new Set,T=new Set,w=new Set,C=new Set,x=new Set,P=new Set,D=!1,R=!1,j=[f.MODULE_TYPE_BIDDER,f.MODULE_TYPE_UID,f.MODULE_TYPE_ANALYTICS,f.MODULE_TYPE_RTD],k="TCF2",N=[],B=[2];function U(e,t,r){if(t){var n=d.config.getConfig("gvlMapping");if(n&&n[t])return n[t];if(e===f.MODULE_TYPE_PREBID)return"cdep"===t?p.FIRST_PARTY_GVLID:p.VENDORLESS_GVLID;var i=p.GDPR_GVLIDS.get(t),o=i.gvlid,a=i.modules;if(null==o&&Object.keys(a).length>0){var c,u=y(j);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(a.hasOwnProperty(l)){o=a[l],l!==e&&(0,s.logWarn)("Multiple GVL IDs found for module '".concat(t,"'; using the ").concat(l," module's ID (").concat(o,") instead of the ").concat(e,"'s ID (").concat(a[e],")"));break}}}catch(e){u.e(e)}finally{u.f()}}return null==o&&r&&(o=r()),o||null}return null}function M(e,t){var r,n=c.default.getAnalyticsAdapter(e);return function(r){if("function"!=typeof r)return r;try{return r.call(n.adapter,t)}catch(t){(0,s.logError)("Error invoking ".concat(e," adapter.gvlid()"),t)}}(null==n||null===(r=n.adapter)||void 0===r?void 0:r.gvlid)}function q(e,t,r){return null==e&&c.gdprDataHandler.enabled?((0,s.logWarn)("Attempting operation that requires purpose ".concat(t," consent while consent data is not available").concat(r?" (module: ".concat(r,")"):"",". Assuming no consent was given.")),!0):e&&e.gdprApplies}function V(e,t,r,n){var i=!!(0,s.deepAccess)(e,"vendorData.".concat(A[t],".").concat(r)),o=!!(0,s.deepAccess)(e,"vendorData.vendor.consents.".concat(n));return"purpose"===t&&B.includes(r)&&(i||(i=!!(0,s.deepAccess)(e,"vendorData.purpose.legitimateInterests.".concat(r))),o||(o=!!(0,s.deepAccess)(e,"vendorData.vendor.legitimateInterests.".concat(n)))),{purpose:i,vendor:o}}function L(e,t,r,n){var i=O[e.purpose];if((e.vendorExceptions||[]).includes(r))return!0;var o=e.enforceVendor&&!(n===p.VENDORLESS_GVLID||(e.softVendorExceptions||[]).includes(r)),a=V(t,i.type,i.id,n),d=a.purpose,c=a.vendor,u=(!e.enforcePurpose||d)&&(!o||c);return n===p.FIRST_PARTY_GVLID&&(u=!e.enforcePurpose||!!(0,s.deepAccess)(t,"vendorData.publisher.consents.".concat(i.id))),u}function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return null};return function(i){var o=c.gdprDataHandler.getConsentData(),a=i[g.ACTIVITY_PARAM_COMPONENT_NAME];if(q(o,e,a)){var s=U(i[g.ACTIVITY_PARAM_COMPONENT_TYPE],a,n(i)),d=!!t(o,a,s);if(!d)return r&&r.add(a),{allow:d}}}}function G(e){return F(e,(function(t,r,n){return!!L(_.purpose[e],t,r,n)}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null})}function z(e){return function(t){if(t[g.ACTIVITY_PARAM_COMPONENT_TYPE]!==f.MODULE_TYPE_PREBID)return e(t)}}var W,H=(W=G(1,S),function(e){if(e[g.ACTIVITY_PARAM_COMPONENT_TYPE]!==f.MODULE_TYPE_PREBID||R)return W(e)});var Y=G(1,S);var K=G(1,S);var J=z(G(2,T));var Q=G(7,w,(function(e){return M(e[g.ACTIVITY_PARAM_COMPONENT_NAME],e[g.ACTIVITY_PARAM_ANL_CONFIG])}));var X=G(4,C);var $,Z,ee=z(($=F("2-10",(function(e,t,r){for(var n=2;n<=10;n++){var i,o,a,s;if(null!==(i=_.purpose[n])&&void 0!==i&&null!==(o=i.vendorExceptions)&&void 0!==o&&o.includes(t))return!0;var d=V(e,"purpose",n,r),c=d.purpose,u=d.vendor;if(c&&(u||null!==(a=_.purpose[n])&&void 0!==a&&null!==(s=a.softVendorExceptions)&&void 0!==s&&s.includes(t)))return!0}return!1}),x),Z=G(4,x),function(){var e;return(null!==(e=_.purpose[4])&&void 0!==e&&e.eidsRequireP4Consent?Z:$).apply(this,arguments)}));var te=F("Special Feature 1",(function(e,t,r){return L(_.feature[1],e,t,r)}),P);function re(e){var t=(0,s.deepAccess)(e,"gdpr.rules");t||(0,s.logWarn)("TCF2: enforcing P1 and P2 by default"),t=Object.fromEntries((t||[]).map((function(e){return[e.purpose,e]}))),R=!!(0,s.deepAccess)(e,E),Object.entries(O).forEach((function(e){var r,n=(0,o.default)(e,2),i=n[0],a=n[1];_[a.type][a.id]=null!==(r=t[i])&&void 0!==r?r:a.default})),D||(null!=_.purpose[1]&&(D=!0,N.push((0,v.registerActivityControl)(m.ACTIVITY_ACCESS_DEVICE,k,H)),N.push((0,v.registerActivityControl)(m.ACTIVITY_SYNC_USER,k,Y)),N.push((0,v.registerActivityControl)(m.ACTIVITY_ENRICH_EIDS,k,K))),null!=_.purpose[2]&&N.push((0,v.registerActivityControl)(m.ACTIVITY_FETCH_BIDS,k,J)),null!=_.purpose[4]&&N.push((0,v.registerActivityControl)(m.ACTIVITY_TRANSMIT_UFPD,k,X),(0,v.registerActivityControl)(m.ACTIVITY_ENRICH_UFPD,k,X)),null!=_.purpose[7]&&N.push((0,v.registerActivityControl)(m.ACTIVITY_REPORT_ANALYTICS,k,Q)),null!=_.feature[1]&&N.push((0,v.registerActivityControl)(m.ACTIVITY_TRANSMIT_PRECISE_GEO,k,te)),N.push((0,v.registerActivityControl)(m.ACTIVITY_TRANSMIT_EIDS,k,ee)))}u.on(l.default.EVENTS.AUCTION_END,(function(){var e=function(e){return Array.from(e.keys()).filter((function(e){return null!=e}))},t={storageBlocked:e(S),biddersBlocked:e(T),analyticsBlocked:e(w),ufpdBlocked:e(C),eidsBlocked:e(x),geoBlocked:e(P)};u.emit(l.default.EVENTS.TCF2_ENFORCEMENT,t),[S,T,w,C,x,P].forEach((function(e){return e.clear()}))})),d.config.getConfig("consentManagement",(function(e){return re(e.consentManagement)})),(0,a.registerModule)("gdprEnforcement")},5570:(e,t,r)=>{"use strict";var n=r(8851),i=r(1779),o=r(6522),a=r(4627),s=r(9635),d=void 0,c={};var u=!1,l=function(e){var t=c.customGptSlotMatching;if((0,i.isGptPubadsDefined)()){var r=e.reduce((function(e,t){return e[t.code]=e[t.code]||[],e[t.code].push(t),e}),{});window.googletag.pubads().getSlots().forEach((function(e){var n=(0,s.find)(Object.keys(r),t?t(e):(0,i.isAdUnitCodeMatchingSlot)(e));if(n){var o={name:"gam",adslot:p(e.getAdUnitPath())};r[n].forEach((function(e){var t,r,n;(0,i.deepSetValue)(e,"ortb2Imp.ext.data.adserver",Object.assign({},null===(t=e.ortb2Imp)||void 0===t||null===(r=t.ext)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.adserver,o))}))}}))}};var p=function(e){return(o.config.getConfig("gptPreAuction")||{}).mcmEnabled?e.replace(/(^\/\d*),\d*\//,"$1/"):e},f=function(e){var t=e.ortb2Imp.ext.data,r=c.customPbAdSlot;if(!t.pbadslot)if(r)t.pbadslot=r(e.code,(0,i.deepAccess)(t,"adserver.adslot"));else{try{var n=document.getElementById(e.code);if(n.dataset.adslotid)return void(t.pbadslot=n.dataset.adslotid)}catch(e){}if(!(0,i.deepAccess)(t,"adserver.adslot"))return t.pbadslot=e.code,!0;t.pbadslot=t.adserver.adslot}};var g=function(e,t){l(t);var r=c,n=r.useDefaultPreAuction,o=r.customPreAuction;t.forEach((function(e){e.ortb2Imp=e.ortb2Imp||{},e.ortb2Imp.ext=e.ortb2Imp.ext||{},e.ortb2Imp.ext.data=e.ortb2Imp.ext.data||{};var t=e.ortb2Imp.ext;if(o||n){var r,a=(0,i.deepAccess)(t,"data.adserver.adslot");o?r=o(e,a):n&&(r=function(e,t){var r=e.ortb2Imp.ext.data;if(r.pbadslot)return r.pbadslot;if((0,i.isGptPubadsDefined)()){var n=window.googletag.pubads().getSlots().filter((function(e){return e.getAdUnitPath()===t}));if(0!==n.length)return 1===n.length?t:"".concat(t,"#").concat(e.code)}}(e,a)),r&&(t.gpid=t.data.pbadslot=r)}else{var s=f(e);t.gpid||s||(t.gpid=t.data.pbadslot)}}));for(var a=arguments.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];return e.call.apply(e,[d,t].concat(s))};var v=function(e){c=(0,i.pick)(e,["enabled",function(e){return!1!==e},"customGptSlotMatching",function(e){return"function"==typeof e&&e},"customPbAdSlot",function(e){return"function"==typeof e&&e},"customPreAuction",function(e){return"function"==typeof e&&e},"useDefaultPreAuction",function(e){return!0===e}]),c.enabled?u||((0,a.getHook)("makeBidRequests").before(g),u=!0):((0,i.logInfo)("".concat("GPT Pre-Auction",": Turning off module")),c={},(0,a.getHook)("makeBidRequests").getHooks({hook:g}).remove(),u=!1)};o.config.getConfig("gptPreAuction",(function(e){return v(e.gptPreAuction)})),v({}),(0,n.registerModule)("gptPreAuction")},6459:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(7996)),o=n(r(4319)),a=n(r(8832)),s=n(r(147)),d=n(r(8212)),c=r(8851),u=r(1779),l=r(6150),p=r(43),f=r(9723),g=r(6613),v=r(6522),m=r(9084),b=["mind","maxd","size","playerSize","protocols","durationRangeSec"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I="grid",E="https://grid.bidswitch.net/hbjson",_="https://x.bidswitch.net/sync?ssp=themediagrid",A="tmguid",O="https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",S=(0,m.getStorageManager)({bidderCode:I});var T="Bid from response has no adid parameter - ",w="Bid from response has no adm parameter - ",C="Array of bid objects is empty",x="Seatbid array from response has empty item",P="Response is empty",D="Response has empty seatbid array",R="Seatbid from response has no array of bid objects - ",j={trustx:{endpoint:"https://grid.bidswitch.net/hbjson?sp=trustx",syncurl:"https://x.bidswitch.net/sync?ssp=themediagrid",bidResponseExternal:{netRevenue:!1}},gridNM:{defaultParams:{multiRequest:!0}}},k=!1,N={code:I,gvlid:686,aliases:["playwire","adlivetech","gridNM",{code:"trustx",skipPbsAliasing:!0}],supportedMediaTypes:[g.BANNER,g.VIDEO],isBidRequestValid:function(e){return e&&Boolean(e.params.uid||e.params.secid)},buildRequests:function(e,t){var r,n,d,c;if(!e.length)return null;var l=null,p=null,f=null,m=null,h=null,I=null,_=null,O=!1,T=t||{},w=T.bidderRequestId,C=T.gdprConsent,x=T.uspConsent,P=T.timeout,D=T.refererInfo,R=T.gppConsent,k=D?encodeURIComponent(D.page):"",N=parseInt(P)||null,B=[],U={},M=[],q=[],V=[];e.forEach((function(e){var r={bid:e,savedPrebidBid:null};if(e.params.uid||e.params.secid){w||(w=e.bidderRequestId),f||(f=e.schain),m||(m=e.userIdAsEids),_||(_=j[e.bidder]&&j[e.bidder].endpoint);var n=e.params,s=e.mediaTypes,d=e.bidId,c=e.adUnitCode,v=e.rtd,h=e.ortb2Imp,I=y(y({},(j[e.bidder]||{}).defaultParams),n),E=I.secid,A=I.pubid,S=I.source,T=I.uid,C=I.keywords,x=I.forceBidder,P=I.multiRequest,D=I.content,R=I.video,L=function(e,t){var r=e.video?"video":"banner",n=parseFloat(t.params.bidFloor||t.params.floorcpm||0)||null;if("function"==typeof t.getFloor){var i=t.getFloor({currency:"USD",mediaType:r,size:t.sizes.map((function(e){var t=(0,a.default)(e,2);return{w:t[0],h:t[1]}}))});"object"!==(0,o.default)(i)||"USD"!==i.currency||isNaN(parseFloat(i.floor))||(n=Math.max(n,parseFloat(i.floor)))}return n}(s||{},e),F=v&&v.jwplayer&&v.jwplayer.targeting;F&&!p&&F.content&&(p=F.content);var G,z,W,H,Y,K,J={id:d.toString(),tagid:(E||T).toString(),ext:{divid:c.toString()}};if(h)if(h.instl&&(J.instl=parseInt(h.instl)||null),h.ext)J.ext.gpid=(null===(G=h.ext.gpid)||void 0===G?void 0:G.toString())||(null===(z=h.ext.data)||void 0===z||null===(W=z.pbadslot)||void 0===W?void 0:W.toString())||(null===(H=h.ext.data)||void 0===H||null===(Y=H.adserver)||void 0===Y||null===(K=Y.adslot)||void 0===K?void 0:K.toString()),h.ext.data&&(J.ext.data=h.ext.data);if((0,u.isEmpty)(C)||(l||(l=C),J.ext.bidder={keywords:C}),L&&(J.bidfloor=L),!s||s[g.BANNER]){var Q=function(e,t){var r=t.sizes||e.sizes;if(!r||!r.length)return;var n=r.map((function(e){return(0,u.parseGPTSingleSizeArrayToRtbSize)(e)})),i=(0,u.parseGPTSingleSizeArrayToRtbSize)(r[0]);n.length&&(i.format=n);return i}(e,s?s[g.BANNER]:{});Q&&(J.banner=Q)}if(s&&s[g.VIDEO]){var X=function(e,t,r){var n=y(y({},t),e),o=n.mind,a=n.maxd,s=n.size,d=n.playerSize,c=n.protocols,l=n.durationRangeSec,p=void 0===l?[]:l,f=(0,i.default)(n,b);if(s&&(0,u.isStr)(s)){var g=s.split("x");2===g.length&&parseInt(g[0])&&parseInt(g[1])&&(f.w=parseInt(g[0]),f.h=parseInt(g[1]))}if(!f.w||!f.h){var v=((d||r||[]).toString().match(/^\d+,\d+/)||[])[0],m=v&&v.split(",").map((function(e){return parseInt(e)}));m&&2===m.length&&Object.assign(f,(0,u.parseGPTSingleSizeArrayToRtbSize)(m))}if(!f.w||!f.h)return;var h=o||p[0]||parseInt(f.minduration)||null,I=a||p[1]||parseInt(f.maxduration)||null;h&&(f.minduration=h);I&&(f.maxduration=I);c&&c.length&&(f.protocols=c);return f}(R,s[g.VIDEO],e.sizes);X&&(J.video=X)}if(J.banner||J.video)if(P){var $,Z,ee,te,re={tid:null==t||null===($=t.ortb2)||void 0===$||null===(Z=$.source)||void 0===Z||null===(ee=Z.tid)||void 0===ee||null===(te=ee.toString)||void 0===te?void 0:te.call(ee),ext:{wrapper:"Prebid_js",wrapper_version:"8.34.0"}};e.schain&&(re.ext.schain=e.schain);var ne={id:e.bidderRequestId&&e.bidderRequestId.toString(),site:{page:k},tmax:N,source:re,imp:[J]};A&&(ne.site.publisher={id:A});var ie=D||F&&F.content;ie&&(ne.site.content=ie),M.push(ne),q.push(S),V.push(r)}else U[d]=r,B.push(J);!O&&x&&j[x]&&(O=x)}})),(O=v.config.getConfig("forceBidderName")||O)&&j[O]&&(_=j[O].endpoint,this.forceBidderName=O);var L={tid:null==t||null===(r=t.ortb2)||void 0===r||null===(n=r.source)||void 0===n||null===(d=n.tid)||void 0===d||null===(c=d.toString)||void 0===c?void 0:c.call(d),ext:{wrapper:"Prebid_js",wrapper_version:"8.34.0"}};f&&(L.ext.schain=f);var F=B.length||!M.length?{id:w&&w.toString(),site:{page:k},tmax:N,source:L,imp:B}:null;return p&&(F.site.content=p),[].concat(M,[F]).forEach((function(e){if(e){h=null;var r=(0,u.deepAccess)(t,"ortb2.user.data");r&&r.length&&(h={data:(0,s.default)(r)}),C&&C.consentString&&(I={consent:C.consentString});var n=(0,u.deepAccess)(t,"ortb2.user.ext.device");n&&((I=I||{}).device=y({},n)),m&&m.length&&((I=I||{}).eids=(0,s.default)(m)),I&&Object.keys(I).length&&((h=h||{}).ext=I);var i=S.getDataFromLocalStorage(A)||function(){if(v.config.getConfig("localStorageWriteAllowed")){var e=(0,u.generateUUID)().replace(/-/g,"");return S.setDataInLocalStorage(A,e),e}return null}();i&&((h=h||{}).id=i.toString()),h&&(e.user=h);var a=(0,u.deepAccess)(t,"ortb2.user.keywords")||null,d=(0,u.deepAccess)(t,"ortb2.site.keywords")||null;a&&((l=l||{}).user=l.user||{},l.user.ortb2=[{name:"keywords",keywords:a.split(",")}]),d&&((l=l||{}).site=l.site||{},l.site.ortb2=[{name:"keywords",keywords:d.split(",")}]),l&&(l=function(e){var t={};return Object.keys(e).forEach((function(r){var n=e[r];if(n)if("site"===r||"user"===r){var i={};Object.keys(n).forEach((function(e){if(Array.isArray(n[e])){var t=[];n[e].forEach((function(e){if("object"===(0,o.default)(e)&&e.name){var r={name:e.name,segments:[]};Object.keys(e).forEach((function(t){Array.isArray(e[t])&&e[t].forEach((function(e){e&&("string"==typeof e?r.segments.push({name:t,value:e}):"segments"===t&&"string"==typeof e.name&&"string"==typeof e.value&&r.segments.push(e))}))})),r.segments.length&&t.push(r)}})),t.length&&(i[e]=t)}})),t[r]=i}else t[r]=n})),Object.keys(t).length&&t}(l))&&(e.ext={keywords:l}),C&&C.gdprApplies&&(e.regs={ext:{gdpr:C.gdprApplies?1:0}});var c=(0,u.deepAccess)(t,"ortb2.regs")||{};if(R||null!=c&&c.gpp){var p,f,g,b={gpp:null!==(p=null==R?void 0:R.gppString)&&void 0!==p?p:null==c?void 0:c.gpp,gpp_sid:null!==(f=null==R?void 0:R.applicableSections)&&void 0!==f?f:null==c?void 0:c.gpp_sid};e.regs=(0,u.mergeDeep)(null!==(g=null==e?void 0:e.regs)&&void 0!==g?g:{},b)}x&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.us_privacy=x),!0===v.config.getConfig("coppa")&&(e.regs||(e.regs={}),e.regs.coppa=1);var E=(0,u.deepAccess)(t,"ortb2.site");if(E){var _=[].concat((0,s.default)(E.cat||[]),(0,s.default)(E.pagecat||[])).filter((function(e){return e&&"string"==typeof e}));_.length&&(e.site.cat=_);var O=(0,u.deepAccess)(E,"content.genre");O&&"string"==typeof O&&(e.site.content=y(y({},e.site.content),{},{genre:O}));var T=(0,u.deepAccess)(E,"content.data");if(T&&T.length){var w=e.site.content||{};e.site.content=(0,u.mergeDeep)(w,{data:T})}var P=(0,u.deepAccess)(E,"content.id");P&&(e.site.content=y(y({},e.site.content),{},{id:P}))}}})),[].concat((0,s.default)(M.map((function(e,t){var r,n=(_||E).replace(/[?&]sp=([^?&=]+)/,(function(e,t){return t&&(r=t),""})),i=q[t]||r;return{method:"POST",url:n+(n.indexOf("?")>-1?"&":"?")+"no_mapping=1"+(i?"&sp=".concat(i):""),data:JSON.stringify(e),bidObject:V[t]}}))),(0,s.default)(F?[{method:"POST",url:_||E,data:JSON.stringify(F),bidsMap:U}]:[]))},interpretResponse:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.Renderer;e=e&&e.body;var n,i=[];e?e.seatbid&&!e.seatbid.length&&(n=D):n=P;var o=this.forceBidderName||this.code;return!n&&e.seatbid&&e.seatbid.forEach((function(e){!function(e,t,r,n,i){if(!e)return;var o;e.adid||(o=T+JSON.stringify(e));if(o||e.adm||e.nurl){var a=t.bidsMap?t.bidsMap[e.impid]:t.bidObject,s=a||{},d=s.bid,c=s.savedPrebidBid;if(d&&function(e,t){if((0,u.isNumber)(t))return e>t||e===t&&Math.random()>.5;return!0}(e.price,c&&c.cpm)){var l={requestId:d.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.adid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};a.savedPrebidBid=l,e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(l.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},l.meta.demandSource=e.ext.bidder.grid.demandSource),"video"===e.content_type?(e.adm?(l.vastXml=e.adm,l.adResponse={content:l.vastXml}):e.nurl&&(l.vastUrl=e.nurl),l.mediaType=g.VIDEO,d.renderer||d.mediaTypes&&d.mediaTypes.video&&"outstream"!==d.mediaTypes.video.context||(l.renderer=function(e,t,r){var n=r.install({id:t.id,url:t.url,loaded:!1});try{n.setRender(B)}catch(e){(0,u.logWarn)("Prebid Error calling setRender on renderer",e)}return n}(0,{id:d.bidId,url:O},n))):(l.ad=e.adm,l.mediaType=g.BANNER);var p=j[i]&&j[i].bidResponseExternal||{};r.push((0,u.mergeDeep)(l,p))}}else o=w+JSON.stringify(e);o&&(0,u.logError)(o)}(function(e){e?e.bid?e.bid[0]||(0,u.logError)(C):(0,u.logError)(R+JSON.stringify(e)):(0,u.logError)(x);return e&&e.bid&&e.bid[0]}(e),t,i,r,o)})),n&&(0,u.logError)(n),i},getUserSyncs:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[2],o=t[3];if(!k&&n.pixelEnabled){var a="";i&&("boolean"==typeof i.gdprApplies&&(a+="&gdpr=".concat(Number(i.gdprApplies))),"string"==typeof i.consentString&&(a+="&gdpr_consent=".concat(i.consentString))),o&&(a+="&us_privacy=".concat(o));var s=this.forceBidderName||this.code,d=j[s]&&j[s].syncurl||_;return k=!0,{type:"image",url:d+a}}},ajaxCall:function(e,t,r,n){return n.browsingTopics=!1,(0,l.ajax)(e,t,r,n)},onDataDeletionRequest:function(e){N.ajaxCall("https://media.grid.bidswitch.net/uspapi_delete_c2s",null,null,{method:"GET"})}};function B(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})}))}(0,p.registerBidder)(N),(0,c.registerModule)("gridBidAdapter")},2821:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(8212)),o=n(r(4319)),a=n(r(8832)),s=r(8851),d=r(6613),c=r(1779),u=r(6522),l=r(9084),p=r(9635),f=r(43);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m="gumgum",b=(0,l.getStorageManager)({bidderCode:m}),h={t:0,rq:8,pbv:"8.34.0"},y=[d.BANNER,d.VIDEO],I=["dac.co.jp","audigent.com","id5-sync.com","liveramp.com","intentiq.com","liveintent.com","crwdcntrl.net","quantcast.com","adserver.org","yahoo.com"],E={},_=null;function A(e){var t,n,i,o,a,s,d,u,l,p,f=function(e){return new RegExp("[?#&](".concat(e,"=(.*?))($|&)"),"i")},g={};try{n=(t=r.g.top).screen,i=e||""}catch(e){return(0,c.logError)(e),g}return g={vw:t.innerWidth,vh:t.innerHeight,sw:n.width,sh:n.height,pu:(u=i,["ggad","ggdeal"].reduce((function(e,t){var r=u.match(f(t));return r?(r[1]&&(e=e.replace(r[1],"")),r[3]&&(e=e.replace(r[3],"")),e):e}),u)),ce:b.cookiesAreEnabled(),dpr:t.devicePixelRatio||1,jcsi:JSON.stringify(h),ogu:(d=(document&&document.getElementsByTagName("head")[0]).querySelector("meta[property='og:url']"),d?d.content:null)},l=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection),(s=(p=l&&(l.downlink||l.bandwidth))?Math.round(1024*p):null)&&(g.ns=s),(o=(i.match(f("ggad"))||[0,0,0])[2])&&(g[isNaN(o)?"eAdBuyId":"adBuyId"]=o),(a=(i.match(f("ggdeal"))||[0,0,0])[2])&&(g.ggdeal=a),g}function O(e,t){return e.replace("AD_JSON",window.btoa(JSON.stringify(t)))}function S(e){var t=0,r=0,n=0;return e.forEach((function(e){var i=(0,a.default)(e,2),o=i[0],s=i[1],d=o>s?o:s;(d>n||d===n&&o>=t&&s>=r)&&(n=d,t=o,r=s)})),[t,r]}var T={code:m,gvlid:61,aliases:["gg"],isBidRequestValid:function(e){var t=e.params,r=e.adUnitCode,n=t.inScreen||t.inScreenPubID||t.inSlot||t.ICV||t.video||t.inVideo||t.slot||t.native||t.zone||t.pubID;if(E[n])return(0,c.logWarn)("[GumGum] Please check the implementation for ".concat(n," for the placement ").concat(r)),!1;switch(!0){case!!t.zone:case!!t.pubId:case!!t.inScreen:case!!t.inScreenPubID:case!!t.inSlot:case!!t.ICV:case!!t.video:case!!t.inVideo:case!!t.videoPubID:break;default:return(0,c.logWarn)("[GumGum] No product selected for the placement ".concat(r,", please check your implementation.")),!1}return!(t.bidfloor&&("number"!=typeof t.bidfloor||!isFinite(t.bidfloor)))||((0,c.logWarn)("[GumGum] bidfloor must be a Number"),!1)},buildRequests:function(e,t){var r=[],n=t&&t.gdprConsent,i=t&&t.uspConsent,s=t&&t.gppConsent,d=t&&t.timeout,l=!0===u.config.getConfig("coppa")?1:0,p=t&&t.refererInfo&&t.refererInfo.page;return(0,c._each)(e,(function(e){var u,f,g,m,b,h=e.bidId,y=e.mediaTypes,E=void 0===y?{}:y,O=e.params,T=void 0===O?{}:O,w=e.schain,C=e.userId,x=void 0===C?{}:C,P=e.ortb2Imp,D=e.adUnitCode,R=void 0===D?"":D,j=function(e,t,r){var n=Object.keys(e)[0]||"banner",i={floor:0,currency:"USD"};if("function"==typeof r.getFloor){var o=r.getFloor({mediaType:n,size:"*"}),a=o.currency,s=o.floor;s&&(i.floor=s),a&&(i.currency=a),t&&s&&"USD"===a&&(i.floor=Math.max(t,parseFloat(s)))}else t&&(i.floor=t);return i}(E,T.bidfloor,e),k=j.currency,N=j.floor,B=function(e){var t=["uid","eid","lipbid","envelope"];return Object.keys(e).reduce((function(r,n){var i=e[n];switch((0,o.default)(i)){case"string":r[n]=i;break;case"object":var a=t.filter((function(e){return i.hasOwnProperty(e)}));a.length&&(r[n]=i[a[0]])}return r}),{})}(x),U=(0,c.deepAccess)(P,"ext.data.pbadslot")||(0,c.deepAccess)(P,"ext.data.adserver.adslot"),M=[1,1],q={},V=new Date,L=V.getTime(),F=V.getTimezoneOffset();if(q.lt=L,q.to=F,x&&x.pubProvidedId){var G=function(e,t){var r=JSON.stringify(e);if(r.length<=t)return r;var n=e.slice(0,Math.floor(e.length*(t/r.length)));return JSON.stringify(n)}(x.pubProvidedId.filter((function(e){return I.includes(e.source)})),1800);q.pubProvidedId=G}for(var z in x&&x.id5id&&x.id5id.uid&&x.id5id.ext&&(q.id5Id=x.id5id.uid||null,q.id5IdLinkType=x.id5id.ext.linkType||null),R&&(q.aun=R),B)q[z]=B[z];if(E.banner?M=E.banner.sizes:E.video&&(M=E.video.playerSize,q=function(e){var t=e.minduration,r=e.maxduration,n=e.linearity,i=e.startdelay,o=e.placement,s=e.plcmt,d=e.protocols,u=void 0===d?[]:d,l=e.playerSize,p=void 0===l?[]:l,f=(0,c.parseSizesInput)(p),g=f[0]&&f[0].split("x"),v=(0,a.default)(g,2),m=v[0],b=v[1],h="";u.length&&(h=u.join(","));var y={mind:t,maxd:r,li:n,sd:i,pt:o,pr:h,viw:m,vih:b};return null!=s&&(y.vplcmt=s),y}(E.video)),U&&(q.gpid=U),_&&(q.pv=_),N&&(q.fp=N,q.fpc=k),T.iriscat&&"string"==typeof T.iriscat&&(q.iriscat=T.iriscat),T.irisid&&"string"==typeof T.irisid&&(q.irisid=T.irisid),T.zone||T.pubId)if(T.zone?q.t=T.zone:q.pubId=T.pubId,q.pi=2,T.slot){var W=S(M),H=(0,a.default)(W,2),Y=H[0],K=H[1];q.maxw=Y,q.maxh=K,q.si=T.slot,q.pi=3,q.bf=M.reduce((function(e,t){return"".concat(e).concat(e&&",").concat(t[0],"x").concat(t[1])}),"")}else T.native?(q.ni=T.native,q.pi=5):E.video?q.pi=2===E.video.linearity?6:7:T.product&&"skins"===T.product.toLowerCase()&&(q.pi=8);else q=v(v({},q),function(e,t){var r={};e.inScreenPubID&&(r.pubId=e.inScreenPubID,r.pi=2);e.inScreen&&(r.t=e.inScreen,r.pi=2);if(e.inSlot){var n=S(t),i=(0,a.default)(n,2),o=i[0],s=i[1];r.maxw=o,r.maxh=s,r.si=e.inSlot,r.pi=3,r.bf=t.reduce((function(e,t){return"".concat(e).concat(e&&",").concat(t[0],"x").concat(t[1])}),"")}e.ICV&&(r.ni=e.ICV,r.pi=5);e.videoPubID&&(r.pubId=e.videoPubID,r.pi=7);e.video&&(r.t=e.video,r.pi=7);e.inVideo&&(r.t=e.inVideo,r.pi=6);return r}(T,M));n&&(q.gdprApplies=n.gdprApplies?1:0),q.gdprApplies&&(q.gdprConsent=n.consentString),i&&(q.uspConsent=i),s?(q.gppString=t.gppConsent.gppString?t.gppConsent.gppString:"",q.gppSid=Array.isArray(t.gppConsent.applicableSections)?t.gppConsent.applicableSections.join(","):""):!s&&null!=t&&null!==(u=t.ortb2)&&void 0!==u&&null!==(f=u.regs)&&void 0!==f&&f.gpp&&(q.gppString=t.ortb2.regs.gpp,q.gppSid=Array.isArray(t.ortb2.regs.gpp_sid)?t.ortb2.regs.gpp_sid.join(","):""),l&&(q.coppa=l),w&&w.nodes&&(q.schain=(b="".concat((m=w).ver,",").concat(m.complete),m.nodes.map((function(e){b+="!".concat(encodeURIComponent(e.asi||""),","),b+="".concat(encodeURIComponent(e.sid||""),","),b+="".concat(encodeURIComponent(e.hp||""),","),b+="".concat(encodeURIComponent(e.rid||""),","),b+="".concat(encodeURIComponent(e.name||""),","),b+="".concat(encodeURIComponent(e.domain||""))})),b)),r.push({id:h,tmax:d,tId:null==P||null===(g=P.ext)||void 0===g?void 0:g.tid,pi:q.pi,selector:T.selector,sizes:M,url:"https://g2.gumgum.com/hbid/imp",method:"GET",data:Object.assign(q,A(p))})})),r},interpretResponse:function(e,t){var r=[],n=e.body;if(!n||n.err){var i=t.data||{},o=i.si||i.ni||i.t||i.pubId,s=n?n.err.drt:18e5;E[o]={productId:i.pi,timestamp:(new Date).getTime()},setTimeout((function(){E[o]&&delete E[o]}),s),(0,c.logWarn)("[GumGum] Please check the implementation for ".concat(o))}var u=Object.assign({ad:{price:0,id:0,markup:"",width:0,height:0},pag:{pvid:0},meta:{adomain:[],mediaType:""}},n),l=u.ad,f=l.price,g=l.id,m=l.markup,b=l.cur,y=l.width,I=l.height,A=l.maxw,S=l.maxh,T=u.cw,w=u.pag.pvid,C=u.jcsi,x=u.meta,P=x.adomain,D=x.mediaType,R=t.data||{},j=R.pi,k=6===j||7===j?d.VIDEO:d.BANNER,N=3===j&&9===R.si,B={advertiserDomains:P||[],mediaType:D||k},U=(0,c.parseSizesInput)(t.sizes);if(A&&S)U=["".concat(A,"x").concat(S)];else if(5===j&&(0,p.includes)(U,"1x1"))U=["1x1"];else if(2===j&&(0,p.includes)(U,"1x1")){var M=t.sizes&&t.sizes.reduce((function(e,t){var r=(0,a.default)(t,2),n=r[0],i=r[1];return y!==n&&I!==i||e.push(t.join("x")),e}),[])||[];U=M.length?M:(0,c.parseSizesInput)(t.sizes)}var q=U[0].split("x"),V=(0,a.default)(q,2),L=V[0],F=V[1];return C&&(n.jcsi=h),_=w,g&&r.push(v(v({ad:T?O(T,Object.assign({},n,{bidRequest:t})):m},k===d.VIDEO&&{ad:m,vastXml:m}),{},{mediaType:k,cpm:N?.1:f,creativeId:g,currency:b||"USD",height:F,netRevenue:!0,requestId:t.id,ttl:60,width:L,meta:B})),r},getUserSyncs:function(e,t){return t.map((function(e){return e.body&&e.body.pxs&&e.body.pxs.scr||[]})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return{type:"f"===e.t?"iframe":"image",url:e.u}}))},supportedMediaTypes:y};(0,f.registerBidder)(T),(0,s.registerModule)("gumgumBidAdapter")},4645:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(5799)),o=n(r(8212)),a=n(r(9436)),s=n(r(5018)),d=n(r(4668)),c=r(8851),u=r(1779),l=r(6150),p=r(4627),f=r(4080),g=r(9084),v=r(1442),m=r(7343),b=r(8145),h=r(1794);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function _(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var A=30,O="id5id";var S="".concat(O,"_privacy");var T="html5",w="User ID - ID5 submodule: ",C="https://id5-sync.com/api/config/prebid",x=["pbjs-id5id","id5id.1st","id5id"],P=(0,g.getStorageManager)({moduleType:m.MODULE_TYPE_UID,moduleName:"id5Id"});var D={name:"id5Id",gvlid:131,decode:function(e,t){var r={};if(e&&"string"==typeof e.universal_uid){var n={id5id:{uid:e.universal_uid,ext:r=e.ext||r}};switch((0,u.deepAccess)(e,"ab_testing.result")){case"control":(0,u.logInfo)(w+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),(0,u.deepSetValue)(n,"id5id.ext.abTestingControlGroup",!0);break;case"error":(0,u.logError)(w+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":(0,u.logInfo)(w+"A/B Testing - user is NOT in the Control Group"),(0,u.deepSetValue)(n,"id5id.ext.abTestingControlGroup",!1)}return(0,u.logInfo)(w+"Decoded ID",n),n}},getId:function(e,t,r){if(ie(e)){if(pe(t)){return{callback:function(n){new L(e,t,r,v.uspDataHandler.getConsentData(),v.gppDataHandler.getConsentData()).execute().then((function(e){n(e)})).catch((function(e){(0,u.logError)(w+"getId fetch encountered an error",e),n()}))}}}(0,u.logInfo)(w+"Skipping ID5 local storage write because no consent given.")}},extendId:function(e,t,r){return pe(t)?(ce(ie(e)?e.params.partner:0),(0,u.logInfo)(w+"using cached ID",r),r):((0,u.logInfo)(w+"No consent given for ID5 local storage writing, skipping nb increment."),r)},eids:{id5id:{getValue:function(e){return e.uid},source:"id5-sync.com",atype:1,getUidExt:function(e){if(e.ext)return e.ext}}}};var R=new WeakSet,j=new WeakSet,k=new WeakSet,N=new WeakSet,B=new WeakSet,U=new WeakSet,M=new WeakSet,q=new WeakSet,V=new WeakSet,L=function(){function e(t,r,n,i,o){(0,s.default)(this,e),E(this,V),E(this,q),E(this,M),E(this,U),E(this,B),E(this,N),E(this,k),E(this,j),E(this,R),this.submoduleConfig=t,this.gdprConsentData=r,this.cacheIdObj=n,this.usPrivacyData=i,this.gppData=o}var t;return(0,d.default)(e,[{key:"execute",value:(t=(0,a.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_(this,B,K).call(this),!_(this,R,F).call(this)){e.next=14;break}return e.prev=2,e.next=5,_(this,j,G).call(this,t);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),(0,u.logError)(w+"Error while performing ID5 external module flow. Continuing with regular flow.",e.t0),e.abrupt("return",_(this,N,H).call(this,t));case 12:e.next=15;break;case 14:return e.abrupt("return",_(this,N,H).call(this,t));case 15:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return t.apply(this,arguments)})}]),e}();function F(){return"string"==typeof this.submoduleConfig.params.externalModuleUrl}function G(e){return z.apply(this,arguments)}function z(){return(z=(0,a.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(this.submoduleConfig.params.externalModuleUrl);case 2:return e.next=4,t;case 4:return r=e.sent,e.abrupt("return",_(this,k,W).call(this).fetchId5Id(r,this.submoduleConfig.params,(0,f.getRefererInfo)(),this.gdprConsentData,this.usPrivacyData,this.gppData));case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function W(){return window.id5Prebid&&window.id5Prebid.integration}function H(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,a.default)(i.default.mark((function e(t){var r,n,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return r=e.sent,e.next=5,_(this,U,Q).call(this,r.extensionsCall);case 5:return n=e.sent,e.next=8,_(this,M,$).call(this,r.fetchCall,n);case 8:return o=e.sent,e.abrupt("return",_(this,V,te).call(this,o));case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function K(){return J.apply(this,arguments)}function J(){return(J=(0,a.default)(i.default.mark((function e(){var t,r,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.submoduleConfig.params.configUrl||C,e.next=3,(0,l.fetch)(t,{method:"POST",body:JSON.stringify(this.submoduleConfig)});case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("Error while calling config endpoint: ",r);case 6:return e.next=8,r.json();case 8:return n=e.sent,(0,u.logInfo)(w+"config response received from the server",n),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Q(e){return X.apply(this,arguments)}function X(){return(X=(0,a.default)(i.default.mark((function e(t){var r,n,o,a,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",void 0);case 2:return r=t.url,n=t.method||"GET",o="GET"===n?void 0:JSON.stringify(t.body||{}),e.next=7,(0,l.fetch)(r,{method:n,body:o});case 7:if((a=e.sent).ok){e.next=10;break}throw new Error("Error while calling extensions endpoint: ",a);case 10:return e.next=12,a.json();case 12:return s=e.sent,(0,u.logInfo)(w+"extensions response received from the server",s),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.default)(i.default.mark((function e(t,r){var n,o,a,s,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,o=t.overrides||{},a=JSON.stringify(I(I(I({},_(this,q,ee).call(this)),o),{},{extensions:r})),e.next=5,(0,l.fetch)(n,{method:"POST",body:a,credentials:"include"});case 5:if((s=e.sent).ok){e.next=8;break}throw new Error("Error while calling fetch endpoint: ",s);case 8:return e.next=10,s.json();case 10:return d=e.sent,(0,u.logInfo)(w+"fetch response received from the server",d),e.abrupt("return",d);case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ee(){var e,t,r,n=this.submoduleConfig.params,i=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,o=(0,f.getRefererInfo)(),a=this.cacheIdObj&&this.cacheIdObj.signature?this.cacheIdObj.signature:(x.forEach((function(t){P.getCookie(t)&&(e=(0,u.safeJSONParse)(P.getCookie(t))||e)})),e&&e.signature||""),s=(t=n.partner,r=ce(t),se(t,0),r),d={partner:n.partner,gdpr:i,nbPage:s,o:"pbjs",tml:o.topmostLocation,ref:o.ref,cu:o.canonicalUrl,top:o.reachedTop?1:0,u:o.stack[0]||window.location.href,v:"8.34.0",storage:this.submoduleConfig.storage,localStorage:P.localStorageIsEnabled()?1:0};!i||void 0===this.gdprConsentData.consentString||(0,u.isEmpty)(this.gdprConsentData.consentString)||(0,u.isEmptyStr)(this.gdprConsentData.consentString)||(d.gdpr_consent=this.gdprConsentData.consentString),void 0===this.usPrivacyData||(0,u.isEmpty)(this.usPrivacyData)||(0,u.isEmptyStr)(this.usPrivacyData)||(d.us_privacy=this.usPrivacyData),this.gppData&&(d.gpp_string=this.gppData.gppString,d.gpp_sid=this.gppData.applicableSections),void 0===a||(0,u.isEmptyStr)(a)||(d.s=a),void 0===n.pd||(0,u.isEmptyStr)(n.pd)||(d.pd=n.pd),void 0===n.provider||(0,u.isEmptyStr)(n.provider)||(d.provider=n.provider);var c=n.abTesting||{enabled:!1};return c.enabled&&(d.ab_testing={enabled:!0,control_group_pct:c.controlGroupPct}),d}function te(e){try{e.privacy&&le(S,JSON.stringify(e.privacy),A)}catch(e){(0,u.logError)(w+"Error while writing privacy info into local storage.",e)}return e}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new b.GreedyPromise((function(e,r){if(window.id5Prebid)e();else try{(0,h.loadExternalScript)(t,"id5",e)}catch(e){r(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){if(!e||!e.params||!e.params.partner)return(0,u.logError)(w+"partner required to be defined"),!1;var t=e.params.partner;if("string"==typeof t||t instanceof String){var r=parseInt(t);if(isNaN(r)||r<0)return(0,u.logError)(w+"partner required to be a number or a String parsable to a positive integer"),!1;e.params.partner=r}else if("number"!=typeof t)return(0,u.logError)(w+"partner required to be a number or a String parsable to a positive integer"),!1;return e.storage&&e.storage.type&&e.storage.name?(e.storage.type!==T&&(0,u.logWarn)(w+"storage type recommended to be '".concat(T,"'. In a future release this may become a strict requirement")),e.storage.name!==O&&(0,u.logWarn)(w+"storage name recommended to be '".concat(O,"'. In a future release this may become a strict requirement")),!0):((0,u.logError)(w+"storage required to be set"),!1)}function oe(e){return new Date(Date.now()+864e5*e).toUTCString()}function ae(e){return"".concat(O,"_").concat(e,"_nb")}function se(e,t){le(ae(e),t,A)}function de(e){var t=ue(ae(e));return t?parseInt(t):0}function ce(e){var t=de(e)+1;return se(e,t),t}function ue(e){var t=P.getDataFromLocalStorage("".concat(e,"_exp"));return""===t||t&&new Date(t).getTime()-Date.now()>0?P.getDataFromLocalStorage(e):(P.removeDataFromLocalStorage(e),null)}function le(e,t,r){P.setDataInLocalStorage("".concat(e,"_exp"),oe(r)),P.setDataInLocalStorage("".concat(e),t)}function pe(e){var t=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,r=(0,u.deepAccess)(e,"vendorData.purpose.consents.1"),n=(0,u.deepAccess)(e,"vendorData.vendor.consents.".concat(131..toString()));return!!(!t||r&&n)}(0,p.submodule)("userId",D),(0,c.registerModule)("id5IdSystem")},3003:(e,t,r)=>{"use strict";var n=r(4319);var i=r(8851),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,r&&r.set(e,i);return i}(r(1779)),a=r(6150),s=r(4627),d=r(9084),c=r(7343),u=r(1442);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var p="identityLink",f=(0,d.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:p});var g="_lr_env",v={name:p,gvlid:97,decode:function(e){return{idl_env:e}},getId:function(e,t){var r=e&&e.params||{};if(r&&"string"==typeof r.pid){var n=t&&"boolean"==typeof t.gdprApplies&&t.gdprApplies?1:0,i=n?t.consentString:"";if(!n||i&&""!==i){var a=u.gppDataHandler.getConsentData(),s=!(!a||!a.gppString)&&a.gppString,d=!!(a&&a.gppString&&a.applicableSections.length>0&&-1!==a.applicableSections[0])&&a.applicableSections[0],c=s&&d,l="https://api.rlcdn.com/api/identity/envelope?pid=".concat(r.pid).concat(n?"&ct=4&cv="+i:"").concat(c?"&gpp="+s+"&gpp_sid="+d:"");return{callback:function(e){if(window.ats&&window.ats.retrieveEnvelope)o.logInfo("identityLink: ATS exists!"),window.ats.retrieveEnvelope((function(t){t?(o.logInfo("identityLink: An envelope can be retrieved from ATS!"),b(!0),e(JSON.parse(t).envelope)):m(l,e,r)}));else{var t=h();t?(o.logInfo("identityLink: LiveRamp envelope successfully retrieved from storage!"),e(JSON.parse(t).envelope)):m(l,e,r)}}}}o.logInfo("identityLink: Consent string is required to call envelope API.")}else o.logError("identityLink: requires partner id to be defined")},eids:{idl_env:{source:"liveramp.com",atype:3}}};function m(e,t,r){var n,i={success:function(e){var r;if(e)try{r=JSON.parse(e)}catch(e){o.logInfo(e)}t(r&&r.envelope?r.envelope:"")},error:function(e){o.logInfo("identityLink: identityLink: ID fetch encountered an error",e),t()}};r.notUse3P||f.getCookie("_lr_retry_request")||((n=new Date).setTime(n.getTime()+36e5),f.setCookie("_lr_retry_request","true",n.toUTCString()),o.logInfo("identityLink: A 3P retrieval is attempted!"),b(!1),(0,a.ajax)(e,i,void 0,{method:"GET",withCredentials:!0}))}function b(e){var t=new Date;t.setTime(t.getTime()+2592e6),f.setCookie("_lr_env_src_ats",e,t.toUTCString())}function h(){var e=f.getCookie(g)||f.getDataFromLocalStorage(g);return e?window.atob(e):void 0}(0,s.submodule)("userId",v),(0,i.registerModule)("identityLinkIdSystem")},6038:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o=n(r(147)),a=n(r(8212)),s=n(r(4319)),d=r(8851),c=r(1779),u=r(6613),l=r(6522),p=n(r(5404)),f=r(9084),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),v=r(9635),m=r(43),b=r(4785),h=r(9723),y=r(9558),I=r(2039);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T="ix",w="roundel",C=[u.BANNER,u.VIDEO,u.NATIVE],x=[144,144],P={JPY:1},D={PBJS:"p",IX:"x"},R={BID_SIZE_INVALID_FORMAT:1,BID_SIZE_NOT_INCLUDED:2,PROPERTY_NOT_INCLUDED:3,SITE_ID_INVALID_VALUE:4,BID_FLOOR_INVALID_FORMAT:5,IX_FPD_EXCEEDS_MAX_SIZE:6,EXCEEDS_MAX_SIZE:7,PB_FPD_EXCEEDS_MAX_SIZE:8,VIDEO_DURATION_INVALID:9};var j={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},k={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","utiq.com":"","criteo.com":"","euid.eu":"","intimatemerger.com":"","33across.com":"","liveintent.indexexchange.com":"","google.com":""},N=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],B=["mimes","minduration","maxduration"],U=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],M="ixdiag",q="".concat(T,"_features");var V=!1,L=(0,f.getStorageManager)({bidderCode:T});var F={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat"],featureToggles:{},isFeatureEnabled:function(e){return(0,c.deepAccess)(this.featureToggles,"features.".concat(e,".activated"),!1)},getFeatureToggles:function(){if(L.localStorageIsEnabled()){var e=(0,c.safeJSONParse)(L.getDataFromLocalStorage(q));(0,c.deepAccess)(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,r=new Date,n=(0,c.deepAccess)(t,"ext.features");n&&(this.featureToggles={expiry:r.setHours(r.getHours()+1),features:n},L.localStorageIsEnabled()&&L.setDataInLocalStorage(q,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},L.localStorageIsEnabled()&&L.removeDataFromLocalStorage(q)}};var G=0,z="",W="",H=!1,Y=2;function K(e){var t=Q(e,u.VIDEO),r=(0,c.deepAccess)(e,"mediaTypes.video"),n=(0,c.deepAccess)(e,"params.video");if(te(r,n).length)return{};t.video=n?(0,c.deepClone)(e.params.video):{};var i=(0,c.deepAccess)(e,"ortb2Imp.ext.tid");for(var o in i&&(0,c.deepSetValue)(t,"ext.tid",i),function(e,t){if((0,c.deepAccess)(t,"mediaTypes.video.context")===b.OUTSTREAM){var r=(0,c.deepAccess)(t,"mediaTypes.video.renderer");if(r||(r=(0,c.deepAccess)(t,"renderer")),(0,c.deepAccess)(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(r&&"object"===(0,s.default)(r)){if(void 0!==r.url){var n="";try{n=new URL(r.url).hostname}catch(e){return}n.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=r.url}}else e.displaymanager="ix"}}(t,e),de(t,e),r)-1===U.indexOf(o)||t.video.hasOwnProperty(o)||(t.video[o]=r[o]);if(t.video.minduration>t.video.maxduration)return(0,c.logError)("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]"),{bidder:T,code:R.VIDEO_DURATION_INVALID}),{};var a=n&&n.context||r&&r.context;if(function(e){e.video.hasOwnProperty("plcmt")&&(!(0,c.isInteger)(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&((0,c.logWarn)("IX Bid Adapter: video.plcmt [".concat(e.video.plcmt,"] must be an integer between 1-4 inclusive")),delete e.video.plcmt)}(t),a&&!t.video.hasOwnProperty("placement")&&(a===b.INSTREAM?t.video.placement=1:a===b.OUTSTREAM?(0,c.deepAccess)(n,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,H=!0):(0,c.logWarn)("IX Bid Adapter: Video context '".concat(a,"' is not supported"))),!t.video.w||!t.video.h){var d=re((0,c.deepAccess)(t,"video.playerSize"))||re((0,c.deepAccess)(e,"params.size"));if(!d)return(0,c.logWarn)("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=d[0],t.video.h=d[1]}return X(e,t,u.VIDEO),t}function J(e){var t=Q(e,u.NATIVE),r=e.nativeOrtbRequest;r.eventtrackers=[{event:1,methods:[1,2]}],r.privacy=1,t.native={request:JSON.stringify(r),ver:"1.2"};var n=(0,c.deepAccess)(e,"ortb2Imp.ext.tid");return n&&(0,c.deepSetValue)(t,"ext.tid",n),de(t,e),X(e,t,u.NATIVE),t}function Q(e,t){var r={};if(r.id=e.bidId,r.ext={},Ie()&&(0,c.deepAccess)(e,"params.externalId")&&(0,c.deepSetValue)(r,"ext.externalID",e.params.externalId),(0,c.deepAccess)(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case u.BANNER:(0,c.deepSetValue)(r,"ext.siteID",e.params.banner.siteId.toString());break;case u.VIDEO:(0,c.deepSetValue)(r,"ext.siteID",e.params.video.siteId.toString());break;case u.NATIVE:(0,c.deepSetValue)(r,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&(0,c.deepSetValue)(r,"ext.siteID",e.params.siteId.toString());return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(0,c.deepSetValue)(r,"ext.sid",String(e.params.id)),r}function X(e,t,r){var n=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(n={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),(0,c.isFn)(e.getFloor)){var o="*",a="*";if(r&&(0,c.contains)(C,r)){var s=t[r];o=r,a=[s.w,s.h]}try{i=e.getFloor({mediaType:o,size:a})}catch(e){(0,c.logWarn)("priceFloors module call getFloor failed, error : ",e)}}var d=!1;i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,(0,c.deepSetValue)(t,"ext.fl",D.PBJS),d=!0):n&&(t.bidfloor=n.floor,t.bidfloorcur=n.currency,(0,c.deepSetValue)(t,"ext.fl",D.IX),d=!0),d&&(r==u.BANNER?((0,c.deepSetValue)(t,"banner.ext.bidfloor",t.bidfloor),(0,c.deepSetValue)(t,"banner.ext.fl",t.ext.fl)):r==u.VIDEO?((0,c.deepSetValue)(t,"video.ext.bidfloor",t.bidfloor),(0,c.deepSetValue)(t,"video.ext.fl",t.ext.fl)):((0,c.deepSetValue)(t,"native.ext.bidfloor",t.bidfloor),(0,c.deepSetValue)(t,"native.ext.fl",t.ext.fl)))}function $(e,t,r){var n={},i=!(!(0,c.deepAccess)(e,"exp")||!(0,c.isInteger)(e.exp)),o=(0,c.deepAccess)(e,"dealid")||(0,c.deepAccess)(e,"ext.dealid");P.hasOwnProperty(t)?n.cpm=e.price/P[t]:n.cpm=e.price/100,n.requestId=e.impid,o&&(n.dealId=o),n.netRevenue=true,n.currency=t,n.creativeId=e.hasOwnProperty("crid")?e.crid:"-",e.mtype!=Y||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(n.vastUrl=e.ext.vasturl):n.vastXml=e.adm;var a=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{a=JSON.parse(e.adm)}catch(e){(0,c.logWarn)("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||e.mtype==Y?(n.width=r.video.w,n.height=r.video.h,n.mediaType=u.VIDEO,n.mediaTypes=r.mediaTypes,n.ttl=i?e.exp:3600):a&&a.native?(n.native={ortb:a.native},n.width=e.w?e.w:1,n.height=e.h?e.h:1,n.mediaType=u.NATIVE,n.ttl=i?e.exp:3600):(n.ad=e.adm,n.width=e.w,n.height=e.h,n.mediaType=u.BANNER,n.ttl=i?e.exp:300),n.meta={},n.meta.networkId=(0,c.deepAccess)(e,"ext.dspid"),n.meta.brandId=(0,c.deepAccess)(e,"ext.advbrandid"),n.meta.brandName=(0,c.deepAccess)(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(n.meta.advertiserDomains=e.adomain),n}function Z(e){return Array.isArray(e)&&2===e.length&&(0,c.isInteger)(e[0])&&(0,c.isInteger)(e[1])}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Z(e))return e[0]===t[0]&&e[1]===t[1];for(var r=0;r<e.length;r++)if(e[r][0]===t[0]&&e[r][1]===t[1])return!0;return!1}function te(e,t){var r=[];e||(0,c.logWarn)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");var n,i=O(B);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=e&&e.hasOwnProperty(o),s=t&&t.hasOwnProperty(o);a||s||r.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){i.e(e)}finally{i.f()}var d=e&&e.hasOwnProperty("protocol"),u=e&&e.hasOwnProperty("protocols"),l=t&&t.hasOwnProperty("protocol"),p=t&&t.hasOwnProperty("protocols");return d||u||l||p||r.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),r}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Z(e)?e:!!Z(e[0])&&e[0]}function ne(e,t,r){if(e)return A(A({},(0,v.find)(r,(function(t){return t.bidId===e}))),(0,v.find)(t,(function(t){return t.id===e})))}function ie(e,t,r,n){var i="https://htlb.casalemedia.com/openrtb/pbjs",o=function(e){var t=[],r={};if((0,c.isArray)(e)){var n,i=O(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;k.hasOwnProperty(o.source)&&(0,c.deepAccess)(o,"uids.0")&&(r[o.source]=!0,""!=k[o.source]&&(o.uids[0].ext={rtiPartner:k[o.source]}),delete o.uids[0].atype,t.push(o))}}catch(e){i.e(e)}finally{i.f()}}return{toSend:t,seenSources:r}}((0,c.deepAccess)(e,"0.userIdAsEids")),a=o.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){var r=window.headertag.getIdentityInfo();if(r&&"object"===(0,s.default)(r))for(var n in r)if(r.hasOwnProperty(n)){var i=r[n];!i.responsePending&&i.data&&"object"===(0,s.default)(i.data)&&Object.keys(i.data).length&&!t.seenSources[i.data.source]&&e.push(i.data)}}(a,o),t&&t.bidderCode===w&&!o.seenSources["liveramp.com"])return[];var d=[],u=function(e){var t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=L.localStorageIsEnabled(),t.ext.ixdiag.msd=0,t.ext.ixdiag.msi=0,t.imp=[],t.at=1,t}(e);u=function(e,t){t.length>0&&(e.ext.features={},t.forEach((function(t){e.ext.features[t]={activated:F.isFeatureEnabled(t)}})));return e}(u,F.REQUESTED_FEATURE_TOGGLES);var p=function(e,t){var r,n=e.map((function(e){return e.adUnitCode})).filter((function(e,t,r){return r.indexOf(e)===t})),i={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"8.34.0",userIds:ue(e[0]),url:window.location.href.split("?")[0],vpd:H,ae:t},o=O(n);try{var a=function(){var t=r.value,n=e.filter((function(e){return e.adUnitCode===t}))[0];(0,c.deepAccess)(n,"mediaTypes")&&(Object.keys(n.mediaTypes).length>1&&i.mfu++,(0,c.deepAccess)(n,"mediaTypes.native")&&i.nu++,(0,c.deepAccess)(n,"mediaTypes.banner")&&i.bu++,"outstream"===(0,c.deepAccess)(n,"mediaTypes.video.context")&&(i.ou++,ye(n)&&(i.ren=!0)),"instream"===(0,c.deepAccess)(n,"mediaTypes.video.context")&&i.iu++,i.allu++)};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return i}(e,(0,c.deepAccess)(t,"fledgeEnabled"));for(var f in p)u.ext.ixdiag[f]=p[f];u=function(e,t,r,n,i){var o,a,s=(0,c.deepAccess)(t,"timeout");s&&(e.ext.ixdiag.tmax=s);l.config.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=l.config.getConfig("userSync").syncsPerBidder);var d=function(){if(!L.localStorageIsEnabled())return;var e,t={};try{e=JSON.parse(L.getDataFromLocalStorage(M)||"{}")}catch(e){return(0,c.logError)("ix can not read ixdiag from localStorage."),null}return Object.keys(e).forEach((function(r){Object.keys(e[r]).forEach((function(n){"number"==typeof e[r][n]&&(t[n]=t[n]?t[n]+e[r][n]:e[r][n])}))})),t}();(0,c.isEmpty)(d)||(e.ext.ixdiag.err=d);e.ext.ixdiag.imps=Object.keys(r).length,e.source={tid:null==t||null===(o=t.ortb2)||void 0===o||null===(a=o.source)||void 0===a?void 0:a.tid},n[0].schain&&(e.source.ext={},e.source.ext.schain=n[0].schain);i.length>0&&(e.user={},e.user.eids=i);document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer);return e}(u,t,r,e,a),u=function(e,t){if(t){t.gdprConsent&&((z=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:z.gdprApplies?1:0}}),z.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:z.consentString||""},z.hasOwnProperty("addtlConsent")&&z.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:z.addtlConsent}))),t.uspConsent&&((0,c.deepSetValue)(e,"regs.ext.us_privacy",t.uspConsent),W=t.uspConsent);var r=(0,c.deepAccess)(t,"refererInfo.page");r&&(e.site.page=r),t.gppConsent&&((0,c.deepSetValue)(e,"regs.gpp",t.gppConsent.gppString),(0,c.deepSetValue)(e,"regs.gpp_sid",t.gppConsent.applicableSections))}l.config.getConfig("coppa")&&(0,c.deepSetValue)(e,"regs.coppa",1);return e}(u,t);var g={};e[0].params.siteId&&(G=e[0].params.siteId,g.s=G);for(var v=Object.keys(r),m=!1,b=0;b<v.length&&!(d.length>=4);b++){u=oe(r,v,u,b);var h=(0,c.deepAccess)(t,"ortb2")||{},y=A({},h.site||h.context);y.page=ae(t,r);var I=A({},h.user);(0,c.isEmpty)(h)||m||((u=se(t,u,h,y,I)).site=(0,c.mergeDeep)({},u.site,y),u.user=(0,c.mergeDeep)({},u.user,I),m=!0),u=ce(r,u,v,b,g,i);var E=b===v.length-1;if(u=Se(u=Oe(u=we(u))),E){var _="".concat(i,"?");0!==G&&(_+="s=".concat(G)),Ie()&&(_+=0!==G?"&":"",_+="p=".concat(l.config.getConfig("exchangeId"))),d.push({method:"POST",url:_,data:(0,c.deepClone)(u),option:{contentType:"text/plain"},validBidRequests:e}),u.imp=[],u.ext.ixdiag.msd=0,u.ext.ixdiag.msi=0,m=!1}}return d}function oe(e,t,r,n){var i=e[t[n]],a=i.missingCount,s=void 0===a?0:a,d=i.missingImps,l=void 0===d?[]:d,p=i.ixImps,f={ixImps:void 0===p?[]:p,missingBannerImpressions:l},g=Object.keys(f).map((function(e){return f[e]})).filter((function(e){return Array.isArray(e)})).reduce((function(e,t){return e.concat.apply(e,(0,o.default)(t))}),[]),v=e[t[n]].gpid,m=e[t[n]].dfp_ad_unit_code,b=e[t[n]].tid,h=e[t[n]].sid,y=e[t[n]].ae,I=g.filter((function(e){return u.BANNER in e})),E=g.filter((function(e){return!(u.BANNER in e)}));if(I.length>0){var _=I.reduce((function(e,t){return e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e}),{});for(var A in _){for(var O=_[A],S=O[0],T=S.id,w=S.banner.topframe,C=(0,c.deepAccess)(O[0],"ext.externalID"),x={id:T,banner:{topframe:w,format:O.map((function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}}))}},P=0;P<x.banner.format.length;P++)null!=x.banner.format[P].ext&&(null!=x.banner.format[P].ext.sid&&delete x.banner.format[P].ext.sid,null!=x.banner.format[P].ext.externalID&&delete x.banner.format[P].ext.externalID),"bidfloor"in O[P]&&(x.banner.format[P].ext.bidfloor=O[P].bidfloor),"{}"===JSON.stringify(x.banner.format[P].ext)&&delete x.banner.format[P].ext;var D=e[t[n]].pos;(0,c.isInteger)(D)&&(x.banner.pos=D),(m||v||b||h||y||C)&&(x.ext={},x.ext.dfp_ad_unit_code=m,x.ext.gpid=v,x.ext.tid=b,x.ext.sid=h,x.ext.externalID=C,1==y&&(x.ext.ae=1)),"bidfloor"in O[0]&&(x.bidfloor=O[0].bidfloor),"bidfloorcur"in O[0]&&(x.bidfloorcur=O[0].bidfloorcur);var R=e[t[n]].adUnitFPD;R&&(0,c.deepSetValue)(x,"ext.data",R),r.imp.push(x),r.ext.ixdiag||(r.ext.ixdiag={}),r.ext.ixdiag.msd+=s,r.ext.ixdiag.msi+=l.length}}return E.length>0&&E.forEach((function(e){if(v&&(0,c.deepSetValue)(e,"ext.gpid",v),r.imp.length>0){var t=!1;r.imp.forEach((function(n,i){e.id===n.id&&u.VIDEO in e?(n.video=e.video,n.video.ext=Object.assign({},e.video.ext,e.ext),(0,c.deepAccess)(n,"video.ext.bidfloor",!1)&&(0,c.deepAccess)(n,"bidfloor",!1)&&n.video.ext.bidfloor<n.bidfloor&&(n.bidfloor=n.video.ext.bidfloor),!(0,c.deepAccess)(n,"ext.siteID",!1)&&(0,c.deepAccess)(e,"video.ext.siteID")&&((0,c.deepSetValue)(n,"ext.siteID",e.video.ext.siteID),(0,c.deepSetValue)(r,"ext.ixdiag.usid",!0)),t=!0):e.id===n.id&&u.NATIVE in e&&(n.native=e.native,n.native.ext=Object.assign({},e.native.ext,e.ext),(0,c.deepAccess)(n,"native.ext.bidfloor",!1)&&(0,c.deepAccess)(n,"bidfloor",!1)&&n.native.ext.bidfloor<n.bidfloor&&(n.bidfloor=n.native.ext.bidfloor),!(0,c.deepAccess)(n,"ext.siteID",!1)&&(0,c.deepAccess)(e,"native.ext.siteID",!1)&&((0,c.deepSetValue)(n,"ext.siteID",e.native.ext.siteID),(0,c.deepSetValue)(r,"ext.ixdiag.usid",!0)),t=!0)})),t||r.imp.push(e)}else r.imp.push(e)})),r}function ae(e,t){var r=e&&e.bidderCode||"ix",n=l.config.getConfig(r),i="";if((i=(0,c.deepAccess)(e,"ortb2.site.page")?e.ortb2.site.page:(0,c.deepAccess)(e,"refererInfo.page"),n)&&"object"===(0,s.default)(n.firstPartyData))return function(e,t,r,n){var i,o=Object.keys(n),a="",s="?#",d=n[o[0]].adUnitCode,u=function(e){if(d&&e&&e[d]>=0){var t="".concat(e[d]),r=s.match(/\#PD:\S+?\#/i);r&&r[0]?s=s.replace(r[0],"".concat(r[0],"HVP:").concat(t,"#")):a="HVP:".concat(t)}};try{i=new URL(t)}catch(r){(0,c.logWarn)("IX Bid Adapter: Invalid URL set in ortb2.site.page: ".concat(t,". Using referer URL instead.")),i=new URL((0,c.deepAccess)(e,"refererInfo.page"))}for(var l in r)"HVP"===l.toUpperCase()?u(r[l]):"PD"===l.toUpperCase()&&a?s+="".concat(l,":").concat(r[l],"#").concat(a,"#"):s+="".concat(l,":").concat(r[l],"#");return s=s.slice(0,-1),i.search="",i.toString()+s}(e,i,n.firstPartyData,t);return i}function se(e,t,r,n,i){if(t.ext.ixdiag.fpd=!0,Object.keys(n).forEach((function(e){-1===j.SITE.indexOf(e)&&delete n[e]})),Object.keys(i).forEach((function(e){-1===j.USER.indexOf(e)&&delete i[e]})),r.device){var o=A({},r.device.sua);(0,c.isEmpty)(o)||(0,c.deepSetValue)(t,"device.sua",o)}return r.hasOwnProperty("regs")&&!e.gppConsent&&(r.regs.hasOwnProperty("gpp")&&"string"==typeof r.regs.gpp&&(0,c.deepSetValue)(t,"regs.gpp",r.regs.gpp),r.regs.hasOwnProperty("gpp_sid")&&Array.isArray(r.regs.gpp_sid)&&(0,c.deepSetValue)(t,"regs.gpp_sid",r.regs.gpp_sid)),t}function de(e,t){var r=(0,c.deepAccess)(t,"ortb2Imp.ext.data");r&&(0,c.deepSetValue)(e,"ext.data",r)}function ce(e,t,r,n,i,o){var a=e[r[n]].pbadslot,s=e[r[n]].tagId,d=e[r[n]].adUnitCode,c=e[r[n]].divId;return(a||s||d||c)&&(t.ext.ixdiag.pbadslot=a,t.ext.ixdiag.tagid=s,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=c),t}function ue(e){var t=e.userId||{};return N.filter((function(e){return t[e]}))}function le(e,t){if(t)for(var r=0;r<e.length;r++){var n=e[r];if(t[0]===n[0]&&t[1]===n[1]){e.splice(r,1);break}}}function pe(e,t){var r=J(e);if(0!=Object.keys(r).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(r),t[e.adUnitCode].gpid=(0,c.deepAccess)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,c.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,c.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,c.deepAccess)(e,"params.tagId");var n=e.adUnitCode,i=document.getElementById(n)?n:(0,y.getGptSlotInfoForAdUnitCode)(n).divId;t[e.adUnitCode].adUnitCode=n,t[e.adUnitCode].divId=i}}function fe(e,t){var r=K(e);if(0!=Object.keys(r).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(r),t[e.adUnitCode].gpid=(0,c.deepAccess)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,c.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,c.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,c.deepAccess)(e,"params.tagId");var n=e.adUnitCode,i=document.getElementById(n)?n:(0,y.getGptSlotInfoForAdUnitCode)(n).divId;t[e.adUnitCode].adUnitCode=n,t[e.adUnitCode].divId=i}}function ge(e,t,r,n){var i=A(A({},{detectMissingSizes:!0}),l.config.getConfig("ix")),a=function(e){var t=Q(e,u.BANNER);t.banner={},t.adunitCode=e.adUnitCode;var r=(0,c.deepAccess)(e,"params.size");return r&&(t.banner.w=r[0],t.banner.h=r[1]),t.banner.topframe=(0,c.inIframe)()?0:1,X(e,t,u.BANNER),t}(e),s=i.largeFormatSizes||[],d=ee([].concat((0,o.default)((0,c.deepAccess)(e,"mediaTypes.banner.sizes")),(0,o.default)(s)),(0,c.deepAccess)(e,"params.size"));if(r.hasOwnProperty(e.adUnitCode)||(r[e.adUnitCode]={}),r[e.adUnitCode].gpid=(0,c.deepAccess)(e,"ortb2Imp.ext.gpid"),r[e.adUnitCode].dfp_ad_unit_code=(0,c.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),r[e.adUnitCode].tid=(0,c.deepAccess)(e,"ortb2Imp.ext.tid"),r[e.adUnitCode].pbadslot=(0,c.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),r[e.adUnitCode].tagId=(0,c.deepAccess)(e,"params.tagId"),r[e.adUnitCode].pos=(0,c.deepAccess)(e,"mediaTypes.banner.pos"),(0,c.deepAccess)(n,"fledgeEnabled")){var p=(0,c.deepAccess)(e,"ortb2Imp.ext.ae");p?(0,c.isInteger)(p)?r[e.adUnitCode].ae=p:(0,c.logWarn)("error setting auction environment flag - must be an integer"):1==(0,c.deepAccess)(n,"defaultForSlots")&&(r[e.adUnitCode].ae=1)}var f=(0,c.deepAccess)(e,"ortb2Imp.ext.data");f&&(r[e.adUnitCode].adUnitFPD=f);var g=(0,c.deepAccess)(e,"params.id");!g||"string"!=typeof g&&"number"!=typeof g||(r[e.adUnitCode].sid=String(g));var v=e.adUnitCode,m=document.getElementById(v)?v:(0,y.getGptSlotInfoForAdUnitCode)(v).divId;r[e.adUnitCode].adUnitCode=v,r[e.adUnitCode].divId=m,d&&(r[e.adUnitCode].hasOwnProperty("ixImps")||(r[e.adUnitCode].ixImps=[]),r[e.adUnitCode].ixImps.push(a)),i.hasOwnProperty("detectMissingSizes")&&i.detectMissingSizes&&function(e,t,r){if(t.hasOwnProperty(e.adUnitCode)){var n=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(n=t[e.adUnitCode].missingSizes),le(n,e.params.size),t[e.adUnitCode].missingSizes=n}else if((0,c.deepAccess)(e,"mediaTypes.banner.sizes")){var i=(0,c.deepClone)(e.mediaTypes.banner.sizes);le(i,e.params.size);var o={missingSizes:i,impression:r};t[e.adUnitCode]=o}}(e,t,a)}function ve(e,t,r){var n=(0,c.deepClone)(t);return n.banner.w=r[0],n.banner.h=r[1],X(e,n,u.BANNER),n}function me(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===T&&function(e){if(L.localStorageIsEnabled()){var t;try{t=JSON.parse(L.getDataFromLocalStorage(M)||"{}")}catch(e){(0,c.logWarn)("ix can not read ixdiag from localStorage.")}var r=new Date;if(Object.keys(t).map((function(e){var n=new Date(e);n.setDate(n.getDate()+7)-r<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===T){var n=r.toISOString().slice(0,10),i=e.arguments[1].code;i&&(t[n]=t[n]||{},Number(t[n][i])||(t[n][i]=0),t[n][i]++)}L.setDataInLocalStorage(M,JSON.stringify(t))}}(e)}function be(e){e.renderer.push((function(){var t=e.adUnitCode,r=document.getElementById(t)?t:(0,y.getGptSlotInfoForAdUnitCode)(t).divId;r?window.createIXPlayer(r,e):(0,c.logWarn)("IX Bid Adapter: adUnitCode: ".concat(r," not found on page."))}))}function he(e,t){var r=h.Renderer.install({id:e,url:t,loaded:!1});try{r.setRender(be)}catch(e){return(0,c.logWarn)("Prebid Error calling setRender on renderer",e),null}return t?r:((0,c.logWarn)("Outstream renderer URL not found"),null)}function ye(e){if("outstream"!==(0,c.deepAccess)(e,"mediaTypes.video.context"))return!1;var t=(0,c.deepAccess)(e,"mediaTypes.video.renderer");return t||(t=(0,c.deepAccess)(e,"renderer")),!!("object"!==(0,s.default)(t)||!t.url||!t.render)||t.backupOnly}function Ie(){var e=l.config.getConfig("exchangeId");return!("number"!=typeof e||!isFinite(e))||!("string"!=typeof e||""===e.trim()||!isFinite(Number(e)))}var Ee={code:T,gvlid:10,aliases:[{code:w,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:C,isBidRequestValid:function(e){V||(g.on(p.default.EVENTS.AUCTION_DEBUG,me),g.on(p.default.EVENTS.AD_RENDER_FAILED,me),V=!0);var t,r,n=(l.config.getConfig("ix")||{}).largeFormatSizes,i=(0,c.deepAccess)(e,"params.video"),o=(0,c.deepAccess)(e,"params.size"),a=(0,c.deepAccess)(e,"mediaTypes.banner.sizes"),s=(0,c.deepAccess)(e,"mediaTypes.video"),d=(0,c.deepAccess)(e,"mediaTypes.video.playerSize"),u=e.params.hasOwnProperty("bidFloor"),f=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!(0,c.contains)(C,e.mediaType))return(0,c.logWarn)("IX Bid Adapter: media type is not supported."),!1;if((0,c.deepAccess)(e,"mediaTypes.banner")&&!a)return!1;if(o){var v=re(o);if(!v)return(0,c.logError)("IX Bid Adapter: size has invalid format.",{bidder:T,code:R.BID_SIZE_INVALID_FORMAT}),!1;if(!(ee(e.sizes,v)||ee(d,v)||ee(a,v)||ee(n,v)))return(0,c.logError)("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:T,code:R.BID_SIZE_NOT_INCLUDED}),!1}if(!Ie()&&null==e.params.siteId)return(0,c.logError)("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return(0,c.logError)("IX Bid Adapter: siteId must be string or number type.",{bidder:T,code:R.SITE_ID_INVALID_VALUE}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return(0,c.logError)("IX Bid Adapter: siteId must valid value",{bidder:T,code:R.SITE_ID_INVALID_VALUE}),!1}if((u||f)&&!(u&&f&&(t=e.params.bidFloor,r=e.params.bidFloorCur,Boolean("number"==typeof t&&"string"==typeof r&&r.match(/^[A-Z]{3}$/)))))return(0,c.logError)("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:T,code:R.BID_FLOOR_INVALID_FORMAT}),!1;if(s&&i){var m=K(e).video,h=te(s,i);if((0,c.deepAccess)(e,"mediaTypes.video.context")===b.OUTSTREAM&&ye(e)&&m){var y=[(0,c.deepAccess)(m,"w"),(0,c.deepAccess)(m,"h")];if(!(y[0]>=x[0]&&y[1]>=x[1]))return(0,c.logError)("IX Bid Adapter: ".concat(y," is an invalid size for IX outstream renderer")),!1}if(h.length)return h.forEach((function(e){(0,c.logError)(e,{bidder:T,code:R.PROPERTY_NOT_INCLUDED})})),!1}return function(e){return void 0===(0,c.deepAccess)(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},resetSiteID:function(){G=0},buildRequests:function(e,t){var r=[],n={},i={},a={},s={};for(var d in F.getFeatureToggles(),e.forEach((function(e){var r=Object.keys((0,c.deepAccess)(e,"mediaTypes",{}));for(var o in r)switch(r[o]){case u.BANNER:ge(e,s,n,t);break;case u.VIDEO:fe(e,i);break;case u.NATIVE:pe(e,a);break;default:(0,c.logWarn)("IX Bid Adapter: ad unit mediaTypes ".concat(o," is not supported"))}})),s)if(s.hasOwnProperty(d)){var l=s[d].missingSizes;n.hasOwnProperty(d)||(n[d]={}),n[d].hasOwnProperty("missingImps")||(n[d].missingImps=[]),n[d].hasOwnProperty("missingCount")||(n[d].missingCount=0);for(var p=s[d].impression,f=0;f<l.length;f++){var g=ve(e[0],p,l[f]);n[d].missingImps.push(g),n[d].missingCount++}}var v=[];return Object.keys(n).length>0&&v.push(n),Object.keys(i).length>0&&v.push(i),Object.keys(a).length>0&&v.push(a),F.isFeatureEnabled("pbjs_enable_multiformat")?r.push.apply(r,(0,o.default)(ie(e,t,Ae(v)))):(Object.keys(n).length>0&&r.push.apply(r,(0,o.default)(ie(e,t,n))),Object.keys(i).length>0&&r.push.apply(r,(0,o.default)(ie(e,t,i))),Object.keys(a).length>0&&r.push.apply(r,(0,o.default)(ie(e,t,a)))),r},interpretResponse:function(e,t){var r=[],n=null,i=(0,c.deepAccess)(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(F.setFeatureToggles(e),!e.hasOwnProperty("body"))return r;for(var o=e.body,a=o.seatbid||[],d=0;d<a.length;d++)if(a[d].hasOwnProperty("bid")){for(var l=a[d].bid,p=t.data,f=0;f<l.length;f++){var g=ne(l[f].impid,p.imp,t.validBidRequests);if((n=$(l[f],o.cur,g)).mediaType===u.VIDEO&&ye(g)){var v=(0,c.deepAccess)(o,"ext.videoplayerurl");if(v&&(n.renderer=he(l[f].bidId,v),!n.renderer))continue}r.push(n)}if((0,c.deepAccess)(p,"ext.ixdiag.err")&&L.localStorageIsEnabled())try{L.removeDataFromLocalStorage(M)}catch(e){(0,c.logError)("ix can not clear ixdiag from localStorage.")}}if(!(Array.isArray(i)&&i.length>0))return r;i=i.filter((function(e){return!!function(e){return"object"===(0,s.default)(e)&&null!==e}(e)||((0,c.logWarn)("Malformed auction config detected:",e),!1)}));try{return{bids:r,fledgeAuctionConfigs:i}}catch(e){return(0,c.logWarn)("Error attaching AuctionConfigs",e),r}},transformBidParams:function(e,t){return(0,I.convertTypes)({siteID:"number"},e)},getUserSyncs:function(e,t){var r=[],n=null;if(t.length>0&&(n=(0,c.deepAccess)(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==n&&0==n)return[];if(e.iframeEnabled)r.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var i=null;l.config.getConfig("userSync")&&(i=l.config.getConfig("userSync").syncsPerBidder),0===i&&(i=n),i=n&&(0===i||i)?n>i?i:n:1;for(var o=0;o<i;o++)r.push({type:"image",url:_e(i,o)})}return r}};function _e(e,t){var r="",n="0";return z&&z.hasOwnProperty("gdprApplies")&&(n=z.gdprApplies?"1":"0"),z&&z.hasOwnProperty("consentString")&&(r=z.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==G?"&site_id="+G.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+n+"&gdpr_consent="+r+"&us_privacy="+(W||"")}function Ae(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(r){Object.keys(t).includes(r)?t[r].hasOwnProperty("ixImps")&&e[r].hasOwnProperty("ixImps")?t[r].ixImps=[].concat((0,o.default)(t[r].ixImps),(0,o.default)(e[r].ixImps)):t[r].hasOwnProperty("missingImps")&&e[r].hasOwnProperty("missingImps")?t[r].missingImps=[].concat((0,o.default)(t[r].missingImps),(0,o.default)(e[r].missingImps)):e[r].hasOwnProperty("ixImps")?t[r].ixImps=e[r].ixImps:e[r].hasOwnProperty("missingImps")&&(t[r].missingImps=e[r].missingImps):t[r]=e[r]}))})),t}function Oe(e){return e.imp.forEach((function(t,r){var n=t.ext;if(null==n)return e;Te(t)<2||Object.keys(n).forEach((function(i){if(u.BANNER in t){var o=t.banner.ext;if(void 0!==o&&void 0!==o[i]&&o[i]==n[i]&&delete e.imp[r].banner.ext[i],void 0!==t.banner.format)for(var a=0;a<t.banner.format.length;a++)null!=t.banner.format[a].ext&&null!=t.banner.format[a].ext[i]&&t.banner.format[a].ext[i]==n[i]&&delete e.imp[r].banner.format[a].ext[i]}if(u.VIDEO in t){var s=t.video.ext;void 0!==s&&void 0!==s[i]&&s[i]==n[i]&&delete e.imp[r].video.ext[i]}if(u.NATIVE in t){var d=t.native.ext;void 0!==d&&void 0!==d[i]&&d[i]==n[i]&&delete e.imp[r].native.ext[i]}}))})),e}function Se(e){return e.imp.forEach((function(t,r){if(null==t.ext)return e;if(!(Te(t)<2)){if(u.BANNER in t){var n=t.banner.ext;if(void 0!==n&&void 0!==n.siteID&&delete e.imp[r].banner.ext.siteID,void 0!==t.banner.format)for(var i=0;i<t.banner.format.length;i++)void 0!==t.banner.format[i].ext&&void 0!==t.banner.format[i].ext.siteID&&((0,c.deepSetValue)(e.imp[r],"ext.siteID",t.banner.format[i].ext.siteID),(0,c.deepSetValue)(e,"ext.ixdiag.usid",!0),delete e.imp[r].banner.format[i].ext.siteID)}if(u.VIDEO in t){var o=t.video.ext;void 0!==o&&void 0!==o.siteID&&delete e.imp[r].video.ext.siteID}if(u.NATIVE in t){var a=t.native.ext;void 0!==a&&void 0!==a.siteID&&delete e.imp[r].native.ext.siteID}}})),e}function Te(e){var t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}function we(e){return null==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}(0,m.registerBidder)(Ee),(0,d.registerModule)("ixBidAdapter")},9248:(e,t,r)=>{"use strict";var n,i=r(8851),o=r(4627),a=r(6522),s=r(6150),d=r(1779),c=r(9635),u="jwplayer",l=u+".com",p={},f={},g=0,v={name:u,getBidRequestData:function(e,t){g=0,I(e.adUnits||(0,i.getGlobal)().adUnits,e.ortb2Fragments),g<=0?t():n=t},init:function(e,t){return!0}};function m(e){var t=e.mediaIDs;t&&t.forEach((function(e){b(e)}))}function b(e){var t=(0,s.ajaxBuilder)();f[e]=null,t("https://cdn.".concat(l,"/v2/media/").concat(e),{success:function(t){var r=function(e){var t;try{var r=JSON.parse(e);if(!r)throw"Empty response";var n=r.playlist;if(!n||!n.length)throw"Empty playlist";t=n[0].jwpseg}catch(e){(0,d.logError)(e)}return t}(t);h(r,e),y(e,!!r)},error:function(){(0,d.logError)("failed to retrieve targeting information"),y(e,!1)}})}function h(e,t){e&&t&&(p[t]=e)}function y(e,t){var r=f[e];r&&(r(t?_(e):{mediaID:e}),g--),delete f[e],g>0||n&&(n(),n=null)}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,d.deepAccess)(t.global,"site.ext.data.jwTargeting");e.forEach((function(e){var n=E(e,r);if(n&&Object.keys(n).length){!function(e,t){var r=e.playerID,n=e.mediaID;if(void 0!==f[n])return void function(e,t,r){var n=A(e,t);n?r(n):(g++,f[t]=r)}(r,n,t);var i=_(n)||A(r,n)||{mediaID:n};t(i)}(n,(function(r){if(r){var n=r.mediaID,i=S(n),o=w(n,T(r.segments)),a=O(r);!function(e,t,r,n){if(!e)return;e.forEach((function(e){x(e,t)}))}(e.bids,a),C(t.global,i,o)}}))}}))}function E(e,t){var r,n,i;try{r=e.ortb2Imp.ext.data.jwTargeting}catch(e){}if(r||(n=e.mediaTypes,(i=n&&n.video)&&"instream"===i.context))return Object.assign({},t,r)}function _(e){var t=p[e];return t?{segments:t,mediaID:e}:null}function A(e,t){var r=function(e){var t=window.jwplayer;if(!t)return void(0,d.logError)(u+".js was not found on page");var r=t(e);if(!r||!r.getPlaylist)return void(0,d.logError)("player ID did not match any players");return r}(e);if(!r)return null;var n=t?(0,c.find)(r.getPlaylist(),(function(e){return e.mediaid===t})):r.getPlaylistItem();if(!n)return null;t=t||n.mediaid;var i=n.jwpseg;return h(i,t),{segments:i,mediaID:t}}function O(e){var t=e.segments,r=e.mediaID,n={};return t&&t.length&&(n.segments=t),r&&(n.content={id:S(r)}),n}function S(e){if(e)return"jw_"+e}function T(e){if(e&&e.length)return e.reduce((function(e,t){return e.push({id:t}),e}),[])}function w(e,t){if(e||t){var r={name:l,ext:{}};return e&&(r.ext.cids=[e]),t&&(r.segment=t,r.ext.segtax=502),r}}function C(e,t,r){if(t||r){null==e&&(e={});var n=e.site=e.site||{},i=n.content=n.content||{};t&&(i.id=t);var o=(i.data=i.data||[]).filter((function(e){return e.name!==l}));return r&&o.push(r),i.data=o,e}}function x(e,t){if(t){var r=e.rtd||{},n={};n[u]=Object.assign({},r[u],{targeting:t}),e.rtd=Object.assign({},r,n)}}a.config.getConfig("realTimeData",(function(e){var t=e.realTimeData.dataProviders,r=t&&(0,c.find)(t,(function(e){return e.name&&e.name.toLowerCase()===u})),n=r&&r.params;n&&m(n)})),(0,o.submodule)("realTimeData",v),(0,i.registerModule)("jwplayerRtdProvider")},4331:(e,t,r)=>{"use strict";var n=r(4293);var i,o,a,s=n(r(8832)),d=n(r(4319)),c=r(8851),u=r(1779),l=r(6522),p=r(43),f=r(9084),g=r(6613),v=Object.freeze({CODE:"kargo",HOST:"krk2.kargo.com",REQUEST_METHOD:"POST",REQUEST_ENDPOINT:"/api/v1/prebid",TIMEOUT_ENDPOINT:"/api/v1/event/timeout",GVLID:972,SUPPORTED_MEDIA_TYPES:[g.BANNER,g.VIDEO]}),m=(0,f.getStorageManager)({bidderCode:v.CODE}),b=Object.freeze({KEY:"currency",US_DOLLAR:"USD"}),h=Object.freeze({USER_DATA:"ortb2.user.data",SOCIAL_CANVAS:"params.socialCanvas",SUA:"ortb2.device.sua",TDID_ADAPTER:"userId.tdid"}),y=Object.freeze({BROWSERS:"browsers",MOBILE:"mobile",MODEL:"model",PLATFORM:"platform",SOURCE:"source"}),I=[y.BROWSERS,y.MOBILE,y.MODEL,y.SOURCE,y.PLATFORM],E=Object.freeze({KEY:"krg_crb",SYNC_URL:"https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&idx={INDEX}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}&gpp={GPP_STRING}&gpp_sid={GPP_SID}",SYNC_COUNT:5,PAGE_VIEW_ID:"pageViewId",PAGE_VIEW_TIMESTAMP:"pageViewTimestamp",PAGE_VIEW_URL:"pageViewUrl"});function _(){try{var e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=-177&e[6]|64,e[8]=-65&e[8]|128;var t=Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("");return t.slice(0,8)+"-"+t.slice(8,12)+"-"+t.slice(12,16)+"-"+t.slice(16,20)+"-"+t.slice(20)}catch(e){return""}}function A(){return i||(i=_()),i}function O(e){try{return m.getDataFromLocalStorage(e)}catch(e){return null}}function S(e,t,r,n,i){var o=T._getCrb(),a={crbIDs:o.syncIds||{}};e&&(a.tdID=e),!e&&o.tdID&&(a.tdID=o.tdID),t&&(a.usp=t);try{r&&(a.gdpr={consent:r.consentString||"",applies:!!r.gdprApplies})}catch(e){}if(null!=o.lexId&&(a.kargoID=o.lexId),null!=o.clientId&&(a.clientID=o.clientId),null!=o.optOut&&(a.optOut=o.optOut),null!=n&&(a.sharedIDEids=n),i){var s={};i&&i.consentString&&(s.gppString=i.consentString),i&&i.applicableSections&&(s.applicableSections=i.applicableSections),(0,u.isEmpty)(s)||(a.gpp=s)}return a}var T={gvlid:v.GVLID,code:v.CODE,isBidRequestValid:function(e){return!(!e||!e.params)&&!!e.params.placementId},buildRequests:function(e,t){var r=l.config.getConfig(b.KEY),n=r&&r.adServerCurrency?r.adServerCurrency:null,i=[];(0,u._each)(e,(function(e){i.push(function(e){var t,r,n={id:e.bidId,tid:null===(t=e.ortb2Imp)||void 0===t||null===(r=t.ext)||void 0===r?void 0:r.tid,pid:e.params.placementId,code:e.adUnitCode};null!=e.floorData&&e.floorData.floorMin>0&&(n.floor=e.floorData.floorMin);e.bidRequestsCount>0&&(n.bidRequestCount=e.bidRequestsCount);e.bidderRequestsCount>0&&(n.bidderRequestCount=e.bidderRequestsCount);e.bidderWinsCount>0&&(n.bidderWinCount=e.bidderWinsCount);var i=(0,u.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,u.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");i&&(n.fpd={gpid:i});null!=e.mediaTypes&&(null!=e.mediaTypes.banner&&(n.banner=e.mediaTypes.banner),null!=e.mediaTypes.video&&(n.video=e.mediaTypes.video),null!=e.mediaTypes.native&&(n.native=e.mediaTypes.native));return n}(e))}));var s=e[0],d=(0,u.deepAccess)(s,h.TDID_ADAPTER),c=function(e){var t;return{pageURL:null==e||null===(t=e.refererInfo)||void 0===t?void 0:t.page,rawCRB:m.getCookie(E.KEY),rawCRBLocalStorage:O(E.KEY)}}(t),p=Object.assign({},{pbv:"8.34.0",aid:s.auctionId,sid:A(),url:c.pageURL,timeout:t.timeout,ts:(new Date).getTime(),device:{size:[window.screen.width,window.screen.height]},imp:i,user:S(d,t.uspConsent,t.gdprConsent,s.userIdAsEids,t.gppConsent)});null!=s.ortb2&&(p.site={cat:s.ortb2.site.cat}),s.schain&&s.schain.nodes&&(p.schain=s.schain),p.user.data=(0,u.deepAccess)(s,h.USER_DATA)||[];var f=function(){if(o===window.location.pathname)return++a;return o=window.location.pathname,a=0}();null!=f&&(p.requestCount=f),null!=n&&n!=b.US_DOLLAR&&(p.cur=n),null!=c.rawCRB&&(p.rawCRB=c.rawCRB),null!=c.rawCRBLocalStorage&&(p.rawCRBLocalStorage=c.rawCRBLocalStorage);var g=(0,u.deepAccess)(s,h.SOCIAL_CANVAS);null!=g&&(p.socan=g);var _=(0,u.deepAccess)(s,h.SUA);if(_){var T=[];I.forEach((function(e){var t=_[e];if(t&&("string"!=typeof t||""!==t.trim()))switch(e){case y.MOBILE&&t<1:case y.SOURCE&&t<1:break;default:T.push(e)}})),p.device.sua=(0,u.pick)(_,T)}var w=null!=O(E.PAGE_VIEW_ID),C=null!=O(E.PAGE_VIEW_TIMESTAMP),x=null!=O(E.PAGE_VIEW_URL),P={};return w&&(P.id=O(E.PAGE_VIEW_ID)),C&&(P.timestamp=Number(O(E.PAGE_VIEW_TIMESTAMP))),x&&(P.url=O(E.PAGE_VIEW_URL)),(0,u.isEmpty)(P)||(p.page=P),Object.assign({},t,{method:v.REQUEST_METHOD,url:"https://".concat(v.HOST).concat(v.REQUEST_ENDPOINT),data:p,currency:n})},interpretResponse:function(e,t){var r=e.body,n=[];return(0,u.isEmpty)(r)||"object"!==(0,d.default)(r)||Object.entries(r).forEach((function(e){var r=(0,s.default)(e,2),i=r[0],o=r[1],a={mediaType:o.mediaType&&v.SUPPORTED_MEDIA_TYPES.includes(o.mediaType)?o.mediaType:g.BANNER};o.metadata&&o.metadata.landingPageDomain&&(a.clickUrl=o.metadata.landingPageDomain[0],a.advertiserDomains=o.metadata.landingPageDomain);var d={requestId:i,cpm:Number(o.cpm),width:o.width,height:o.height,ttl:300,creativeId:o.id,dealId:o.targetingCustom,netRevenue:!0,currency:o.currency||t.currency,mediaType:a.mediaType,meta:a};a.mediaType==g.VIDEO?o.admUrl?d.vastUrl=o.admUrl:d.vastXml=o.adm:d.ad=o.adm,n.push(d)})),n},getUserSyncs:function(e,t,r,n,i){var o=[],a=_(),s=T._getCrb().clientId,d=r&&r.gdprApplies?1:0,c=r&&r.consentString?r.consentString:"",u=i&&i.consentString?i.consentString:"",l=i&&i.applicableSections&&Array.isArray(i.applicableSections)?i.applicableSections.join(","):"";if("string"==typeof n&&4==n.length&&1==n[0]&&"Y"==n[2])return o;if(e.iframeEnabled&&a&&s)for(var p=0;p<E.SYNC_COUNT;p++)o.push({type:"iframe",url:E.SYNC_URL.replace("{UUID}",s).replace("{SEED}",a).replace("{INDEX}",p).replace("{GDPR}",d).replace("{GDPR_CONSENT}",c).replace("{US_PRIVACY}",n||"").replace("{GPP_STRING}",u).replace("{GPP_SID}",l)});return o},supportedMediaTypes:v.SUPPORTED_MEDIA_TYPES,onTimeout:function(e){null!=e&&e.forEach((function(e){!function(e,t){var r={aid:e,ato:t};try{var n=(0,u.buildUrl)({protocol:"https",hostname:v.HOST,pathname:v.TIMEOUT_ENDPOINT,search:r});(0,u.triggerPixel)(n)}catch(e){}}(e.auctionId,e.timeout)}))},_getCrb:function(){var e=function(){try{return JSON.parse(atob(O(E.KEY)))}catch(e){return{}}}();return Object.keys(e).length?e:function(){try{var e=JSON.parse(m.getCookie(E.KEY));if(e&&e.v){var t=JSON.parse(atob(e.v));if(t)return t}return{}}catch(e){return{}}}()},_getSessionId:A};(0,p.registerBidder)(T),(0,c.registerModule)("kargoBidAdapter")},3133:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(8212)),o=n(r(4319)),a=n(r(8832)),s=r(8851),d=r(1779),c=r(6150),u=r(4627),l=r(6062),p=r(1442),f=r(9084),g=r(7343),v=r(2630),m=r(3712),b=r(4080);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=5e3,E="pre_lips",_="liveIntentId",A="liveintent.com",O=(0,f.getStorageManager)({moduleType:g.MODULE_TYPE_UID,moduleName:_});var S={nonId:!0},T={ajaxGet:function(e,t,r,n){(0,c.ajaxBuilder)(n)(e,{success:t,error:r},void 0,{method:"GET",withCredentials:!0})},pixelGet:function(e,t){return(0,d.triggerPixel)(e,t)}},w=!1,C=null;function x(){w=!0}function P(e){function t(e){return Object.entries(e).flatMap((function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return"boolean"==typeof n&&n?[r]:[]}))}return"object"===(0,o.default)(e)?t(y(y({},S),e)):t(S)}function D(e){if(C)return C;var t={publisherId:(e=e||{}).publisherId||"any",requestedAttributes:P(e.requestedAttributesOverrides)};e.url&&(t.url=e.url),e.partner&&(t.source=e.partner),t.ajaxTimeout=e.ajaxTimeout||I;var r,n,i=(r=e.liCollectConfig,n={},(r=r||{}).appId&&(n.appId=r.appId),r.fpiStorageStrategy&&(n.storageStrategy=r.fpiStorageStrategy),r.fpiExpirationDays&&(n.expirationDays=r.fpiExpirationDays),r.collectorUrl&&(n.collectorUrl=r.collectorUrl),n.ajaxTimeout=r.ajaxTimeout||I,n);i.wrapperName="prebid",i.trackerVersion="8.34.0",i.identityResolutionConfig=t,i.identifiersToResolve=e.identifiersToResolve||[],i.fireEventDelay=e.fireEventDelay;var o=p.uspDataHandler.getConsentData();o&&(i.usPrivacyString=o);var a=p.gdprDataHandler.getConsentData();a&&(i.gdprApplies=a.gdprApplies,i.gdprConsent=a.consentString);var s=p.gppDataHandler.getConsentData();return s&&(i.gppString=s.gppString,i.gppApplicableSections=s.applicableSections),C=j.getInitializer()(i,O,T),e.emailHash&&C.push({hash:e.emailHash}),C}function R(){if(!w&&C){var e=C.config.fireEventDelay||500;setTimeout((function(){window.liQ_instances.forEach((function(e){return e.eventBus.once(E,x)})),!w&&C&&C.fire()}),e)}}var j={moduleMode:"standard",name:_,setModuleMode:function(e){this.moduleMode=e},getInitializer:function(){var e=this;return function(t,r,n){return(0,l.LiveConnect)(t,r,n,e.moduleMode)}},decode:function(e,t){var r=t&&t.params||{};return C||D(r),R(),function(e){var t={},r=e.nonId||e.unifiedId;return r&&(e.lipbid=r,delete e.unifiedId,t.lipb=e),e.uid2&&(t.uid2={id:e.uid2,ext:{provider:A}}),e.bidswitch&&(t.bidswitch={id:e.bidswitch,ext:{provider:A}}),e.medianet&&(t.medianet={id:e.medianet,ext:{provider:A}}),e.magnite&&(t.magnite={id:e.magnite,ext:{provider:A}}),e.index&&(t.index={id:e.index,ext:{provider:A}}),e.openx&&(t.openx={id:e.openx,ext:{provider:A}}),e.pubmatic&&(t.pubmatic={id:e.pubmatic,ext:{provider:A}}),e.sovrn&&(t.sovrn={id:e.sovrn,ext:{provider:A}}),e.triplelift&&(t.triplelift={id:e.triplelift,ext:{provider:A}}),e.thetradedesk&&(t.lipb=y(y({},t.lipb),{},{tdid:e.thetradedesk}),t.tdid={id:e.thetradedesk,ext:{rtiPartner:"TDID",provider:(0,b.getRefererInfo)().domain||A}},delete t.lipb.thetradedesk),t}(e)},getId:function(e){var t=D(e&&e.params||{});if(t){R();return{callback:function(e){t.resolve((function(t){e(t)}),(function(t){(0,d.logError)("".concat(_,": ID fetch encountered an error: "),t),e()}))}}}},eids:y(y(y({},v.UID1_EIDS),m.UID2_EIDS),{},{lipb:{getValue:function(e){return e.lipbid},source:"liveintent.com",atype:3,getEidExt:function(e){if(Array.isArray(e.segments)&&e.segments.length)return{segments:e.segments}}},bidswitch:{source:"bidswitch.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},medianet:{source:"media.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},magnite:{source:"rubiconproject.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},index:{source:"liveintent.indexexchange.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},openx:{source:"openx.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},pubmatic:{source:"pubmatic.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},sovrn:{source:"liveintent.sovrn.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},triplelift:{source:"liveintent.triplelift.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}}})};(0,u.submodule)("userId",j),(0,s.registerModule)("liveIntentIdSystem")},4778:(e,t,r)=>{"use strict";var n,i=r(8851),o=r(1779),a=r(6150),s=r(4627),d=r(9084),c=r(1442),u=r(7343),l="panoramaId",p="".concat(l,"_expiry"),f="_cc_id",g="lotamePanoramaId",v=(0,d.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:g});function m(e){var t=null;if(v.cookiesAreEnabled()&&(t=v.getCookie(e,void 0)),v.hasLocalStorage()&&null===t){var r=v.getDataFromLocalStorage("".concat(e,"_exp"),void 0);(""===r||null===r||r&&new Date(parseInt(r,10)).getTime()-Date.now()>0)&&(t=v.getDataFromLocalStorage(e,void 0))}return t}function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.timestamp)()+6048e5;if(e&&t){var i=new Date(r).toUTCString();v.cookiesAreEnabled()&&v.setCookie(e,t,i,"Lax",n,void 0),v.hasLocalStorage()&&(v.setDataInLocalStorage("".concat(e,"_exp"),String(r),void 0),v.setDataInLocalStorage(e,t,void 0))}}function h(e){if(e){if(v.cookiesAreEnabled()){var t=new Date(0).toUTCString();v.setCookie(e,"",t,"Lax",n,void 0)}v.hasLocalStorage()&&v.removeDataFromLocalStorage(e,void 0)}}var y={name:g,gvlid:95,decode:function(e,t){return(0,o.isStr)(e)?{lotamePanoramaId:e}:void 0},getId:function(e,t,r){n=y.findRootDomain();var i=(e&&e.params||{}).clientId,s=!(0,o.isEmpty)(i),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t={data:m(l),expiryTimestampMs:0,clientExpiryTimestampMs:0};try{if(e){var r=m("".concat(p,"_").concat(e));(0,o.isStr)(r)&&(t.clientExpiryTimestampMs=parseInt(r,10))}var n=m(p);(0,o.isStr)(n)&&(t.expiryTimestampMs=parseInt(n,10))}catch(e){(0,o.logError)(e)}return t}(i),u=Date.now()>d.expiryTimestampMs;if(s&&Date.now()<d.clientExpiryTimestampMs)return{id:void 0,reason:"NO_CLIENT_CONSENT"};if(!u)return{id:d.data};var g,I,E=(v.cookiesAreEnabled()&&(g=v.getCookie(f,void 0)),!g&&v.hasLocalStorage()&&(g=v.getDataFromLocalStorage(f,void 0)),g),_=c.uspDataHandler.getConsentData();void 0===_||(0,o.isEmpty)(_)||(0,o.isEmptyStr)(_)||(I=_),I||(I=m("us_privacy"));return{callback:function(e){var r,d={};E&&(d.fp=E),t&&((0,o.isBoolean)(t.gdprApplies)&&(d.gdpr_applies=t.gdprApplies),r=t.consentString),r||(r=m("eupubconsent-v2")),r||(r=m("euconsent-v2")),r&&(d.gdpr_consent=r),I&&(d.us_privacy=I),s&&(d.c=i);var c=(0,o.buildUrl)({protocol:"https",host:navigator.userAgent&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?"c.ltmsphrcl.net":"id.crwdcntrl.net",pathname:"/id",search:(0,o.isEmpty)(d)?void 0:d});(0,a.ajax)(c,(function(t){var r;if(t)try{var a=JSON.parse(t),d=!((0,o.isArray)(a.errors)&&-1!==a.errors.indexOf(111));if(s)if(d)h("".concat(p,"_").concat(i));else if((0,o.isStr)(a.no_consent)&&"CLIENT"===a.no_consent)return b("".concat(p,"_").concat(i),a.expiry_ts,a.expiry_ts),void e();b(p,a.expiry_ts,a.expiry_ts),(0,o.isStr)(a.profile_id)?(d&&function(e){if(v.cookiesAreEnabled()){var t=new Date((0,o.timestamp)()+23328e6).toUTCString();v.setCookie(f,e,t,"Lax",n,void 0)}v.hasLocalStorage()&&v.setDataInLocalStorage(f,e,void 0)}(a.profile_id),(0,o.isStr)(a.core_id)?(b(l,a.core_id,a.expiry_ts),r=a.core_id):h(l)):(d&&h(f),h(l))}catch(e){(0,o.logError)(e)}e(r)}),void 0,{method:"GET",withCredentials:!0})}}},eids:{lotamePanoramaId:{source:"crwdcntrl.net",atype:1}}};(0,s.submodule)("userId",y),(0,i.registerModule)("lotamePanoramaIdSystem")},7906:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(147)),o=n(r(906)),a=n(r(3315)),s=n(r(409)),d=n(r(5018)),c=n(r(4668)),u=r(8851),l=r(1779),p=r(43),f=r(6613);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=(0,r(6337).ortbConverter)({context:{netRevenue:!0,ttl:30},imp:function(e,t,r){var n=e(t,r);return n.tagid=t.adUnitCode,n}}),h="nativo",y=[f.BANNER],I="USD",E="*",_=(0,u.getGlobal)(),A=function(){var e={},t=[];function r(t,r){e.hasOwnProperty(t)||(e[t]=r)}return{addBidData:function(e,n){var i=t.length;t.push(e),Array.isArray(n)?n.forEach((function(e){r(String(e),i)})):r(String(n),i)},getBidData:function(r){var n=String(r);if(e.hasOwnProperty(n))return t[e[n]]}}};var O={},S={},T={},w=new Set,C=new Set,x=new Set,P={url:function(e){return"string"==typeof e},placementId:function(e){return"string"==typeof e||"number"==typeof e}},D={code:h,gvlid:263,aliases:["ntv"],supportedMediaTypes:y,isBidRequestValid:function(e){return e.params?!Object.keys(e.params).some((function(t){var r=e.params[t],n=P[t];return!!n&&!n(r)})):e.bidder===h},buildRequests:function(e,t){var r=b.toORTB({bidRequests:e,bidderRequest:t}),n=JSON.stringify(r),i=new R;i.addBidRequestDataSource(new k);var o,a,s=new Set,d=A(),c={length:0},u={};e.forEach((function(e){a=H(e)||t.refererInfo.location,o=(0,l.deepAccess)(e,"params.placementId");var r=[e.adUnitCode];o&&!s.has(o)&&(s.add(o),r.push(o),c[o]=e.sizes,c.length++);var n={bidId:e.bidId,size:F(e.sizes)};d.addBidData(n,r);var p=U(e);p&&(u[e.adUnitCode]=p),i.processBidRequestData(e,t)})),O[t.bidderRequestId]=d;var p,f=e.map((function(e){return S[e.adUnitCode]=void 0!==S[e.adUnitCode]?S[e.adUnitCode]+1:0,{adUnitCode:e.adUnitCode,mediaTypes:e.mediaTypes}})),g=[{key:"ntv_pbv",value:_.version},{key:"ntv_pb_rid",value:t.bidderRequestId},{key:"ntv_ppc",value:btoa(JSON.stringify(f))},{key:"ntv_dbr",value:btoa(JSON.stringify(S))},{key:"ntv_url",value:encodeURIComponent(a)}];if(Object.keys(u).length&&g.unshift({key:"ntv_ppf",value:btoa(JSON.stringify(u))}),w.size>0&&g.unshift({key:"ntv_atf",value:Array.from(w).join(",")}),C.size>0&&g.unshift({key:"ntv_avtf",value:Array.from(C).join(",")}),x.size>0&&g.unshift({key:"ntv_ctf",value:Array.from(x).join(",")}),c.length&&g.unshift({key:"ntv_pas",value:btoa(JSON.stringify(c))}),s.size>0){var v=[];s.forEach((function(e){return v.push(e)})),g.unshift({key:"ntv_ptd",value:v.join(",")})}return t.gdprConsent&&g.unshift({key:"ntv_gdpr_consent",value:t.gdprConsent.consentString}),t.uspConsent&&g.unshift({key:"us_privacy",value:t.uspConsent}),{method:"POST",url:G("https://exchange.postrelease.com/prebid",[i.getRequestDataQueryString(),(p=g,p.reduce((function(e,t){return L(e,t.key,t.value)}),""))]),data:n}},interpretResponse:function(e,t){var r=this;if(!e||!e.body||(0,l.isEmpty)(e.body))return[];try{var n,i,o="string"==typeof e.body?JSON.parse(e.body):e.body,a=[];return o.seatbid.forEach((function(e){e.bid.forEach((function(e){i=r.getAdUnitData(o.id,e),n={requestId:i.bidId,cpm:e.price,currency:o.cur,width:e.w||i.size[0],height:e.h||i.size[1],creativeId:e.crid,dealId:e.id,netRevenue:!0,ttl:e.ttl||360,ad:e.adm,meta:{advertiserDomains:e.adomain}},e.ext&&(T[e.id]=e.ext),a.push(n)}))})),delete O[o.id],a}catch(e){return[]}},getUserSyncs:function(e,t,r,n){var i="";r&&(i=L(i,"gdpr",r.gdprApplies?1:0),i=L(i,"gdpr_consent",encodeURIComponent(r.consentString||""))),n&&(i=L(i,"us_privacy",encodeURIComponent(n.uspConsent)));var o,a={iframe:e.iframeEnabled,image:e.pixelEnabled},s=[];return t.forEach((function(e){if(!e||!e.body||(0,l.isEmpty)(e.body))return s;try{o="string"==typeof e.body?JSON.parse(e.body):e.body}catch(e){return}o&&o.seatbid&&0!==o.seatbid.length&&o.seatbid.forEach((function(e){e.syncUrls.forEach((function(e){a[e.type]&&""!==e.url.trim()&&s.push({type:e.type,url:e.url.replace("{GDPR_params}",i)})}))}))})),s},onBidWon:function(e){var t=T[e.dealId];t&&(W(w,t.adsToFilter),W(C,t.advertisersToFilter),W(x,t.campaignsToFilter))},getAdUnitData:function(e,t){var r=O[e],n=t.impid,i=(0,l.deepAccess)(t,"ext.ad_unit_id");return r.getBidData(i)||r.getBidData(n)}};(0,p.registerBidder)(D);var R=function(){function e(){(0,d.default)(this,e),this.bidRequestDataSources=[]}return(0,c.default)(e,[{key:"addBidRequestDataSource",value:function(e){e instanceof j&&this.bidRequestDataSources.push(e)}},{key:"processBidRequestData",value:function(e,t){var r,n=v(this.bidRequestDataSources);try{for(n.s();!(r=n.n()).done;){r.value.processBidRequestData(e,t)}}catch(e){n.e(e)}finally{n.f()}}},{key:"getRequestDataQueryString",value:function(){if(0!=this.bidRequestDataSources.length)return this.bidRequestDataSources.map((function(e){return e.getRequestQueryString()})).filter((function(e){return""!==e})).join("&")}}]),e}();var j=function(){function e(){(0,d.default)(this,e),this.type="BidRequestDataSource"}return(0,c.default)(e,[{key:"processBidRequestData",value:function(e,t){}},{key:"getRequestQueryString",value:function(){return""}}]),e}();var k=function(e){(0,o.default)(r,e);var t=g(r);function r(){var e;return(0,d.default)(this,r),(e=t.call(this)).type="UserEIDs",e.qsParam=new N("ntv_pb_eid"),e.eids=[],e}return(0,c.default)(r,[{key:"processBidRequestData",value:function(e,t){void 0===e.userIdAsEids||this.eids.length>0||(this.eids=e.userIdAsEids)}},{key:"getRequestQueryString",value:function(){if(0===this.eids.length)return"";var e=B(this.eids);return this.qsParam.value=e,this.qsParam.toString()}}]),r}(j);var N=(0,c.default)((function e(t,r){(0,d.default)(this,e),this.key=t,this.value=r}));function B(e){try{return btoa(JSON.stringify(e))}catch(e){}}function U(e){if("function"==typeof e.getFloor){var t={},r=e.mediaTypes,n=new Set;Object.keys(r).forEach((function(i){var o=r[i],a={};(o.sizes||o.playerSize||[]).forEach((function(t){var r=e.getFloor({currency:I,mediaType:i,size:t});a[V(t)]=r.floor,n.add(t)})),t[i]=a;var s=M(e,i);s.floor>0&&(a["*"]=s.floor)}));var o=q(e,[E].concat((0,i.default)(Array.from(n))));return t["*"]=o,t}}function M(e,t){return e.getFloor({currency:I,mediaType:t,size:E})}function q(e){var t={};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[E]).forEach((function(r){var n=e.mediaTypes;e.mediaTypes={PRICE_FLOOR_WILDCARD:n.sizes};var i=e.getFloor({currency:I,mediaType:E,size:r});e.mediaTypes=n;var o=r!==E?V(r):E;t[o]=i.floor})),t}function V(e){return!Array.isArray(e)||e.length<2?"":"".concat(e[0],"x").concat(e[1])}function L(e,t,r){return e+"".concat(e.length?"&":"").concat(t,"=").concat(r)}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z;return e&&0!==e.length?1===e.length?e[0]:e.reduce((function(e,r){return t(r)>t(e)?r:e})):[]}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length||!Array.isArray(t))return e;var r=t.filter((function(e){return""!==e.trim()}));if(0===r.length)return e;for(var n="".concat(e,"?").concat(r[0]),i=1;i<r.length;i++)n+="&".concat(r[i]);return n}N.prototype.toString=function(){return"".concat(this.key,"=").concat(this.value)};var z=function(e){return e[0]*e[1]};function W(e,t){t&&Array.isArray(t)&&t.length&&t.forEach((function(t){return e.add(t)}))}function H(e){var t=(0,l.deepAccess)(e,"params.url");if(null!=t){if(Y(t))return t;t=K(t);try{return new URL(t).href}catch(e){}}}function Y(e){return/^http[s]?\:/.test(e)}function K(e){if(Y(e))return e;var t="https:";return 0!==e.indexOf("//")&&(t+="//"),"".concat(t).concat(e)}(0,u.registerModule)("nativoBidAdapter")},271:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o=n(r(8212)),a=n(r(8832)),s=r(8851),d=r(6522),c=r(43),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(1779)),l=r(6613),p=r(6337),f=r(2039);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b="https://rtb.openx.net/openrtbb/prebidjs";var h="https://u.openx.net/w/1.0/pd";var y="2d1251ae-7f3a-47cf-bd2a-2f288854a0ba";var I={code:"openx",gvlid:69,supportedMediaTypes:[l.BANNER,l.VIDEO],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;if(u.deepAccess(e,"mediaTypes.banner")&&t)return!!e.params.unit||u.deepAccess(e,"mediaTypes.banner.sizes.length")>0;return!(!e.params.unit||!t)},buildRequests:function(e,t){var r=e.filter((function(e){return A(e)})),n=e.filter((function(e){return function(e){return u.deepAccess(e,"mediaTypes.banner")||!A(e)}(e)})),i=n.length?[_(n,t,l.BANNER)]:[];return r.forEach((function(e){i.push(_([e],t,l.VIDEO))})),i},interpretResponse:function(e,t){e.body||(e.body={nbr:0});return E.fromORTB({request:t.data,response:e.body})},getUserSyncs:function(e,t,r,n){if(e.iframeEnabled||e.pixelEnabled){var i=e.iframeEnabled?"iframe":"image",o=[],a=h;if(r&&(o.push("gdpr="+(r.gdprApplies?1:0)),o.push("gdpr_consent="+encodeURIComponent(r.consentString||""))),n&&o.push("us_privacy="+encodeURIComponent(n)),t.length>0&&t[0].body&&t[0].body.ext){var s=t[0].body.ext;s.delDomain?a="https://".concat(s.delDomain,"/w/1.0/pd"):s.platform&&o.push("ph="+s.platform)}else o.push("ph="+y);return[{type:i,url:"".concat(a).concat(o.length>0?"?"+o.join("&"):"")}]}},transformBidParams:function(e,t){return(0,f.convertTypes)({unit:"string",customFloor:"number"},e)}};(0,c.registerBidder)(I);var E=(0,p.ortbConverter)({context:{netRevenue:!0,ttl:300},imp:function(e,t,r){var n=e(t,r);return(0,u.mergeDeep)(n,{tagid:t.params.unit,ext:{divid:t.adUnitCode}}),t.params.customParams&&u.deepSetValue(n,"ext.customParams",t.params.customParams),t.params.customFloor&&!n.bidfloor&&(n.bidfloor=t.params.customFloor),n},request:function(e,t,r,n){var i=e(t,r,n);(0,u.mergeDeep)(i,{at:1,ext:{bc:"".concat("hb_pb_ortb","_").concat("2.0"),pv:"8.34.0"}});var o=n.bidRequests[0];return o.params.coppa&&u.deepSetValue(i,"regs.coppa",1),o.params.doNotTrack&&u.deepSetValue(i,"device.dnt",1),o.params.platform&&u.deepSetValue(i,"ext.platform",o.params.platform),o.params.delDomain&&u.deepSetValue(i,"ext.delDomain",o.params.delDomain),o.params.response_template_name&&u.deepSetValue(i,"ext.response_template_name",o.params.response_template_name),o.params.test&&(i.test=1),i},bidResponse:function(e,t,r){var n=e(t,r);t.ext&&(n.meta.networkId=t.ext.dsp_id,n.meta.advertiserId=t.ext.buyer_id,n.meta.brandId=t.ext.brand_id);var i=r.ortbResponse;return i.ext&&i.ext.paf&&(n.meta.paf=Object.assign({},i.ext.paf),n.meta.paf.content_id=u.deepAccess(t,"ext.paf.content_id")),n},response:function(e,t,r,n){var i=n.ortbRequest;i.ext&&(i.ext.delDomain&&u.deepSetValue(r,"ext.delDomain",i.ext.delDomain),i.ext.platform&&u.deepSetValue(r,"ext.platform",i.ext.platform));var o=e(t,r,n),s=u.deepAccess(r,"ext.fledge_auction_configs");return s?(s=Object.entries(s).map((function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return{bidId:r,config:Object.assign({auctionSignals:{}},n)}})),{bids:o.bids,fledgeAuctionConfigs:s}):o.bids},overrides:{imp:{bidfloor:function(e,t,r,n){var i={};e(i,r,m(m({},n),{},{currency:"USD"})),"USD"===i.bidfloorcur&&Object.assign(t,i)},video:function(e,t,r,n){var i,a=r.mediaTypes[l.VIDEO];a&&(a=Object.assign({},a,r.params.video),r=m(m({},r),{},{mediaTypes:(0,o.default)({},l.VIDEO,a)})),e(t,r,n),t.video&&"outstream"===(null===(i=a)||void 0===i?void 0:i.context)&&(t.video.placement=t.video.placement||4)}}}});function _(e,t,r){return{method:"POST",url:d.config.getConfig("openxOrtbUrl")||b,data:E.toORTB({bidRequests:e,bidderRequest:t,context:{mediaType:r}})}}function A(e){return u.deepAccess(e,"mediaTypes.video")}(0,s.registerModule)("openxBidAdapter")},1980:(e,t,r)=>{"use strict";var n=r(4293)(r(4319)),i=r(8851),o=r(1779),a=r(43),s=r(6613),d=r(6522),c=r(3603),u=r(9723),l=r(4080),p="https://elb.the-ozone-project.com",f="/openrtb2/auction",g="/static/load-cookie.html",v="https://test.ozpr.net",m="2.9.1",b={gvlid:524,aliases:[{code:"lmc",gvlid:524},{code:"venatus",gvlid:524}],version:m,code:"ozone",supportedMediaTypes:[s.VIDEO,s.BANNER],cookieSyncBag:{publisherId:null,siteId:null,userIdObject:{}},propertyBag:{pageId:null,buildRequestsStart:0,buildRequestsEnd:0,endpointOverride:null},whitelabel_defaults:{logId:"OZONE",bidder:"ozone",keyPrefix:"oz",auctionUrl:p+f,cookieSyncUrl:p+g,rendererUrl:"https://prebid.the-ozone-project.com/ozone-renderer.js",batchRequests:!1},loadWhitelabelData:function(e){if(!this.propertyBag.whitelabel){this.propertyBag.whitelabel=JSON.parse(JSON.stringify(this.whitelabel_defaults));var t=e.bidder||"ozone";this.propertyBag.whitelabel.logId=t.toUpperCase(),this.propertyBag.whitelabel.bidder=t;var r=d.config.getConfig(t)||{};(0,o.logInfo)("got bidderConfig: ",JSON.parse(JSON.stringify(r))),r.kvpPrefix&&(this.propertyBag.whitelabel.keyPrefix=r.kvpPrefix);var n=this.getGetParametersAsObject();r.endpointOverride&&(r.endpointOverride.origin&&(this.propertyBag.endpointOverride=r.endpointOverride.origin,this.propertyBag.whitelabel.auctionUrl=r.endpointOverride.origin+f,this.propertyBag.whitelabel.cookieSyncUrl=r.endpointOverride.origin+g),n.hasOwnProperty("renderer")?n.renderer.match("%3A%2F%2F")?this.propertyBag.whitelabel.rendererUrl=decodeURIComponent(n.renderer):this.propertyBag.whitelabel.rendererUrl=n.renderer:r.endpointOverride.rendererUrl&&(this.propertyBag.whitelabel.rendererUrl=r.endpointOverride.rendererUrl),r.endpointOverride.cookieSyncUrl&&(this.propertyBag.whitelabel.cookieSyncUrl=r.endpointOverride.cookieSyncUrl),r.endpointOverride.auctionUrl&&(this.propertyBag.endpointOverride=r.endpointOverride.auctionUrl,this.propertyBag.whitelabel.auctionUrl=r.endpointOverride.auctionUrl)),r.hasOwnProperty("batchRequests")&&(this.propertyBag.whitelabel.batchRequests=r.batchRequests),n.hasOwnProperty("batchRequests")&&(this.propertyBag.whitelabel.batchRequests=!0);try{n.hasOwnProperty("auction")&&"dev"===n.auction&&((0,o.logInfo)("GET: auction=dev"),this.propertyBag.whitelabel.auctionUrl=v+f),n.hasOwnProperty("cookiesync")&&"dev"===n.cookiesync&&((0,o.logInfo)("GET: cookiesync=dev"),this.propertyBag.whitelabel.cookieSyncUrl=v+g)}catch(e){}(0,o.logInfo)("set propertyBag.whitelabel to",this.propertyBag.whitelabel)}},getAuctionUrl:function(){return this.propertyBag.whitelabel.auctionUrl},getCookieSyncUrl:function(){return this.propertyBag.whitelabel.cookieSyncUrl},getRendererUrl:function(){return this.propertyBag.whitelabel.rendererUrl},isBatchRequests:function(){return(0,o.logInfo)("isBatchRequests going to return ",this.propertyBag.whitelabel.batchRequests),this.propertyBag.whitelabel.batchRequests},isBidRequestValid:function(e){this.loadWhitelabelData(e),(0,o.logInfo)("isBidRequestValid : ",d.config.getConfig(),e);var t=e.adUnitCode,r="VALIDATION FAILED : missing {param} : siteId, placementId and publisherId are REQUIRED";if(!e.params.hasOwnProperty("placementId"))return(0,o.logError)(r.replace("{param}","placementId"),t),!1;if(!this.isValidPlacementId(e.params.placementId))return(0,o.logError)("VALIDATION FAILED : placementId must be exactly 10 numeric characters",t),!1;if(!e.params.hasOwnProperty("publisherId"))return(0,o.logError)(r.replace("{param}","publisherId"),t),!1;if(!e.params.publisherId.toString().match(/^[a-zA-Z0-9\-]{12}$/))return(0,o.logError)("VALIDATION FAILED : publisherId must be exactly 12 alphanumeric characters including hyphens",t),!1;if(!e.params.hasOwnProperty("siteId"))return(0,o.logError)(r.replace("{param}","siteId"),t),!1;if(!e.params.siteId.toString().match(/^[0-9]{10}$/))return(0,o.logError)("VALIDATION FAILED : siteId must be exactly 10 numeric characters",t),!1;if(e.params.hasOwnProperty("customParams"))return(0,o.logError)("VALIDATION FAILED : customParams should be renamed to customData",t),!1;if(e.params.hasOwnProperty("customData")){if(!Array.isArray(e.params.customData))return(0,o.logError)("VALIDATION FAILED : customData is not an Array",t),!1;if(e.params.customData.length<1)return(0,o.logError)("VALIDATION FAILED : customData is an array but does not contain any elements",t),!1;if(!e.params.customData[0].hasOwnProperty("targeting"))return(0,o.logError)('VALIDATION FAILED : customData[0] does not contain "targeting"',t),!1;if("object"!=(0,n.default)(e.params.customData[0].targeting))return(0,o.logError)("VALIDATION FAILED : customData[0] targeting is not an object",t),!1}if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(s.VIDEO)){if(!e.mediaTypes[s.VIDEO].hasOwnProperty("context"))return(0,o.logError)("No video context key/value in bid. Rejecting bid: ",e),!1;if("instream"!==e.mediaTypes[s.VIDEO].context&&"outstream"!==e.mediaTypes[s.VIDEO].context)return(0,o.logError)("video.context is invalid. Only instream/outstream video is supported. Rejecting bid: ",e),!1}return!0},isValidPlacementId:function(e){return e.toString().match(/^[0-9]{10}$/)},buildRequests:function(e,t){var r=this;this.loadWhitelabelData(e[0]),this.propertyBag.buildRequestsStart=(new Date).getTime();var i=this.propertyBag.whitelabel.bidder,a=this.propertyBag.whitelabel.keyPrefix;if((0,o.logInfo)("buildRequests time: ".concat(this.propertyBag.buildRequestsStart," v ").concat(m," validBidRequests"),JSON.parse(JSON.stringify(e)),"bidderRequest",JSON.parse(JSON.stringify(t))),this.blockTheRequest())return[];var c={publisherId:"",siteId:""};e.length>0&&(this.cookieSyncBag.userIdObject=Object.assign(this.cookieSyncBag.userIdObject,this.findAllUserIds(e[0])),this.cookieSyncBag.siteId=(0,o.deepAccess)(e[0],"params.siteId"),this.cookieSyncBag.publisherId=(0,o.deepAccess)(e[0],"params.publisherId"),c=e[0].params),(0,o.logInfo)("cookie sync bag",this.cookieSyncBag);var u=this.getWhitelabelConfigItem("ozone.singleRequest");u=!1!==u,(0,o.logInfo)("config ".concat(i,".singleRequest : "),u);var l={};(0,o.logInfo)("going to get ortb2 from bidder request...");var p=(0,o.deepAccess)(t,"ortb2",null);(0,o.logInfo)("got fpd: ",p),p&&(0,o.deepAccess)(p,"user")&&((0,o.logInfo)("added FPD user object"),l.user=p.user);var f=this.getGetParametersAsObject(),g=a+"testmode",v=f[g]||null;l.device={w:window.innerWidth,h:window.innerHeight};var b=this.getPlacementIdOverrideFromGetParam(),h=null,y=e.map((function(e){var t={},a=b||r.getPlacementId(e);t.id=e.bidId,t.tagid=a;var d=(0,o.parseUrl)(r.getRefererInfo().page);t.secure="https"===d.protocol?1:0;var c=[];if(e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(s.BANNER)&&(c=e.mediaTypes[s.BANNER].sizes,(0,o.logInfo)("setting banner size from the mediaTypes.banner element for bidId "+t.id+": ",c)),e.mediaTypes.hasOwnProperty(s.VIDEO)){if((0,o.logInfo)("openrtb 2.5 compliant video"),"object"==(0,n.default)(e.mediaTypes[s.VIDEO])){var u=(0,o.deepAccess)(e,"params.video",{});t.video=r.unpackVideoConfigIntoIABformat(e.mediaTypes[s.VIDEO],u),t.video=r.addVideoDefaults(t.video,e.mediaTypes[s.VIDEO],u)}var l=w(t.video);(0,o.logInfo)("setting video object from the mediaTypes.video element: "+t.id+":",t.video,"wh=",l),l&&"object"===(0,n.default)(l)?(t.video.w=l.w,t.video.h=l.h,C(t.video)?((0,o.logInfo)("setting obj.video.format to be an array of objects"),t.video.ext.format=[l]):((0,o.logInfo)("setting obj.video.format to be an object"),t.video.ext.format=l)):(0,o.logWarn)("cannot set w, h & format values for video; the config is not right")}e.mediaTypes.hasOwnProperty(s.NATIVE)&&(t.native=e.mediaTypes[s.NATIVE],(0,o.logInfo)("setting native object from the mediaTypes.native element: "+t.id+":",t.native)),e.hasOwnProperty("getFloor")?((0,o.logInfo)("This bidRequest object has property: getFloor"),t.floor=r.getFloorObjectForAuction(e),(0,o.logInfo)("obj.floor is : ",t.floor)):(0,o.logInfo)("This bidRequest object DOES NOT have property: getFloor")}else e.hasOwnProperty("sizes")?((0,o.logInfo)("no mediaTypes detected - will use the sizes array in the config root"),c=e.sizes):(0,o.logInfo)("no mediaTypes detected, no sizes array in the config root either. Cannot set sizes for banner type");if(c.length>0&&(t.banner={topframe:1,w:c[0][0]||0,h:c[0][1]||0,format:c.map((function(e){return{w:e[0],h:e[1]}}))}),t.placementId=a,(0,o.deepSetValue)(t,"ext.prebid",{storedrequest:{id:a}}),t.ext[i]={},t.ext[i].adUnitCode=e.adUnitCode,e.params.hasOwnProperty("customData")&&(t.ext[i].customData=e.params.customData),(0,o.logInfo)("obj.ext.".concat(i," is "),t.ext[i]),null!=v)if((0,o.logInfo)("setting isTestMode to ",v),t.ext[i].hasOwnProperty("customData"))for(var f=0;f<t.ext[i].customData.length;f++)t.ext[i].customData[f].targeting[g]=v;else t.ext[i].customData=[{settings:{},targeting:{}}],t.ext[i].customData[0].targeting[g]=v;p&&(0,o.deepAccess)(p,"site")&&((0,o.logInfo)("adding fpd.site"),(0,o.deepAccess)(t,"ext."+i+".customData.0.targeting",!1)?t.ext[i].customData[0].targeting=Object.assign(t.ext[i].customData[0].targeting,p.site):(0,o.deepSetValue)(t,"ext."+i+".customData.0.targeting",p.site)),!h&&(0,o.deepAccess)(e,"schain")&&(h=e.schain);var m=(0,o.deepAccess)(e,"ortb2Imp.ext.gpid");return m&&(0,o.deepSetValue)(t,"ext.gpid",m),t})),I={};if(I[i]={},I[i][a+"_pb_v"]=m,I[i][a+"_rw"]=b?1:0,e.length>0){var E=this.cookieSyncBag.userIdObject;E.hasOwnProperty("pubcid")&&(I[i].pubcid=E.pubcid)}I[i].pv=this.getPageId();var _=this.getWhitelabelConfigItem("ozone.oz_omp_floor");(0,o.logInfo)("".concat(a,"_omp_floor dollar value = "),_),"number"==typeof _?I[i][a+"_omp_floor"]=_:void 0!==_&&(0,o.logError)("".concat(a,"_omp_floor is invalid - IF SET then this must be a number, representing dollar value eg. ").concat(a,"_omp_floor: 1.55. You have it set as a ")+(0,n.default)(_));var A=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),O=(0,o.isArray)(A)&&A.length>0;I[i][a+"_kvp_rw"]=O?1:0,"ozone"!==i&&((0,o.logInfo)("setting aliases object"),I.prebid={aliases:{ozone:i}}),f.hasOwnProperty("ozf")&&(I[i].ozf="true"===f.ozf||"1"===f.ozf?1:0),f.hasOwnProperty("ozpf")&&(I[i].ozpf="true"===f.ozpf||"1"===f.ozpf?1:0),f.hasOwnProperty("ozrp")&&f.ozrp.match(/^[0-3]$/)&&(I[i].ozrp=parseInt(f.ozrp)),f.hasOwnProperty("ozip")&&f.ozip.match(/^\d+$/)&&(I[i].ozip=parseInt(f.ozip)),null!=this.propertyBag.endpointOverride&&(I[i].origin=this.propertyBag.endpointOverride);var S=(0,o.deepAccess)(e,"0.userIdAsEids",[]);if(l.site={publisher:{id:c.publisherId},page:this.getRefererInfo().page,id:c.siteId},l.test=d.config.getConfig("debug")?1:0,t&&t.gdprConsent){(0,o.logInfo)("ADDING GDPR info");var T=(0,o.deepAccess)(t,"gdprConsent.apiVersion",1);l.regs={ext:{gdpr:t.gdprConsent.gdprApplies?1:0,apiVersion:T}},(0,o.deepAccess)(l,"regs.ext.gdpr")?(0,o.deepSetValue)(l,"user.ext.consent",t.gdprConsent.consentString):(0,o.logInfo)("**** Strange CMP info: bidderRequest.gdprConsent exists BUT bidderRequest.gdprConsent.gdprApplies is false. See bidderRequest logged above. ****")}else(0,o.logInfo)("WILL NOT ADD GDPR info; no bidderRequest.gdprConsent object");t&&t.uspConsent?((0,o.logInfo)("ADDING USP consent info"),(0,o.deepSetValue)(l,"regs.ext.us_privacy",t.uspConsent)):(0,o.logInfo)("WILL NOT ADD USP consent info; no bidderRequest.uspConsent."),h&&((0,o.logInfo)("schain found"),(0,o.deepSetValue)(l,"source.ext.schain",h)),!0===d.config.getConfig("coppa")&&(0,o.deepSetValue)(l,"regs.coppa",1);var x=(0,o.generateUUID)();if(this.isBatchRequests()){(0,o.logInfo)("going to batch the requests");for(var P=[],D=0;D<y.length;D+=10)l.id=x,l.imp=y.slice(D,D+10),l.ext=I,(0,o.deepSetValue)(l,"user.ext.eids",S),l.imp.length>0&&P.push({method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(l),bidderRequest:t});return(0,o.logInfo)("batch request going to return : ",P),P}if((0,o.logInfo)("requests will not be batched."),u){(0,o.logInfo)("buildRequests starting to generate response for a single request"),l.id=x,l.imp=y,l.ext=I,(0,o.deepSetValue)(l,"user.ext.eids",S);var R={method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(l),bidderRequest:t};return(0,o.logInfo)("buildRequests request data for single = ",JSON.parse(JSON.stringify(l))),this.propertyBag.buildRequestsEnd=(new Date).getTime(),(0,o.logInfo)("buildRequests going to return for single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),R),R}var j=y.map((function(e){(0,o.logInfo)("buildRequests starting to generate non-single response, working on imp : ",e);var n=Object.assign({},l);return n.id=(0,o.generateUUID)(),n.imp=[e],n.ext=I,(0,o.deepSetValue)(n,"user.ext.eids",S),(0,o.logInfo)("buildRequests RequestSingle (for non-single) = ",n),{method:"POST",url:r.getAuctionUrl(),data:JSON.stringify(n),bidderRequest:t}}));return this.propertyBag.buildRequestsEnd=(new Date).getTime(),(0,o.logInfo)("buildRequests going to return for non-single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),j),j},getFloorObjectForAuction:function(e){var t={banner:(0,o.deepAccess)(e,"mediaTypes.banner.sizes",null),video:(0,o.deepAccess)(e,"mediaTypes.video.playerSize",null),native:(0,o.deepAccess)(e,"mediaTypes.native.image.sizes",null)};(0,o.logInfo)("getFloorObjectForAuction mediaTypesSizes : ",t);var r={};return t.banner&&(r.banner=e.getFloor({mediaType:"banner",currency:"USD",size:t.banner})),t.video&&(r.video=e.getFloor({mediaType:"video",currency:"USD",size:t.video})),t.native&&(r.native=e.getFloor({mediaType:"native",currency:"USD",size:t.native})),(0,o.logInfo)("getFloorObjectForAuction returning : ",JSON.parse(JSON.stringify(r))),r},interpretResponse:function(e,t){var r=this;t&&t.bidderRequest&&t.bidderRequest.bids&&this.loadWhitelabelData(t.bidderRequest.bids[0]);var i=(new Date).getTime(),a=this.propertyBag.whitelabel.bidder,d=this.propertyBag.whitelabel.keyPrefix;(0,o.logInfo)("interpretResponse time: ".concat(i," . Time between buildRequests done and interpretResponse start was ").concat(i-this.propertyBag.buildRequestsEnd,"ms")),(0,o.logInfo)("serverResponse, request",JSON.parse(JSON.stringify(e)),JSON.parse(JSON.stringify(t)));var c=(e=e.body||{}).id;if(!e.hasOwnProperty("seatbid"))return[];if("object"!==(0,n.default)(e.seatbid))return[];var u=[],l=this.getWhitelabelConfigItem("ozone.enhancedAdserverTargeting");(0,o.logInfo)("enhancedAdserverTargeting",l),void 0===l&&(l=!0),(0,o.logInfo)("enhancedAdserverTargeting",l),e.seatbid=h(e.seatbid),e.seatbid=this.removeSingleBidderMultipleBids(e.seatbid);for(var p=this.getWhitelabelConfigItem("ozone.oz_omp_floor"),f="number"==typeof p,g=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),v=(0,o.isArray)(g)&&g.length>0,b=0;b<e.seatbid.length;b++)for(var y=e.seatbid[b],O=function(n){var i=r.getBidRequestForBidId(y.bid[n].impid,t.bidderRequest.bids);(0,o.logInfo)("seatbid:".concat(b,", bid:").concat(n," Going to set default w h for seatbid/bidRequest"),y.bid[n],i);var h=I(i),O=h.defaultWidth,S=h.defaultHeight,w=T(y.bid[n],O,S);w.meta={advertiserDomains:w.adomain||[]};var C=null,x=!1,D=(0,o.deepAccess)(w,"ext.prebid.type");(0,o.logInfo)("this bid type is : ".concat(D),n);var R={};if(D===s.VIDEO)if(x=!0,r.setBidMediaTypeIfNotExist(w,s.VIDEO),"outstream"===(C=r.getVideoContextForBidId(w.bidId,t.bidderRequest.bids)))(0,o.logInfo)("going to set thisBid.mediaType = VIDEO & attach a renderer to OUTSTREAM video : ",n),w.renderer=P(w.bidId);else if((0,o.logInfo)("bid is not an outstream video, will set thisBid.mediaType = VIDEO and thisBid.vastUrl and not attach a renderer: ",n),w.vastUrl="https://".concat((0,o.deepAccess)(w,"ext.prebid.targeting.hb_cache_host","missing_host")).concat((0,o.deepAccess)(w,"ext.prebid.targeting.hb_cache_path","missing_path"),"?id=").concat((0,o.deepAccess)(w,"ext.prebid.targeting.hb_cache_id","missing_id")),R.hb_cache_host=(0,o.deepAccess)(w,"ext.prebid.targeting.hb_cache_host","no-host"),R.hb_cache_path=(0,o.deepAccess)(w,"ext.prebid.targeting.hb_cache_path","no-path"),w.hasOwnProperty("videoCacheKey"))(0,o.logInfo)("videoCacheKey already exists on the bid object, will not add it");else{var j=(0,o.deepAccess)(w,"ext.prebid.targeting.hb_uuid","no_hb_uuid");(0,o.logInfo)("Adding videoCacheKey: ".concat(j)),w.videoCacheKey=j}else r.setBidMediaTypeIfNotExist(w,s.BANNER);if(l){var k=_(w.bidId,e.seatbid);(0,o.logInfo)("Going to iterate allBidsForThisBidId",k),Object.keys(k).forEach((function(e,t,r){(0,o.logInfo)("adding adserverTargeting for ".concat(e," for bidId ").concat(w.bidId)),R[d+"_"+e]=e,R[d+"_"+e+"_crid"]=String(k[e].crid),R[d+"_"+e+"_adv"]=String(k[e].adomain),R[d+"_"+e+"_adId"]=String(k[e].adId),R[d+"_"+e+"_pb_r"]=A(k[e].price,k[e].ext.prebid.type),k[e].hasOwnProperty("dealid")&&(R[d+"_"+e+"_dealid"]=String(k[e].dealid)),f&&(R[d+"_"+e+"_omp"]=k[e].price>=p?"1":"0"),x&&(R[d+"_"+e+"_vid"]=C);var n=(0,o.deepAccess)(k[e],"ext.bidder.".concat(a,".floor"),null);null!=n&&(R[d+"_"+e+"_flr"]=n);var i=(0,o.deepAccess)(k[e],"ext.bidder.".concat(a,".ruleId"),null);null!=i&&(R[d+"_"+e+"_rid"]=i),e.match(/^ozappnexus/)&&(R[d+"_"+e+"_sid"]=String(k[e].cid))}))}else v?(0,o.logWarn)("You have set a whitelist of adserver keys but this will be ignored because ".concat(a,".enhancedAdserverTargeting is set to false. No per-bid keys will be sent to adserver.")):(0,o.logInfo)("".concat(a,".enhancedAdserverTargeting is set to false, so no per-bid keys will be sent to adserver."));var N=E(w.bidId,e.seatbid),B=N.seat,U=N.bid;R[d+"_auc_id"]=String(c),R[d+"_winner"]=String(B),R[d+"_bid"]="true",R[d+"_cache_id"]=(0,o.deepAccess)(w,"ext.prebid.targeting.hb_cache_id","no-id"),R[d+"_uuid"]=(0,o.deepAccess)(w,"ext.prebid.targeting.hb_uuid","no-id"),l&&(R[d+"_imp_id"]=String(U.impid),R[d+"_pb_v"]=m,R[d+"_pb"]=U.price,R[d+"_pb_r"]=A(U.price,D),R[d+"_adId"]=String(U.adId),R[d+"_size"]="".concat(U.width,"x").concat(U.height)),v&&((0,o.logInfo)("Going to filter out adserver targeting keys not in the whitelist: ",g),Object.keys(R).forEach((function(e){-1===g.indexOf(e)&&delete R[e]}))),w.adserverTargeting=R,u.push(w)},S=0;S<y.bid.length;S++)O(S);var w=(new Date).getTime();return(0,o.logInfo)("interpretResponse going to return at time ".concat(w," (took ").concat(w-i,"ms) Time from buildRequests Start -> interpretRequests End = ").concat(w-this.propertyBag.buildRequestsStart,"ms")),(0,o.logInfo)("interpretResponse arrAllBids (serialised): ",JSON.parse(JSON.stringify(u))),u},setBidMediaTypeIfNotExist:function(e,t){e.hasOwnProperty("mediaType")?(0,o.logInfo)("found value for thisBid.mediaType: ".concat(e.mediaType)):((0,o.logInfo)("setting thisBid.mediaType = ".concat(t)),e.mediaType=t)},getWhitelabelConfigItem:function(e){if("ozone"===this.propertyBag.whitelabel.bidder)return d.config.getConfig(e);var t=e.replace("ozone",this.propertyBag.whitelabel.bidder);return t=t.replace("oz_",this.propertyBag.whitelabel.keyPrefix+"_"),d.config.getConfig(t)},removeSingleBidderMultipleBids:function(e){for(var t=[],r=0;r<e.length;r++){for(var n=e[r],i={seat:n.seat,bid:[]},a=[],s=0;s<n.bid.length;s++){var d=n.bid[s];if(!(0,o.contains)(a,d.impid)){a.push(d.impid);for(var c=s+1;c<n.bid.length;c++)n.bid[c].impid===d.impid&&n.bid[c].price>d.price&&(d=n.bid[c]);i.bid.push(d)}}t.push(i)}return t},getUserSyncs:function(e,t,r,n){if((0,o.logInfo)("getUserSyncs optionsType",e,"serverResponse",t,"gdprConsent",r,"usPrivacy",n,"cookieSyncBag",this.cookieSyncBag),!t||0===t.length)return[];if(e.iframeEnabled){var i=[];for(var a in d.config.getConfig("debug")&&i.push("pbjs_debug=true"),i.push("gdpr="+((0,o.deepAccess)(r,"gdprApplies",!1)?"1":"0")),i.push("gdpr_consent="+(0,o.deepAccess)(r,"consentString","")),i.push("usp_consent="+(n||"")),this.cookieSyncBag.userIdObject)i.push(a+"="+this.cookieSyncBag.userIdObject[a]);i.push("publisherId="+this.cookieSyncBag.publisherId),i.push("siteId="+this.cookieSyncBag.siteId),i.push("cb="+Date.now()),i.push("bidder="+this.propertyBag.whitelabel.bidder);var s=i.join("&");return s.length>0&&(s="?"+s),(0,o.logInfo)("getUserSyncs going to return cookie sync url : "+this.getCookieSyncUrl()+s),[{type:"iframe",url:this.getCookieSyncUrl()+s}]}},getBidRequestForBidId:function(e,t){for(var r=0;r<t.length;r++)if(t[r].bidId===e)return t[r];return null},getVideoContextForBidId:function(e,t){var r=this.getBidRequestForBidId(e,t);return null!=r?(0,o.deepAccess)(r,"mediaTypes.video.context","unknown"):null},findAllUserIds:function(e){var t={},r=["pubcid","tdid","idl_env","criteoId","lotamePanoramaId","fabrickId"];if(e.hasOwnProperty("userId")){for(var i in r){var a=r[i];e.userId.hasOwnProperty(a)&&("string"==typeof e.userId[a]?t[a]=e.userId[a]:"object"==(0,n.default)(e.userId[a])?((0,o.logError)("WARNING: findAllUserIds had to use first key in user object to get value for bid.userId key: ".concat(a,". Prebid adapter should be updated.")),t[a]=e.userId[a][Object.keys(e.userId[a])[0]]):(0,o.logError)("failed to get string key value for userId : ".concat(a)))}var s=(0,o.deepAccess)(e.userId,"lipb.lipbid");s&&(t.lipb={lipbid:s});var d=(0,o.deepAccess)(e.userId,"id5id.uid");d&&(t.id5id=d);var c=(0,o.deepAccess)(e.userId,"parrableId.eid");c&&(t.parrableId=c);var u=(0,o.deepAccess)(e.userId,"sharedid.id");u&&(t.sharedid=u)}if(!t.hasOwnProperty("pubcid")){var l=(0,o.deepAccess)(e,"crumbs.pubcid");l&&(t.pubcid=l)}return t},getPlacementId:function(e){return e.params.placementId.toString()},getPlacementIdOverrideFromGetParam:function(){var e=this.propertyBag.whitelabel.keyPrefix,t=this.getGetParametersAsObject();if(t.hasOwnProperty(e+"storedrequest")){if(this.isValidPlacementId(t[e+"storedrequest"]))return(0,o.logInfo)("using GET ".concat(e,"storedrequest ")+t[e+"storedrequest"]+" to replace placementId"),t[e+"storedrequest"];(0,o.logError)("GET ".concat(e,"storedrequest FAILED VALIDATION - will not use it"))}return null},getGetParametersAsObject:function(){var e=(0,o.parseUrl)(this.getRefererInfo().location);return(0,o.logInfo)("getGetParametersAsObject found:",e.search),e.search},getRefererInfo:function(){if((0,l.getRefererInfo)().hasOwnProperty("location"))return(0,o.logInfo)("FOUND location on getRefererInfo OK (prebid >= 7); will use getRefererInfo for location & page"),(0,l.getRefererInfo)();(0,o.logInfo)("DID NOT FIND location on getRefererInfo (prebid < 7); will use legacy code that ALWAYS worked reliably to get location & page ;-)");try{return{page:top.location.href,location:top.location.href}}catch(e){return{page:window.location.href,location:window.location.href}}},blockTheRequest:function(){var e=this.getWhitelabelConfigItem("ozone.oz_request");return"boolean"==typeof e&&!e&&((0,o.logWarn)("Will not allow auction : ".concat(this.propertyBag.whitelabel.keyPrefix,"_request is set to false")),!0)},getPageId:function(){if(null==this.propertyBag.pageId){for(var e="",t=20;t>0;t--)e+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];this.propertyBag.pageId=(new Date).getTime()+"_"+e}return this.propertyBag.pageId},unpackVideoConfigIntoIABformat:function(e,t){var r={ext:{}};return r=this._unpackVideoConfigIntoIABformat(r,e),r=this._unpackVideoConfigIntoIABformat(r,t)},_unpackVideoConfigIntoIABformat:function(e,t){var r=["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"],i=function(n){s=!1,r.forEach((function(r){r===n&&(e[n]=t[n],s=!0)})),s||(e.ext[n]=t[n])};for(var a in t){var s;i(a)}return t.hasOwnProperty("ext")&&"object"===(0,n.default)(t.ext)&&(t.hasOwnProperty("ext")?e.ext=(0,o.mergeDeep)(e.ext,t.ext):e.ext=t.ext),e},addVideoDefaults:function(e,t,r){return e=this._addVideoDefaults(e,t,!1),e=this._addVideoDefaults(e,r,!0)},_addVideoDefaults:function(e,t,r){var n=(0,o.deepAccess)(t,"context");"outstream"===n?e.placement=3:"instream"===n&&(e.placement=1);var i=(0,o.deepAccess)(t,"skippable",null);return null==i?r&&!e.hasOwnProperty("skip")&&(e.skip=i?1:0):e.skip=i?1:0,e},getLoggableBidObject:function(e){var t={ad:e.ad,adId:e.adId,adUnitCode:e.adUnitCode,adm:e.adm,adomain:e.adomain,adserverTargeting:e.adserverTargeting,auctionId:e.auctionId,bidId:e.bidId,bidder:e.bidder,bidderCode:e.bidderCode,cpm:e.cpm,creativeId:e.creativeId,crid:e.crid,currency:e.currency,h:e.h,w:e.w,impid:e.impid,mediaType:e.mediaType,params:e.params,price:e.price,transactionId:e.transactionId,ttl:e.ttl};return e.hasOwnProperty("floorData")&&(t.floorData=e.floorData),t}};function h(e){(0,o.logInfo)("injectAdIdsIntoAllBidResponses",e);for(var t=0;t<e.length;t++)for(var r=e[t],n=0;n<r.bid.length;n++)r.bid[n].adId="".concat(r.bid[n].impid,"-").concat(t,"-").concat(b.propertyBag.whitelabel.keyPrefix,"-").concat(n);return e}function y(e){return Array.isArray(e)&&Array.isArray(e[0])?e[0]:e}function I(e){if(!e)return(0,o.logInfo)("defaultSize received empty bid obj! going to return fixed default size"),{defaultHeight:250,defaultWidth:300};var t=e.sizes,r={};return r.defaultWidth=y(t)[0],r.defaultHeight=y(t)[1],r}function E(e,t){for(var r=null,n=null,i=0;i<t.length;i++)for(var o=t[i].bid,a=t[i].seat,s=0;s<o.length;s++)if(o[s].impid===e&&(null==r||r.price<o[s].price)){r=o[s],n=a;break}return{seat:n,bid:r}}function _(e,t){for(var r={},n=0;n<t.length;n++)for(var i=t[n].bid,o=t[n].seat,a=0;a<i.length;a++)i[a].impid===e&&(r.hasOwnProperty(o)?r[o].price<i[a].price&&(r[o]=i[a]):r[o]=i[a]);return r}function A(e,t){var r=d.config.getConfig("mediaTypePriceGranularity.".concat(t)),n=d.config.getConfig("customPriceBucket"),i=d.config.getConfig("priceGranularity"),a=S(t,r,i,n),s=O(t,r,i);(0,o.logInfo)("getRoundedBid. price:",e,"mediaType:",t,"configkey:",s,"configObject:",a,"mediaTypeGranularity:",r,"strBuckets:",i);var u=(0,c.getPriceBucketString)(e,a,d.config.getConfig("currency.granularityMultiplier"));(0,o.logInfo)("priceStringsObj",u);var l={medium:"med",custom:"custom",high:"high",low:"low",dense:"dense"};if(l.hasOwnProperty(s)){var p=l[s];return(0,o.logInfo)("getRoundedBid: looking for priceStringsKey:",p),u[p]}return u.auto}function O(e,t,r){return"string"==typeof t?t:"object"===(0,n.default)(t)?"custom":"string"==typeof r?r:"auto"}function S(e,t,r,i){return"object"===(0,n.default)(t)?t:"custom"===r?i:""}function T(e,t,r){return e.cpm=e.price,e.bidId=e.impid,e.requestId=e.impid,e.width=e.w||t,e.height=e.h||r,e.ad=e.adm,e.netRevenue=!0,e.creativeId=e.crid,e.currency="USD",e.ttl=300,e}function w(e){var t=x(e);return t?t[0]&&"object"===(0,n.default)(t[0])&&((0,o.logInfo)("getWidthAndHeightFromVideoObject found nested array inside playerSize.",t[0]),"number"!=typeof(t=t[0])[0]&&"string"!=typeof t[0])?((0,o.logInfo)("getWidthAndHeightFromVideoObject found non-number/string type inside the INNER array in playerSize. This is totally wrong - cannot continue.",t[0]),null):2!==t.length?((0,o.logInfo)("getWidthAndHeightFromVideoObject found playerSize with length of "+t.length+". This is totally wrong - cannot continue."),null):{w:t[0],h:t[1]}:null}function C(e){var t=x(e);return t?t.length<1?null:t[0]&&"object"===(0,n.default)(t[0]):null}function x(e){(0,o.logInfo)("getPlayerSizeFromObject received object",e);var t=(0,o.deepAccess)(e,"playerSize");return t||(t=(0,o.deepAccess)(e,"ext.playerSize")),t?"object"!==(0,n.default)(t)?((0,o.logError)("getPlayerSizeFromObject FAILED: playerSize is not an object/array",e),null):t:((0,o.logError)("getPlayerSizeFromObject FAILED: no playerSize in video object or ext",e),null)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=window.ozoneVideo;(0,o.logInfo)("newRenderer going to set loaded to ".concat(r?"true":"false"));var n=u.Renderer.install({url:b.getRendererUrl(),config:t,loaded:r,adUnitCode:e});try{n.setRender(D)}catch(e){(0,o.logError)("Prebid Error when calling setRender on renderer",n,e)}return(0,o.logInfo)("returning renderer object"),n}function D(e){(0,o.logInfo)("outstreamRender called. Going to push the call to window.ozoneVideo.outstreamRender(bid) bid = (first static, then reference)"),(0,o.logInfo)(JSON.parse(JSON.stringify(b.getLoggableBidObject(e)))),e.renderer.push((function(){(0,o.logInfo)("Going to execute window.ozoneVideo.outstreamRender"),window.ozoneVideo.outstreamRender(e)}))}(0,a.registerBidder)(b),(0,o.logInfo)("*BidAdapter ".concat(m," was loaded")),(0,i.registerModule)("ozoneBidAdapter")},2233:(e,t,r)=>{"use strict";var n=r(8851),i=r(4627),o=r(9084),a=r(1779),s=r(7343),d="pairId",c="pairId",u=(0,o.getStorageManager)({moduleType:s.MODULE_TYPE_UID,moduleName:d});function l(e){return u.localStorageIsEnabled()?u.getDataFromLocalStorage(e):null}function p(e){return u.cookiesAreEnabled()?u.getCookie(e):null}var f={name:d,gvlid:755,decode:function(e){return e&&Array.isArray(e)?{pairId:e}:void 0},getId:function(e){var t=l(c)||p(c),r=[];if(t&&"string"==typeof t)try{r=r.concat(JSON.parse(atob(t)))}catch(e){(0,a.logInfo)(e)}var n=e&&e.params||{};if(n&&n.liveramp){var i=n.liveramp.storageKey||"_lr_pairId",o=l(i)||p(i);try{var s=JSON.parse(atob(o));r=r.concat(s.envelope)}catch(e){(0,a.logInfo)(e)}}if(0!=r.length)return{id:r};(0,a.logInfo)("PairId not found.")},eids:{pairId:{source:"google.com",atype:571187}}};(0,i.submodule)("userId",f),(0,n.registerModule)("pairIdSystem")},9389:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.S2S_VENDORS=void 0;t.S2S_VENDORS={appnexuspsp:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ib.adnxs.com/openrtb2/prebid",noP1Consent:"https://ib.adnxs-simple.com/openrtb2/prebid"},syncEndpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/cookie_sync",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/cookie_sync"},timeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction",noP1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid-server.rubiconproject.com/cookie_sync",noP1Consent:"https://prebid-server.rubiconproject.com/cookie_sync"},timeout:500},openx:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.openx.net/openrtb2/auction",noP1Consent:"https://prebid.openx.net/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.openx.net/cookie_sync",noP1Consent:"https://prebid.openx.net/cookie_sync"},timeout:1e3},openwrap:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ow.pubmatic.com/openrtb2/auction?source=pbjs",noP1Consent:"https://ow.pubmatic.com/openrtb2/auction?source=pbjs"},timeout:500}}},6279:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o=n(r(8212)),a=r(8851),s=n(r(4221)),d=r(1779),c=n(r(5404)),u=n(r(1442)),l=r(6522),p=r(43),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),g=r(9635),v=r(9389),m=r(6150),b=r(4627),h=r(8619),y=r(1486),I=r(1380);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O,S,T=l.config.getConfig,w=c.default.S2S.SRC,C=0,x={bidders:Object.freeze([]),timeout:1e3,syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{eventtrackers:[{event:1,methods:[1,2]}]}};l.config.setDefaults({s2sConfig:x});var P=function(e,t,r,n){var i;if((null===(i=r[t])||void 0===i||!i.ignoreDuplicateBidders)&&Array.isArray(e.bidders)){var o=e.bidders.filter((function(e){return-1===n.indexOf(e)&&(n.push(e),!0)}));r[t].bidders=o}};function D(e){if(e){var t=Array.isArray(e)?e:[e],r=[];return t.every((function(t,n,i){!function(e){["endpoint","syncEndpoint"].forEach((function(t){if((0,d.isStr)(e[t])){var r=e[t];e[t]={p1Consent:r,noP1Consent:r}}!(0,d.isPlainObject)(e[t])||e[t].p1Consent&&e[t].noP1Consent||["p1Consent","noP1Consent"].forEach((function(r){e[t][r]||(0,d.logWarn)("s2sConfig.".concat(t,".").concat(r," not defined.  PBS request will be skipped in some P1 scenarios."))}))}))}(e);var o=function(e){if(e.defaultVendor){var t=e.defaultVendor,r=Object.keys(e);if(!v.S2S_VENDORS[t])return(0,d.logError)("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(v.S2S_VENDORS[t]).forEach((function(n){x[n]!==e[n]&&(0,g.includes)(r,n)||(e[n]=v.S2S_VENDORS[t][n])}))}return e.enabled="boolean"==typeof e.enabled&&e.enabled}(t);if(!1!==o){var a=function(e){var t=Object.keys(e);if(["accountId","endpoint"].filter((function(e){return!(0,g.includes)(t,e)&&((0,d.logError)(e+" missing in server to server config"),!0)})).length>0)return!1}(t);if(!1!==a)return P(t,n,i,r),!0}return(0,d.logWarn)("prebidServer: s2s config is disabled"),!1}))?O=t:void 0}}function R(e,t,r,n,i){if(O.length!==C){C++;var o={},a=T("userSync.filterSettings");if(a){var s=a.all,c=a.iframe||s,u=a.image||s;c&&(o=Object.assign({iframe:c},o)),u&&(o=Object.assign({image:u},o))}var l={uuid:(0,d.generateUUID)(),bidders:e,account:i.accountId,filterSettings:o},p=i.userSyncLimit;(0,d.isNumber)(p)&&p>0&&(l.limit=p),t&&(l.gdpr=t.gdprApplies?1:0,!1!==t.gdprApplies&&(l.gdpr_consent=t.consentString)),r&&(l.us_privacy=r),n&&(l.gpp_sid=n.applicableSections.join(),l.gpp=n.gppString),"boolean"==typeof i.coopSync&&(l.coopSync=i.coopSync);var f=JSON.stringify(l);(0,m.ajax)(B(i.syncEndpoint,t),(function(e){try{j((e=JSON.parse(e)).bidder_status,i)}catch(e){(0,d.logError)(e)}}),f,{contentType:"text/plain",withCredentials:!0})}}function j(e,t){if(0!==e.length){var r=e.shift();r.no_cookie?function(e,t,r,n,i){i.syncUrlModifier&&"function"==typeof i.syncUrlModifier[r]&&(t=i.syncUrlModifier[r](e,t,r));!function(e,t,r,n,i){t?"image"===e||"redirect"===e?((0,d.logMessage)('Invoking image pixel user sync for bidder: "'.concat(r,'"')),(0,d.triggerPixel)(t,n,i)):"iframe"===e?((0,d.logMessage)('Invoking iframe user sync for bidder: "'.concat(r,'"')),(0,d.insertUserSyncIframe)(t,n,i)):((0,d.logError)('User sync type "'.concat(e,'" not supported for bidder: "').concat(r,'"')),n()):((0,d.logError)('No sync url for bidder "'.concat(r,'": ').concat(t)),n())}(e,t,r,n,i.syncTimeout)}(r.usersync.type,r.usersync.url,r.bidder,j.bind(null,e,t),t):j(e,t)}}T("s2sConfig",(function(e){return D(e.s2sConfig)}));var k={};function N(e){var t,r,n=function(e,t){if([e,t].every(d.isStr))return k["".concat(e).concat(t)]}(e.auctionId,e.adId);(0,d.isStr)(n)&&((0,d.logMessage)('Invoking image pixel for wurl on BID_WIN: "'.concat(n,'"')),(0,d.triggerPixel)(n),t=e.auctionId,r=e.adId,[t,r].every(d.isStr)&&(k["".concat(t).concat(r)]=void 0))}function B(e,t){return(0,h.hasPurpose1Consent)(t)?e.p1Consent:e.noP1Consent}function U(e){var t,r,n;return Array.isArray(e)&&e.length>0&&(t=e[0].gdprConsent,r=e[0].uspConsent,n=e[0].gppConsent),{gdprConsent:t,uspConsent:r,gppConsent:n}}function M(e,t,r){var n,i=(null==e||null===(n=e.seatbid)||void 0===n?void 0:n.flatMap((function(e){return e.bid.map((function(e){return{attr:e.attr}}))})))||[];return null!=i&&i[r]&&null!=t&&t.bid&&(t.bid.meta=A(A({},t.bid.meta),{},{isInBannerVideo:6===i[r].attr})),t}function q(){var e=new s.default("prebidServer");return e.callBids=function(e,t,r,n,i){var o=e.metrics=(0,I.useMetrics)((0,d.deepAccess)(t,"0.metrics")).newMetrics().renameWith((function(t){return["adapter.s2s.".concat(t),"adapters.s2s.".concat(e.s2sConfig.defaultVendor,".").concat(t)]}));n=o.startTiming("total").stopBefore(n),t.forEach((function(e){return(0,I.useMetrics)(e.metrics).join(o,{continuePropagation:!1})}));var a=U(t),s=a.gdprConsent,g=a.uspConsent,v=a.gppConsent;if(Array.isArray(O)){if(e.s2sConfig&&e.s2sConfig.syncEndpoint&&B(e.s2sConfig.syncEndpoint,s))R(e.s2sConfig.bidders.map((function(e){return u.default.aliasRegistry[e]||e})).filter((function(e,t,r){return r.indexOf(e)===t})),s,g,v,e.s2sConfig);V(e,t,i,{onResponse:function(r,i,a){null!=a&&a.app&&t.forEach((function(e){return e.app=!0})),r&&t.forEach((function(e){return f.emit(c.default.EVENTS.BIDDER_DONE,e)})),function(e,t){var r,n;return(null==e||null===(r=e.extPrebid)||void 0===r?void 0:r.returnallbidstatus)&&(null==t||null===(n=t.ext)||void 0===n?void 0:n.seatnonbid)}(e.s2sConfig,a)&&f.emit(c.default.EVENTS.SEAT_NON_BID,{seatnonbid:a.ext.seatnonbid,auctionId:t[0].auctionId,requestedBidders:i,response:a,adapterMetrics:o}),n(!1),function(e,t,r,n){e.forEach((function(e){var i=u.default.getBidAdapter(e);i&&i.registerSyncs&&l.config.runWithBidder(e,i.registerSyncs.bind(i,[],t,r,n))}))}(i,s,g,v)},onError:function(e,r){(0,d.logError)("Prebid server call failed: '".concat(e,"'"),r),t.forEach((function(e){return f.emit(c.default.EVENTS.BIDDER_ERROR,{error:r,bidderRequest:e})})),n(r.timedOut)},onBid:function(t){var n,i,o,a=t.adUnit,s=t.bid,u=s.metrics=e.metrics.fork().renameWith();u.checkpoint("addBidResponse"),null!=s.requestId&&null!=s.requestBidder||e.s2sConfig.allowUnknownBidderCodes?u.measureTime("addBidResponse.validate",(function(){return(0,p.isValid)(a,s)}))?(r(a,s),s.pbsWurl&&(n=s.auctionId,i=s.adId,o=s.pbsWurl,[n,i].every(d.isStr)&&(k["".concat(n).concat(i)]=o))):r.reject(a,s,c.default.REJECTION_REASON.INVALID):((0,d.logWarn)("PBS adapter received bid from unknown bidder (".concat(s.bidder,"), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.")),r.reject(a,s,c.default.REJECTION_REASON.BIDDER_DISALLOWED))},onFledge:function(e){(0,p.addComponentAuction)(A({auctionId:t[0].auctionId},e),e.config)}})}},f.on(c.default.EVENTS.BID_WON,N),Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:w})}var V=(0,b.hook)("sync",(function(e,t,r,n){var i=n.onResponse,o=n.onError,a=n.onBid,s=n.onFledge,c=U(t).gdprConsent,l=(0,d.deepClone)(e.ad_units),p={},f=l.map((function(e){return e.bids.map((function(e){var t=u.default.aliasRegistry[e.bidder];return t&&(p[e.bidder]=t),e.bidder})).filter(d.uniques)})).reduce(d.flatten,[]).filter(d.uniques),v=e.metrics.measureTime("buildRequests",(function(){return(0,y.buildPBSRequest)(e,t,l,f,S,p)})),m=v&&JSON.stringify(v);(0,d.logInfo)("BidRequest: "+m);var b=B(e.s2sConfig.endpoint,c);if(v&&m&&b){var h=e.metrics.startTiming("net");r(b,{success:function(t){var r;h();try{r=JSON.parse(t);var n=e.metrics.measureTime("interpretResponse",(function(){return(0,y.interpretPBSResponse)(r,v)})),o=n.bids,c=n.fledgeAuctionConfigs;o.forEach((function(e,t){var n,i;"pubm_ss"===(null===(n=e)||void 0===n||null===(i=n.bid)||void 0===i?void 0:i.bidderCode)&&(e=M(r,e,t)),a(e)})),c&&c.forEach(s),null!=v&&v.app&&(r.app=!0)}catch(e){(0,d.logError)(e)}!r||r.status&&(0,g.includes)(r.status,"Error")?((0,d.logError)("error parsing response: ",r?r.status:"not valid JSON"),i(!1,f)):i(!0,f,r)},error:function(){h(),o.apply(this,arguments)}},m,{contentType:"text/plain",withCredentials:!0})}else(0,d.logError)("PBS request not made.  Check endpoints.")}),"processPBSRequest");(0,d.getPrebidInternal)().setEidPermissions=function(e){S=e},u.default.registerBidAdapter(new q,"prebidServer"),(0,a.registerModule)("prebidServerBidAdapter")},1486:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.buildPBSRequest=function(e,t,r,n,i,a){var s=(0,c.timestamp)(),d=new Set,l=[],p=(0,h.s2sActivityParams)(e.s2sConfig),f=(g=(0,b.redactor)(p),v={},function(e){return null==e?g:(v.hasOwnProperty(e)||(v[e]=(0,b.redactor)((0,y.activityParams)(I.MODULE_TYPE_BIDDER,e))),v[e])});var g,v;(r=r.map((function(e){return f().bidRequest(e)}))).forEach((function(i){var o=new Map;r.bids=i.bids.map((function(e){return f(e.bidder).bidRequest(e)})),i.bids.forEach((function(r){null!=r.mediaTypes&&(0,c.logWarn)("Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ".concat(i.code,", bidder: ").concat(r.bidder));var s=o.get(r.bidder),d=(0,c.getBidRequest)(r.bid_id,t);s?N(r,d,e,o,n,a):o.set(r.bidder,d)}));for(var s=i.code,u=1;d.has(s);)u++,s="".concat(i.code,"-").concat(u);d.add(s),l.push(C(C(C({},i),{},{adUnitCode:i.code},(0,c.getDefinedParams)(o.values().next().value||{},["userId","userIdAsEids","schain"])),{},{pbsData:{impId:s,actualBidRequests:o,adUnit:i}}))}));var m=C(C({},Object.fromEntries(Object.entries(t[0]).filter((function(e){var t=(0,o.default)(e,1)[0];return!D.has(t)})))),{},{fledgeEnabled:t.some((function(e){return e.fledgeEnabled}))}),A=j.toORTB({bidderRequest:m,bidRequests:l,context:{currency:u.config.getConfig("currency.adServerCurrency")||P,ttl:e.s2sConfig.defaultTtl||x,requestTimestamp:s,s2sBidRequest:e,requestedBidders:n,actualBidderRequests:t,eidPermissions:i,nativeRequest:e.s2sConfig.ortbNative,getRedactor:f,transmitTids:(0,E.isActivityAllowed)(_.ACTIVITY_TRANSMIT_TID,p)}});return B(e,A),A},t.convertDynamicAliasToOriginalBidder=k,t.createBidUsingDynamicAlias=N,t.interpretPBSResponse=function(e,t){return k(e),j.fromORTB({response:e,request:t})},t.setAppData=B;var i,o=n(r(8832)),a=n(r(4319)),s=n(r(8212)),d=r(6337),c=r(1779),u=r(6522),l=n(r(5404)),p=r(4223),f=r(6364),g=r(4175),v=r(8519),m=r(9502),b=r(2156),h=r(1442),y=r(9675),I=r(7343),E=r(1681),_=r(353),A=r(3801),O=r(7463);function S(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=60,P="USD",D=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),R={},j=(0,d.ortbConverter)({processors:f.pbsExtensions,context:{netRevenue:!0},imp:function(e,t,r){Object.assign(r,t.pbsData);var n=e(t,r);if((t.bids||[]).forEach((function(e){e.ortb2Imp&&Object.keys(e.ortb2Imp).length>0&&(0,c.deepSetValue)(n,"ext.prebid.imp.".concat(e.bidder),e.ortb2Imp)})),Object.values(v.SUPPORTED_MEDIA_TYPES).some((function(e){return n[e]})))return n.secure=r.s2sBidRequest.s2sConfig.secure,n},request:function(e,t,r,n){if(t.length){var i,o=n.s2sBidRequest,a=n.requestedBidders,s=n.eidPermissions,d=e(t,r,n),u=(null==r||null===(i=r.adUnitsS2SCopy)||void 0===i?void 0:i.length)&&r.adUnitsS2SCopy[0].refresh;return d.tmax=u&&o.s2sConfig.refreshTimeout||o.s2sConfig.timeout,[d.app,d.dooh,d.site].forEach((function(e){var t;!e||null!==(t=e.publisher)&&void 0!==t&&t.id||(0,c.deepSetValue)(e,"publisher.id",o.s2sConfig.accountId)})),(0,c.isArray)(s)&&s.length>0&&(a&&(0,c.isArray)(a)&&(s=s.map((function(e){return C(C({},e),{},{bidders:e.bidders.filter((function(e){return a.includes(e)}))})}))),(0,c.deepSetValue)(d,"ext.prebid.data.eidpermissions",s)),n.transmitTids||(0,c.deepSetValue)(d,"ext.prebid.createtids",!1),d}(0,c.logError)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse:function(e,t,r){var n,i,o=r.actualBidRequests.get(r.seatbid.seat);null==o&&(o=r.actualBidRequests.get(null)),o&&Object.assign(r,{bidRequest:o,bidderRequest:r.actualBidderRequests.find((function(e){return e.bidderCode===o.bidder}))});var a=e(t,r);return a.requestBidder=null===(n=o)||void 0===n?void 0:n.bidder,null!==(i=a.native)&&void 0!==i&&i.ortb&&(a.adm=a.native.ortb),a.requestTimestamp=r.requestTimestamp,{bid:Object.assign((0,p.createBid)(l.default.STATUS.GOOD,{src:l.default.S2S.SRC,bidId:o?o.bidId||o.bid_Id:null,transactionId:r.adUnit.transactionId,auctionId:r.bidderRequest.auctionId}),a),adUnit:r.adUnit.code}},overrides:(i={},(0,s.default)(i,m.IMP,{id:function(e,t,r,n){t.id=n.impId},params:function(e,t,r,n){var i,o=n.s2sBidRequest.s2sConfig.adapterOptions,a=S(n.actualBidRequests.values());try{for(a.s();!(i=a.n()).done;){var s=i.value;(0,g.setImpBidParams)(t,s,n,n),o&&o[s.bidder]&&Object.assign(t.ext.prebid.bidder[s.bidder],o[s.bidder])}}catch(e){a.e(e)}finally{a.f()}},bidfloor:function(e,t,r,n){var i,o,a=(0,O.minimum)((0,A.currencyCompare)((function(e){return[e.bidfloor,e.bidfloorcur]}))),s=S(n.actualBidRequests.values());try{for(s.s();!(o=s.n()).done;){var d=o.value,c={};if(e(c,d,n),null==c.bidfloorcur||null==c.bidfloor){i=null;break}i=null==i?c:a(i,c)}}catch(e){s.e(e)}finally{s.f()}null!=i&&Object.assign(t,i)}}),(0,s.default)(i,m.REQUEST,{fpd:function(e,t,r,n){var i,s,d;(n.transmitTids&&(0,c.deepSetValue)(t,"source.tid",r.auctionId),(0,c.mergeDeep)(t,null===(i=n.s2sBidRequest.ortb2Fragments)||void 0===i?void 0:i.global),n.s2sBidRequest.s2sConfig.extPrebid&&"object"===(0,a.default)(n.s2sBidRequest.s2sConfig.extPrebid))&&(0,c.deepSetValue)(t,"ext.prebid",(0,c.mergeDeep)((null===(d=t.ext)||void 0===d?void 0:d.prebid)||{},n.s2sBidRequest.s2sConfig.extPrebid));n.getRedactor().ortb2(t);var u=Object.entries((null===(s=n.s2sBidRequest.ortb2Fragments)||void 0===s?void 0:s.bidder)||{}).filter((function(e){var t=(0,o.default)(e,1)[0],r=n.s2sBidRequest.s2sConfig.bidders;return n.s2sBidRequest.s2sConfig.allowUnknownBidderCodes||r&&r.includes(t)})).map((function(e){var t=(0,o.default)(e,2),r=t[0],i=t[1];return{bidders:[r],config:{ortb2:n.getRedactor(r).ortb2(i)}}}));u.length&&(0,c.deepSetValue)(t,"ext.prebid.bidderconfig",u)},extPrebidAliases:function(e,t,r,n){n.actualBidderRequests.forEach((function(r){e(t,r,n)}))},sourceExtSchain:function(e,t,r,n){var i,o=(0,c.deepAccess)(t,"ext.prebid.schains")||[],a=new Set(o.flatMap((function(e){return e.bidders})));o=Object.values(o.concat(n.actualBidderRequests.filter((function(e){return!a.has(e.bidderCode)})).map((function(e){return{bidders:[e.bidderCode],schain:(0,c.deepAccess)(e,"bids.0.schain")}}))).filter((function(e){var t=e.bidders,r=e.schain;return(null==t?void 0:t.length)>0&&r})).reduce((function(e,t){var r=t.bidders,n=t.schain,o=JSON.stringify(n);return e.hasOwnProperty(o)||(e[o]={bidders:new Set,schain:n}),r.forEach((function(t){return e[o].bidders.add(t)})),(null==i||e[o].bidders.size>i.bidders.size)&&(i=e[o]),e}),{})).map((function(e){var t=e.bidders,r=e.schain;return{bidders:Array.from(t),schain:r}})),null!=i&&(0,c.deepSetValue)(t,"source.ext.schain",i.schain),o.length&&(0,c.deepSetValue)(t,"ext.prebid.schains",o)}}),(0,s.default)(i,m.RESPONSE,{serverSideStats:function(e,t,r,n){n.actualBidderRequests.forEach((function(i){return e(t,r,C(C({},n),{},{bidderRequest:i,bidRequests:i.bids}))}))},fledgeAuctionConfigs:function(e,t,r,n){var i=Object.values(n.impContext).flatMap((function(e){return(e.fledgeConfigs||[]).map((function(t){var r=e.actualBidderRequests.find((function(e){return e.bidderCode===t.bidder})),n=e.actualBidRequests.get(t.bidder);return{adUnitCode:e.adUnit.code,ortb2:null==r?void 0:r.ortb2,ortb2Imp:null==n?void 0:n.ortb2Imp,config:t.config}}))}));i.length>0&&(t.fledgeAuctionConfigs=i)}}),i)});function k(e){e.seatbid&&e.seatbid.map((function(e){var t=e.seat;for(var r in R){(R[r].bidders||[]).indexOf(t)>-1&&(e.seat=r)}return e}))}function N(e,t,r,n,i,o){var a=C({},e),s=R[a.bidder]=R[a.bidder]||{};s.bidders=s.bidders||[],s.next=s.next||{};var d=s.next[e.auctionId]||1;s.next[e.auctionId]=d+1;var c="".concat(a.bidder).concat(d);a.bidder=c,s.bidders.includes(c)||s.bidders.push(c),t.bidder=c,n.set(c,t);var u=r.s2sConfig,l=u.extPrebid=u.extPrebid||{},p=l.aliases=l.aliases||{},f=l.aliases[e.bidder]||o[e.bidder]||e.bidder;p[c]=f,i.push(c)}function B(e,t){var r,n,i,o=null==e||null===(r=e.s2sConfig)||void 0===r?void 0:r.appData;o&&t&&(t.app=o,t.app.ext=null==t||null===(n=t.site)||void 0===n?void 0:n.ext,t.app.publisher=null==t||null===(i=t.site)||void 0===i?void 0:i.publisher,delete t.site)}},3515:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o,a=n(r(4319)),s=n(r(7996)),d=n(r(8212)),c=r(8851),u=r(1779),l=r(6522),p=r(6150),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),g=n(r(5404)),v=r(4627),m=r(9635),b=r(4080),h=r(6059),y=r(6572),I=r(9502),E=r(1380),_=r(5926),A=r(9558),O=r(3801),S=["modelGroups"];function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x="Price Floors",P=(0,p.ajaxBuilder)(1e4),D=Symbol(),R=[D,"gptSlot","adUnitCode","size","domain","mediaType"];var j=!1,k=!1,N={},B=[],U={};var M,q=function(){return null==M&&(M=(0,u.parseUrl)((0,b.getRefererInfo)().topmostLocation,{noDecodeWholeURL:!0}).hostname),M};function V(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,n=void 0===r?y.auctionManager.index:r;return(null==e?void 0:e.adUnitCode)||n.getAdUnit(t).code}var L=(o={},(0,d.default)(o,D,(function(){return"*"})),(0,d.default)(o,"size",(function(e,t){return(0,u.parseGPTSingleSizeArray)(t.size)||"*"})),(0,d.default)(o,"mediaType",(function(e,t){return t.mediaType||"banner"})),(0,d.default)(o,"gptSlot",(function(e,t){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=(void 0===t?y.auctionManager.index:t).getAdUnit({transactionId:e});return"gam"===(0,u.deepAccess)(r,"ortb2Imp.ext.data.adserver.name")&&r.ortb2Imp.ext.data.adserver.adslot}((e||t).transactionId)||(0,A.getGptSlotInfoForAdUnitCode)(V(e,t)).gptSlot})),(0,d.default)(o,"domain",q),(0,d.default)(o,"adUnitCode",(function(e,t){return V(e,t)})),o);function F(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e,t,r){return e.length?e.reduce((function(e,n){var i=L[n](t,r)||"*";return e.push("*"===i?["*"]:[i.toLowerCase(),"*"]),e}),[]):[]}((0,u.deepAccess)(e,"schema.fields")||[],t,n);if(!i.length)return{matchingFloor:void 0};var o=i.map((function(e){return e[0]})).join("-"),a=(0,u.deepAccess)(e,"matchingInputs.".concat(o));if(a)return C({},a);var s,d,c=(s=i,d=(0,u.deepAccess)(e,"schema.delimiter")||"|",s.reduce((function(e,t){var r=[];return e.map((function(e){t.map((function(t){r.push(e+d+t)}))})),r})).sort((function(e,t){return e.split("*").length-t.split("*").length}))),l=(0,m.find)(c,(function(t){return e.values.hasOwnProperty(t)})),p={floorMin:e.floorMin||0,floorRuleValue:e.values[l],matchingData:c[0],matchingRule:l===(null===(r=e.meta)||void 0===r?void 0:r.defaultRule)?void 0:l},f=(0,u.deepAccess)(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof f&&(p.floorMin=f),p.matchingFloor=Math.max(p.floorMin,p.floorRuleValue),(0,u.deepSetValue)(e,"matchingInputs.".concat(o),C({},p)),p}function G(e,t,r){return parseFloat((0,_.adjustCpm)(e,C(C({},t),{},{cpm:e}),r))}function z(e,t){var r=Math.pow(10,10);return e*r/(t*r)*(e*r)/r}var W={banner:function(e){return(0,u.deepAccess)(e,"mediaTypes.banner.sizes")||[]},video:function(e){return(0,u.deepAccess)(e,"mediaTypes.video.playerSize")||[]},native:function(e){return(0,u.deepAccess)(e,"mediaTypes.native.image.sizes")?[(0,u.deepAccess)(e,"mediaTypes.native.image.sizes")]:[]}};function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currency:"USD",mediaType:"*",size:"*"},t=this,r=U[t.auctionId];if(!r||r.skipped)return{};e=function(e,t){var r=Object.keys(e.mediaTypes||{});return"*"===t.mediaType&&1===r.length&&(t.mediaType=r[0]),"*"===t.size&&-1!==r.indexOf(t.mediaType)&&W[t.mediaType]&&1===W[t.mediaType](e).length&&(t.size=W[t.mediaType](e)[0]),t}(t,e);var n,i,o=F(r.data,C({},t),{mediaType:e.mediaType,size:e.size}),a=e.currency||r.data.currency;if(o.matchingFloor&&a!==r.data.currency)try{o.matchingFloor=(0,c.getGlobal)().convertCurrency(o.matchingFloor,r.data.currency,a)}catch(e){(0,u.logWarn)("".concat(x,": Unable to get currency conversion for getFloor for bidder ").concat(t.bidder,". You must have currency module enabled with defaultRates in your currency config")),a=r.data.currency}if(r.enforcement.bidAdjustment&&o.matchingFloor){var s=h.bidderSettings.get(t.bidder,"inverseBidAdjustment");if(s)o.matchingFloor=s(o.matchingFloor,t);else{var d=G(o.matchingFloor,null,t);o.matchingFloor=d?z(o.matchingFloor,d):o.matchingFloor}}return o.matchingFloor?{floor:(n=o.matchingFloor,i=4,Math.ceil((parseFloat(n)*Math.pow(10,i)).toFixed(1))/Math.pow(10,i)),currency:a}:{}}function Y(e,t){var r=(0,u.deepClone)(e);return r.schema.delimiter=e.schema.delimiter||"|",r.values=function(e,t){var r=e.schema.fields,n=e.schema.delimiter,i=t&&-1===r.indexOf("adUnitCode")&&r.unshift("adUnitCode");return Object.keys(e.values).reduce((function(r,o){return r[(i?"".concat(t).concat(n).concat(o):o).toLowerCase()]=e.values[o],r}),{})}(r,t),r.currency=r.currency||"USD",r}function K(e){var t=e.find((function(e){var t;return null!=(null===(t=e.floors)||void 0===t?void 0:t.schema)}));return e.reduce((function(e,r){var n,i;if(null!=(null===(n=r.floors)||void 0===n?void 0:n.schema)&&!(0,u.deepEqual)(r.floors.schema,null==t||null===(i=t.floors)||void 0===i?void 0:i.schema))return(0,u.logError)("".concat(x,": adUnit '").concat(r.code,"' declares a different schema from one previously declared by adUnit '").concat(t.code,"'. Floor config for '").concat(r.code,"' will be ignored.")),e;var o=Object.assign({},null==t?void 0:t.floors,{values:void 0},r.floors);if(re(o))if(e.values){var a=Y(o,r.code).values;Object.assign(e.values,a)}else(e=Y(o,r.code)).location="adUnit";else null!=r.floors&&(0,u.logWarn)("adUnit '".concat(r.code,"' provides an invalid `floor` definition, it will be ignored for floor calculations"),r);return e}),{})}function J(e,t,r){var n=function(e){var t,r,n=e.data,i=e.enforcement;return(null==n||null===(t=n.noFloorSignalBidders)||void 0===t?void 0:t.length)>0?n.noFloorSignalBidders:(null==i||null===(r=i.noFloorSignalBidders)||void 0===r?void 0:r.length)>0?i.noFloorSignalBidders:[]}(t);e.forEach((function(e){e.bids.forEach((function(e){var i,o=n.some((function(t){return t===e.bidder}));t.skipped||o?(o&&(0,u.logInfo)("noFloorSignal to ".concat(e.bidder)),delete e.getFloor):e.getFloor=H,e.auctionId=r,e.floorData={noFloorSignaled:o,skipped:t.skipped,skipRate:null!==(i=(0,u.deepAccess)(t,"data.skipRate"))&&void 0!==i?i:t.skipRate,skippedReason:t.skippedReason,floorMin:t.floorMin,modelVersion:(0,u.deepAccess)(t,"data.modelVersion"),modelWeight:(0,u.deepAccess)(t,"data.modelWeight"),modelTimestamp:(0,u.deepAccess)(t,"data.modelTimestamp"),location:(0,u.deepAccess)(t,"data.location","noData"),floorProvider:t.floorProvider,fetchStatus:N.fetchStatus}}))}))}function Q(e,t){for(var r=Math.floor(Math.random()*t+1),n=0;n<e.length;n++)if((r-=e[n].modelWeight)<=0)return e[n]}function X(e,t){var r=(0,u.deepClone)(N);if(2===(0,u.deepAccess)(r,"data.floorsSchemaVersion")){var n=r.data,i=n.modelGroups,o=(0,s.default)(n,S);r.data=Object.assign(o,Q(i,o.modelWeightSum))}var a=0===Object.keys((0,u.deepAccess)(r,"data.values")||{}).length;if(r.data=a?K(e):Y(r.data),0===Object.keys((0,u.deepAccess)(r,"data.values")||{}).length)r.skipped=!0,r.skippedReason=g.default.FLOOR_SKIPPED_REASON.NOT_FOUND;else{var d,c=(0,u.getParameterByName)("pbjs_skipRate")||(null!==(d=(0,u.deepAccess)(r,"data.skipRate"))&&void 0!==d?d:r.skipRate),l=100*Math.random()<parseFloat(c);r.skipped=l,l&&(r.skippedReason=g.default.FLOOR_SKIPPED_REASON.RANDOM)}return r.hasOwnProperty("floorMin")&&(r.data.floorMin=r.floorMin),J(e,r,t),r}function $(e){if(!e.hasExited){B=B.filter((function(t){return t.timer!==e.timer})),e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||(0,u.generateUUID)();var t=(e.reqBidsConfigObj.adUnits||(0,c.getGlobal)()).filter((function(t){var r;return!(null!==(r=e.reqBidsConfigObj.adUnitCodes)&&void 0!==r&&r.length)||e.reqBidsConfigObj.adUnitCodes.includes(t.code)}));U[e.reqBidsConfigObj.auctionId]=X(t,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0}}function Z(e){if((0,u.isNumber)(e.default)){var t,r,n="*",i=((null===(t=e.schema)||void 0===t?void 0:t.fields)||[]).length;if(i)n=Array(i).fill("*").join((null===(r=e.schema)||void 0===r?void 0:r.delimiter)||"|");else(0,u.deepSetValue)(e,"schema.fields",[D]);e.values=e.values||{},null==e.values[n]&&(e.values[n]=e.default,e.meta={defaultRule:n})}return e}function ee(e){return e=Z(e),!!function(e){if(Array.isArray(e)&&e.length>0){if(e.every((function(e){return R.includes(e)})))return!0;(0,u.logError)("".concat(x,": Fields received do not match allowed fields"))}return!1}((0,u.deepAccess)(e,"schema.fields"))&&(t=e,r=e.schema.fields.length,n=e.schema.delimiter||"|","object"===(0,a.default)(t.values)&&(t.values=Object.keys(t.values).reduce((function(e,i){return function(e,t,r,n){return"string"==typeof e&&e.split(n).length===r&&"number"==typeof t}(i,t.values[i],r,n)&&(e[i]=t.values[i]),e}),{}),Object.keys(t.values).length>0));var t,r,n}var te={1:function(e){return ee(e)},2:function(e){return!(!Array.isArray(e.modelGroups)||0===e.modelGroups.length)&&(e.modelWeightSum=0,e.modelGroups.every((function(t){return!("number"!=typeof t.modelWeight||!ee(t))&&(e.modelWeightSum+=t.modelWeight,!0)})))}};function re(e){return"object"===(0,a.default)(e)&&(e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof te[e.floorsSchemaVersion]?((0,u.logError)("".concat(x,": Unknown floorsSchemaVersion: "),e.floorsSchemaVersion),!1):te[e.floorsSchemaVersion](e))}function ne(e,t){if(e&&"object"===(0,a.default)(e)&&re(e))return(0,u.logInfo)("".concat(x,": A ").concat(t," set the auction floor data set to "),e),C(C({},e),{},{location:t});(0,u.logError)("".concat(x,": The floors data did not contain correct values"),e)}var ie=(0,E.timedAuctionHook)("priceFloors",(function(e,t){var r={reqBidsConfigObj:t,context:this,nextFn:e,haveExited:!1,timer:null};N.auctionDelay>0&&j?(r.timer=setTimeout((function(){(0,u.logWarn)("".concat(x,": Fetch attempt did not return in time for auction")),N.fetchStatus="timeout",$(r)}),N.auctionDelay),B.push(r)):$(r)}));function oe(){B.forEach((function(e){clearTimeout(e.timer),$(e)})),B=[]}function ae(e){var t;j=!1,N.fetchStatus="success";try{t=JSON.parse(e)}catch(r){t=e}var r=ne(t,"fetch");r&&(N.data=r,N.skipRate=(0,u.isNumber)(r.skipRate)?r.skipRate:N.skipRate,N.floorProvider=r.floorProvider||N.floorProvider),oe()}function se(e){j=!1,N.fetchStatus="error",(0,u.logError)("".concat(x,": Fetch errored with: "),e),oe()}function de(e){e.url&&!j?"GET"!==(e.method||"GET")?(0,u.logError)("".concat(x,": 'GET' is the only request method supported at this time!")):(P(e.url,{success:ae,error:se},null,{method:"GET"}),j=!0):j&&(0,u.logWarn)("".concat(x,": A fetch is already occuring. Skipping."))}function ce(e){(N=(0,u.pick)(e,["floorMin","enabled",function(e){return!1!==e},"auctionDelay",function(e){return e||0},"floorProvider",function(t){return(0,u.deepAccess)(e,"data.floorProvider",t)},"endpoint",function(e){return e||{}},"skipRate",function(){return isNaN((0,u.deepAccess)(e,"data.skipRate"))?e.skipRate||0:e.data.skipRate},"enforcement",function(e){return(0,u.pick)(e||{},["enforceJS",function(e){return!1!==e},"enforcePBS",function(e){return!0===e},"floorDeals",function(e){return!0===e},"bidAdjustment",function(e){return!1!==e},"noFloorSignalBidders",function(e){return e||[]}])},"additionalSchemaFields",function(e){return"object"===(0,a.default)(e)&&Object.keys(e).length>0?(t=e,void Object.keys(t).forEach((function(e){-1===R.indexOf(e)&&"function"==typeof t[e]&&(R.push(e),L[e]=t[e])}))):void 0;var t},"data",function(e){return e&&ne(e,"setConfig")||void 0}])).enabled?(de(N.endpoint),k||(f.on(g.default.EVENTS.AUCTION_END,(function(e){setTimeout((function(){return delete U[e.auctionId]}),3e3)})),(0,c.getGlobal)().requestBids.before(ie,50),(0,v.getHook)("addBidResponse").before(ue,(0,u.debugTurnedOn)()?4:50),k=!0)):((0,u.logInfo)("".concat(x,": Turning off module")),N={},U={},(0,v.getHook)("addBidResponse").getHooks({hook:ue}).remove(),(0,c.getGlobal)().requestBids.getHooks({hook:ie}).remove(),k=!1)}var ue=(0,E.timedBidResponseHook)("priceFloors",(function(e,t,r,n){var i=U[r.auctionId];if(!i||!r||i.skipped)return e.call(this,t,r,n);var o,a=y.auctionManager.index.getBidRequest(r),s=F(i.data,a,C(C({},r),{},{size:[r.width,r.height]}));if(!s.matchingFloor)return 0!==s.matchingFloor&&(0,u.logWarn)("".concat(x,": unable to determine a matching price floor for bidResponse"),r),e.call(this,t,r,n);var d,l=i.data.currency.toUpperCase(),p=r.currency||"USD";if(l===p.toUpperCase())o=r.cpm;else if(r.originalCurrency&&l===r.originalCurrency.toUpperCase())o=r.originalCpm;else try{o=(0,c.getGlobal)().convertCurrency(r.cpm,p.toUpperCase(),l)}catch(i){return(0,u.logError)("".concat(x,": Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ").concat(r)),e.call(this,t,r,n)}return function(e,t,r,n){r.floorData={floorValue:t.matchingFloor,floorRule:t.matchingRule,floorRuleValue:t.floorRuleValue,floorCurrency:e.data.currency,cpmAfterAdjustments:n,enforcements:C({},e.enforcement),matchedFields:{}},e.data.schema.fields.forEach((function(n,i){var o=t.matchingData.split(e.data.schema.delimiter)[i];r.floorData.matchedFields[n]=o}))}(i,s,r,o=G(o,r,a)),function(e,t,r){var n=!1!==(0,u.deepAccess)(e,"enforcement.enforceJS"),i=!0===(0,u.deepAccess)(e,"enforcement.floorDeals")||!r.dealId,o=r.floorData.cpmAfterAdjustments<t.matchingFloor;return n&&o&&i}(i,s,r)?(n(g.default.REJECTION_REASON.FLOOR_NOT_MET),void(0,u.logWarn)("".concat(x,": ").concat(r.bidderCode,"'s Bid Response for ").concat(t," was rejected due to floor not met (adjusted cpm: ").concat(null==r||null===(d=r.floorData)||void 0===d?void 0:d.cpmAfterAdjustments,", floor: ").concat(null==s?void 0:s.matchingFloor,")"),r)):e.call(this,t,r,n)}));function le(e,t,r){if("function"==typeof t.getFloor){var n,i;try{var o=t.getFloor({currency:r.currency||l.config.getConfig("currency.adServerCurrency")||"USD",mediaType:r.mediaType||"*",size:"*"});n=o.currency,i=o.floor}catch(e){return void(0,u.logWarn)("Cannot compute floor for bid",t)}i=parseFloat(i),null==n||null==i||isNaN(i)||Object.assign(e,{bidfloor:i,bidfloorcur:n})}}function pe(e,t,r){if(null!=e.bidfloor){var n,i,o,a,s,d,c,l,p,f,g=r.reqContext.floorMin||{},v=g.floorMinCur,m=g.floorMin;null==v&&(v=e.bidfloorcur);var b=(null===(n=e.ext)||void 0===n||null===(i=n.prebid)||void 0===i||null===(o=i.floors)||void 0===o?void 0:o.floorMinCur)||(null===(a=e.ext)||void 0===a||null===(s=a.prebid)||void 0===s?void 0:s.floorMinCur)||v,h=(null===(d=e.ext)||void 0===d||null===(c=d.prebid)||void 0===c||null===(l=c.floors)||void 0===l?void 0:l.floorMin)||(null===(p=e.ext)||void 0===p||null===(f=p.prebid)||void 0===f?void 0:f.floorMin),y=(0,O.convertCurrency)(e.bidfloor,e.bidfloorcur,v),I=!(!h||!b)&&(0,O.convertCurrency)(h,b,v),E=I&&I<y?I:y;(0,u.deepSetValue)(e,"ext.prebid.floors.floorMin",E),(null==m||m>E)&&(m=E),r.reqContext.floorMin={floorMin:m,floorMinCur:v}}}function fe(e,t,r){var n,i,o;k&&(0,u.deepSetValue)(e,"ext.prebid.floors.enabled",(null===(n=e.ext)||void 0===n||null===(i=n.prebid)||void 0===i||null===(o=i.floors)||void 0===o?void 0:o.enabled)||!1);null!=r&&r.floorMin&&(0,u.mergeDeep)(e,{ext:{prebid:{floors:r.floorMin}}})}l.config.getConfig("floors",(function(e){return ce(e.floors)})),(0,I.registerOrtbProcessor)({type:I.IMP,name:"bidfloor",fn:le}),(0,I.registerOrtbProcessor)({type:I.IMP,name:"extPrebidFloors",fn:pe,dialects:[I.PBS],priority:-1}),(0,I.registerOrtbProcessor)({type:I.REQUEST,name:"extPrebidFloors",fn:fe,dialects:[I.PBS]}),(0,c.registerModule)("priceFloors")},3504:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(8832)),o=n(r(147)),a=n(r(8212)),s=n(r(4319)),d=r(8851),c=r(1779),u=r(43),l=r(6613),p=r(6522),f=r(9723),g=r(6059),v=n(r(5404)),m=r(2039);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y="pubmatic",I="PubMatic: ",E="USD",_=void 0,A="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),O="Video.Placement param missing",S={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},T={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},w={mimes:T.ARRAY,minduration:T.NUMBER,maxduration:T.NUMBER,startdelay:T.NUMBER,playbackmethod:T.ARRAY,api:T.ARRAY,protocols:T.ARRAY,w:T.NUMBER,h:T.NUMBER,battr:T.ARRAY,linearity:T.NUMBER,placement:T.NUMBER,plcmt:T.NUMBER,minbitrate:T.NUMBER,maxbitrate:T.NUMBER,skip:T.NUMBER},C={ICON:1,IMAGE:3},x={1:"PMP",5:"PREF",6:"PMPG"},P={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var r,n=P.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode),o=0;o<window.bluebillywig.renderers.length;o++)if(window.bluebillywig.renderers[o]._id===n){r=window.bluebillywig.renderers[o];break}r?r.bootstrap(t,i):(0,c.logWarn)("".concat(I,": Couldn't find a renderer with ").concat(n))}else(0,c.logWarn)("".concat(I,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){var r=A.replace("$RENDERER",e),n=f.Renderer.install({url:r,loaded:!1,adUnitCode:t});try{n.setRender(P.outstreamRender)}catch(e){(0,c.logWarn)("".concat(I,": Error tying to setRender on renderer"),e)}return n},outstreamRender:function(e){e.renderer.push((function(){P.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},D=[l.BANNER,l.VIDEO,l.NATIVE],R=0,j=!1,k=["pubmatic"],N=["all"];function B(e){var t=document.createElement("a");return t.href=e,t.hostname}function U(e,t){if(!(0,c.isStr)(t))return t&&(0,c.logWarn)(I+"Ignoring param key: "+e+", expects string-value, found "+(0,s.default)(t)),_;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||_;case"yob":return parseInt(t)||_;default:return t}}function M(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(t=e.params.adSlot,(0,c.isStr)(t)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&(0,c.logWarn)(y+": adSlot must be a string. Ignoring adSlot"),""));var r=e.params.adSlot,n=r.split(":");if(r=n[0],2==n.length&&(e.params.adUnitIndex=n[1]),n=r.split("@"),e.params.adUnit=n[0],n.length>1){if(2!=(n=n[1].split("x")).length)return void(0,c.logWarn)(I+"AdSlot Error: adSlot not in required format");e.params.width=parseInt(n[0],10),e.params.height=parseInt(n[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(l.BANNER)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,o=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&o.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function q(e,t,r){var n,i="Ignoring param key: "+e+", expects "+r+", found "+(0,s.default)(t);switch(r){case T.BOOLEAN:n=c.isBoolean;break;case T.NUMBER:n=c.isNumber;break;case T.STRING:n=c.isStr;break;case T.ARRAY:n=c.isArray}return n(t)?t:((0,c.logWarn)(I+i),_)}var V={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},L=v.default.NATIVE_IMAGE_TYPES,F=v.default.NATIVE_KEYS_THAT_ARE_NOT_ASSETS,G=v.default.NATIVE_KEYS,z=v.default.NATIVE_ASSET_TYPES,W=Object.values(V);function H(e){if(!e&&!(0,c.isPlainObject)(e))return(0,c.logWarn)("".concat(I,": Native assets object is empty or not an object: ").concat(e)),void(j=!0);var t={ver:"1.2",assets:[]};for(var r in e)if(!F.includes(r))if(G.hasOwnProperty(r)||W.includes(r)){var n=e[r],i=0;n.required&&(0,c.isBoolean)(n.required)&&(i=Number(n.required));var o={id:t.assets.length,required:i};if(r in V)o.data={type:z[V[r]]},(n.len||n.length)&&(o.data.len=n.len||n.length),n.ext&&(o.data.ext=n.ext);else if("icon"===r||"image"===r){if(o.img={type:"icon"===r?L.ICON:L.MAIN},n.aspect_ratios)if((0,c.isArray)(n.aspect_ratios))if(n.aspect_ratios.length){var a=n.aspect_ratios[0],s=a.min_width,d=a.min_height;(0,c.isInteger)(s)&&(0,c.isInteger)(d)?(o.img.wmin=s,o.img.hmin=d):(0,c.logWarn)("".concat(I,": image.aspect_ratios min_width or min_height are invalid: ").concat(s,", ").concat(d));var u=n.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));u.length>0&&(o.img.ext={aspectratios:u})}else(0,c.logWarn)("".concat(I,": image.aspect_ratios was passed, but it's empty: ").concat(n.aspect_ratios));else(0,c.logWarn)("".concat(I,": image.aspect_ratios was passed, but it's not a an array: ").concat(n.aspect_ratios));o.img.w=n.w||n.width,o.img.h=n.h||n.height,o.img.wmin=n.wmin||n.minimumWidth||(n.minsizes?n.minsizes[0]:_),o.img.hmin=n.hmin||n.minimumHeight||(n.minsizes?n.minsizes[1]:_),n.sizes&&(2===n.sizes.length&&(0,c.isInteger)(n.sizes[0])&&(0,c.isInteger)(n.sizes[1])?((0,c.logInfo)("".concat(I,": if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin")),o.img.w=n.sizes[0],o.img.h=n.sizes[1],delete o.img.hmin,delete o.img.wmin):(0,c.logWarn)("".concat(I,": image.sizes was passed, but its value is not an array of integers: ").concat(n.sizes))),n.ext&&(o.img.ext=n.ext),n.mimes&&(o.img.mimes=n.mimes)}else"title"===r?(o.title={len:n.len||n.length||140},n.ext&&(o.title.ext=n.ext)):"ext"===r&&(o.ext=n,delete o.required);t.assets.push(o)}else(0,c.logWarn)("".concat(I,": Unrecognized native asset code: ").concat(r,". Asset will be ignored."));return t.assets.length<1?((0,c.logWarn)("".concat(I,": Could not find any valid asset")),void(j=!0)):t}function Y(e){var t;if(e.ortb){e=e.ortb,t=h(h({ver:"1.2"},e),{},{assets:[]});var r=e.assets,n=function(e){return e.title||e.img||e.data||e.video};if(r.length<1||!r.some((function(e){return n(e)})))return(0,c.logWarn)("".concat(I,": Native assets object is empty or contains some invalid object")),j=!0,t;r.forEach((function(e){var r=e;r.img&&(r.img.type==C.IMAGE?(r.w=r.w||r.width||(r.sizes?r.sizes[0]:_),r.h=r.h||r.height||(r.sizes?r.sizes[1]:_),r.wmin=r.wmin||r.minimumWidth||(r.minsizes?r.minsizes[0]:_),r.hmin=r.hmin||r.minimumHeight||(r.minsizes?r.minsizes[1]:_)):r.img.type==C.ICON&&(r.w=r.w||r.width||(r.sizes?r.sizes[0]:_),r.h=r.h||r.height||(r.sizes?r.sizes[1]:_))),r&&void 0!==r.id&&n(r)&&t.assets.push(r)}))}else t=H(e);return t}function K(e){var t,r=e.mediaTypes.banner.sizes,n=[];if(r!==_&&(0,c.isArray)(r)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===r.length)return t=_,(0,c.logWarn)(I+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(r[0][0],10),t.h=parseInt(r[0][1],10),r=r.splice(1,r.length-1)}r.length>0&&(n=[],r.forEach((function(e){e.length>1&&n.push({w:e[0],h:e[1]})})),n.length>0&&(t.format=n)),t.pos=0,t.topframe=(0,c.inIframe)()?0:1}else(0,c.logWarn)(I+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=_;return t}function J(e,t){(0,c.deepAccess)(e,"placement")||(0,c.logWarn)(O+" for "+t)}function Q(e){var t,r=(0,c.mergeDeep)((0,c.deepAccess)(e.mediaTypes,"video"),e.params.video);if(r!==_){for(var n in t={},J(r,e.adUnitCode),w)r.hasOwnProperty(n)&&(t[n]=q(n,r[n],w[n]));(0,c.isArray)(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):(0,c.isNumber)(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=_,(0,c.logWarn)(I+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function X(e,t){var r,n,i={},o={},a=e.hasOwnProperty("sizes")?e.sizes:[],d="",u=[],f=null==t?void 0:t.fledgeEnabled;if(function(e,t){t.params.deals&&((0,c.isArray)(t.params.deals)?t.params.deals.forEach((function(t){(0,c.isStr)(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):(0,c.logWarn)(I+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):(0,c.logWarn)(I+"Error: bid.params.deals should be an array of strings."))}(i={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:U("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:U("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?U("currency",e.params.currency):E},e),function(e,t){var r,n="";if(t.params.dctr)if(n=t.params.dctr,(0,c.isStr)(n)&&n.length>0){var i=n.split("|");n="",i.forEach((function(e){n+=e.length>0?e.trim()+"|":""})),r=n.length,"|"===n.substring(r,r-1)&&(n=n.substring(0,r-1)),e.ext.key_val=n.trim()}else(0,c.logWarn)(I+"Ignoring param : dctr with value : "+n+", expects string-value, found empty or non-string value")}(i,e),function(e,t){var r=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,n="";if(void 0!==r&&""!==r&&r.hasOwnProperty("segments")){var i,o=r.segments.length;n+="jw-id="+r.content.id;for(var a=0;a<o;a++)n+="|jw-"+r.segments[a]+"=1";(i=e.ext)&&void 0===i.key_val?i.key_val=n:i.key_val+="|"+n}}(i,e),e.hasOwnProperty("mediaTypes"))for(d in e.mediaTypes)switch(d){case l.BANNER:(r=K(e))!==_&&(i.banner=r);break;case l.NATIVE:o.request=JSON.stringify(Y(e.nativeParams)),j?((0,c.logWarn)(I+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."),j=!1):i.native=o;break;case l.VIDEO:(n=Q(e))!==_&&(i.video=n)}else r={pos:0,w:e.params.width,h:e.params.height,topframe:(0,c.inIframe)()?0:1},(0,c.isArray)(a)&&a.length>1&&((a=a.splice(1,a.length-1)).forEach((function(e){u.push({w:e[0],h:e[1]})})),r.format=u),i.banner=r;return function(e,t){var r=h({},(0,c.deepAccess)(t,"ortb2Imp.ext.data"));Object.keys(r).forEach((function(t){"pbadslot"===t?"string"==typeof r[t]&&r[t]&&(0,c.deepSetValue)(e,"ext.data.pbadslot",r[t]):"adserver"===t?["name","adslot"].forEach((function(t){var n=(0,c.deepAccess)(r,"adserver.".concat(t));"string"==typeof n&&n&&((0,c.deepSetValue)(e,"ext.data.adserver.".concat(t.toLowerCase()),n),"adslot"===t&&(0,c.deepSetValue)(e,"ext.dfp_ad_unit_code",n))})):(0,c.deepSetValue)(e,"ext.data.".concat(t),r[t])}));var n=(0,c.deepAccess)(t,"ortb2Imp.ext.gpid");n&&(0,c.deepSetValue)(e,"ext.gpid",n)}(i,e),function(e,t){var r=-1;"function"!=typeof t.getFloor||p.config.getConfig("pubmatic.disableFloors")||[l.BANNER,l.VIDEO,l.NATIVE].forEach((function(n){if(e.hasOwnProperty(n)){var i=[];"banner"===n&&(e[n].w&&e[n].h&&i.push([e[n].w,e[n].h]),(0,c.isArray)(e[n].format)&&e[n].format.forEach((function(e){return i.push([e.w,e.h])}))),0===i.length&&i.push("*"),i.forEach((function(i){var o=t.getFloor({currency:e.bidfloorcur,mediaType:n,size:i});if((0,c.logInfo)(I,"floor from floor module returned for mediatype:",n," and size:",i," is: currency",o.currency,"floor",o.floor),"object"===(0,s.default)(o)&&o.currency===e.bidfloorcur&&!isNaN(parseInt(o.floor))){var a=parseFloat(o.floor);(0,c.logInfo)(I,"floor from floor module:",a,"previous floor value",r,"Min:",Math.min(a,r)),r=-1===r?a:Math.min(a,r),(0,c.logInfo)(I,"new floor value:",r)}}))}}));e.bidfloor&&((0,c.logInfo)(I,"floor from floor module:",r,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(r,e.bidfloor)),r=Math.max(r,e.bidfloor));e.bidfloor=!isNaN(r)&&r>0?r:_,(0,c.logInfo)(I,"new impObj.bidfloor value:",e.bidfloor)}(i,e),function(e,t,r){if(r){var n,i;e.ext=e.ext||{},void 0!==(null==t||null===(n=t.ortb2Imp)||void 0===n||null===(i=n.ext)||void 0===i?void 0:i.ae)&&(e.ext.ae=t.ortb2Imp.ext.ae)}else{var o;null!==(o=e.ext)&&void 0!==o&&o.ae&&delete e.ext.ae}}(i,e,f),i.hasOwnProperty(l.BANNER)||i.hasOwnProperty(l.NATIVE)||i.hasOwnProperty(l.VIDEO)?i:_}function $(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,c.logWarn)(I+"acat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,r){return r.indexOf(e)===t}))).length>0&&((0,c.logWarn)(I+"acat: Selected: ",t),e.ext.acat=t)}function Z(e,t,r){var n,i,o;if(null!=t&&null!==(n=t.ext)&&void 0!==n&&n.prebiddealpriority){var a=(0,c.getBidRequest)(e.requestId,[r.bidderRequest]),s=(0,c.deepAccess)(a,"mediaTypes.video");if((null==s?void 0:s.context)==l.ADPOD){var d=(null==t||null===(i=t.ext)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.duration)||(null==s?void 0:s.maxduration);e.video={context:l.ADPOD,durationSeconds:d,dealTier:t.ext.prebiddealpriority}}}}function ee(e){return!0===(0,c.isArray)(e)&&e.length>0}function te(e,t,r){e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);var n=r||t.ext&&t.ext.advid;n&&(e.meta.advertiserId=n,e.meta.agencyId=n,e.meta.buyerId=n),t.adomain&&ee(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&ee(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0]),null!=t&&t.attr&&(e.meta.isInBannerVideo=6===t.attr)}var re={code:y,gvlid:76,supportedMediaTypes:[l.BANNER,l.VIDEO,l.NATIVE],isBidRequestValid:function(e){if(e&&e.params){if(!(0,c.isStr)(e.params.publisherId))return(0,c.logWarn)(I+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(l.VIDEO)){var t=(0,c.deepAccess)(e.mediaTypes,"video.mimes"),r=(0,c.deepAccess)(e,"params.video.mimes");if(!1===ee(t)&&!1===ee(r))return(0,c.logWarn)(I+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[l.VIDEO].hasOwnProperty("context"))return(0,c.logError)("".concat(I,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[l.VIDEO].context&&!(0,c.isStr)(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[l.VIDEO].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(l.BANNER)||e.mediaTypes.hasOwnProperty(l.NATIVE)?(delete e.mediaTypes[l.VIDEO],(0,c.logWarn)("".concat(I,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):((0,c.logError)("".concat(I,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var r,n,i,a,d,u,f,v,m,b,y;t&&t.refererInfo&&(y=t.refererInfo);var A,O=function(e){return{pageURL:(null==e?void 0:e.page)||window.location.href,refURL:(null==e?void 0:e.ref)||window.document.referrer}}(y),T=function(e){return{id:""+(new Date).getTime(),at:1,cur:[E],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(O),w="",C=[],x=[],P=[],D=(0,c.generateUUID)();if(e.forEach((function(e){var r,n;if(e.params.wiid=e.params.wiid||t.auctionId||D,(A=(0,c.deepClone)(e)).params.adSlot=A.params.adSlot||"",M(A),A.mediaTypes&&A.mediaTypes.hasOwnProperty("video")||A.params.hasOwnProperty("video"));else if(!(A.hasOwnProperty("mediaTypes")&&A.mediaTypes.hasOwnProperty(l.NATIVE)||0!==A.params.width||0!==A.params.height))return void(0,c.logWarn)(I+"Skipping the non-standard adslot: ",A.params.adSlot,JSON.stringify(A));O.pubId=O.pubId||A.params.publisherId,(O=function(e,t){var r,n,i;for(r in t.kadpageurl||(t.kadpageurl=t.pageURL),S)S.hasOwnProperty(r)&&(n=e[r])&&(i=S[r],"object"===(0,s.default)(i)&&(n=i.f(n,t)),(0,c.isStr)(n)?t[r]=n:(0,c.logWarn)(I+"Ignoring param : "+r+" with value : "+S[r]+", expects string-value, found "+(0,s.default)(n)));return t}(A.params,O)).transactionId=null===(r=A.ortb2Imp)||void 0===r||null===(n=r.ext)||void 0===n?void 0:n.tid,""===w?w=A.params.currency||_:A.params.hasOwnProperty("currency")&&w!==A.params.currency&&(0,c.logWarn)(I+"Currency specifier ignored. Only one currency permitted."),A.params.currency=w,A.params.hasOwnProperty("dctr")&&(0,c.isStr)(A.params.dctr)&&C.push(A.params.dctr),A.params.hasOwnProperty("bcat")&&(0,c.isArray)(A.params.bcat)&&(x=x.concat(A.params.bcat)),A.params.hasOwnProperty("acat")&&(0,c.isArray)(A.params.acat)&&(P=P.concat(A.params.acat));var i=X(A,t);i&&T.imp.push(i)})),0!=T.imp.length){T.site.publisher.id=O.pubId.trim(),R=O.pubId.trim(),T.ext.wrapper={},T.ext.wrapper.profile=parseInt(O.profId)||_,T.ext.wrapper.version=parseInt(O.verId)||_,T.ext.wrapper.wiid=O.wiid||t.auctionId,T.ext.wrapper.wv="prebid_prebid_8.34.0",T.ext.wrapper.transactionId=O.transactionId,T.ext.wrapper.wp="pbjs";var j=t?g.bidderSettings.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==j){if(T.ext.marketplace={},t&&1==j){var q=g.bidderSettings.get(t.bidderCode,"allowedAlternateBidderCodes");(0,c.isArray)(q)?(q=q.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(c.uniques),k=q.includes("*")?N:[].concat((0,o.default)(k),(0,o.default)(q))):k=N}T.ext.marketplace.allowedbidders=k.filter(c.uniques)}T.user.gender=O.gender?O.gender.trim():_,T.user.geo={},T.user.yob=U("yob",O.yob),T.site.page=O.kadpageurl.trim()||T.site.page.trim(),T.site.domain=B(T.site.page),"object"===(0,s.default)(p.config.getConfig("content"))&&(T.site.content=p.config.getConfig("content")),"object"===(0,s.default)(p.config.getConfig("device"))&&(T.device=Object.assign(T.device,p.config.getConfig("device"))),T.device.language=T.device.language&&T.device.language.split("-")[0],(0,c.deepSetValue)(T,"source.tid",null==t||null===(r=t.ortb2)||void 0===r||null===(n=r.source)||void 0===n?void 0:n.tid),-1!==window.location.href.indexOf("pubmaticTest=true")&&(T.test=1),e[0].schain&&(0,c.deepSetValue)(T,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&((0,c.deepSetValue)(T,"user.ext.consent",t.gdprConsent.consentString),(0,c.deepSetValue)(T,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&(0,c.deepSetValue)(T,"regs.ext.us_privacy",t.uspConsent),null!=t&&null!==(i=t.gppConsent)&&void 0!==i&&i.gppString?((0,c.deepSetValue)(T,"regs.gpp",t.gppConsent.gppString),(0,c.deepSetValue)(T,"regs.gpp_sid",t.gppConsent.applicableSections)):null!=t&&null!==(a=t.ortb2)&&void 0!==a&&null!==(d=a.regs)&&void 0!==d&&d.gpp&&((0,c.deepSetValue)(T,"regs.gpp",t.ortb2.regs.gpp),(0,c.deepSetValue)(T,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),!0===p.config.getConfig("coppa")&&(0,c.deepSetValue)(T,"regs.coppa",1),function(e,t){var r=(0,c.deepAccess)(t,"0.userIdAsEids");(0,c.isArray)(r)&&r.length>0&&(0,c.deepSetValue)(e,"user.eids",r)}(T,e);var V,L,F,G=t&&t.ortb2||{},z=G.user,W=G.device,H=G.site,Y=G.bcat,K=G.badv;if(H){var J=T.site,Q=J.page,Z=J.domain,ee=J.ref;(0,c.mergeDeep)(T,{site:H}),T.site.page=Q,T.site.domain=Z,T.site.ref=ee}if(z&&(0,c.mergeDeep)(T,{user:z}),K&&(0,c.mergeDeep)(T,{badv:K}),Y&&(x=x.concat(Y)),null!=W&&W.sua&&(T.device.sua=null==W?void 0:W.sua),null!=W&&null!==(u=W.ext)&&void 0!==u&&u.cdep&&(0,c.deepSetValue)(T,"device.ext.cdep",W.ext.cdep),null!=z&&z.geo&&null!=W&&W.geo?(T.device.geo=h(h({},T.device.geo),W.geo),T.user.geo=h(h({},T.user.geo),z.geo)):(null!=z&&z.geo||null!=W&&W.geo)&&(T.user.geo=T.device.geo=null!=z&&z.geo?h(h({},T.user.geo),z.geo):h(h({},T.user.geo),W.geo)),null!==(f=G.ext)&&void 0!==f&&null!==(v=f.prebid)&&void 0!==v&&null!==(m=v.bidderparams)&&void 0!==m&&null!==(b=m[t.bidderCode])&&void 0!==b&&b.acat){var te=G.ext.prebid.bidderparams[t.bidderCode].acat;$(T,te)}else P.length&&$(T,P);if(function(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,c.logWarn)(I+"bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,r){if(e.length>3)return r.indexOf(e)===t;(0,c.logWarn)(I+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&((0,c.logWarn)(I+"bcat: Selected: ",t),e.bcat=t)}(T,x),null!=t&&t.timeout)T.tmax=t.timeout;else T.tmax=null===(V=window)||void 0===V||null===(L=V.PWT)||void 0===L||null===(F=L.versionDetails)||void 0===F?void 0:F.timeout;return T.ext.epoch=(new Date).getTime(),"object"===(0,s.default)(p.config.getConfig("app"))&&(T.app=p.config.getConfig("app"),T.app.publisher=T.site.publisher,T.app.ext=T.site.ext||_,"object"!==(0,s.default)(T.app.content)&&(T.app.content=T.site.content||_),delete T.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(T),bidderRequest:t}}},interpretResponse:function(e,t){var r=[],n=E,o=JSON.parse(t.data),a=o.site&&o.site.ref?o.site.ref:"";try{e.body&&e.body.seatbid&&(0,c.isArray)(e.body.seatbid)&&(n=e.body.cur||n,e.body.seatbid.forEach((function(e){e.bid&&(0,c.isArray)(e.bid)&&e.bid.forEach((function(i){var s={requestId:i.impid,cpm:parseFloat((i.price||0).toFixed(2)),width:i.w,height:i.h,creativeId:i.crid||i.id,dealId:i.dealid,currency:n,netRevenue:true,ttl:300,referrer:a,ad:i.adm,pm_seat:e.seat||null,pm_dspid:i.ext&&i.ext.dspid?i.ext.dspid:null,partnerImpId:i.id||""};o.imp&&o.imp.length>0&&o.imp.forEach((function(e){if(i.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=D[e.ext.bidtype];else{(0,c.logInfo)(I+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var r=e.adm,n="",i=new RegExp(/VAST\s+version/);if(r.indexOf('span class="PubAPIAd"')>=0)t.mediaType=l.BANNER;else if(i.test(r))t.mediaType=l.VIDEO;else try{(n=JSON.parse(r.replace(/\\/g,"")))&&n.native&&(t.mediaType=l.NATIVE)}catch(e){(0,c.logWarn)(I+"Error: Cannot parse native reponse for ad response: "+r)}}}(i,s),s.mediaType){case l.BANNER:break;case l.VIDEO:s.width=i.hasOwnProperty("w")?i.w:e.video.w,s.height=i.hasOwnProperty("h")?i.h:e.video.h,s.vastXml=i.adm,function(e,t){var r,n,i;if(t.bidderRequest&&t.bidderRequest.bids){for(var o=0;o<t.bidderRequest.bids.length;o++)t.bidderRequest.bids[o].bidId===e.requestId&&(r=t.bidderRequest.bids[o].params,n=t.bidderRequest.bids[o].mediaTypes[l.VIDEO].context,i=t.bidderRequest.bids[o].adUnitCode);n&&"outstream"===n&&r&&r.outstreamAU&&i&&(e.rendererCode=r.outstreamAU,e.renderer=P.newRenderer(e.rendererCode,i))}}(s,t),Z(s,i,t);break;case l.NATIVE:!function(e,t){if(e.hasOwnProperty("adm")){var r="";try{r=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void(0,c.logWarn)(I+"Error: Cannot parse native reponse for ad response: "+t.adm)}t.native={ortb:h({},r.native)},t.mediaType=l.NATIVE,t.width||(t.width=0),t.height||(t.height=0)}}(i,s)}})),i.ext&&i.ext.deal_channel&&(s.dealChannel=x[i.ext.deal_channel]||null),te(s,i,e.seat),e.ext&&e.ext.buyid&&(s.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),i.ext&&i.ext.marketplace&&(s.bidderCode=i.ext.marketplace),r.push(s)}))})));var s=(0,c.deepAccess)(e.body,"ext.fledge_auction_configs");if(s)return s=Object.entries(s).map((function(e){var t=(0,i.default)(e,2),r=t[0],n=t[1];return{bidId:r,config:Object.assign({auctionSignals:{}},n)}})),{bids:r,fledgeAuctionConfigs:s}}catch(e){(0,c.logError)(e)}return r},getUserSyncs:function(e,t,r,n,i){var o,a,s=""+R;(r&&(s+="&gdpr="+(r.gdprApplies?1:0),s+="&gdpr_consent="+encodeURIComponent(r.consentString||"")),n&&(s+="&us_privacy="+encodeURIComponent(n)),null!=i&&i.gppString&&null!=i&&null!==(o=i.applicableSections)&&void 0!==o&&o.length)&&(s+="&gpp="+encodeURIComponent(i.gppString),s+="&gpp_sid="+encodeURIComponent(null==i||null===(a=i.applicableSections)||void 0===a?void 0:a.join(",")));return!0===p.config.getConfig("coppa")&&(s+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+s}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+s}]},transformBidParams:function(e,t,r,n){return(0,m.convertTypes)({publisherId:"string",adSlot:"string"},e)}};(0,u.registerBidder)(re),(0,d.registerModule)("pubmaticBidAdapter")},699:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(8832)),o=n(r(147)),a=n(r(8212)),s=r(8851),d=r(1779),c=r(6454),u=r(6613),l=r(43),p=r(9635),f=r(4239),g=r(6522);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=["prebid-eu","prebid-us","prebid-asia"],h=["USD"],y=[u.BANNER,u.NATIVE],I={NATIVE:{IMAGE_TYPE:{ICON:1,MAIN:3},ASSET_ID:{TITLE:1,IMAGE:2,ICON:3,BODY:4,SPONSORED:5,CTA:6},DATA_ASSET_TYPE:{SPONSORED:1,DESC:2,CTA_TEXT:12}}};var E={code:"rtbhouse",supportedMediaTypes:y,gvlid:16,isBidRequestValid:function(e){return!(!(0,p.includes)(b,e.params.region)||!e.params.publisherId)},buildRequests:function(e,t){e=(0,f.convertOrtbRequestToProprietaryNative)(e);var r={id:t.bidderRequestId,imp:e.map((function(e){return function(e,t){var r={id:e.bidId,banner:_(e),native:S(e),tagid:e.adUnitCode.toString()},n=function(e){var t=[];"function"==typeof e.getFloor&&Object.keys(e.mediaTypes).forEach((function(r){(0,p.includes)(y,r)&&t.push(e.getFloor({currency:h[0],mediaType:r,size:e.sizes||"*"}).floor)}));return t.length>0?Math.max.apply(Math,t):parseFloat(e.params.bidfloor)}(e);n&&(r.bidfloor=n);if(t.fledgeEnabled){var i,o;r.ext=r.ext||{},r.ext.ae=null==e||null===(i=e.ortb2Imp)||void 0===i||null===(o=i.ext)||void 0===o?void 0:o.ae}else{var a;null!==(a=r.ext)&&void 0!==a&&a.ae&&delete r.ext.ae}var s=(0,d.deepAccess)(e,"ortb2Imp.ext.tid");s&&(r.ext=r.ext||{},r.ext.tid=s);return r}(e,t)})),site:A(e,t),cur:h,test:e[0].params.test||0,source:O(e[0],t)};if(t&&t.gdprConsent&&t.gdprConsent.gdprApplies){var n=t.gdprConsent.consentString?t.gdprConsent.consentString.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):"",i=t.gdprConsent.gdprApplies?1:0;r.regs={ext:{gdpr:i}},r.user={ext:{consent:n}}}if(e[0].schain){var o=function(e){if(!e)return null;if(!function(e){if(!e.nodes)return!1;var t=["asi","sid","hp"];return e.nodes.every((function(e){return t.every((function(t){return e[t]}))}))}(e))return(0,d.logError)("RTB House: required schain params missing"),null;return e}(e[0].schain);o&&(r.ext={schain:o})}if(e[0].userIdAsEids){var s={eids:e[0].userIdAsEids};r.user&&r.user.ext?r.user.ext=m(m({},r.user.ext),s):r.user={ext:s}}var c=(null==t?void 0:t.ortb2)||{};["site","user","device","bcat","badv"].forEach((function(e){var t=c[e];t&&(0,d.mergeDeep)(r,(0,a.default)({},e,t))}));var u="creativecdn.com/bidder/prebid/bids";if(t.fledgeEnabled){var l=g.config.getConfig("fledgeConfig")||{seller:"https://fledge-ssp.creativecdn.com",decisionLogicUrl:"https://fledge-ssp.creativecdn.com/component-seller-prebid.js",sellerTimeout:500};(0,d.mergeDeep)(r,{ext:{fledge_config:l}}),u="creativecdn.com/bidder/prebidfledge/bids"}return{method:"POST",url:"https://"+e[0].params.region+"."+u,data:JSON.stringify(r)}},interpretOrtbResponse:function(e,t){var r=e.body;if(!(0,d.isArray)(r))return[];var n=[];return r.forEach((function(e){var t;e.price&&(t=0===e.adm.indexOf("{")?function(e){return{requestId:e.impid,mediaType:u.NATIVE,cpm:e.price,creativeId:e.adid,width:1,height:1,ttl:55,meta:{advertiserDomains:e.adomain},netRevenue:!0,currency:"USD",native:C(e.adm)}}(e):function(e){return{requestId:e.impid,mediaType:u.BANNER,cpm:e.price,creativeId:e.adid,ad:e.adm,width:e.w,height:e.h,ttl:55,meta:{advertiserDomains:e.adomain},netRevenue:!0,currency:"USD"}}(e),e.ext&&(t.ext=e.ext),n.push(t))})),n},interpretResponse:function(e,t){var r,n,a=g.config.getConfig("fledgeConfig.interestGroupBuyers")||[],s=e.body,c=null;if(s.bidid&&(0,d.isArray)(null==s||null===(r=s.ext)||void 0===r?void 0:r.igbid)){var u;n=this.interpretOrtbResponse({body:null===(u=s.seatbid[0])||void 0===u?void 0:u.bid},t);var l=s.ext.seller,p=s.ext.decisionLogicUrl,f="sellerTimeout"in s.ext?{sellerTimeout:s.ext.sellerTimeout}:{};s.ext.igbid.forEach((function(e){var t={};e.igbuyer.forEach((function(e){t[e.igdomain]=e.buyersignal})),(c=c||{})[e.impid]=(0,d.mergeDeep)({seller:l,decisionLogicUrl:p,interestGroupBuyers:[].concat((0,o.default)(a),(0,o.default)(Object.keys(t))),perBuyerSignals:t},f)}))}else n=this.interpretOrtbResponse(e,t);return c?(c=Object.entries(c).map((function(e){var t=(0,i.default)(e,2),r=t[0],n=t[1];return{bidId:r,config:Object.assign({auctionSignals:{}},n)}})),(0,d.logInfo)("Response with FLEDGE:",{bids:n,fledgeAuctionConfigs:c}),{bids:n,fledgeAuctionConfigs:c}):n}};function _(e){if("banner"===e.mediaType||(0,d.deepAccess)(e,"mediaTypes.banner")||!e.mediaType&&!e.mediaTypes){var t=e.sizes||e.mediaTypes.banner.sizes;return{w:t[0][0],h:t[0][1],format:t.map((function(e){return{w:e[0],h:e[1]}}))}}}function A(e,t){var r="unknown",n=null;e&&e.length>0&&(r=e[0].params.publisherId,n=e[0].params.channel&&e[0].params.channel.toString().slice(0,50));var i={publisher:{id:r.toString()},page:t.refererInfo.page,name:(0,c.getOrigin)()};return n&&(i.channel=n),i}function O(e,t){return{tid:(null==t?void 0:t.auctionId)||""}}function S(e){if("native"===e.mediaType||(0,d.deepAccess)(e,"mediaTypes.native"))return{request:{assets:T(e)},ver:"1.1"}}function T(e){var t=e.nativeParams||(0,d.deepAccess)(e,"mediaTypes.native"),r=[];return t.title&&r.push({id:I.NATIVE.ASSET_ID.TITLE,required:t.title.required?1:0,title:{len:t.title.len||25}}),t.image&&r.push({id:I.NATIVE.ASSET_ID.IMAGE,required:t.image.required?1:0,img:w(t.image,I.NATIVE.IMAGE_TYPE.MAIN)}),t.icon&&r.push({id:I.NATIVE.ASSET_ID.ICON,required:t.icon.required?1:0,img:w(t.icon,I.NATIVE.IMAGE_TYPE.ICON)}),t.sponsoredBy&&r.push({id:I.NATIVE.ASSET_ID.SPONSORED,required:t.sponsoredBy.required?1:0,data:{type:I.NATIVE.DATA_ASSET_TYPE.SPONSORED,len:t.sponsoredBy.len}}),t.body&&r.push({id:I.NATIVE.ASSET_ID.BODY,required:t.body.request?1:0,data:{type:I.NATIVE.DATA_ASSET_TYPE.DESC,len:t.body.len}}),t.cta&&r.push({id:I.NATIVE.ASSET_ID.CTA,required:t.cta.required?1:0,data:{type:I.NATIVE.DATA_ASSET_TYPE.CTA_TEXT,len:t.cta.len}}),r}function w(e,t){var r={type:t};if(e.aspect_ratios){var n=e.aspect_ratios[0],i=n.min_width||100;r.wmin=i,r.hmin=i/n.ratio_width*n.ratio_height}if(e.sizes){var o=Array.isArray(e.sizes[0])?e.sizes[0]:e.sizes;r.w=o[0],r.h=o[1]}return r}function C(e){var t=JSON.parse(e).native,r={clickUrl:encodeURI(t.link.url),impressionTrackers:t.imptrackers};return t.assets.forEach((function(e){switch(e.id){case I.NATIVE.ASSET_ID.TITLE:r.title=e.title.text;break;case I.NATIVE.ASSET_ID.IMAGE:r.image={url:encodeURI(e.img.url),width:e.img.w,height:e.img.h};break;case I.NATIVE.ASSET_ID.ICON:r.icon={url:encodeURI(e.img.url),width:e.img.w,height:e.img.h};break;case I.NATIVE.ASSET_ID.BODY:r.body=e.data.value;break;case I.NATIVE.ASSET_ID.SPONSORED:r.sponsoredBy=e.data.value;break;case I.NATIVE.ASSET_ID.CTA:r.cta=e.data.value}})),r}(0,l.registerBidder)(E),(0,s.registerModule)("rtbhouseBidAdapter")},8976:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o=n(r(4319)),a=n(r(8832)),s=n(r(8212)),d=r(8851),c=r(6522),u=r(4627),l=r(1779),p=E(r(985)),f=n(r(5404)),g=E(r(1442)),v=r(9635),m=r(1380),b=r(1526),h=r(7343),y=r(2428);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O,S=(0,r(8534).activityParamsBuilder)((function(e){return g.default.resolveAlias(e)})),T="realTimeData",w=[],C=[];var x,P=[];function D(e){return w.push(e),b.GDPR_GVLIDS.register(h.MODULE_TYPE_RTD,e.name,e.gvlid),function(){var t=w.indexOf(e);t>=0&&(w.splice(t,1),B())}}var R,j=(R=!1,function(){var e;R||(Object.entries((e={},(0,s.default)(e,f.default.EVENTS.AUCTION_INIT,["onAuctionInitEvent"]),(0,s.default)(e,f.default.EVENTS.AUCTION_END,["onAuctionEndEvent",M]),(0,s.default)(e,f.default.EVENTS.BID_RESPONSE,["onBidResponseEvent"]),(0,s.default)(e,f.default.EVENTS.BID_REQUESTED,["onBidRequestEvent"]),(0,s.default)(e,f.default.EVENTS.BID_ACCEPTED,["onBidAcceptedEvent"]),e)).forEach((function(e){var t=(0,a.default)(e,2),r=t[0],n=(0,a.default)(t[1],2),i=n[0],o=n[1];p.on(r,(function(e){o&&o(e),C.forEach((function(t){try{t[i]&&t[i](e,t.config,x)}catch(e){(0,l.logError)("RTD provider '".concat(t.name,"': error in '").concat(i,"':"),e)}}))}))})),R=!0)});function k(e){var t=e.getConfig(T,(function(e){var r=e.realTimeData;r.dataProviders?(t(),O=r,P=r.dataProviders,j(),(0,u.getHook)("startAuction").before(U,20),g.default.callDataDeletionRequest.before(V),B()):(0,l.logError)("missing parameters for real time module")}))}function N(){return{gdpr:g.gdprDataHandler.getConsentData(),usp:g.uspDataHandler.getConsentData(),gpp:g.gppDataHandler.getConsentData(),coppa:!!c.config.getConfig("coppa")}}function B(){x=N();var e=[];P.forEach((function(t){var r=(0,v.find)(w,(function(e){return e.name===t.name}));r&&r.init&&r.init(t,x)&&e.push(Object.assign(r,{config:t}))})),C=e,(0,l.logInfo)("Real time data module enabled, using submodules: ".concat(C.map((function(e){return e.name})).join(", ")))}var U=(0,m.timedAuctionHook)("rtd",(function(e,t){x=N();var r=[],n=[];C.forEach((function(e){if("function"==typeof e.getBidRequestData){r.push(e);var t=e.config;t&&t.waitForIt&&n.push(e)}}));var i,o=n.length&&O.auctionDelay&&O.auctionDelay>0,a=n.length,s=!1,d=[];if(!r.length)return u();function c(){s||(this.config&&this.config.waitForIt&&a--,0===a&&setTimeout(u,0))}function u(){s||(s=!0,clearTimeout(i),d.forEach((function(e){return e()})),e.call(this,t))}i=setTimeout(u,o?O.auctionDelay:0),r.forEach((function(e){var r=(0,y.guardOrtb2Fragments)(t.ortb2Fragments||{},S(h.MODULE_TYPE_RTD,e.name));d.push(r.verify),e.getBidRequestData(A(A({},t),{},{ortb2Fragments:r.obj}),c.bind(e),e.config,x)}))}));function M(e){var t=C.filter((function(e){return"function"==typeof e.getTargetingData}));if(t.length){var r=e.adUnitCodes;if(r){for(var n=[],i=t.length-1;i>=0;i--){var a=t[i].getTargetingData(r,t[i].config,x,e);a&&"object"===(0,o.default)(a)?n.push(a):(0,l.logWarn)("invalid getTargetingData response for sub module",t[i].name)}var s=q(n);return e.adUnits.forEach((function(e){var t=e.code&&s[e.code];t&&((0,l.logInfo)("RTD set ad unit targeting of",t,"for",e),e[f.default.JSON_MAPPING.ADSERVER_TARGETING]=Object.assign(e[f.default.JSON_MAPPING.ADSERVER_TARGETING]||{},t))})),e.adUnits}}}function q(e){return Array.isArray(e)&&e.length?e.reduce((function(e,t){for(var r in t)if(t.hasOwnProperty(r))if(e.hasOwnProperty(r)){var n=t[r];for(var i in n)n.hasOwnProperty(i)&&(e[r][i]=n[i])}else e[r]=t[r];return e}),{}):{}}function V(e){C.forEach((function(e){if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){(0,l.logError)("Error executing ".concat(e.name,".onDataDeletionRequest"),t)}}));for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];e.apply(this,r)}(0,u.module)("realTimeData",D),k(c.config),(0,d.registerModule)("rtdModule")},7919:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(147)),o=n(r(8212)),a=n(r(8832)),s=n(r(4319)),d=r(8851),c=r(6337),u=r(6364),l=r(43),p=r(6522),f=r(6613),g=r(9635),v=r(9723),m=r(1779),b=r(5674);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I="https://video-outstream.rubiconproject.com/apex-2.2.1.js",E=p.config.getConfig("rubicon")||{};p.config.getConfig("rubicon",(function(e){(0,m.mergeDeep)(E,e.rubicon)}));var _={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450"};(0,m._each)(_,(function(e,t){return _[e]=t}));var A=(0,c.ortbConverter)({request:function(e,t,r,n){var o,a,c=n.bidRequests,u=e(t,r,n);u.cur=["USD"],u.test=p.config.getConfig("debug")?1:0,(0,m.deepSetValue)(u,"ext.prebid.cache",{vastxml:{returnCreative:!0===E.returnVast}}),(0,m.deepSetValue)(u,"ext.prebid.bidders",{rubicon:{integration:E.int_type||"pbjs"}}),(0,m.deepSetValue)(u,"ext.prebid.targeting.pricegranularity",R(p.config));var l=(0,d.getGlobal)().installedModules;return!l||l.length&&-1===l.indexOf("rubiconAnalyticsAdapter")||(0,m.deepSetValue)(u,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,t,r){var n,o,a={},s=b.getAllOrtbKeywords.apply(void 0,[r].concat((0,i.default)(t.map((function(e){return e.params.keywords})))));t.forEach((function(t){var r,n,i,o,s,d={user:{ext:{data:y({},t.params.visitor)}},site:{ext:{data:y({},t.params.inventory)}}},c=e.imp.find((function(e){var t,r,n,i,o;return null===(t=e.ext)||void 0===t||null===(r=t.prebid)||void 0===r||null===(n=r.bidder)||void 0===n||null===(i=n.rubicon)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.language}));c&&(d.site.content={language:null===(r=c.ext)||void 0===r||null===(n=r.prebid)||void 0===n||null===(i=n.bidder)||void 0===i||null===(o=i.rubicon)||void 0===o||null===(s=o.video)||void 0===s?void 0:s.language});a=(0,m.mergeDeep)(a,t.ortb2||{},d);var u=p.config.getConfig("user.id");a.user.id=a.user.id||u})),(0,m.mergeDeep)(e,a),s&&s.length&&(0,m.deepSetValue)(e,"site.keywords",s.join(","));null==e||(null===(n=e.ext)||void 0===n||(null===(o=n.prebid)||void 0===o||delete o.storedrequest))}(u,c,r.ortb2),null==u||(null===(o=u.ext)||void 0===o||(null===(a=o.prebid)||void 0===a||delete a.storedrequest)),!0===E.disableFloors&&delete u.ext.prebid.floors,c.filter((function(e){return"object"===(0,s.default)(e.floorData)})).length>0&&(u.ext.prebid.floors={enabled:!1}),u},imp:function(e,t,r){var n,i,o=P(t);if(!o.includes(f.BANNER)||1!=o.length){var a=e(t,r);return a.id=t.adUnitCode,delete a.banner,p.config.getConfig("s2sConfig.defaultTtl")&&(a.exp=p.config.getConfig("s2sConfig.defaultTtl")),"atf"===t.params.position&&a.video&&(a.video.pos=1),"btf"===t.params.position&&a.video&&(a.video.pos=3),null===(n=a.ext)||void 0===n||(null===(i=n.prebid)||void 0===i||delete i.storedrequest),!0===t.params.bidonmultiformat&&o.length>1&&(0,m.deepSetValue)(a,"ext.prebid.bidder.rubicon.formats",o),function(e,t){"USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur);if(!t.bidfloor){var r=parseFloat((0,m.deepAccess)(e,"params.floor"));isNaN(r)||(t.bidfloor=r,t.bidfloorcur="USD")}}(t,a),a}},bidResponse:function(e,t,r){var n,i=e(t,r);i.meta.mediaType=(0,m.deepAccess)(t,"ext.prebid.type");var o=r.bidRequest,s="outstream"===(null===(n=o.mediaTypes.video)||void 0===n?void 0:n.context)?w(o,f.VIDEO):[void 0,void 0],d=(0,a.default)(s,2),c=d[0],u=d[1];return i.width=t.w||c||i.playerWidth,i.height=t.h||u||i.playerHeight,i.mediaType===f.VIDEO&&"outstream"===o.mediaTypes.video.context&&(i.renderer=function(e){var t=v.Renderer.install({id:e.adId,url:E.rendererUrl||I,config:E.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(T)}catch(e){(0,m.logWarn)("Prebid Error calling setRender on renderer",e)}return t}(i)),(0,m.deepAccess)(t,"ext.bidder.rp.advid")&&(0,m.deepSetValue)(i,"meta.advertiserId",t.ext.bidder.rp.advid),i},context:{netRevenue:!1!==E.netRevenue,ttl:300},processors:u.pbsExtensions});var O={code:"rubicon",gvlid:52,supportedMediaTypes:[f.BANNER,f.VIDEO,f.NATIVE],isBidRequestValid:function(e){var t=!0;if("object"!==(0,s.default)(e.params))return!1;for(var r=0,n=["accountId","siteId","zoneId"];r<n.length;r++)if(e.params[n[r]]=parseInt(e.params[n[r]]),isNaN(e.params[n[r]]))return(0,m.logError)("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i=P(e,!0);if(!i.length)return!1;i.includes(f.VIDEO)&&(t=j(e));var o=[f.BANNER,f.NATIVE].filter((function(e){return i.includes(e)})).length>0;return o?t&&o:t},buildRequests:function(e,t){var r,n=[],i=[];if((r=e.filter((function(e){var t=P(e)||[],r=t.length,n=e.params||{},i=n.bidonmultiformat,o=n.video;return 1===r&&(t.includes(f.VIDEO)||t.includes(f.NATIVE))||2===r&&!t.includes(f.BANNER)||o&&t.includes(f.VIDEO)||i&&(t.includes(f.VIDEO)||t.includes(f.NATIVE))})))&&r.length){var o=A.toORTB({bidRequests:r,bidderRequest:t});i.push({method:"POST",url:"https://".concat(E.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:r})}var a=e.filter((function(e){var t=P(e)||[],r=e.params||{},n=r.bidonmultiformat,i=r.video;return t.includes(f.BANNER)&&(1===t.length||n||!n&&!i||!n&&i&&!t.includes(f.VIDEO))}));if(!0!==E.singleRequest)n=i.concat(a.map((function(e){var r=O.createSlotParams(e,t);return{method:"GET",url:"https://".concat(E.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:O.getOrderedParams(r).reduce((function(e,t){var n=r[t];return(0,m.isStr)(n)&&""!==n||(0,m.isNumber)(n)?"".concat(e).concat(N(t,n),"&"):e}),"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})));else{var s=a.reduce((function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e}),{});n=i.concat(Object.keys(s).reduce((function(e,r){var n,i;return(n=s[r],i=10,n.map((function(e,t){return t%i==0?n.slice(t,t+i):null})).filter((function(e){return e}))).forEach((function(r){var n=O.combineSlotUrlParams(r.map((function(e){return O.createSlotParams(e,t)})));e.push({method:"GET",url:"https://".concat(E.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:O.getOrderedParams(n).reduce((function(e,t){var r=n[t];return(0,m.isStr)(r)&&""!==r||(0,m.isNumber)(r)?"".concat(e).concat(N(t,r),"&"):e}),"")+"slots=".concat(r.length,"&rand=").concat(Math.random()),bidRequest:r})})),e}),[]))}return n},getOrderedParams:function(e){var t=/^tg_v/,r=/^tg_i/,n=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter((function(e){return n.test(e)}))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return r.test(e)}))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter((function(e){return-1===i.indexOf(e)})))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,r,n){return Object.keys(r).forEach((function(i){t.hasOwnProperty(i)||(t[i]=new Array(e.length)),t[i].splice(n,1,r[i])})),t}),{}),r=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var n=t[e].join(";"),i=n.match(r);t[e]=i?i[1]:n})),t},createSlotParams:function(e,t){var r,n,i,o,d,c,u,l,v,b;e.startTime=(new Date).getTime();var h=e.params,I=w(e,"banner"),_=h.latLong||[],A=(0,a.default)(_,2),T=A[0],C=A[1],x={account_id:h.accountId,site_id:h.siteId,zone_id:h.zoneId,size_id:I[0],alt_size_ids:I.slice(1).join(",")||void 0,rp_floor:(h.floor=parseFloat(h.floor))>=.01?h.floor:void 0,rp_secure:"1",tk_flint:"".concat(E.int_type||"pbjs_lite","_v8.34.0"),"x_source.tid":null===(r=t.ortb2)||void 0===r||null===(n=r.source)||void 0===n?void 0:n.tid,"x_imp.ext.tid":null===(i=e.ortb2Imp)||void 0===i||null===(o=i.ext)||void 0===o?void 0:o.tid,l_pb_bid_id:e.bidId,o_cdep:null===(d=e.ortb2)||void 0===d||null===(c=d.device)||void 0===c||null===(u=c.ext)||void 0===u?void 0:u.cdep,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:h.userId,"p_geo.latitude":isNaN(parseFloat(T))?void 0:parseFloat(T).toFixed(4),"p_geo.longitude":isNaN(parseFloat(C))?void 0:parseFloat(C).toFixed(4),"tg_fl.eid":e.code,rf:S(e,t)};if("function"==typeof e.getFloor&&!E.disableFloors){var P;try{P=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){(0,m.logError)("Rubicon: getFloor threw an error: ",e)}x.rp_hard_floor="object"!==(0,s.default)(P)||"USD"!==P.currency||isNaN(parseInt(P.floor))?void 0:P.floor}!0===h.bidonmultiformat&&(0,m.deepAccess)(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(x.p_formats=Object.keys(e.mediaTypes).join(","));var D={1:"atf",3:"btf"}[(0,m.deepAccess)(e,"mediaTypes.banner.pos")]||"";x.p_pos="atf"===h.position||"btf"===h.position?h.position:D;var R,j,N=p.config.getConfig("user.id");(N&&(x.ppuid=N),null!=e&&null!==(l=e.ortb2Imp)&&void 0!==l&&null!==(v=l.ext)&&void 0!==v&&v.ae&&(x.o_ae=1),e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if("adserver.org"===e.source)x.tpid_tdid=e.uids[0].id,x["eid_adserver.org"]=e.uids[0].id;else if("liveintent.com"===e.source)x["tpid_liveintent.com"]=e.uids[0].id,x["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(x["tg_v.LIseg"]=e.ext.segments.join(","));else if("liveramp.com"===e.source)x.x_liverampidl=e.uids[0].id;else if("id5-sync.com"===e.source)x["eid_id5-sync.com"]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype,"^").concat(e.uids[0].ext&&e.uids[0].ext.linkType||"");else{var t="rubiconproject.com"===e.source?e.uids[0].id:"".concat(e.uids[0].id,"^").concat(e.uids[0].atype||"");x["eid_".concat(e.source)]=t}if(!x.ppuid){var r=(0,g.find)(e.uids,(function(e){return e.ext&&"ppuid"===e.ext.stype}));r&&r.id&&(x.ppuid=r.id)}}catch(t){(0,m.logWarn)("Rubicon: error reading eid:",e,t)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(x.gdpr=Number(t.gdprConsent.gdprApplies)),x.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(x.us_privacy=encodeURIComponent(t.uspConsent)),null!==(b=t.gppConsent)&&void 0!==b&&b.gppString)&&(x.gpp=t.gppConsent.gppString,x.gpp_sid=null===(R=t.gppConsent)||void 0===R||null===(j=R.applicableSections)||void 0===j?void 0:j.toString());return x.rp_maxbids=t.bidLimit||1,function(e,t,r){var n={user:{ext:{data:y({},e.params.visitor)}},site:{ext:{data:y({},e.params.inventory)}}};e.params.keywords&&(n.site.keywords=(0,m.isArray)(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var i=(0,m.mergeDeep)({},e.ortb2||{},n),o=(0,m.deepAccess)(e.ortb2Imp,"ext")||{},d=(0,m.deepAccess)(e.ortb2Imp,"ext.data")||{},c=(0,m.deepAccess)(e,"ortb2Imp.ext.gpid"),u={user:[4],site:[1,2,5,6]},l={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},p=function(e,t,r){return"data"===t&&Array.isArray(e)?e.filter((function(e){return e.segment&&(0,m.deepAccess)(e,"ext.segtax")&&u[r]&&-1!==u[r].indexOf((0,m.deepAccess)(e,"ext.segtax"))})).map((function(e){var t=e.segment.filter((function(e){return e.id})).reduce((function(e,t){return e.push(t.id),e}),[]);if(t.length>0)return t.toString()})).toString():("object"!==(0,s.default)(e)||Array.isArray(e))&&void 0!==e?Array.isArray(e)?e.filter((function(e){if("object"!==(0,s.default)(e)&&void 0!==e)return e.toString();(0,m.logWarn)("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString():void 0},g=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=p(e,n,t),a=l[n]&&i?"".concat(l[n]):"data"===n?"".concat(l[t],"iab"):"".concat(l[t]).concat(n);r[a]=r[a]?r[a].concat(",",o):o};if(t===f.BANNER){["site","user"].forEach((function(e){Object.keys(i[e]).forEach((function(t){"site"===e&&"content"===t&&i[e][t].data?g(i[e][t].data,e,"data"):"ext"!==t?g(i[e][t],e,t):i[e][t].data&&Object.keys(i[e].ext.data).forEach((function(t){g(i[e].ext.data[t],e,t,!1)}))}))})),Object.keys(d).forEach((function(e){"adserver"!==e?g(d[e],"site",e):"gam"===d[e].name&&g(d[e].adslot,name,e)})),c&&(r.p_gpid=c),r["tg_i.pbadslot"]&&delete r["tg_i.dfp_ad_unit_code"];var v=(0,m.deepAccess)(i,"device.sua");v&&!1!==E.chEnabled&&(0,m.pick)(v,["architecture",function(e){return r.m_ch_arch=e},"bitness",function(e){return r.m_ch_bitness=e},"browsers",function(e){var t,n;if(Array.isArray(e)){var i=e.reduce((function(e,t){var r,n,i;return e[0].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(r=t.version)||void 0===r?void 0:r[0],'"')),e[1].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(n=t.version)||void 0===n||null===(i=n.join)||void 0===i?void 0:i.call(n,"."),'"')),e}),[[],[]]),o=(0,a.default)(i,2),s=o[0],d=o[1];r.m_ch_ua=null==s||null===(t=s.join)||void 0===t?void 0:t.call(s,","),r.m_ch_full_ver=null==d||null===(n=d.join)||void 0===n?void 0:n.call(d,",")}},"mobile",function(e){return r.m_ch_mobile="?".concat(e)},"model",function(e){return r.m_ch_model=e},"platform",function(e){var t,n;r.m_ch_platform=null==e?void 0:e.brand,r.m_ch_platform_ver=null==e||null===(t=e.version)||void 0===t||null===(n=t.join)||void 0===n?void 0:n.call(t,".")}])}else Object.keys(o).length&&(0,m.mergeDeep)(r.imp[0].ext,o),c&&(r.imp[0].ext.gpid=c),(0,m.mergeDeep)(r,i)}(e,f.BANNER,x),!0===p.config.getConfig("coppa")&&(x.coppa=1),e.schain&&k(e.schain)&&(x.rp_schain=O.serializeSupplyChain(e.schain)),x},serializeSupplyChain:function(e){if(!k(e))return"";var t=e.ver,r=e.complete,n=e.nodes;return"".concat(t,",").concat(r,"!").concat(O.serializeSupplyChainNodes(n))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map((function(e){return t.map((function(t){return encodeURIComponent(e[t]||"")})).join(",")})).join("!")},interpretResponse:function(e,t){var r;e=e.body;var n=t.data;if(!e||"object"!==(0,s.default)(e))return[];if(e.seatbid){var i=(0,m.deepAccess)(e,"ext.errors.rubicon");return Array.isArray(i)&&i.length>0&&(0,m.logWarn)("Rubicon: Error in video response"),A.fromORTB({request:n,response:e}).bids}var o,d=e.ads,c=0,u=t.bidRequest;if("object"===(0,s.default)(u)&&!Array.isArray(u)&&P(u).includes(f.VIDEO)&&"object"===(0,s.default)(d)&&(d=d[u.adUnitCode]),!Array.isArray(d)||d.length<1)return[];var l=d.reduce((function(t,r,n){if(r.impression_id&&o===r.impression_id?c++:o=r.impression_id,"ok"!==r.status)return t;var i,d,l=Array.isArray(u)?u[n-c]:u;if(l&&"object"===(0,s.default)(l)){var p={requestId:l.bidId,currency:"USD",creativeId:r.creative_id||"".concat(r.network||"","-").concat(r.advertiser||""),cpm:r.cpm||0,dealId:r.deal,ttl:300,netRevenue:!1!==E.netRevenue,rubicon:{advertiserId:r.advertiser,networkId:r.network},meta:{advertiserId:r.advertiser,networkId:r.network,mediaType:f.BANNER}};if(r.creative_type&&(p.mediaType=r.creative_type),r.adomain&&(p.meta.advertiserDomains=Array.isArray(r.adomain)?r.adomain:[r.adomain]),r.creative_type===f.VIDEO)p.width=l.params.video.playerWidth,p.height=l.params.video.playerHeight,p.vastUrl=r.creative_depot_url,p.impression_id=r.impression_id,p.videoCacheKey=r.impression_id;else{p.ad=(i=r.script,d=r.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(d,"'>\n<script type='text/javascript'>").concat(i,"<\/script>\n</div>\n</body>\n</html>"));var g=_[r.size_id].split("x").map((function(e){return Number(e)})),v=(0,a.default)(g,2);p.width=v[0],p.height=v[1]}p.rubiconTargeting=(Array.isArray(r.targeting)?r.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:l.adUnitCode}),t.push(p)}else(0,m.logError)("Rubicon: bidRequest undefined at index position:".concat(n),u,e);return t}),[]).sort((function(e,t){return(t.cpm||0)-(e.cpm||0)})),p=null===(r=e.component_auction_config)||void 0===r?void 0:r.map((function(e){return{config:e,bidId:e.bidId}}));return p?{bids:l,fledgeAuctionConfigs:p}:l},getUserSyncs:function(e,t,r,n,i){if(!B&&e.iframeEnabled){var o,a={};if(r&&("boolean"==typeof r.gdprApplies&&(a.gdpr=Number(r.gdprApplies)),"string"==typeof r.consentString&&(a.gdpr_consent=r.consentString)),n&&(a.us_privacy=encodeURIComponent(n)),null!=i&&i.gppString)a.gpp=i.gppString,a.gpp_sid=null===(o=i.applicableSections)||void 0===o?void 0:o.toString();return a=Object.keys(a).length?"?".concat((0,m.formatQS)(a)):"",B=!0,{type:"iframe",url:"https://".concat(E.syncHost||"eus",".rubiconproject.com/usync.html")+a}}}};function S(e,t){var r;return r=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?r.replace(/^http:/i,"https:"):r}function T(e){var t,r=document.getElementById(e.adUnitCode);(t=r.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),function(e){var t=e.querySelector("script[id^='sas_script']"),r=t&&t.nextSibling;r&&"iframe"===r.localName&&r.style.setProperty("display","none")}(r);var n=e.renderer.getConfig();e.renderer.push((function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:r,align:n.align||"center",position:n.position||"append"},closeButton:n.closeButton||!1,label:n.label||void 0,collapse:n.collapse||!0})}))}function w(e,t){var r=e.params;if(t===f.VIDEO){var n=[];return r.video&&r.video.playerWidth&&r.video.playerHeight?n=[r.video.playerWidth,r.video.playerHeight]:Array.isArray((0,m.deepAccess)(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?n=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(n=e.sizes[0]),n}var i=[];return Array.isArray(r.sizes)?i=r.sizes:void 0!==(0,m.deepAccess)(e,"mediaTypes.banner.sizes")?i=C(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=C(e.sizes):(0,m.logWarn)("Rubicon: no sizes are setup or found"),D(i)}function C(e){return(0,m.parseSizesInput)(e).reduce((function(e,t){var r=parseInt(_[t],10);return r&&e.push(r),e}),[])}function x(e){var t=void 0!==(0,m.deepAccess)(e,"mediaTypes.".concat(f.VIDEO)),r=void 0!==(0,m.deepAccess)(e,"mediaTypes.".concat(f.BANNER)),n=void 0!==(0,m.deepAccess)(e,"params.bidonmultiformat"),i="object"!==(0,s.default)((0,m.deepAccess)(e,"params.video"));return!(!t||!n)||(r&&i&&(t=!1),t&&i&&(0,m.deepSetValue)(e,"params.video",{}),t)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];if(x(e)){if(-1===["outstream","instream"].indexOf((0,m.deepAccess)(e,"mediaTypes.".concat(f.VIDEO,".context"))))return t&&(0,m.logError)("Rubicon: mediaTypes.video.context must be outstream or instream"),r;if(w(e,f.VIDEO).length<2)return t&&(0,m.logError)("Rubicon: could not determine the playerSize of the video"),r;t&&(0,m.logMessage)("Rubicon: making video request for adUnit",e.adUnitCode),r.push(f.VIDEO)}if(void 0!==(0,m.deepAccess)(e,"mediaTypes.".concat(f.NATIVE))&&r.push(f.NATIVE),void 0!==(0,m.deepAccess)(e,"mediaTypes.".concat(f.BANNER))){if(0===w(e,f.BANNER).length)return t&&(0,m.logError)("Rubicon: could not determine the sizes for banner request"),r;t&&(0,m.logMessage)("Rubicon: making banner request for adUnit",e.adUnitCode),r.push(f.BANNER)}return r}function D(e){var t=[15,2,9];return e.sort((function(e,r){var n=t.indexOf(e),i=t.indexOf(r);return n>-1||i>-1?-1===n?1:-1===i?-1:n-i:e-r}))}function R(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}function j(e){var t=!0,r=Object.prototype.toString.call([]),n={mimes:r,protocols:r,linearity:Object.prototype.toString.call(0)};return Object.keys(n).forEach((function(r){Object.prototype.toString.call((0,m.deepAccess)(e,"mediaTypes.video."+r))!==n[r]&&(t=!1,(0,m.logError)("Rubicon: mediaTypes.video."+r+" is required and must be of type: "+n[r]))})),t}function k(e){var t=!1,r=["asi","sid","hp"];return e.nodes?((t=e.nodes.reduce((function(e,t){return e?r.every((function(e){return t.hasOwnProperty(e)})):e}),!0))||(0,m.logError)("Rubicon: required schain params missing"),t):t}function N(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var B=!1;(0,l.registerBidder)(O),(0,d.registerModule)("rubiconBidAdapter")},5839:(e,t,r)=>{"use strict";var n=r(4293);var i=r(8851),o=r(6522),a=n(r(1442)),s=r(1779),d=r(9502),c="Invalid schain object found: ",u=" should be a string",l=" should be an Integer",p=" should be an object",f=" should be an Array",g={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},v=[];function m(e,t){var r="Detected something wrong within an schain config:",n="";function i(e){n+="\n"+e}function o(){!0===t?(0,s.logError)(r,e,n):(0,s.logWarn)(r,e,n)}if(!(0,s.isPlainObject)(e)&&(i("schain.config"+p),o(),t))return!1;if((0,s.isNumber)(e.complete)&&(0,s.isInteger)(e.complete)||i("schain.config.complete"+l),(0,s.isStr)(e.ver)||i("schain.config.ver"+u),e.hasOwnProperty("ext")&&((0,s.isPlainObject)(e.ext)||i("schain.config.ext"+p)),(0,s.isArray)(e.nodes))e.nodes.forEach((function(e,t){(0,s.isStr)(e.asi)||i("schain.config.nodes[".concat(t,"].asi")+u),(0,s.isStr)(e.sid)||i("schain.config.nodes[".concat(t,"].sid")+u),(0,s.isNumber)(e.hp)&&(0,s.isInteger)(e.hp)||i("schain.config.nodes[".concat(t,"].hp")+l),e.hasOwnProperty("rid")&&((0,s.isStr)(e.rid)||i("schain.config.nodes[".concat(t,"].rid")+u)),e.hasOwnProperty("name")&&((0,s.isStr)(e.name)||i("schain.config.nodes[".concat(t,"].name")+u)),e.hasOwnProperty("domain")&&((0,s.isStr)(e.domain)||i("schain.config.nodes[".concat(t,"].domain")+u)),e.hasOwnProperty("ext")&&((0,s.isPlainObject)(e.ext)||i("schain.config.nodes[".concat(t,"].ext")+p))}));else if(i("schain.config.nodes"+f),o(),t)return!1;return!(n.length>0&&(o(),t))}function b(e){return void 0!==e&&(!!(0,s.isPlainObject)(e)||((0,s.logError)(c+"the following schain config will not be used as schain is not an object.",e),!1))}function h(e,t){var r=o.config.getConfig("schain"),n=o.config.getBidderConfig();t.forEach((function(e){var t=e.bidderCode,i=function(e){return n[e]&&n[e].schain||r}(t);e.bids.forEach((function(e){var r=function(e,t){var r=g.STRICT;if(b(e)){if((0,s.isStr)(e.validation)&&-1!=v.indexOf(e.validation)&&(r=e.validation),r===g.OFF)return e.config;if(m(e.config,!(r!==g.STRICT)))return e.config;(0,s.logError)(c+"due to the 'strict' validation setting, this schain config will not be passed to bidder '".concat(t,"'.  See above error for details."))}return null}(i,t);r&&(e.schain=(0,s.deepClone)(r))}))})),e(t)}function y(){a.default.makeBidRequests.after(h)}function I(e,t,r){if(!(0,s.deepAccess)(e,"source.ext.schain")){var n=(0,s.deepAccess)(r,"bidRequests.0.schain");n&&(0,s.deepSetValue)(e,"source.ext.schain",n)}}(0,s._each)(g,(function(e){return v.push(e)})),y(),(0,d.registerOrtbProcessor)({type:d.REQUEST,name:"sourceExtSchain",fn:I}),(0,i.registerModule)("schain")},4632:(e,t,r)=>{"use strict";var n=r(4293)(r(4319)),i=r(8851),o=r(1779),a=r(4627),s=r(1442),d=r(9084),c=r(1526),u=r(7343),l=r(301),p=(0,d.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:"sharedId"});var f="cookie",g="html5",v="_pubcid_optout",m="PublisherCommonId";function b(e,t){if(t===f)return p.getCookie(e);if(t===g&&p.hasLocalStorage()){var r=p.getDataFromLocalStorage("".concat(e,"_exp"));if(!r)return p.getDataFromLocalStorage(e);if(new Date(r).getTime()-Date.now()>0)return p.getDataFromLocalStorage(e)}}function h(e,t){return function(r,n){t?y(t,e,(function(){r(n()||e)}))():r(e)}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;if(e){var n=(0,o.parseUrl)(e);n.search.id=encodeURIComponent("pubcid:"+t);var i=(0,o.buildUrl)(n);return function(){(0,o.triggerPixel)(i,r)}}}function I(){return!!(p.cookiesAreEnabled()&&b(v,f)||p.hasLocalStorage()&&b(v,g))}var E={name:"sharedId",aliasName:"pubCommonId",gvlid:c.VENDORLESS_GVLID,decode:function(e,t){if(!I())return(0,o.logInfo)(" Decoded value PubCommonId "+e),{pubcid:e};(0,o.logInfo)("PubCommonId decode: Has opted-out")},getId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(I())(0,o.logInfo)("PubCommonId: Has opted-out");else{if(!s.coppaDataHandler.getCoppa()){var r=e.params,i=(r=void 0===r?{}:r).create,a=void 0===i||i,d=r.pixelUrl,c=t;if(!c){try{"object"===(0,n.default)(window[m])&&(c=window[m].getId())}catch(e){}c||(c=a&&(0,o.hasDeviceAccess)()?(0,o.generateUUID)():void 0)}return{id:c,callback:h(c,d)}}(0,o.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId")}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(I())return(0,o.logInfo)("PubCommonId: Has opted-out"),{id:void 0};if(s.coppaDataHandler.getCoppa())(0,o.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");else{var r=e.params,n=(r=void 0===r?{}:r).extend,i=void 0!==n&&n,a=r.pixelUrl;if(i)return a?{callback:y(a,t)}:{id:t}}},domainOverride:(0,l.domainOverrideToRootDomain)(p,"sharedId"),eids:{pubcid:{source:"pubcid.org",atype:1}}};(0,a.submodule)("userId",E),(0,i.registerModule)("sharedIdSystem")},9543:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(4319)),o=n(r(8832)),a=n(r(8212)),s=r(8851),d=r(43),c=r(6522),u=r(6613),l=r(1779);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g="sharethrough",v="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),m={getProtocol:function(){return window.location.protocol}};var b={code:g,supportedMediaTypes:[u.VIDEO,u.BANNER],gvlid:80,isBidRequestValid:function(e){return!!e.params.pkey&&e.bidder===g},buildRequests:function(e,t){var r,n,i,a,s,d,u,p,g=t.timeout,b=t.ortb2||{},_=m.getProtocol().indexOf("http")<0||m.getProtocol().indexOf("https")>-1,A={id:(0,l.generateUUID)(),at:1,cur:["USD"],tmax:g,site:f({domain:(0,l.deepAccess)(t,"refererInfo.domain",window.location.hostname),page:(0,l.deepAccess)(t,"refererInfo.page",window.location.href),ref:(0,l.deepAccess)(t,"refererInfo.ref")},b.site),device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width,ext:{}},regs:{coppa:!0===c.config.getConfig("coppa")?1:0,ext:{}},source:{tid:null===(r=t.ortb2)||void 0===r||null===(n=r.source)||void 0===n?void 0:n.tid,ext:{version:"8.34.0",str:"4.3.0",schain:e[0].schain}},bcat:(0,l.deepAccess)(t.ortb2,"bcat")||e[0].params.bcat||[],badv:(0,l.deepAccess)(t.ortb2,"badv")||e[0].params.badv||[],test:0};if(null!==(i=t.ortb2)&&void 0!==i&&null!==(a=i.device)&&void 0!==a&&null!==(s=a.ext)&&void 0!==s&&s.cdep&&(A.device.ext.cdep=t.ortb2.device.ext.cdep),A.user=E(b.user,{}),A.user.ext||(A.user.ext={}),A.user.ext.eids=e[0].userIdAsEids||[],t.gdprConsent){var O=!0===t.gdprConsent.gdprApplies;A.regs.ext.gdpr=O?1:0,O&&(A.user.ext.consent=t.gdprConsent.consentString)}return t.uspConsent&&(A.regs.ext.us_privacy=t.uspConsent),null!=t&&null!==(d=t.gppConsent)&&void 0!==d&&d.gppString?(A.regs.gpp=t.gppConsent.gppString,A.regs.gpp_sid=t.gppConsent.applicableSections):null!=t&&null!==(u=t.ortb2)&&void 0!==u&&null!==(p=u.regs)&&void 0!==p&&p.gpp&&(A.regs.ext.gpp=t.ortb2.regs.gpp,A.regs.ext.gpp_sid=t.ortb2.regs.gpp_sid),e.map((function(e){var t={ext:{}},r=(0,l.deepAccess)(e,"ortb2Imp.ext.tid");r&&(t.ext.tid=r);var n=(0,l.deepAccess)(e,"ortb2Imp.ext.gpid",(0,l.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"));n&&(t.ext.gpid=n);var i=(0,l.deepAccess)(e,"mediaTypes.video");if(i){var a=640,s=360;if(i.playerSize&&i.playerSize[0]&&i.playerSize[0][0]&&i.playerSize[0][1]){var d=(0,o.default)(i.playerSize[0],2);a=d[0],s=d[1]}t.video={pos:E(i.pos,0),topframe:(0,l.inIframe)()?0:1,skip:E(i.skip,0),linearity:E(i.linearity,1),minduration:E(i.minduration,5),maxduration:E(i.maxduration,60),playbackmethod:i.playbackmethod||[2],api:h(i),mimes:i.mimes||["video/mp4"],protocols:y(i),w:a,h:s,startdelay:E(i.startdelay,0),skipmin:E(i.skipmin,0),skipafter:E(i.skipafter,0),placement:"instream"===i.context?1:+(0,l.deepAccess)(i,"placement",4)},i.delivery&&(t.video.delivery=i.delivery),i.companiontype&&(t.video.companiontype=i.companiontype),i.companionad&&(t.video.companionad=i.companionad)}else t.banner={pos:(0,l.deepAccess)(e,"mediaTypes.banner.pos",0),topframe:(0,l.inIframe)()?0:1,format:e.sizes.map((function(e){return{w:+e[0],h:+e[1]}}))};return f({id:e.bidId,tagid:String(e.params.pkey),secure:_?1:0,bidfloor:I(e)},t)})).filter((function(e){return!!e})).map((function(e){return{method:"POST",url:v,data:f(f({},A),{},{imp:[e]})}}))},interpretResponse:function(e,t){var r=e.body;return r&&r.seatbid&&0!==r.seatbid.length&&r.seatbid[0].bid&&0!==r.seatbid[0].bid.length?r.seatbid[0].bid.map((function(e){var n,i,o,a,s,d,c,l,p,f,g,v,m,b={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:t.data.imp[0].video?u.VIDEO:u.BANNER,currency:r.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[],networkId:(null===(n=e.ext)||void 0===n?void 0:n.networkId)||null,networkName:(null===(i=e.ext)||void 0===i?void 0:i.networkName)||null,agencyId:(null===(o=e.ext)||void 0===o?void 0:o.agencyId)||null,agencyName:(null===(a=e.ext)||void 0===a?void 0:a.agencyName)||null,advertiserId:(null===(s=e.ext)||void 0===s?void 0:s.advertiserId)||null,advertiserName:(null===(d=e.ext)||void 0===d?void 0:d.advertiserName)||null,brandId:(null===(c=e.ext)||void 0===c?void 0:c.brandId)||null,brandName:(null===(l=e.ext)||void 0===l?void 0:l.brandName)||null,demandSource:(null===(p=e.ext)||void 0===p?void 0:p.demandSource)||null,dchain:(null===(f=e.ext)||void 0===f?void 0:f.dchain)||null,primaryCatId:(null===(g=e.ext)||void 0===g?void 0:g.primaryCatId)||null,secondaryCatIds:(null===(v=e.ext)||void 0===v?void 0:v.secondaryCatIds)||null,mediaType:(null===(m=e.ext)||void 0===m?void 0:m.mediaType)||null}};return b.mediaType===u.VIDEO&&(b.ttl=3600,b.vastXml=e.adm),b})):[]},getUserSyncs:function(e,t){return e.pixelEnabled&&void 0!==(0,l.deepAccess)(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map((function(e){return{type:"image",url:e}})):[]},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};function h(e){var t=e.api;return t&&Array.isArray(t)&&t.length>0?t:[2]}function y(e){var t=e.protocols;return t&&Array.isArray(t)&&t.length>0?t:[2,3,5,6,7,8]}function I(e){var t=null;if("function"==typeof e.getFloor){var r=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map((function(e){return{w:e[0],h:e[1]}}))});"object"!==(0,i.default)(r)||"USD"!==r.currency||isNaN(parseFloat(r.floor))||(t=parseFloat(r.floor))}return null!==t?t:e.params.floor}function E(e,t){return null==e?t:e}(0,d.registerBidder)(b),(0,s.registerModule)("sharethroughBidAdapter")},7652:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(4319)),o=n(r(8832)),a=n(r(8212)),s=r(8851),d=r(6522),c=r(1779),u=r(9635),l=r(6613),p=r(1442),f=!1,g=[];function v(e){g=e,f||(p.setupAdUnitMediaTypes.before((function(e,t,r){return e(I(t,r),r)})),f=!0)}function m(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}d.config.getConfig("sizeConfig",(function(e){return v(e.sizeConfig)}));var b=(0,a.default)({},l.BANNER,"banner.sizes");function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labels,r=void 0===t?[]:t,n=e.labelAll,i=void 0!==n&&n,a=e.activeLabels,s=void 0===a?[]:a,d=arguments.length>1?arguments[1]:void 0,l=y(arguments.length>2&&void 0!==arguments[2]?arguments[2]:g),p=!1,f=!1,v={before:{},after:{}};l.shouldFilter?Object.entries(b).forEach((function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1],i=(0,c.deepAccess)(d,n);if(i){p||(d=(0,c.deepClone)(d),p=!0);var a=i.filter((function(e){return l.sizesSupported[e]}));(0,c.deepSetValue)(d,n,a),f=f||a.length>0,i.length!==a.length&&(v.before[r]=i,v.after[r]=a)}})):f=null!=Object.values(b).find((function(e){var t;return null===(t=(0,c.deepAccess)(d,e))||void 0===t?void 0:t.length}));var m={active:!Object.keys(b).find((function(e){return d.hasOwnProperty(e)}))||f&&(0===r.length||!i&&(r.some((function(e){return l.labels[e]}))||r.some((function(e){return(0,u.includes)(s,e)})))||i&&r.reduce((function(e,t){return e?l.labels[t]||(0,u.includes)(s,t):e}),!0)),mediaTypes:d};return Object.keys(v.before).length>0&&(m.filterResults=v),m}function y(e){return e.reduce((function(e,t){if("object"===(0,i.default)(t)&&"string"==typeof t.mediaQuery&&t.mediaQuery.length>0){var r=!1;try{r=(0,c.getWindowTop)().matchMedia(t.mediaQuery).matches}catch(e){(0,c.logWarn)("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),r=matchMedia(t.mediaQuery).matches}r&&(Array.isArray(t.sizesSupported)&&(e.shouldFilter=!0),["labels","sizesSupported"].forEach((function(r){return(t[r]||[]).forEach((function(t){return e[r][t]=!0}))})))}else(0,c.logWarn)('sizeConfig rule missing required property "mediaQuery"');return e}),{labels:{},sizesSupported:{},shouldFilter:!1})}function I(e,t){return e.reduce((function(e,r){var n=h(m(r,t),r.mediaTypes),i=n.active,o=n.mediaTypes,a=n.filterResults;return i?(a&&(0,c.logInfo)('Size mapping filtered adUnit "'.concat(r.code,'" sizes from '),a.before,"to ",a.after),r.mediaTypes=o,r.bids=r.bids.reduce((function(e,n){var i=h(m(n,t),r.mediaTypes),o=i.active,a=i.mediaTypes,s=i.filterResults;return o?(s&&((0,c.logInfo)('Size mapping filtered adUnit "'.concat(r.code,'" bidder "').concat(n.bidder,'" sizes from '),s.before,"to ",s.after),n.mediaTypes=a),e.push(n)):(0,c.logInfo)('Size mapping deactivated adUnit "'.concat(r.code,'" bidder "').concat(n.bidder,'"')),e}),[]),e.push(r)):(0,c.logInfo)('Size mapping disabled adUnit "'.concat(r.code,'"')),e}),[])}b[l.VIDEO]="video.playerSize",(0,s.registerModule)("sizeMapping")},7384:(e,t,r)=>{"use strict";var n=r(4293)(r(8212)),i=r(8851),o=r(1779),a=r(43),s=r(9084);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u="teads",l=12,p=11,f=0,g=22,v="_tfpvi",m=(0,s.getStorageManager)({bidderCode:u});var b={code:u,gvlid:132,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){var t=!1;if(void 0!==e.params){var r=A((0,o.getValue)(e.params,"placementId")),n=A((0,o.getValue)(e.params,"pageId"));t=r&&n}return t||(0,o.logError)("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var r,n,i,a,s,d,u,b=e.map(_),A=window.top,O=c(c({referrer:h(t),pageReferrer:document.referrer,pageTitle:y().slice(0,300),pageDescription:I().slice(0,300),networkBandwidth:(u=window.navigator,u&&u.connection&&u.connection.downlink>=0?u.connection.downlink.toString():""),timeToFirstByte:E(window),data:b,deviceWidth:screen.width,screenOrientation:null===(r=screen.orientation)||void 0===r?void 0:r.type,historyLength:null===(n=A.history)||void 0===n?void 0:n.length,viewportHeight:null===(i=A.visualViewport)||void 0===i?void 0:i.height,viewportWidth:null===(a=A.visualViewport)||void 0===a?void 0:a.width,hardwareConcurrency:null===(s=A.navigator)||void 0===s?void 0:s.hardwareConcurrency,deviceMemory:null===(d=A.navigator)||void 0===d?void 0:d.deviceMemory,hb_version:"8.34.0"},function(e){var t={unifiedId2:"uid2.id",liveRampId:"idl_env",lotamePanoramaId:"lotamePanoramaId",id5Id:"id5id.uid",criteoId:"criteoId",yahooConnectId:"connectId",quantcastId:"quantcastId",epsilonPublisherLinkId:"publinkId",publisherFirstPartyViewerId:"pubcid",merkleId:"merkleId.id",kinessoId:"kpuid"},r={};for(var n in t){var i=t[n],a=(0,o.deepAccess)(e,"0.userId.".concat(i));a&&(r[n]=a)}return r}(e)),function(e){var t=(0,o.deepAccess)(e,"0.userId.teadsId");if(t)return{firstPartyCookieTeadsId:t};if(m.cookiesAreEnabled(null)){var r=m.getCookie(v,null);if(r)return{firstPartyCookieTeadsId:r}}return{}}(e)),S=e[0];S.schain&&(O.schain=S.schain);var T=t.gdprConsent;if(t&&T){var w="boolean"==typeof T.gdprApplies,C="string"==typeof T.consentString,x=w?function(e,t){var r=l;e?t&&!t.isServiceSpecific&&(r=p):r=f;return r}(T.gdprApplies,T.vendorData):g;O.gdpr_iab={consent:C?T.consentString:"",status:x,apiVersion:T.apiVersion}}t&&t.uspConsent&&(O.us_privacy=t.uspConsent);var P=(0,o.deepAccess)(S,"ortb2.device.sua");return P&&(O.userAgentClientHints=P),{method:"POST",url:"https://a.teads.tv/hb/bid-request",data:JSON.stringify(O)}},interpretResponse:function(e,t){var r=[];return(e=e.body).responses&&e.responses.forEach((function(e){var t={cpm:e.cpm,width:e.width,height:e.height,currency:e.currency,netRevenue:!0,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},ad:e.ad,requestId:e.bidId,creativeId:e.creativeId,placementId:e.placementId};e.dealId&&(t.dealId=e.dealId),r.push(t)})),r}};function h(e){var t="";return e&&e.refererInfo&&e.refererInfo.page&&(t=e.refererInfo.page),t}function y(){try{var e=window.top.document.querySelector('meta[property="og:title"]');return window.top.document.title||e&&e.content||""}catch(e){var t=document.querySelector('meta[property="og:title"]');return document.title||t&&t.content||""}}function I(){var e;try{e=window.top.document.querySelector('meta[name="description"]')||window.top.document.querySelector('meta[property="og:description"]')}catch(t){e=document.querySelector('meta[name="description"]')||document.querySelector('meta[property="og:description"]')}return e&&e.content||""}function E(e){var t=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance,r=t&&"function"==typeof t.getEntriesByType&&"[object Function]"===Object.prototype.toString.call(t.getEntriesByType)&&t.getEntriesByType("navigation")[0]&&t.getEntriesByType("navigation")[0].responseStart&&t.getEntriesByType("navigation")[0].requestStart&&t.getEntriesByType("navigation")[0].responseStart>0&&t.getEntriesByType("navigation")[0].requestStart>0&&Math.round(t.getEntriesByType("navigation")[0].responseStart-t.getEntriesByType("navigation")[0].requestStart);if(r)return r.toString();var n=t&&t.timing.responseStart&&t.timing.requestStart&&t.timing.responseStart>0&&t.timing.requestStart>0&&t.timing.responseStart-t.timing.requestStart;return n?n.toString():""}function _(e){var t,r,n={},i=(0,o.getValue)(e.params,"placementId"),a=(0,o.getValue)(e.params,"pageId"),s=(0,o.deepAccess)(e,"ortb2Imp.ext.gpid"),d=(0,o.deepAccess)(e,"mediaTypes.video.plcmt");return n.sizes=function(e){return(0,o.parseSizesInput)(function(e){var t=(0,o.deepAccess)(e,"mediaTypes.video.playerSize"),r=(0,o.deepAccess)(e,"mediaTypes.video.sizes"),n=(0,o.deepAccess)(e,"mediaTypes.banner.sizes");return(0,o.isArray)(n)||(0,o.isArray)(t)||(0,o.isArray)(r)?[n,r,t].reduce((function(e,t){return(0,o.isArray)(t)&&((0,o.isArray)(t[0])?t.forEach((function(t){e.push(t)})):e.push(t)),e}),[]):e.sizes}(e))}(e),n.bidId=(0,o.getBidIdParameter)("bidId",e),n.bidderRequestId=(0,o.getBidIdParameter)("bidderRequestId",e),n.placementId=parseInt(i,10),n.pageId=parseInt(a,10),n.adUnitCode=(0,o.getBidIdParameter)("adUnitCode",e),n.transactionId=(null===(t=e.ortb2Imp)||void 0===t||null===(r=t.ext)||void 0===r?void 0:r.tid)||"",s&&(n.gpid=s),d&&(n.videoPlcmt=d),n}function A(e){return parseInt(e)>0}(0,a.registerBidder)(b),(0,i.registerModule)("teadsBidAdapter")},858:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(4319)),o=n(r(147)),a=n(r(8212)),s=r(8851),d=r(1779),c=r(6613),u=r(43),l=r(6522),p=r(9084),f=r(4002);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m="triplelift",b=null,h=null,y=(0,p.getStorageManager)({bidderCode:m});var I={gvlid:28,code:m,supportedMediaTypes:[c.BANNER,c.VIDEO],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var r="https://tlx.3lift.com/header/auction?",n=function(e,t){var r,n,i={},a=e[0].schain,s=function(e){var t={},r={},n={},i=e.ortb2||{},o=function(){var e=y.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return(0,d.logError)("Triplelift: error parsing JSON: ",e),null}}(),a=Object.assign({},i.site),s=Object.assign({},i.user);if(o){s.data=s.data||[];try{s.data.push({name:"www.1plusx.com",ext:o})}catch(e){(0,d.logError)("Triplelift: error adding 1plusX segments: ",e)}}S(r,a),S(n,s),(0,d.isEmpty)(r)||(t.context=r);(0,d.isEmpty)(n)||(t.user=n);return t}(t);i.imp=e.map((function(e,t){var r={id:t,tagid:e.params.inventoryCode,floor:O(e)};return E(e)&&(r.video=function(e){var t=v(v({},e.params.video),e.mediaTypes.video);try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){(0,d.logWarn)("Video size not defined",e)}"instream"===t.context&&(t.placement||(t.placement=1));"outstream"===t.context&&(t.placement?-1===[3,4,5].indexOf(t.placement)&&((0,d.logMessage)("video.placement value of ".concat(t.placement," is invalid for outstream context. Setting placement to 3")),t.placement=3):t.placement=3);t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number));return delete t.playerSize,t}(e)),e.mediaTypes.banner&&!_(e)&&(r.banner={format:C(e.sizes)}),(0,d.isEmpty)(e.ortb2Imp)||(r.fpd=function(e){var t={},r={};S(r,e.ext),(0,d.isEmpty)(r)||(t.context=r);return t}(e.ortb2Imp),(0,d.isEmpty)(e.ortb2Imp.ext)||(r.ext=v({},e.ortb2Imp.ext))),r}));var c=[].concat((0,o.default)((u=[e[0]],T(u,"tdid","adserver.org","TDID"))),(0,o.default)(function(e){return T(e,"idl_env","liveramp.com","idl")}([e[0]])),(0,o.default)(function(e){return T(e,"criteoId","criteo.com","criteoId")}([e[0]])),(0,o.default)(function(e){return T(e,"pubcid","pubcid.org","pubcid")}([e[0]])),(0,o.default)(function(e){var t=["adserver.org","liveramp.com","criteo.com","pubcid.org"],r=[];e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if(-1===t.indexOf(e.source)){var n=e.uids.map((function(t){return{id:t.id,ext:{rtiPartner:e.source}}}));r.push({source:e.source,uids:n})}}catch(t){(0,d.logWarn)("Triplelift: Error attempting to add ".concat(e," to bid request"),t)}}));return r}(e[0])));var u;c.length>0&&(i.user={ext:{eids:c}});var l=function(e,t){var r={};(0,d.isEmpty)(e)||(r.schain=v({},e));(0,d.isEmpty)(t)||(r.fpd=v({},t));return r}(a,s);(0,d.isEmpty)(l)||(i.ext=l);null!=t&&null!==(r=t.ortb2)&&void 0!==r&&null!==(n=r.regs)&&void 0!==n&&n.gpp&&(i.regs=Object.assign({},t.ortb2.regs));null!=t&&t.ortb2&&(i.ext.ortb2=Object.assign({},t.ortb2));return i}(e,t);if(r=(0,f.tryAppendQueryString)(r,"lib","prebid"),r=(0,f.tryAppendQueryString)(r,"v","8.34.0"),t&&t.refererInfo){var i=t.refererInfo.page;r=(0,f.tryAppendQueryString)(r,"referrer",i)}return t&&t.timeout&&(r=(0,f.tryAppendQueryString)(r,"tmax",t.timeout)),t&&t.gdprConsent&&(b=void 0===t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies,r=(0,f.tryAppendQueryString)(r,"gdpr",b.toString()),void 0!==t.gdprConsent.consentString&&(h=t.gdprConsent.consentString,r=(0,f.tryAppendQueryString)(r,"cmp_cs",h))),t&&t.uspConsent&&(r=(0,f.tryAppendQueryString)(r,"us_privacy",t.uspConsent)),t&&t.fledgeEnabled&&(r=(0,f.tryAppendQueryString)(r,"fledge",t.fledgeEnabled)),!0===l.config.getConfig("coppa")&&(r=(0,f.tryAppendQueryString)(r,"coppa",!0)),r.lastIndexOf("&")===r.length-1&&(r=r.substring(0,r.length-1)),(0,d.logMessage)("tlCall request built: "+r),{method:"POST",url:r,data:n,bidderRequest:t}},interpretResponse:function(e,t){var r=t.bidderRequest,n=e.body.bids||[],i=e.body.paapi||[];if(n=n.map((function(e){return function(e,t){var r={},n=t.width||1,i=t.height||1,o=t.deal_id||"",a=t.crid||"",s=e.bids[t.imp_id];0!=t.cpm&&t.ad&&(r={requestId:s.bidId,cpm:t.cpm,width:n,height:i,netRevenue:!0,ad:t.ad,creativeId:a,dealId:o,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},E(s)&&"video"===t.media_type&&(r.vastXml=t.ad,r.mediaType="video",r.ttl=3600),t.advertiser_name&&(r.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(r.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(E(s)&&"video"===t.media_type?r.meta.mediaType="video":r.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(r.meta.mediaType="native"),a&&(r.meta.networkId=a.slice(0,a.indexOf("_"))));return r}(r,e)})),i.length>0){var o=i.map((function(e){return{bidId:r.bids[e.imp_id].bidId,config:e.auctionConfig}}));return(0,d.logMessage)("Response with FLEDGE:",{bids:n,fledgeAuctionConfigs:o}),{bids:n,fledgeAuctionConfigs:o}}return n},getUserSyncs:function(e,t,r,n,i){var o=function(e){if(!e)return;if(e.iframeEnabled)return"iframe";if(e.pixelEnabled)return"image"}(e);if(o){var a="https://eb2.3lift.com/sync?";return"image"===o&&(a=(0,f.tryAppendQueryString)(a,"px",1),a=(0,f.tryAppendQueryString)(a,"src","prebid")),(null!==h||b)&&(a=(0,f.tryAppendQueryString)(a,"gdpr",b),a=(0,f.tryAppendQueryString)(a,"cmp_cs",h)),n&&(a=(0,f.tryAppendQueryString)(a,"us_privacy",n)),i&&(i.gppString&&(a=(0,f.tryAppendQueryString)(a,"gpp",i.gppString)),i.applicableSections&&0!==i.applicableSections.length&&(a=(0,f.tryAppendQueryString)(a,"gpp_sid",i.applicableSections.filter((function(e){return Number.isInteger(e)})).join(",")))),[{type:o,url:a}]}}};function E(e){return A(e)&&(_(e)||function(e){return A(e)&&"outstream"===e.mediaTypes.video.context.toLowerCase()}(e))}function _(e){return A(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function A(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function O(e){var t=null;if("function"==typeof e.getFloor)try{var r=e.getFloor({currency:"USD",mediaType:E(e)?"video":"banner",size:"*"});"object"!==(0,i.default)(r)||"USD"!==r.currency||isNaN(parseFloat(r.floor))||(t=parseFloat(r.floor))}catch(e){(0,d.logError)("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function S(e,t){(0,d.isEmpty)(t)||Object.keys(t).forEach((function(r){null!=t[r]&&(e[r]=t[r])}))}function T(e,t,r,n){return e.map(function(e){return function(t){return t&&t.userId&&t.userId[e]}}(t)).filter(w(t)).map(function(e,t){return function(r){return{source:e,uids:[{id:r.id?r.id:r,ext:{rtiPartner:t}}]}}}(r,n))}var w=function(e){return function(t,r,n){var i=!!t&&((0,d.isStr)(t)?!!t:(0,d.isPlainObject)(t)&&!(0,d.isArray)(t)&&!(0,d.isEmpty)(t)&&t.id&&(0,d.isStr)(t.id)&&!!t.id);return i||void 0===n[0]||(0,d.logWarn)("Triplelift: invalid ".concat(e," userId format")),i}};function C(e){return e.filter(x).map((function(e){return{w:e[0],h:e[1]}}))}function x(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}(0,u.registerBidder)(I),(0,s.registerModule)("tripleliftBidAdapter")},5923:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o=n(r(8212)),a=r(8851),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(1779)),d=r(6522),c=r(43),u=r(6613);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g="ttd",v=1,m=2;function b(e){var t;return{ttdprebid:{ver:"TTD-PREBID-2023.09.05",pbjs:"8.34.0",keywords:null!==(t=e.site)&&void 0!==t&&t.keywords?e.site.keywords.split(",").map((function(e){return e.trim()})):[]}}}function h(e){var t,r={};return e.gdprConsent&&"boolean"==typeof e.gdprConsent.gdprApplies&&s.deepSetValue(r,"ext.gdpr",e.gdprConsent.gdprApplies?1:0),e.uspConsent&&s.deepSetValue(r,"ext.us_privacy",e.uspConsent),!0===d.config.getConfig("coppa")&&(r.coppa=1),null!==(t=e.ortb2)&&void 0!==t&&t.regs&&s.mergeDeep(r,e.ortb2.regs),r}function y(e){if(e.params.bidfloor)return e.params.bidfloor;if(!s.isFn(e.getFloor))return null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return s.isPlainObject(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}function I(e,t){var r,n,i={tid:null==t||null===(r=t.ortb2)||void 0===r||null===(n=r.source)||void 0===n?void 0:n.tid};return e[0].schain&&s.deepSetValue(i,"ext.schain",e[0].schain),i}function E(e){var t=navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage,r={ua:navigator.userAgent,dnt:s.getDNT()?1:0,language:t,connectiontype:_()};return s.mergeDeep(r,e.device),r}function _(){var e=navigator.connection||navigator.webkitConnection;if(!e)return 0;switch(e.type){case"ethernet":return 1;case"wifi":return 2;case"cellular":switch(e.effectiveType){case"slow-2g":case"2g":return 4;case"3g":return 5;case"4g":return 6;default:return 3}default:return 0}}function A(e,t){var r={};e.gdprConsent&&s.deepSetValue(r,"ext.consent",e.gdprConsent.consentString),s.isStr(s.deepAccess(e,"bids.0.userId.tdid"))&&(r.buyeruid=e.bids[0].userId.tdid);var n=s.deepAccess(e,"bids.0.userIdAsEids");return n&&n.length&&s.deepSetValue(r,"ext.eids",n),s.mergeDeep(r,t.user),r}function O(e,t){var r=s.mergeDeep({page:s.deepAccess(e,"refererInfo.page"),ref:s.deepAccess(e,"refererInfo.ref"),publisher:{id:s.deepAccess(e,"bids.0.params.publisherId")}},t.site),n=e.refererInfo.domain;return n&&s.deepSetValue(r,"publisher.domain",n),r}function S(e){var t={id:e.bidId},r=s.deepAccess(e,"ortb2Imp.ext.gpid")||e.params.placementId;r&&(t.tagid=r);var n=s.deepAccess(e,"mediaTypes.video"),i={};s.deepAccess(e,"mediaTypes.banner")&&(i[u.BANNER]=function(e){var t=function(e){var t=s.parseSizesInput(e).filter((function(e){return e})).map((function(e){return e.split("x")})).map((function(e){return{width:parseInt(e[0]),height:parseInt(e[1])}}));return t}(e.mediaTypes.banner.sizes).map((function(e){return{w:e.width,h:e.height}})),r=parseInt(s.deepAccess(e,"mediaTypes.banner.pos")),n=s.deepAccess(e,"params.banner.expdir"),i={};r&&(i.pos=r);n&&Array.isArray(n)&&(i.expdir=n);var o=Object.assign({w:t[0].w,h:t[0].h,format:t},i),a=s.deepAccess(e,"ortb2Imp.battr");a&&(o.battr=a);return o}(e)),n&&(i[u.VIDEO]=function(e){var t=s.deepAccess(e,"mediaTypes.video.minduration"),r=s.deepAccess(e,"mediaTypes.video.maxduration"),n=s.deepAccess(e,"mediaTypes.video.playerSize"),i=s.deepAccess(e,"mediaTypes.video.api"),o=s.deepAccess(e,"mediaTypes.video.mimes"),a=s.deepAccess(e,"mediaTypes.video.placement"),d=s.deepAccess(e,"mediaTypes.video.plcmt"),c=s.deepAccess(e,"mediaTypes.video.protocols"),u=s.deepAccess(e,"mediaTypes.video.playbackmethod"),l=s.deepAccess(e,"mediaTypes.video.pos"),p=s.deepAccess(e,"mediaTypes.video.startdelay"),f=s.deepAccess(e,"mediaTypes.video.skip"),g=s.deepAccess(e,"mediaTypes.video.skipmin"),v=s.deepAccess(e,"mediaTypes.video.skipafter"),m=s.deepAccess(e,"mediaTypes.video.minbitrate"),b=s.deepAccess(e,"mediaTypes.video.maxbitrate");t&&s.isInteger(t)||(t=0);var h={minduration:t,maxduration:r,api:i,mimes:o,placement:a,protocols:c};void 0!==n&&(s.isArray(n[0])?(h.w=parseInt(n[0][0]),h.h=parseInt(n[0][1])):s.isNumber(n[0])&&(h.w=parseInt(n[0]),h.h=parseInt(n[1]))),u&&(h.playbackmethod=u),d&&(h.plcmt=d),l&&(h.pos=l),p&&s.isInteger(p)&&(h.startdelay=p),!f||0!==f&&1!==f||(h.skip=f),g&&s.isInteger(g)&&(h.skipmin=g),v&&s.isInteger(v)&&(h.skipafter=v),m&&s.isInteger(m)&&(h.minbitrate=m),b&&s.isInteger(b)&&(h.maxbitrate=b);var y=s.deepAccess(e,"ortb2Imp.battr");return y&&(h.battr=y),h}(e)),Object.assign(t,i);var o=y(e);o&&(t.bidfloor=parseFloat(o),t.bidfloorcur="USD");var a=s.deepAccess(e,"ortb2Imp.secure");return t.secure=(0,s.isNumber)(a)?a:1,s.mergeDeep(t,e.ortb2Imp),t}var T={code:g,gvlid:21,aliases:["thetradedesk"],supportedMediaTypes:[u.BANNER,u.VIDEO],isBidRequestValid:function(e){if(!e||!e.params)return s.logWarn(g+": Missing bid parameters"),!1;if(!e.params.supplySourceId)return s.logWarn(g+": Missing required parameter params.supplySourceId"),!1;if(!/^[\w+]+$/.test(e.params.supplySourceId))return s.logWarn(g+": supplySourceId must only contain alphabetic characters"),!1;if(!e.params.publisherId)return s.logWarn(g+": Missing required parameter params.publisherId"),!1;if(e.params.publisherId.length>32)return s.logWarn(g+": params.publisherId must be 32 characters or less"),!1;if(e.params.bidfloor&&isNaN(parseFloat(e.params.bidfloor)))return!1;var t=s.deepAccess(e,"ortb2Imp.ext.gpid");if(!e.params.placementId&&!t)return s.logWarn(g+": one of params.placementId or gpid (via the GPT module https://docs.prebid.org/dev-docs/modules/gpt-pre-auction.html) must be passed"),!1;var r=s.deepAccess(e,"mediaTypes.banner"),n=s.deepAccess(e,"mediaTypes.video");if(!r&&!n)return s.logWarn(g+": one of mediaTypes.banner or mediaTypes.video must be passed"),!1;if(n){if(!n.maxduration||!s.isInteger(n.maxduration))return s.logWarn(g+": mediaTypes.video.maxduration must be set to the maximum video ad duration in seconds"),!1;if(!n.api||0===n.api.length)return s.logWarn(g+": mediaTypes.video.api should be an array of supported api frameworks. See the Open RTB v2.5 spec for valid values"),!1;if(!n.mimes||0===n.mimes.length)return s.logWarn(g+": mediaTypes.video.mimes should be an array of supported mime types"),!1;if(!n.protocols)return s.logWarn(g+": mediaTypes.video.protocols should be an array of supported protocols. See the Open RTB v2.5 spec for valid values"),!1}return!0},buildRequests:function(e,t){var r=t.ortb2||{},n={id:t.bidderRequestId,imp:e.map((function(e){return S(e)})),site:O(t,r),device:E(r),user:A(t,r),at:1,cur:["USD"],regs:h(t),source:I(e,t),ext:b(r)};if(r&&r.bcat&&(n.bcat=r.bcat),r&&r.badv&&(n.badv=r.badv),r&&r.app&&(n.app=r.app),r&&r.pmp&&r.pmp.deals&&r.pmp.deals.length){var i,o=null==t||null===(i=t.bids[0])||void 0===i?void 0:i.mediaTypes,a=r.pmp.deals.filter((function(e){return null!=o&&o.banner?!e.isVideo:e.isVideo})).map((function(e){return f({},e)}));if(a.length){var s=y(e[0]);n.pmp=f(f({deals:a},r.pmp.ext&&{ext:r.pmp.ext}),r.pmp.private_auction&&{private_auction:r.pmp.private_auction}),n.pmp.deals[0].bidfloor=Math.max(a[0].bidfloor,s),n.pmp.deals.forEach((function(e){delete e.isVideo}))}}return{method:"POST",url:"https://direct.adsrvr.org/bid/bidder/"+t.bids[0].params.supplySourceId,data:n,options:{withCredentials:!0}}},interpretResponse:function(e,t){var r=s.deepAccess(e,"body.seatbid"),n=s.deepAccess(e,"body.cur");if(!r||0===r.length)return[];var i=[],o=s.deepAccess(t,"data.imp");return r.forEach((function(e){e.bid.forEach((function(e){var t=o.find((function(t){return t.id===e.impid})),r=e.price||0,a={requestId:e.impid,cpm:r,creativeId:e.crid,dealId:e.dealid||null,currency:n||"USD",netRevenue:!0,ttl:e.ttl||360,meta:{}};e.adomain&&e.adomain.length>0&&(a.meta.advertiserDomains=e.adomain),e.ext.mediatype===v?Object.assign(a,{width:e.w,height:e.h,ad:s.replaceAuctionPrice(e.adm,r),mediaType:u.BANNER}):e.ext.mediatype===m&&(Object.assign(a,{width:t.video.w,height:t.video.h,mediaType:u.VIDEO}),(e.dur||e.duration)&&(a.duration=e.dur||e.duration),e.nurl?a.vastUrl=s.replaceAuctionPrice(e.nurl,r):a.vastXml=s.replaceAuctionPrice(e.adm,r)),i.push(a)}))})),i},getUserSyncs:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[],o="&gdpr=".concat(r.gdprApplies?1:0,"&gdpr_consent=").concat(encodeURIComponent(r.consentString)),a="".concat("https://match.adsrvr.org","/track/usersync?us_privacy=").concat(encodeURIComponent(n)).concat(o);return e.pixelEnabled?i.push({type:"image",url:a+"&ust=image"}):e.iframeEnabled&&i.push({type:"iframe",url:a+"&ust=iframe"}),i}};(0,c.registerBidder)(T),(0,a.registerModule)("ttdBidAdapter")},8521:(e,t,r)=>{"use strict";var n=r(8851),i=r(1779),o=r(43),a=r(6613);function s(e){if(!e)return null;var t=e.gdprApplies?"1":"0",r=e.consentString?e.consentString:"";return"gdpr=".concat(t,"&gdprstr=").concat(r)}function d(e){var t=document.getElementById(e),r=-1,n=-1;if(t){r=t.offsetLeft,n=t.offsetTop;var i=t.offsetParent;return i&&(r+=i.offsetLeft,n+=i.offsetTop),[r,n]}return null}var c={code:"undertone",gvlid:677,supportedMediaTypes:[a.BANNER,a.VIDEO],isBidRequestValid:function(e){if(e&&e.params&&e.params.publisherId)return e.params.publisherId=parseInt(e.params.publisherId),!0},buildRequests:function(e,t){var r=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o=0==r||0==n?null:[r,n],c={adapterVersion:"8.34.0",uids:e[0].userId,pageSize:o};e[0].schain&&(c.schain=e[0].schain);var u={"x-ut-hb-params":[],commons:c},l=t.refererInfo.topmostLocation,p=t.refererInfo.canonicalUrl;l&&(c.referrer=l),p&&(c.canonicalUrl=p);var f=function(e){var t=null;try{var r=/[-\w]+\.([-\w]+|[-\w]{3,}|[-\w]{1,3}\.[-\w]{2})$/i.exec(e);if(null!=r&&r.length>0){t=r[0];for(var n=1;n<r.length;n++)r[n].length>t.length&&(t=r[n])}}catch(e){t=null}return t}((0,i.parseUrl)(l).hostname),g=p||l,v=e[0].params.publisherId,m="".concat("https://hb.undertone.com/hb","?pid=").concat(v,"&domain=").concat(f),b=s(t.gdprConsent);if(b&&(m+="&".concat(b)),t.uspConsent&&(m+="&ccpa=".concat(t.uspConsent)),t.gppConsent){var h,y,I=null!==(h=t.gppConsent.gppString)&&void 0!==h?h:"",E=null!==(y=t.gppConsent.applicableSections)&&void 0!==y?y:"";m+="&gpp=".concat(I,"&gpp_sid=").concat(E)}return e.map((function(e){var t={bidRequestId:e.bidId,coordinates:d(e.adUnitCode),hbadaptor:"prebid",url:g,domain:f,placementId:null!=e.params.placementId?e.params.placementId:null,publisherId:e.params.publisherId,gpid:(0,i.deepAccess)(e,"ortb2Imp.ext.gpid",(0,i.deepAccess)(e,"ortb2Imp.ext.data.pbadslot","")),sizes:e.params.size,params:e.params},r=(0,i.deepAccess)(e,"mediaTypes.video"),n=r?a.VIDEO:a.BANNER;t.mediaType=n,t.bidfloor=function(e,t){if("function"!=typeof e.getFloor)return 0;var r=e.getFloor({currency:"USD",mediaType:t,size:"*"});return r&&"USD"===r.currency&&r.floor||0}(e,n),r&&(t.video={playerSize:(0,i.deepAccess)(e,"mediaTypes.video.playerSize")||null,streamType:(0,i.deepAccess)(e,"mediaTypes.video.context")||null,playbackMethod:(0,i.deepAccess)(e,"params.video.playbackMethod")||null,maxDuration:(0,i.deepAccess)(e,"params.video.maxDuration")||null,skippable:(0,i.deepAccess)(e,"params.video.skippable")||null,placement:(0,i.deepAccess)(e,"mediaTypes.video.placement")||null,plcmt:(0,i.deepAccess)(e,"mediaTypes.video.plcmt")||null}),u["x-ut-hb-params"].push(t)})),{method:"POST",url:m,withCredentials:!0,data:JSON.stringify(u)}},interpretResponse:function(e,t){var r=[],n=e.body;return n&&Array.isArray(n)&&n.length>0&&n.forEach((function(e){if(e.ad&&e.cpm>0){var t={requestId:e.bidRequestId,cpm:e.cpm,width:e.width,height:e.height,creativeId:e.adId,currency:e.currency,netRevenue:e.netRevenue,ttl:e.ttl||360,meta:{advertiserDomains:e.adomain?e.adomain:[]}};e.mediaType&&"video"===e.mediaType?(t.vastXml=e.ad,t.mediaType=e.mediaType):t.ad=e.ad,r.push(t)}})),r},getUserSyncs:function(e,t,r,n){var i=[],o=s(r),a="",d="";return o&&(a+="?".concat(o),d+="&".concat(o)),n&&(a+=""!=a?"&":"?",a+="ccpa=".concat(n),d+="&ccpa=".concat(n)),e.iframeEnabled?i.push({type:"iframe",url:"https://cdn.undertone.com/js/usersync.html"+a}):e.pixelEnabled&&i.push({type:"image",url:"https://usr.undertone.com/userPixel/syncOne?id=1&of=2"+d},{type:"image",url:"https://usr.undertone.com/userPixel/syncOne?id=2&of=2"+d}),i}};(0,o.registerBidder)(c),(0,n.registerModule)("undertoneBidAdapter")},2779:(e,t,r)=>{"use strict";var n=r(4293)(r(8212)),i=r(8851),o=r(1779),a=r(6150),s=r(4627),d=r(2630);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var u="unifiedId",l={name:u,gvlid:21,decode:function(e){return e&&"string"==typeof e.TDID?{tdid:e.TDID}:void 0},getId:function(e){var t=e&&e.params||{};if(t&&("string"==typeof t.partner||"string"==typeof t.url)){var r=t.url||"https://match.adsrvr.org/track/rid?ttd_pid=".concat(t.partner,"&fmt=json");return{callback:function(e){var t={success:function(t){var r;if(t)try{r=JSON.parse(t)}catch(e){(0,o.logError)(e)}e(r)},error:function(t){(0,o.logError)("".concat(u,": ID fetch encountered an error"),t),e()}};(0,a.ajax)(r,t,void 0,{method:"GET",withCredentials:!0})}}}(0,o.logError)("User ID - unifiedId submodule requires either partner or url to be defined")},eids:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},d.UID1_EIDS)};(0,s.submodule)("userId",l),(0,i.registerModule)("unifiedIdSystem")},8558:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(8212)),o=n(r(7996)),a=r(8851),s=r(1779),d=r(9723),c=r(43),u=r(6613),l=["bids","bidderRequestId","bidderCode"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e,t,r){r.bids,r.bidderRequestId,r.bidderCode;var n=(0,o.default)(r,l),i=r.bids.length-t.length,a={};t.forEach((function(t){var r=t.params.siteId;!function(e){Object.keys(e.mediaTypes).forEach((function(t){var r;r="function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:t,size:"*"}).floor||0:e.params.floor||0,e.mediaTypes[t].floor=r}))}(t),function(e){var t=(0,s.deepAccess)(e,"mediaTypes.banner");if(t){var r={},n=[];t.sizes.forEach((function(e){r[e.toString()]||(r[e.toString()]=!0,n.push(e))})),t.sizes=n}}(t),function(e,t){!t&&e.ortb2Imp&&e.ortb2Imp.ext&&delete e.ortb2Imp.ext.ae}(t,e.protectedAudienceEnabled),a[r]=a[r]||[],a[r].push(t)}));var d=[];return Object.keys(a).forEach((function(t){var r={bidderRequest:Object.assign({},f({bids:a[t],invalidBidsCount:i,prebidVersion:"8.34.0"},n))};d.push(Object.assign({},f({data:r},e)))})),d},v=function(e){if(e.ad)return e;(0,s.logError)(new Error("UnrulyBidAdapter: Missing ad config."))},m=function(e){if(e.vastUrl||e.vastXml)return e;(0,s.logError)(new Error("UnrulyBidAdapter: Missing vastUrl or vastXml config."))},b=function(e){var t=!!(0,s.deepAccess)(e,"ext.renderer.config"),r=!!(0,s.deepAccess)(e,"ext.renderer.config.siteId");if(t){if(r){var n=(0,s.deepAccess)(e,"ext.renderer");!function(e,t){if(!e.config)throw new Error("UnrulyBidAdapter: Missing renderer config.");if(!e.config.siteId)throw new Error("UnrulyBidAdapter: Missing renderer siteId.");parent.window.unruly=parent.window.unruly||{},parent.window.unruly.native=parent.window.unruly.native||{},parent.window.unruly.native.siteId=parent.window.unruly.native.siteId||e.config.siteId,parent.window.unruly.native.adSlotId=t,parent.window.unruly.native.supplyMode="prebid"}(n,e.requestId),parent.window.unruly.native.prebid=parent.window.unruly.native.prebid||{},parent.window.unruly.native.prebid.uq=parent.window.unruly.native.prebid.uq||[];var i=d.Renderer.install(Object.assign({},n)),o=Object.assign({},e,{renderer:i,adUnitCode:(0,s.deepAccess)(e,"ext.adUnitCode")});return i.setRender((function(){var e;e=o,parent.window.unruly.native.prebid.uq.push(["render",e])})),e.renderer=e.renderer||i,e}(0,s.logError)(new Error("UnrulyBidAdapter: Missing renderer siteId."))}else(0,s.logError)(new Error("UnrulyBidAdapter: Missing renderer config."))},h=function(e){if(!e.context)return!1;return-1!==["outstream","instream"].indexOf(e.context)},y=function(e){return e.sizes},I={code:"unruly",supportedMediaTypes:[u.VIDEO,u.BANNER],gvlid:36,isBidRequestValid:function(e){var t=(0,s.deepAccess)(e,"params.siteId")&&function(e){var t=(0,s.deepAccess)(e,"mediaTypes.video"),r=(0,s.deepAccess)(e,"mediaTypes.banner"),n=!(!t&&!r);return n&&t&&(n=h(t)),n&&r&&(n=y(r)),n}(e);return!!t},buildRequests:function(e,t){var r="https://targeting.unrulymedia.com/unruly_prebid";return e[0]&&(r=(0,s.deepAccess)(e[0],"params.endpoint")||r),g({url:r,method:"POST",options:{contentType:"application/json"},protectedAudienceEnabled:t.fledgeEnabled},e,t)},interpretResponse:function(e){if(!e||!e.body||!e.body.auctionConfigs&&!e.body.bids)return[];var t=e.body,r=[],n=null;if(t.bids.length&&(r=function(e){var t=[];return e.forEach((function(e){var r,n=(0,s.deepAccess)(e,"meta.mediaType");if(n&&"banner"===n.toLowerCase())e.mediaType=u.BANNER,r=v(e);else if(n&&"video"===n.toLowerCase()){var i=(0,s.deepAccess)(e,"meta.videoContext");e.mediaType=u.VIDEO,"instream"===i?r=m(e):"outstream"===i&&(r=b(e))}r&&t.push(r)})),t}(t.bids)),t.auctionConfigs){var i=t.auctionConfigs,o=Object.keys(i);o.length&&o.forEach((function(e){n=[{bidId:e,config:i[e]}]}))}return n?{bids:r,fledgeAuctionConfigs:n}:r}};(0,c.registerBidder)(I),(0,a.registerModule)("unrulyBidAdapter")},6173:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.EID_CONFIG=void 0,t.buildEidPermissions=function(e){var t=[];return e.filter((function(e){return(0,a.isPlainObject)(e.idObj)&&Object.keys(e.idObj).length})).forEach((function(e){Object.keys(e.idObj).forEach((function(r){var n=s.get(r)||{};(0,a.deepAccess)(e,"config.bidders")&&Array.isArray(e.config.bidders)&&n.source&&t.push({source:n.source,bidders:e.config.bidders})}))})),t},t.createEidsArray=function(e){var t={};function r(e){var r,n,i=JSON.stringify([null===(r=e.source)||void 0===r?void 0:r.toLowerCase(),e.ext]);t.hasOwnProperty(i)?(n=t[i].uids).push.apply(n,(0,o.default)(e.uids)):t[i]=e}return Object.entries(e).forEach((function(e){var t=(0,i.default)(e,2),n=t[0],o=t[1];o=Array.isArray(o)?o:[o],("pubProvidedId"===n?(0,a.deepClone)(o):o.map((function(e){return function(e,t){var r=s.get(t);if(r&&e){var n={};n.source=(0,a.isFn)(r.getSource)?r.getSource(e):r.source;var i=(0,a.isFn)(r.getValue)?r.getValue(e):e;if((0,a.isStr)(i)){var o={id:i,atype:r.atype};if((0,a.isFn)(r.getUidExt)){var d=r.getUidExt(e);d&&(o.ext=d)}if(n.uids=[o],(0,a.isFn)(r.getEidExt)){var c=r.getEidExt(e);c&&(n.ext=c)}return n}}return null}(e,n)}))).filter((function(e){return null!=e})).forEach(r)})),Object.values(t)};var i=n(r(8832)),o=n(r(147)),a=r(1779),s=new Map;t.EID_CONFIG=s},8144:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);var o=n(r(147)),a=n(r(4319)),s=n(r(8832)),d=n(r(8212)),c=r(8851),u=r(9635),l=r(6522),p=P(r(985)),f=P(r(1442)),g=n(r(5404)),v=r(4627),m=r(6173),b=r(9084),h=r(1779),y=r(4026),I=r(8145),E=r(9502),_=r(1380),A=r(4663),O=r(1526),S=r(7343),T=r(1681),w=r(353),C=r(9675);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}var D="User ID",R=b.STORAGE_TYPE_COOKIES,j=b.STORAGE_TYPE_LOCALSTORAGE,k=500,N=0,B="_pbjs_id_optout";var U=(0,b.getCoreStorageManager)("userId");var M={isAllowed:T.isActivityAllowed};var q,V,L,F,G,z,W=!1,H=[],Y=[],K={},J=[];var Q,X=function(){return null==Q&&(Q=(0,_.newMetrics)()),Q};function $(e){return X().fork().renameWith((function(t){return["userId.mod.".concat(t),"userId.mods.".concat(e,".").concat(t)]}))}function Z(e,t){t=t||e.storageMgr;var r="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,n=e.config.storage.name;return function(e,i,o){t.setCookie(n+(e||""),i,o,"Lax",r)}}function ee(e,t){var r=e.config.storage,n=e.storageMgr;try{var i=new Date(Date.now()+864e5*r.expires).toUTCString(),o=(0,h.isPlainObject)(t)?JSON.stringify(t):t;if(r.type===R){var a=Z(e);a(null,o,i),a("_cst",Ie(),i),"number"==typeof r.refreshInSeconds&&a("_last",(new Date).toUTCString(),i)}else r.type===j&&(n.setDataInLocalStorage("".concat(r.name,"_exp"),i),n.setDataInLocalStorage("".concat(r.name,"_cst"),Ie()),n.setDataInLocalStorage(r.name,encodeURIComponent(o)),"number"==typeof r.refreshInSeconds&&n.setDataInLocalStorage("".concat(r.name,"_last"),(new Date).toUTCString()))}catch(e){(0,h.logError)(e)}}function te(e){var t,r,n,i;switch(null===(t=e.config)||void 0===t||null===(r=t.storage)||void 0===r?void 0:r.type){case R:var o=Z(e,U),a=new Date(Date.now()-864e5).toUTCString();n=function(e){return o(e,"",a)},i=["","_last","_cst"];break;case j:n=function(t){return U.removeDataFromLocalStorage(e.config.storage.name+t)},i=["","_last","_exp","_cst"]}n&&i.forEach((function(e){try{n(e)}catch(e){(0,h.logError)(e)}}))}function re(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e.storageMgr,i=e.config.storage,o=r?"".concat(i.name,"_").concat(r):i.name;try{if(i.type===R)t=n.getCookie(o);else if(i.type===j){var a=n.getDataFromLocalStorage("".concat(i.name,"_exp"));""===a?t=n.getDataFromLocalStorage(o):a&&new Date(a).getTime()-Date.now()>0&&(t=decodeURIComponent(n.getDataFromLocalStorage(o)))}"string"==typeof t&&"{"===t.trim().charAt(0)&&(t=JSON.parse(t))}catch(e){(0,h.logError)(e)}return t}function ne(e,t,r){t=X().fork().startTiming("userId.callbacks.total").stopBefore(t);var n=(0,h.delayExecution)((function(){clearTimeout(V),t()}),e.length);e.forEach((function(e){var t=$(e.submodule.name).startTiming("callback").stopBefore(n);try{e.callback((function(n){n?(e.config.storage&&ee(e,n),e.idObj=e.submodule.decode(n,e.config),_e(ie(r))):(0,h.logInfo)("".concat(D,": ").concat(e.submodule.name," - request id responded with an empty value")),t()}),re.bind(null,e))}catch(r){(0,h.logError)("Error in userID module '".concat(e.submodule.name,"':"),r),t()}e.callback=void 0}))}function ie(e){return Array.isArray(e)&&e.length?ae(e):{}}function oe(e,t,r){return Object.fromEntries(Object.entries(e.reduce((function(e,n){var i=t(n);return i&&Object.keys(i).forEach((function(t){var o,a=null===(o=K[t])||void 0===o?void 0:o.indexOf(r(n)),s={priority:(0,h.isNumber)(a)?a:-1,value:i[t]};if(e[t]){var d=s.priority>e[t].priority?s:e[t];e[t]=d}else e[t]=s})),e}),{})).map((function(e){var t=(0,s.default)(e,2);return[t[0],t[1].value]})))}function ae(e){return oe(e.filter((function(e){return(0,h.isPlainObject)(e.idObj)&&Object.keys(e.idObj).length})),(function(e){return e.idObj}),(function(e){return e.submodule.name}))}function se(e,t){[e].some((function(e){return!Array.isArray(e)||!e.length}))||e.forEach((function(e){e.bids&&(0,h.isArray)(e.bids)&&e.bids.forEach((function(e){var r=function(e,t){return Array.isArray(e)&&e.length&&t?ae(e.filter((function(e){return!e.config.bidders||!(0,h.isArray)(e.config.bidders)||(0,u.includes)(e.config.bidders,t)}))):{}}(t,e.bidder);Object.keys(r).length&&(e.userId=r,e.userIdAsEids=(0,m.createEidsArray)(r))}))}))}var de,ce={};function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe()||[],t=G&&e.find((function(e){return e.source===G}));if(t&&"string"==typeof(0,h.deepAccess)(t,"uids.0.id")){var r=t.uids[0].id.replace(/[\W_]/g,"");if(r.length>=32&&r.length<=150)return r;(0,h.logWarn)("User ID - Googletag Publisher Provided ID for ".concat(G," is not between 32 and 150 characters - ").concat(r))}}var le=(0,_.timedAuctionHook)("userId",(function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.delay,o=void 0===i?I.GreedyPromise.timeout:i,a=n.getIds,s=void 0===a?ye:a;I.GreedyPromise.race([s().catch((function(){return null})),o(F)]).then((function(){se(t.adUnits||(0,c.getGlobal)().adUnits,q),X().join((0,_.useMetrics)(t.metrics),{propagate:!1,includeGroups:!0}),e.call(r,t)}))}));function pe(){return ie(q)}function fe(){return(0,m.createEidsArray)(pe())}function ge(e){return(0,m.createEidsArray)(function(e,t){if(!Array.isArray(e)||!e.length)return{};var r=ae(e),n=Object.keys(r).find((function(e){var r=m.EID_CONFIG.get(e);return(null==r?void 0:r.source)===t||(0,h.isFn)(null==r?void 0:r.getSource)&&r.getSource()===t}));return n?(0,d.default)({},n,r[n]):[]}(q,e))[0]}function ve(e,t,r){return de().then((function(){var n={};if((0,h.isFn)(r)){(0,h.logInfo)("".concat(D," - Getting encrypted signal from custom function : ").concat(r.name," & source : ").concat(e," "));var i=r(e);n[e]=i?me(i):null}else{var o=ge(e);(0,h.logInfo)("".concat(D," - Getting encrypted signal for eids :").concat(JSON.stringify(o))),(0,h.isEmpty)(o)||(n[o.source]=!0===t?me(o):o.uids[0].id)}return(0,h.logInfo)("".concat(D," - Fetching encrypted eids: ").concat(n[e])),n[e]}))}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r="";if(1===t)r="object"===(0,a.default)(e)?window.btoa(JSON.stringify(e)):window.btoa(e);return"".concat(t,"||").concat(r)}function be(){if((0,h.isGptPubadsDefined)()){window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[];var e=l.config.getConfig("userSync.encryptedSignalSources");if(e){var t=e.registerDelay||0;setTimeout((function(){e.sources&&e.sources.forEach((function(e){var t=e.source,r=e.encrypt,n=e.customFunc;t.forEach((function(e){window.googletag.secureSignalProviders.push({id:e,collectorFunction:function(){return ve(e,r,n)}})}))}))}),t)}else(0,h.logWarn)("".concat(D," - ESP : encryptedSignalSources config not defined under userSync Object"))}}function he(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).submoduleNames,t=arguments.length>1?arguments[1]:void 0;return de({refresh:!0,submoduleNames:e}).then((function(){return t&&(0,h.isFn)(t)&&t(),pe()}))}function ye(){return de().then((function(){return pe()}),(function(e){return e===ce?Promise.resolve().then(ye):((0,h.logError)("Error initializing userId",e),I.GreedyPromise.reject(e))}))}function Ie(){for(var e=Number(O.allConsent.hash),t=[];e>0;)t.push(String.fromCharCode(255&e)),e>>>=8;return btoa(t.join())}function Ee(e,t,r){var n=f.gdprDataHandler.getConsentData();if(e.config.storage){var i,o=re(e),a=!1;if("number"==typeof e.config.storage.refreshInSeconds){var s=new Date(re(e,"last"));a=s&&Date.now()-s.getTime()>1e3*e.config.storage.refreshInSeconds}!o||a||t||function(e){var t=re(e,"cst");return!t||t!==Ie()}(e)?i=e.submodule.getId(e.config,n,o):"function"==typeof e.submodule.extendId&&(i=e.submodule.extendId(e.config,n,o)),(0,h.isPlainObject)(i)&&(i.id&&(ee(e,i.id),o=i.id),"function"==typeof i.callback&&(e.callback=i.callback)),o&&(e.idObj=e.submodule.decode(o,e.config))}else if(e.config.value)e.idObj=e.config.value;else{var d=e.submodule.getId(e.config,n,void 0);(0,h.isPlainObject)(d)&&("function"==typeof d.callback&&(e.callback=d.callback),d.id&&(e.idObj=e.submodule.decode(d.id,e.config)))}_e(ie(r))}function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();if(e&&G){var t=ue((0,m.createEidsArray)(e));t&&((0,h.isGptPubadsDefined)()?window.googletag.pubads().setPublisherProvidedId(t):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){window.googletag.pubads().setPublisherProvidedId(t)}))))}}function Ae(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return X().fork().measureTime("userId.init.modules",(function(){if(!t.length)return[];if(!(t=t.filter((function(e){return(!e.config.storage||function(e){var t,r;switch(null===(t=e.config)||void 0===t||null===(r=t.storage)||void 0===r?void 0:r.type){case j:if(e.storageMgr.localStorageIsEnabled())return!U.getDataFromLocalStorage(B)||((0,h.logInfo)("".concat(D," - opt-out localStorage found, storage disabled")),!1);break;case R:if(e.storageMgr.cookiesAreEnabled())return!U.getCookie(B)||((0,h.logInfo)("".concat(D," - opt-out cookie found, storage disabled")),!1)}return!1}(e))&&M.isAllowed(w.ACTIVITY_ENRICH_EIDS,(0,C.activityParams)(S.MODULE_TYPE_UID,e.config.name))}))).length)return(0,h.logWarn)("".concat(D," - no ID module configured")),[];var n=t.reduce((function(e,n){return $(n.submodule.name).measureTime("init",(function(){try{Ee(n,r,t),e.push(n)}catch(e){(0,h.logError)("Error in userID module '".concat(n.submodule.name,"':"),e)}return e}))}),[]);return n.length&&function(e){var t=(0,h.getPrebidInternal)().setEidPermissions;"function"==typeof t&&(0,h.isArray)(e)&&t((0,m.buildEidPermissions)(e))}(n),n.forEach(Oe.bind(null,e)),n}))}function Oe(e,t){for(var r=!1,n=0;n<e.length;n++)if(t.config.name.toLowerCase()===e[n].config.name.toLowerCase()){r=!0,e[n]=t;break}r||e.push(t)}var Se=new Set([j,R]);function Te(e){m.EID_CONFIG.clear(),Object.entries(oe(e,(function(e){return e.eids}),(function(e){return e.name}))).forEach((function(e){var t=(0,s.default)(e,2),r=t[0],n=t[1];return m.EID_CONFIG.set(r,n)}))}function we(){Te(J);var e=function(e){return Array.isArray(e)?e.reduce((function(e,t){return!t||(0,h.isEmptyStr)(t.name)||(t.storage&&!(0,h.isEmptyStr)(t.storage.type)&&!(0,h.isEmptyStr)(t.storage.name)&&Se.has(t.storage.type)||(0,h.isPlainObject)(t.value)?e.push(t):t.storage||t.value||e.push(t)),e}),[]):[]}(Y);if(e.length){var t=J.filter((function(e){return!(0,u.find)(H,(function(t){return t.name===e.name}))}));H.splice(0,H.length),t.map((function(t){var r=(0,u.find)(e,(function(e){return e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())}));return r&&t.name!==r.name&&(r.name=t.name),t.findRootDomain=A.findRootDomain,r?{submodule:t,config:r,callback:void 0,idObj:void 0,storageMgr:(0,b.getStorageManager)({moduleType:S.MODULE_TYPE_UID,moduleName:r.name})}:null})).filter((function(e){return null!==e})).forEach((function(e){return H.push(e)})),!W&&H.length&&((0,c.getGlobal)().requestBids.before(le,40),f.default.callDataDeletionRequest.before(Ce),y.getPPID.after((function(e){return e(ue())})),(0,h.logInfo)("".concat(D," - usersync config updated for ").concat(H.length," submodules: "),H.map((function(e){return e.submodule.name}))),W=!0)}}function Ce(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(0,h.logInfo)("UserID: received data deletion request; deleting all stored IDs..."),H.forEach((function(e){if("function"==typeof e.submodule.onDataDeletionRequest)try{var t;(t=e.submodule).onDataDeletionRequest.apply(t,[e.config,e.idObj].concat(r))}catch(t){(0,h.logError)("Error calling onDataDeletionRequest for ID submodule ".concat(e.submodule.name),t)}te(e)})),e.apply(this,r)}function xe(e){(0,u.find)(J,(function(t){return t.name===e.name}))||(J.push(e),O.GDPR_GVLIDS.register(S.MODULE_TYPE_UID,e.name,e.gvlid),we(),de({refresh:!0,submoduleNames:[e.name]}))}function Pe(e){return function(){return Promise.resolve(e.apply(this,arguments))}}function De(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delay,r=void 0===t?I.GreedyPromise.timeout:t;G=void 0,H=[],Y=[],W=!1,q=[],de=function(){var e,t,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).delay,n=void 0===r?I.GreedyPromise.timeout:r,i=(0,I.defer)(),o=(0,I.defer)(),a=!1;function s(r){return t=X().fork(),null!=e&&e.reject(ce),e=(0,I.defer)(),I.GreedyPromise.race([r,e.promise]).finally(t.startTiming("userId.total"))}var d=q,c=H;function u(e){return function(){if(d===q&&c===H)return e.apply(void 0,arguments)}}function l(){return O.allConsent.promise.finally(t.startTiming("userId.init.consent"))}var f=s(I.GreedyPromise.all([v.ready,i.promise]).then(l).then(u((function(){Ae(d,c)}))).then((function(){return o.promise.finally(t.startTiming("userId.callbacks.pending"))})).then(u((function(){var e=d.filter((function(e){return(0,h.isFn)(e.callback)}));if(e.length)return new I.GreedyPromise((function(t){return ne(e,t,d)}))}))));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refresh,r=void 0!==t&&t,v=e.submoduleNames,m=void 0===v?null:v,b=e.ready;return void 0!==b&&b&&!a&&(a=!0,i.resolve(),F>0?o.resolve():p.on(g.default.EVENTS.AUCTION_END,(function e(){p.off(g.default.EVENTS.AUCTION_END,e),n(L).then(o.resolve)}))),r&&a&&(f=s(f.catch((function(){return null})).then(l).then(u((function(){var e=Ae(d,c.filter((function(e){return null==m||m.includes(e.submodule.name)})),!0).filter((function(e){return null!=e.callback}));if(e.length)return new I.GreedyPromise((function(t){return ne(e,t,d)}))}))))),f}}({delay:r}),null!=z&&z(),J=[],z=e.getConfig("userSync",(function(e){var t=e.userSync;t&&(G=t.ppid,t.userIds&&(Y=t.userIds,L=(0,h.isNumber)(t.syncDelay)?t.syncDelay:k,F=(0,h.isNumber)(t.auctionDelay)?t.auctionDelay:N,we(),function(e,t){if(e){var r={},n=new Map(t.map((function(e){return e.submodule.aliasName?[e.submodule.aliasName,e.submodule.name]:[]})));Object.keys(e).forEach((function(t){var i=(0,h.isArray)(e[t])?(0,o.default)(e[t]).reverse():[];r[t]=i.map((function(e){return n.has(e)?n.get(e):e}))})),K=r}else K={}}(t.idPriority,H),de({ready:!0})))})),(0,c.getGlobal)().getUserIds=pe,(0,c.getGlobal)().getUserIdsAsEids=fe,(0,c.getGlobal)().getEncryptedEidsForSource=Pe(ve),(0,c.getGlobal)().registerSignalSources=be,(0,c.getGlobal)().refreshUserIds=Pe(he),(0,c.getGlobal)().getUserIdsAsync=Pe(ye),(0,c.getGlobal)().getUserIdsAsEidBySource=ge}function Re(e,t,r){var n=(0,h.deepAccess)(r,"bidRequests.0.userIdAsEids");n&&Object.keys(n).length>0&&(0,h.deepSetValue)(e,"user.ext.eids",n)}De(l.config),(0,v.module)("userId",xe),(0,E.registerOrtbProcessor)({type:E.REQUEST,name:"userExtEids",fn:Re}),(0,c.registerModule)("userId")},5905:(e,t,r)=>{"use strict";var n=r(4293);var i=n(r(8212)),o=n(r(8832)),a=r(8851),s=r(43),d=r(6613),c=r(1779),u=r(6522),l=r(9723),p=r(8619);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var g="8.34.0",v=300,m="USD",b=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxdt.net","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","parrable.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","yahoo.com","zeotap.com"];function h(e,t){var r=e.bidder||e.bidderCode;return u.config.getConfig("".concat(r,".").concat(t))}function y(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function I(e){return(0,c.isArray)(e)&&2===e.length&&!(0,c.isArray)(e[0])?[y(e)]:e.map(y)}function E(e){return(0,c.isArray)((0,c.deepAccess)(e,"userIdAsEids"))?e.userIdAsEids.filter((function(e){return-1!==b.indexOf(e.source)})):[]}function _(e){return(0,c.deepAccess)(e,"params.bidOverride.imp.secure")||"https:"===document.location.protocol?1:0}function A(e){var t;return(0,c.deepAccess)(e,"params.pubId")?t=!0:(0,c.deepAccess)(e,"params.dcn")&&(0,c.deepAccess)(e,"params.pos")&&(t=!1),t}function O(e){var t=h(e,"mode");return void 0===(t=t?t.toLowerCase():void 0)||t===d.BANNER?d.BANNER:t===d.VIDEO?d.VIDEO:"all"===t?"*":void 0}function S(e){var t=O(e),r={currency:(0,c.deepAccess)(e,"params.bidOverride.cur")||m,mediaType:t,size:"*"};return!!(0,c.isFn)(e.getFloor)&&e.getFloor(r)}function T(e,t,r,n){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n);for(var a in r)switch(e){case"string":-1!==t.indexOf(a)&&(0,c.isStr)(r[a])&&(o[a]=r[a]);break;case"number":-1!==t.indexOf(a)&&(0,c.isNumber)(r[a])&&(o[a]=r[a]);break;case"array":-1!==t.indexOf(a)&&(0,c.isArray)(r[a])&&(o[a]=r[a]);break;case"object":-1!==t.indexOf(a)&&(0,c.isPlainObject)(r[a])&&(o[a]=r[a]);break;case"objectAllKeys":(0,c.isPlainObject)(r)&&(o[a]=r[a])}return o}function w(e){var t=h(e,"ttl");return C(t||(0,c.deepAccess)(e,"params.ttl"))}function C(e){return(0,c.isNumber)(e)&&e>0&&e<3600?e:v}function x(e){return(0,c.isStr)(e)&&e.length>0}function P(e,t){if(e){var r,n,i={id:(0,c.generateUUID)(),cur:[S(e).currency||(0,c.deepAccess)(t,"params.bidOverride.cur")||m],imp:[],site:{page:(0,c.deepAccess)(e,"refererInfo.page")},device:{dnt:0,ua:navigator.userAgent,ip:(0,c.deepAccess)(t,"params.bidOverride.device.ip")||(0,c.deepAccess)(t,"params.ext.ip")||void 0,w:window.screen.width,h:window.screen.height},regs:{ext:{us_privacy:e.uspConsent?e.uspConsent:"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0,gpp:e.gppConsent?e.gppConsent.gppString:"",gpp_sid:e.gppConsent?e.gppConsent.applicableSections:[]}},source:{ext:{hb:1,adapterver:"1.1.0",prebidver:g,integration:{name:"prebid.js",ver:g}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:E(t)}}};!0===A(t)?(i.site.publisher={id:t.params.pubId},((0,c.deepAccess)(t,"params.bidOverride.site.id")||(0,c.deepAccess)(t,"params.siteId"))&&(i.site.id=(0,c.deepAccess)(t,"params.bidOverride.site.id")||t.params.siteId)):i.site.id=t.params.dcn,null!==(r=e.ortb2)&&void 0!==r&&null!==(n=r.regs)&&void 0!==n&&n.gpp&&(i.regs.ext.gpp=e.ortb2.regs.gpp,i.regs.ext.gpp_sid=e.ortb2.regs.gpp_sid),e.ortb2&&(i=function(e,t){var r=t.ortb2,n=(0,c.deepAccess)(r,"site")||void 0,i=(0,c.deepAccess)(n,"content")||void 0,o=(0,c.deepAccess)(n,"publisher")||void 0,a=(0,c.deepAccess)(n,"content.data")||void 0,s=(0,c.deepAccess)(r,"app.content")||void 0,d=(0,c.deepAccess)(r,"app.content.data")||void 0,u=(0,c.deepAccess)(r,"user")||void 0;if(n&&(0,c.isPlainObject)(n)){var l=["name","domain","page","ref","keywords","search"],p=["cat","sectioncat","pagecat"],f=["ext"];e.site=T("string",l,n,e.site),e.site=T("array",p,n,e.site),e.site=T("object",f,n,e.site)}if(o&&(0,c.isPlainObject)(o)){var g=["ext"];e.site.publisher=T("object",g,o,e.site.publisher)}if(i&&(0,c.isPlainObject)(i)){var v=["id","title","series","season","genre","contentrating","language"],m=["episode","prodq","context","livestream","len"],b=["cat"],h=["ext"];e.site.content=T("string",v,i,e.site.content),e.site.content=T("number",m,i,e.site.content),e.site.content=T("array",b,i,e.site.content),e.site.content=T("object",h,i,e.site.content),a&&(0,c.isArray)(a)&&a.every((function(t){var r={},n=["segment"],i=["ext"];r=T("string",["id","name"],t,r),r=T("array",n,t,r),r=T("object",i,t,r),e.site.content.data=[],e.site.content.data.push(r)}))}s&&(0,c.isPlainObject)(s)&&d&&(0,c.isArray)(d)&&d.every((function(t){var r={},n=["segment"],i=["ext"];r=T("string",["id","name"],t,r),r=T("array",n,t,r),r=T("object",i,t,r),e.app={content:{data:[]}},e.app.content.data.push(r)}));if(u&&(0,c.isPlainObject)(u)){var y=["id","buyeruid","gender","keywords","customdata"],I=["yob"],E=["data"],_=["ext"];e.user=T("string",y,u,e.user),e.user=T("number",I,u,e.user),e.user=T("array",E,u,e.user),e.user.ext=T("object",_,u,e.user.ext)}return e}(i,t));var o=(0,c.deepAccess)(t,"schain.nodes");return(0,c.isArray)(o)&&o.length>0&&(i.source.ext.schain=t.schain,i.source.ext.schain.nodes[0].rid=i.id),i}}function D(e,t){var r=O(e);if(t&&e){var n={id:e.bidId,secure:_(e),bidfloor:S(e).floor||(0,c.deepAccess)(e,"params.bidOverride.imp.bidfloor")};if(!e.mediaTypes.banner||void 0!==r&&r!==d.BANNER&&"*"!==r||(n.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:I(e.sizes)},e.mediaTypes.banner.pos&&(n.banner.pos=e.mediaTypes.banner.pos)),e.mediaTypes.video&&(r===d.VIDEO||"*"===r)){var i=I(e.mediaTypes.video.playerSize);n.video={mimes:(0,c.deepAccess)(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:(0,c.deepAccess)(e,"params.bidOverride.imp.video.w")||i[0].w,h:(0,c.deepAccess)(e,"params.bidOverride.imp.video.h")||i[0].h,maxbitrate:(0,c.deepAccess)(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:(0,c.deepAccess)(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:(0,c.deepAccess)(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:(0,c.deepAccess)(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:(0,c.deepAccess)(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:(0,c.deepAccess)(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:(0,c.deepAccess)(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:(0,c.deepAccess)(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,linearity:(0,c.deepAccess)(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:(0,c.deepAccess)(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:(0,c.deepAccess)(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:(0,c.deepAccess)(e,"params.bidOverride.imp.video.rewarded")||void 0}}if(n.ext={dfp_ad_unit_code:e.adUnitCode},(0,c.deepAccess)(e,"params.kvp")&&(0,c.isPlainObject)(e.params.kvp))for(var o in n.ext.kvs={},e.params.kvp)if((0,c.isStr)(e.params.kvp[o])||(0,c.isNumber)(e.params.kvp[o]))n.ext.kvs[o]=e.params.kvp[o];else if((0,c.isArray)(e.params.kvp[o])){var a=e.params.kvp[o];(a.every((function(e){return(0,c.isStr)(e)}))||a.every((function(e){return(0,c.isNumber)(e)})))&&(n.ext.kvs[o]=e.params.kvp[o])}(0,c.deepAccess)(e,"ortb2Imp.ext.data")&&(0,c.isPlainObject)(e.ortb2Imp.ext.data)&&(n.ext.data=e.ortb2Imp.ext.data),(0,c.deepAccess)(e,"ortb2Imp.instl")&&(0,c.isNumber)(e.ortb2Imp.instl)&&1===e.ortb2Imp.instl&&(n.instl=e.ortb2Imp.instl),!1===A(e)?(n.tagid=e.params.pos,n.ext.pos=e.params.pos):(0,c.deepAccess)(e,"params.placementId")&&(n.tagid=e.params.placementId),t.imp.push(n)}}function R(e){var t=e.payload,r=e.requestOptions,n=e.bidderRequest,i=A(n),o=h(n,"endpoint"),a=o||"https://c2shb.pubgw.yahoo.com/bidRequest";if(!0===i&&(a=o||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===(0,c.deepAccess)(n,"params.testing.e2etest"))if((0,c.logInfo)("Adapter e2etest mode is active"),r.withCredentials=!1,!0===i)t.site.id="1234567";else{var s=O(n);t.site.id="8a969516017a7a396ec539d97f540011",t.imp.forEach((function(e){if(e.ext.e2eTestMode=!0,s===d.BANNER)e.tagid="8a969978017a7aaabab4ab0bc01a0009";else if(s===d.VIDEO)e.tagid="8a96958a017a7a57ac375d50c0c700cc";else{var t=n.bidderCode;(0,c.logWarn)("e2etest mode does not support ".concat(t,'.mode="all". \n Please specify either "banner" or "video"')),(0,c.logWarn)("Adapter e2etest mode: Please make sure your adUnit matches the ".concat(t,".mode video or banner"))}}))}return{url:a,method:"POST",data:t,options:r,bidderRequest:n}}var j={code:"yahooAds",gvlid:25,aliases:["yahoossp","yahooAdvertising"],supportedMediaTypes:[d.BANNER,d.VIDEO],isBidRequestValid:function(e){var t=e.params;return!0===(0,c.deepAccess)(t,"testing.e2etest")||(!(!(0,c.isPlainObject)(t)||!(x(t.pubId)||x(t.dcn)&&x(t.pos)))||((0,c.logWarn)("Bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1))},buildRequests:function(e,t){if(!(0,c.isEmpty)(e)&&!(0,c.isEmpty)(t)){var r={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}};r.withCredentials=(0,p.hasPurpose1Consent)(t.gdprConsent);var n=function(e){var t=O(e[0]),r=[];return t===d.BANNER?r=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===d.BANNER}))})):t===d.VIDEO?r=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===d.VIDEO}))})):"*"===t&&(r=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===d.BANNER||e===d.VIDEO}))}))),r}(e);if(!0===h(t,"singleRequestMode")){var i=P(t,n[0]);return n.forEach((function(e){D(e,i)})),[R({payload:i,requestOptions:r,bidderRequest:t})]}return n.map((function(e){var n=P(t,e);return D(e,n),R({payload:n,requestOptions:r,bidderRequest:e})}))}(0,c.logWarn)('buildRequests called with either empty "validBidRequests" or "bidderRequest"')},interpretResponse:function(e,t){var r=t.bidderRequest,n=[];return e.body&&Array.isArray(e.body.seatbid)?(e.body.seatbid.forEach((function(e){var t;try{t=e.bid[0]}catch(e){return n}var i=t.ext&&t.ext.encp?t.ext.encp:t.price,o={adId:(0,c.deepAccess)(t,"adId")?t.adId:t.impid||t.crid,requestId:t.impid,cpm:i,width:t.w,height:t.h,creativeId:t.crid||0,currency:t.cur||m,dealId:t.dealid?t.dealid:null,netRevenue:!0,ttl:w(r),meta:{advertiserDomains:t.adomain}},a=function(e){var t=e.adm;return-1!==t.indexOf("o2playerSettings")||-1!==t.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==t.indexOf("AdPlacement")?d.BANNER:-1!==t.indexOf("VAST")?d.VIDEO:void 0}(t);a===d.BANNER?(o.mediaType=d.BANNER,o.ad=t.adm,o.meta.mediaType=d.BANNER):a===d.VIDEO&&(o.mediaType=d.VIDEO,o.meta.mediaType=d.VIDEO,o.vastXml=t.adm,t.nurl&&(o.vastUrl=t.nurl)),"outstream"!==(0,c.deepAccess)(r,"mediaTypes.video.context")||r.renderer||(o.renderer=function(e,t){var r=l.Renderer.install({url:"https://s.yimg.com/kp/prebid-outstream-renderer/renderer.js",loaded:!1,adUnitCode:e.adUnitCode});try{r.setRender((function(t){setTimeout((function(){o2PlayerRender(t)}),(0,c.deepAccess)(e,"params.testing.renderer.setTimeout")||700)}))}catch(e){(0,c.logWarn)("Renderer error: setRender() failed",e)}return r}(r)||void 0),n.push(o)})),n):n},getUserSyncs:function(e,t,r,n,i){var a=!(0,c.isEmpty)(t)&&t[0].body;if(a&&a.ext&&a.ext.pixels){var s=function(e,t){var r=/\w*(?=\s)/,n=/src=("|')(.*?)\1/,i=[];if(t){var o=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);o&&o.forEach((function(t){var o=t.match(r)[0],a=t.match(n)[2];if(o&&a){var s="img"===o.toLowerCase()?"image":"iframe";if(!e.iframeEnabled&&"iframe"===s||!e.pixelEnabled&&"image"===s)return;i.push({type:s,url:a})}}))}return i}(e,a.ext.pixels);return s.forEach((function(e){e.url=function(e,t){for(var r={gdpr_consent:t.gdpr?t.gdpr.consentString:"",gdpr:t.gdpr&&t.gdpr.gdprApplies?"1":"0",us_privacy:t.uspConsent?t.uspConsent:"",gpp:t.gpp?t.gpp.gppString:"",gpp_sid:t.gpp&&Array.isArray(t.gpp.applicableSections)?t.gpp.applicableSections.join(","):""},n=new URL(e),i=n.searchParams,a=0,s=Object.entries(r);a<s.length;a++){var d=(0,o.default)(s[a],2),c=d[0],u=d[1];i.set(c,u)}return n.search=i.toString(),n.toString()}(e.url,{gpp:i,gdpr:r,uspConsent:n})})),s}return[]}};(0,s.registerBidder)(j),(0,a.registerModule)("yahoosspBidAdapter")},9723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=d,t.executeRenderer=function(e,t,r){var n=null;e.config&&e.config.documentResolver&&(n=e.config.documentResolver(t,document,r));n||(n=document);e.documentContext=n,e.render(t,e.documentContext)},t.isRendererRequired=function(e){return!(!e||!e.url&&!e.renderNow)};var n=r(1794),i=r(1779),o=r(9635),a=(0,r(8851).getGlobal)(),s="outstream";function d(e){var t=this,r=e.url,d=e.config,c=e.id,u=e.callback,l=e.loaded,p=e.adUnitCode,f=e.renderNow;this.url=r,this.config=d,this.handlers={},this.id=c,this.renderNow=f,this.loaded=l,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):(0,i.logError)("Commands given to Renderer.push must be wrapped in a function")},this.callback=u||function(){t.loaded=!0,t.process()},this.render=function(){var e=this,t=arguments,d=function(){e._render?e._render.apply(e,t):(0,i.logWarn)("No render function was provided, please use .setRender on the renderer")};!function(e){var t=a.adUnits,r=(0,o.find)(t,(function(t){return t.code===e}));if(!r)return!1;var n=(0,i.deepAccess)(r,"renderer"),s=!!(n&&n.url&&n.render),d=(0,i.deepAccess)(r,"mediaTypes.video.renderer"),c=!!(d&&d.url&&d.render);return!!(s&&!0!==n.backupOnly||c&&!0!==d.backupOnly)}(p)?f?d():(this.cmd.unshift(d),(0,n.loadExternalScript)(r,s,this.callback,this.documentContext)):((0,i.logWarn)("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(p)),d())}.bind(this)}d.install=function(e){return new d({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},d.prototype.getConfig=function(){return this.config},d.prototype.setRender=function(e){this._render=e},d.prototype.setEventHandlers=function(e){this.handlers=e},d.prototype.handleVideoEvent=function(e){var t=e.id,r=e.eventName;"function"==typeof this.handlers[r]&&this.handlers[r](),(0,i.logMessage)("Prebid Renderer event for id ".concat(t," type ").concat(r))},d.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){(0,i.logError)("Error processing Renderer command: ",e)}}},353:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACTIVITY_TRANSMIT_UFPD=t.ACTIVITY_TRANSMIT_TID=t.ACTIVITY_TRANSMIT_PRECISE_GEO=t.ACTIVITY_TRANSMIT_EIDS=t.ACTIVITY_SYNC_USER=t.ACTIVITY_REPORT_ANALYTICS=t.ACTIVITY_FETCH_BIDS=t.ACTIVITY_ENRICH_UFPD=t.ACTIVITY_ENRICH_EIDS=t.ACTIVITY_ACCESS_DEVICE=void 0;t.ACTIVITY_ACCESS_DEVICE="accessDevice";t.ACTIVITY_SYNC_USER="syncUser";t.ACTIVITY_ENRICH_UFPD="enrichUfpd";t.ACTIVITY_ENRICH_EIDS="enrichEids";t.ACTIVITY_FETCH_BIDS="fetchBids";t.ACTIVITY_REPORT_ANALYTICS="reportAnalytics";t.ACTIVITY_TRANSMIT_EIDS="transmitEids";t.ACTIVITY_TRANSMIT_UFPD="transmitUfpd";t.ACTIVITY_TRANSMIT_PRECISE_GEO="transmitPreciseGeo";t.ACTIVITY_TRANSMIT_TID="transmitTid"},9675:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.activityParams=void 0;var i=n(r(1442)),o=(0,r(8534).activityParamsBuilder)((function(e){return i.default.resolveAlias(e)}));t.activityParams=o},7343:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_TYPE_UID=t.MODULE_TYPE_RTD=t.MODULE_TYPE_PREBID=t.MODULE_TYPE_BIDDER=t.MODULE_TYPE_ANALYTICS=void 0;t.MODULE_TYPE_PREBID="prebid";t.MODULE_TYPE_BIDDER="bidder";t.MODULE_TYPE_UID="userId";t.MODULE_TYPE_RTD="rtd";t.MODULE_TYPE_ANALYTICS="analytics"},8534:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.ACTIVITY_PARAM_SYNC_URL=t.ACTIVITY_PARAM_SYNC_TYPE=t.ACTIVITY_PARAM_STORAGE_TYPE=t.ACTIVITY_PARAM_S2S_NAME=t.ACTIVITY_PARAM_COMPONENT_TYPE=t.ACTIVITY_PARAM_COMPONENT_NAME=t.ACTIVITY_PARAM_COMPONENT=t.ACTIVITY_PARAM_ANL_CONFIG=t.ACTIVITY_PARAM_ADAPTER_CODE=void 0,t.activityParamsBuilder=function(e){return function(t,r,n){var a,p=(a={},(0,i.default)(a,d,t),(0,i.default)(a,c,r),(0,i.default)(a,s,"".concat(t,".").concat(r)),a);return t===o.MODULE_TYPE_BIDDER&&(p[u]=e(r)),l(Object.assign(p,n))}},t.buildActivityParams=void 0;var i=n(r(8212)),o=r(7343),a=r(4627),s="component";t.ACTIVITY_PARAM_COMPONENT=s;var d=s+"Type";t.ACTIVITY_PARAM_COMPONENT_TYPE=d;var c=s+"Name";t.ACTIVITY_PARAM_COMPONENT_NAME=c;var u="adapterCode";t.ACTIVITY_PARAM_ADAPTER_CODE=u;t.ACTIVITY_PARAM_STORAGE_TYPE="storageType";t.ACTIVITY_PARAM_S2S_NAME="configName";t.ACTIVITY_PARAM_SYNC_TYPE="syncType";t.ACTIVITY_PARAM_SYNC_URL="syncUrl";t.ACTIVITY_PARAM_ANL_CONFIG="_config";var l=(0,a.hook)("sync",(function(e){return e}));t.buildActivityParams=l},2156:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_UFPD_PATHS=t.ORTB_GEO_PATHS=t.ORTB_EIDS_PATHS=void 0,t.appliesWhenActivityDenied=y,t.isData=h,t.objectTransformer=m,t.ortb2TransmitRules=I,t.redactRule=v,t.redactor=void 0,t.redactorFactory=E,t.sessionedApplies=b;var i=n(r(4319)),o=n(r(8832)),a=r(1779),s=r(6522),d=r(1681),c=r(353);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map((function(e){return"user.".concat(e)})).concat("device.ext.cdep");t.ORTB_UFPD_PATHS=p;var f=["user.eids","user.ext.eids"];t.ORTB_EIDS_PATHS=f;var g=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"];function v(e){return Object.assign({get:function(){},run:function(e,t,r,n,i){var o=r&&r[n];if(h(o)&&i()){var a=this.get(o);void 0===a?delete r[n]:r[n]=a}}},e)}function m(e){return e.forEach((function(e){e.paths=e.paths.map((function(e){var t=e.split("."),r=t.pop();return[t.length>0?t.join("."):null,r]}))})),function(t,r){for(var n=[],i=arguments.length,s=new Array(i>2?i-2:0),d=2;d<i;d++)s[d-2]=arguments[d];var c=b.apply(void 0,[t].concat(s));return e.forEach((function(e){if(!1!==t[e.name]){var i,s=u(e.paths);try{for(s.s();!(i=s.n()).done;){var d=(0,o.default)(i.value,2),l=d[0],p=d[1],f=null==l?r:(0,a.deepAccess)(r,l);if(n.push(e.run(r,l,f,p,c.bind(null,e))),!1===t[e.name])return}}catch(e){s.e(e)}finally{s.f()}}})),n.filter((function(e){return null!=e}))}}function b(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(t){return e.hasOwnProperty(t.name)||(e[t.name]=!!t.applies.apply(t,r)),e[t.name]}}function h(e){return null!=e&&("object"!==(0,i.default)(e)||Object.keys(e).length>0)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.isActivityAllowed;return function(r){return!t(e,r)}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.isActivityAllowed;return[{name:c.ACTIVITY_TRANSMIT_UFPD,paths:p,applies:y(c.ACTIVITY_TRANSMIT_UFPD,e)},{name:c.ACTIVITY_TRANSMIT_EIDS,paths:f,applies:y(c.ACTIVITY_TRANSMIT_EIDS,e)},{name:c.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:g,applies:y(c.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:function(e){return Math.round(100*(e+Number.EPSILON))/100}},{name:c.ACTIVITY_TRANSMIT_TID,paths:["source.tid"],applies:y(c.ACTIVITY_TRANSMIT_TID,e)}].map(v)}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.isActivityAllowed,t=m(I(e)),r=m(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.isActivityAllowed;return[{name:c.ACTIVITY_TRANSMIT_EIDS,paths:["userId","userIdAsEids"],applies:y(c.ACTIVITY_TRANSMIT_EIDS,e)},{name:c.ACTIVITY_TRANSMIT_TID,paths:["ortb2Imp.ext.tid"],applies:y(c.ACTIVITY_TRANSMIT_TID,e)}].map(v)}(e));return function(e){var n={};return{ortb2:function(r){return t(n,r,e),r},bidRequest:function(t){return r(n,t,e),t}}}}t.ORTB_GEO_PATHS=g;var _=E();t.redactor=_,(0,d.registerActivityControl)(c.ACTIVITY_TRANSMIT_TID,"enableTIDs config",(function(){if(!s.config.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}}))},1681:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.registerActivityControl=t.isActivityAllowed=void 0,t.ruleRegistry=c;var i=n(r(8832)),o=r(1779),a=r(8534);function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.prefixLog)("Activity control:"),t={};function r(e){return t[e]=t[e]||[]}function n(t,r,n,i){var o;try{o=n(i)}catch(n){e.logError("Exception in rule ".concat(r," for '").concat(t,"'"),n),o={allow:!1,reason:n}}return o&&Object.assign({activity:t,name:r,component:i[a.ACTIVITY_PARAM_COMPONENT]},o)}var d={};function c(t){var r=t.activity,n=t.name,i=t.allow,o=t.reason,a=t.component,s="".concat(n," ").concat(i?"allowed":"denied"," '").concat(r,"' for '").concat(a,"'").concat(o?":":""),c=d.hasOwnProperty(s);if(c&&clearTimeout(d[s]),d[s]=setTimeout((function(){return delete d[s]}),1e3),!c){var u=[s];o&&u.push(o),(i?e.logInfo:e.logWarn).apply(e,u)}}return[function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,a=r(e),s=a.findIndex((function(e){var t=(0,i.default)(e,1)[0];return o<t})),d=[o,t,n];return a.splice(s<0?a.length:s,0,d),function(){var e=a.indexOf(d);e>=0&&a.splice(e,1)}},function(e,t){var o,a,d,u=s(r(e));try{for(u.s();!(d=u.n()).done;){var l=(0,i.default)(d.value,3),p=l[0],f=l[1],g=l[2];if(o!==p&&a)break;o=p;var v=n(e,f,g,t);if(v){if(!v.allow)return c(v),!1;a=v}}}catch(e){u.e(e)}finally{u.f()}return a&&c(a),!0}]}var u=c(),l=(0,i.default)(u,2),p=l[0],f=l[1];t.isActivityAllowed=f,t.registerActivityControl=p},8977:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);Object.defineProperty(t,"__esModule",{value:!0}),t.emitAdRenderFail=h,t.emitAdRenderSucceeded=function(e){var t=e.doc,r=e.bid,n=e.id,i={doc:t};r&&(i.bid=r);n&&(i.adId=n);a.emit(v,i)},t.handleRender=function(e,t){var r=t.adId,n=t.options,i=t.bidResponse,p=t.doc;if(null==i)return void h({reason:s.default.AD_RENDER_FAILED_REASON.CANNOT_FIND_AD,message:"Cannot find ad '".concat(r,"'"),id:r});if(i.status===s.default.BID_STATUS.RENDERED&&((0,o.logWarn)("Ad id ".concat(r," has been rendered before")),a.emit(m,i),(0,o.deepAccess)(d.config.getConfig("auctionOptions"),"suppressStaleRender")))return;try{var f=i.adId,g=i.ad,v=i.adUrl,y=i.width,I=i.height,E=i.renderer,_=i.cpm,A=i.originalCpm,O=i.mediaType;if((0,c.isRendererRequired)(E))(0,c.executeRenderer)(E,i,p);else if(f){if(O===u.VIDEO)return void h({reason:s.default.AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:"Cannot render video ad",bid:i,id:f});var S={AUCTION_PRICE:A||_,CLICKTHROUGH:(null==n?void 0:n.clickUrl)||""};e({ad:(0,o.replaceMacros)(g,S),adUrl:(0,o.replaceMacros)(v,S),adId:f,width:y,height:I})}}catch(e){return void h({reason:s.default.AD_RENDER_FAILED_REASON.EXCEPTION,message:e.message,id:r,bid:i})}l.auctionManager.addWinningBid(i),a.emit(b,i)};var o=r(1779),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),s=n(r(5404)),d=r(6522),c=r(9723),u=r(6613),l=r(6572);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var f=s.default.EVENTS,g=f.AD_RENDER_FAILED,v=f.AD_RENDER_SUCCEEDED,m=f.STALE_RENDER,b=f.BID_WON;function h(e){var t=e.reason,r=e.message,n=e.bid,i=e.id,s={reason:t,message:r};n&&(s.bid=n),i&&(s.adId=i),(0,o.logError)("Error rendering ad (id: ".concat(i,"): ").concat(r)),a.emit(g,s)}},7943:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerVideoSupport=function(e,t){o.adServers=o.adServers||{},o.adServers[e]=o.adServers[e]||{},Object.keys(t).forEach((function(r){o.adServers[e][r]?(0,i.logWarn)("Attempting to add an already registered function property ".concat(r," for AdServer ").concat(e,".")):o.adServers[e][r]=t[r]}))};var n=r(8851),i=r(1779),o=(0,n.getGlobal)()},1802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adunitCounter=void 0;var n=r(1779),i={};function o(e,t,r){var n=function(e,t){var r=i[e]=i[e]||{bidders:{}};return t?r.bidders[t]=r.bidders[t]||{}:r}(e,r);return n[t]=(n[t]||0)+1,n[t]}var a={incrementRequestsCounter:function(e){return o(e,"requestsCounter")},incrementBidderRequestsCounter:function(e,t){return o(e,"requestsCounter",t)},incrementBidderWinsCounter:function(e,t){return o(e,"winsCounter",t)},getRequestsCounter:function(e){return(0,n.deepAccess)(i,"".concat(e,".requestsCounter"))||0},getBidderRequestsCounter:function(e,t){return(0,n.deepAccess)(i,"".concat(e,".bidders.").concat(t,".requestsCounter"))||0},getBidderWinsCounter:function(e,t){return(0,n.deepAccess)(i,"".concat(e,".bidders.").concat(t,".winsCounter"))||0}};t.adunitCounter=a},4221:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}},1442:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);Object.defineProperty(t,"__esModule",{value:!0}),t.PBS_ADAPTER_NAME=t.PARTITIONS=void 0,t._filterBidsForAdUnit=L,t._partitionBidders=W,Object.defineProperty(t,"coppaDataHandler",{enumerable:!0,get:function(){return b.coppaDataHandler}}),t.filterBidsForAdUnit=t.dep=t.default=void 0,Object.defineProperty(t,"gdprDataHandler",{enumerable:!0,get:function(){return b.gdprDataHandler}}),t.getS2SBidderSet=z,Object.defineProperty(t,"gppDataHandler",{enumerable:!0,get:function(){return b.gppDataHandler}}),t.partitionBidders=void 0,t.s2sActivityParams=q,t.setupAdUnitMediaTypes=void 0,Object.defineProperty(t,"uspDataHandler",{enumerable:!0,get:function(){return b.uspDataHandler}});var o=n(r(147)),a=n(r(8832)),s=n(r(8212)),d=r(1779),c=r(4239),u=r(43),l=r(6150),p=r(6522),f=r(4627),g=r(9635),v=r(1802),m=r(4080),b=r(1526),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),y=n(r(5404)),I=r(1380),E=r(6572),_=r(7343),A=r(1681),O=r(353),S=r(8534),T=r(2156);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P="pbsBidAdapter";t.PBS_ADAPTER_NAME=P;var D={CLIENT:"client",SERVER:"server"};t.PARTITIONS=D;var R={isAllowed:A.isActivityAllowed,redact:T.redactor};t.dep=R;var j={},k=j.bidderRegistry={},N=j.aliasRegistry={},B=[];p.config.getConfig("s2sConfig",(function(e){e&&e.s2sConfig&&(B=(0,d.isArray)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var U={},M=(0,S.activityParamsBuilder)((function(e){return j.resolveAlias(e)}));function q(e){return M(_.MODULE_TYPE_PREBID,P,(0,s.default)({},S.ACTIVITY_PARAM_S2S_NAME,e.configName))}var V=(0,f.hook)("sync",(function(e){var t=e.bidderCode,r=e.auctionId,n=e.bidderRequestId,i=e.adUnits,o=e.src,a=e.metrics;return i.reduce((function(e,i){var s=i.bids.filter((function(e){return e.bidder===t}));return null==t&&0===s.length&&null!=i.s2sBid&&s.push({bidder:null}),e.push(s.reduce((function(e,t){var s=null==(t=Object.assign({},t,{ortb2Imp:(0,d.mergeDeep)({},i.ortb2Imp,t.ortb2Imp)},(0,d.getDefinedParams)(i,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?i.mediaTypes:t.mediaTypes;return(0,d.isValidMediaTypes)(s)?t=Object.assign({},t,{mediaTypes:s}):(0,d.logError)("mediaTypes is not correctly configured for adunit ".concat(i.code)),e.push(Object.assign({},t,{adUnitCode:i.code,transactionId:i.transactionId,sizes:(0,d.deepAccess)(s,"banner.sizes")||(0,d.deepAccess)(s,"video.playerSize")||[],bidId:t.bid_id||(0,d.getUniqueIdentifierStr)(),bidderRequestId:n,auctionId:r,src:o,metrics:a,bidRequestsCount:v.adunitCounter.getRequestsCounter(i.code),bidderRequestsCount:v.adunitCounter.getBidderRequestsCounter(i.code,t.bidder),bidderWinsCount:v.adunitCounter.getBidderWinsCounter(i.code,t.bidder)})),e}),[])),e}),[]).reduce(d.flatten,[]).filter((function(e){return""!==e}))}),"getBids");function L(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders;if(null==t)return e;var n=(void 0===r?z:r)(t);return e.filter((function(e){return n.has(e.bidder)}))}var F=(0,f.hook)("sync",L,"filterBidsForAdUnit");t.filterBidsForAdUnit=F;var G=(0,f.hook)("sync",(function(e,t){return e}),"setupAdUnitMediaTypes");function z(e){(0,d.isArray)(e)||(e=[e]);var t=new Set([null]);return e.filter((function(e){return e&&e.enabled})).flatMap((function(e){return e.bidders})).forEach((function(e){return t.add(e)})),t}function W(e,t){var r,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders,i=(void 0===n?z:n)(t);return(0,d.getBidderCodes)(e).reduce((function(e,t){return e[i.has(t)?D.SERVER:D.CLIENT].push(t),e}),(r={},(0,s.default)(r,D.CLIENT,[]),(0,s.default)(r,D.SERVER,[]),r))}t.setupAdUnitMediaTypes=G;var H=(0,f.hook)("sync",W,"partitionBidders");function Y(e,t){var r=k[e],n=(null==r?void 0:r.getSpec)&&r.getSpec();if(n&&n[t]&&"function"==typeof n[t])return[n,n[t]]}function K(e,t,r,n){try{(0,d.logInfo)("Invoking ".concat(e,".").concat(t));for(var i=arguments.length,o=new Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];p.config.runWithBidder(e,n.bind.apply(n,[r].concat(o)))}catch(r){(0,d.logWarn)("Error calling ".concat(t," of ").concat(e))}}function J(e,t,r){if((null==r?void 0:r.src)!==y.default.S2S.SRC){var n=Y(e,t);null!=n&&K.apply(void 0,[e,t].concat((0,o.default)(n),[r]))}}t.partitionBidders=H,j.makeBidRequests=(0,f.hook)("sync",(function(e,t,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6?arguments[6]:void 0;a=(0,I.useMetrics)(a),h.emit(y.default.EVENTS.BEFORE_REQUEST_BIDS,e),(0,c.decorateAdUnitsWithNativeParams)(e),e.forEach((function(e){(0,d.isPlainObject)(e.mediaTypes)||(e.mediaTypes={}),e.bids=e.bids.filter((function(e){return!e.bidder||R.isAllowed(O.ACTIVITY_FETCH_BIDS,M(_.MODULE_TYPE_BIDDER,e.bidder))}))})),e=G(e,i);var s=H(e,B),u=s[D.CLIENT],l=s[D.SERVER];p.config.getConfig("bidderSequence")===p.RANDOM&&(u=(0,d.shuffle)(u));var f=(0,m.getRefererInfo)(),v=[],E=o.global||{},A=o.bidder||{};function S(e,t){var n=R.redact(null!=t?t:M(_.MODULE_TYPE_BIDDER,e.bidderCode)),i=Object.freeze(n.ortb2((0,d.mergeDeep)({source:{tid:r}},E,A[e.bidderCode])));return e.ortb2=i,e.bids=e.bids.map((function(e){return e.ortb2=i,n.bidRequest(e)})),e}B.forEach((function(n){var i=q(n);if(n&&n.enabled&&R.isAllowed(O.ACTIVITY_FETCH_BIDS,i)){var o=function(e,t){var r=(0,d.deepClone)(e),n=!1;return r.forEach((function(e){var r=e.bids.filter((function(e){var r;return e.module===P&&(null===(r=e.params)||void 0===r?void 0:r.configName)===t.configName}));1===r.length?(e.s2sBid=r[0],n=!0,e.ortb2Imp=(0,d.mergeDeep)({},e.s2sBid.ortb2Imp,e.ortb2Imp)):r.length>1&&(0,d.logWarn)('Multiple "module" bids for the same s2s configuration; all will be ignored',r),e.bids=F(e.bids,t).map((function(e){return e.bid_id=(0,d.getUniqueIdentifierStr)(),e}))})),{adUnits:r=r.filter((function(e){return 0!==e.bids.length||null!=e.s2sBid})),hasModuleBids:n}}(e,n),s=o.adUnits,c=o.hasModuleBids,u=(0,d.generateUUID)();(0===l.length&&c?[null]:l).forEach((function(e){var o=(0,d.getUniqueIdentifierStr)(),c=a.fork(),l=S({bidderCode:e,auctionId:r,bidderRequestId:o,uniquePbsTid:u,bids:V({bidderCode:e,auctionId:r,bidderRequestId:o,adUnits:(0,d.deepClone)(s),src:y.default.S2S.SRC,metrics:c}),auctionStart:t,timeout:n.timeout,src:y.default.S2S.SRC,refererInfo:f,metrics:c},i);0!==l.bids.length&&v.push(l)})),s.forEach((function(e){var t=e.bids.filter((function(e){return(0,g.find)(v,(function(t){return(0,g.find)(t.bids,(function(t){return t.bidId===e.bid_id}))}))}));e.bids=t})),v.forEach((function(e){var t,r;void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=s.filter((function(e){return e.bids.length>0||null!=e.s2sBid}))),null!==(t=e.adUnitsS2SCopy[0])&&void 0!==t&&t.bidPoolId&&(e.bidPoolId=e.adUnitsS2SCopy[0].bidPoolId),null!==(r=e.adUnitsS2SCopy[0])&&void 0!==r&&r.passiveBidPoolId&&(e.passiveBidPoolId=e.adUnitsS2SCopy[0].passiveBidPoolId)}))}}));var T=function(e){var t=(0,d.deepClone)(e);return t.forEach((function(e){e.bids=F(e.bids,null)})),t.filter((function(e){return 0!==e.bids.length}))}(e);return u.forEach((function(e){var o,s,c=(0,d.getUniqueIdentifierStr)(),u=a.fork(),l=S({bidderCode:e,auctionId:r,bidderRequestId:c,bids:V({bidderCode:e,auctionId:r,bidderRequestId:c,adUnits:(0,d.deepClone)(T),labels:i,src:"client",metrics:u}),auctionStart:t,timeout:n,refererInfo:f,metrics:u}),p=k[e];(p||(0,d.logError)("Trying to make a request for bidder that does not exist: ".concat(e)),p&&l.bids&&0!==l.bids.length)&&(null!==(o=T[0])&&void 0!==o&&o.bidPoolId&&(l.bidPoolId=T[0].bidPoolId),null!==(s=T[0])&&void 0!==s&&s.passiveBidPoolId&&(l.passiveBidPoolId=T[0].passiveBidPoolId),v.push(l))})),v.forEach((function(e){b.gdprDataHandler.getConsentData()&&(e.gdprConsent=b.gdprDataHandler.getConsentData()),b.uspDataHandler.getConsentData()&&(e.uspConsent=b.uspDataHandler.getConsentData()),b.gppDataHandler.getConsentData()&&(e.gppConsent=b.gppDataHandler.getConsentData())})),v}),"makeBidRequests"),j.callBids=function(e,t,r,n,i,o,s){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(t.length){var u=t.reduce((function(e,t){return e[Number(void 0!==t.src&&t.src===y.default.S2S.SRC)].push(t),e}),[[],[]]),f=(0,a.default)(u,2),g=f[0],v=f[1],m=[];v.forEach((function(e){for(var t=-1,r=0;r<m.length;++r)if(e.uniquePbsTid===m[r].uniquePbsTid){t=r;break}t<=-1&&m.push(e)}));var b=0;B.forEach((function(e){if(e&&m[b]&&z(e).has(m[b].bidderCode)){var t=(0,l.ajaxBuilder)(o,i?{request:i.request.bind(null,"s2s"),done:i.done}:void 0),a=e.bidders,u=k[e.adapter],p=m[b].uniquePbsTid,f=m[b].adUnitsS2SCopy,g=v.filter((function(e){return e.uniquePbsTid===p}));if(u){var I={ad_units:f,s2sConfig:e,ortb2Fragments:c};if(I.ad_units.length){var E=g.map((function(e){return e.start=(0,d.timestamp)(),function(t){t||s(e.bidderRequestId),n.apply(e,arguments)}})),_=(0,d.getBidderCodes)(I.ad_units).filter((function(e){return a.includes(e)}));(0,d.logMessage)("CALLING S2S HEADER BIDDERS ==== ".concat(_.length>0?_.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),g.forEach((function(e){h.emit(y.default.EVENTS.BID_REQUESTED,x(x({},e),{},{tid:e.auctionId}))})),u.callBids(I,v,r,(function(e){return E.forEach((function(t){return t(e)}))}),t)}}else(0,d.logError)("missing "+e.adapter);b++}})),g.forEach((function(e){e.start=(0,d.timestamp)();var t=k[e.bidderCode];p.config.runWithBidder(e.bidderCode,(function(){(0,d.logMessage)("CALLING BIDDER"),h.emit(y.default.EVENTS.BID_REQUESTED,e)}));var a=(0,l.ajaxBuilder)(o,i?{request:i.request.bind(null,e.bidderCode),done:i.done}:void 0),c=n.bind(e);try{p.config.runWithBidder(e.bidderCode,t.callBids.bind(t,e,r,c,a,(function(){return s(e.bidderRequestId)}),p.config.callbackWithBidder(e.bidderCode)))}catch(t){(0,d.logError)("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),c()}}))}else(0,d.logWarn)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},j.videoAdapters=[],j.registerBidAdapter=function(e,t){var r,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).supportedMediaTypes,i=void 0===n?[]:n;e&&t?"function"==typeof e.callBids?(k[t]=e,b.GDPR_GVLIDS.register(_.MODULE_TYPE_BIDDER,t,null===(r=e.getSpec)||void 0===r?void 0:r.call(e).gvlid),(0,g.includes)(i,"video")&&j.videoAdapters.push(t),(0,g.includes)(i,"native")&&c.nativeAdapters.push(t)):(0,d.logError)("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):(0,d.logError)("bidAdapter or bidderCode not specified")},j.aliasBidAdapter=function(e,t,r){if(void 0===k[t]){var n=k[e];if(void 0===n){var i=[];B.forEach((function(r){if(r.bidders&&r.bidders.length){var n=r&&r.bidders;r&&(0,g.includes)(n,t)?N[t]=e:i.push(e)}})),i.forEach((function(e){(0,d.logError)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{var o,a=function(e){var t=[];return(0,g.includes)(j.videoAdapters,e)&&t.push("video"),(0,g.includes)(c.nativeAdapters,e)&&t.push("native"),t}(e);if(n.constructor.prototype!=Object.prototype)(o=new n.constructor).setBidderCode(t);else{var s=n.getSpec(),l=r&&r.gvlid;null!=s.gvlid&&null==l&&(0,d.logWarn)("Alias '".concat(t,"' will NOT re-use the GVL ID of the original adapter ('").concat(s.code,"', gvlid: ").concat(s.gvlid,"). Functionality that requires TCF consent may not work as expected."));var p=r&&r.skipPbsAliasing;o=(0,u.newBidder)(Object.assign({},s,{code:t,gvlid:l,skipPbsAliasing:p})),N[t]=e}j.registerBidAdapter(o,t,{supportedMediaTypes:a})}catch(t){(0,d.logError)(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else(0,d.logMessage)('alias name "'+t+'" has been already specified.')},j.resolveAlias=function(e){for(var t,r=e;N[r]&&(!t||!t.has(r));)r=N[r],(t=t||new Set).add(r);return r},j.registerAnalyticsAdapter=function(e){var t=e.adapter,r=e.code,n=e.gvlid;t&&r?"function"==typeof t.enableAnalytics?(t.code=r,U[r]={adapter:t,gvlid:n},b.GDPR_GVLIDS.register(_.MODULE_TYPE_ANALYTICS,r,n)):(0,d.logError)('Prebid Error: Analytics adaptor error for analytics "'.concat(r,'"\n        analytics adapter must implement an enableAnalytics() function')):(0,d.logError)("Prebid Error: analyticsAdapter or analyticsCode not specified")},j.enableAnalytics=function(e){(0,d.isArray)(e)||(e=[e]),e.forEach((function(e){var t=U[e.provider];t&&t.adapter?R.isAllowed(O.ACTIVITY_REPORT_ANALYTICS,M(_.MODULE_TYPE_ANALYTICS,e.provider,(0,s.default)({},S.ACTIVITY_PARAM_ANL_CONFIG,e)))&&t.adapter.enableAnalytics(e):(0,d.logError)("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))}))},j.getBidAdapter=function(e){return k[e]},j.getAnalyticsAdapter=function(e){return U[e]},j.callTimedOutBidders=function(e,t,r){t=t.map((function(t){return t.params=(0,d.getUserConfiguredParams)(e,t.adUnitCode,t.bidder),t.timeout=r,t})),t=(0,d.groupBy)(t,"bidder"),Object.keys(t).forEach((function(e){J(e,"onTimeout",t[e])}))},j.callBidWonBidder=function(e,t,r){t.params=(0,d.getUserConfiguredParams)(r,t.adUnitCode,t.bidder),v.adunitCounter.incrementBidderWinsCounter(t.adUnitCode,t.bidder),J(e,"onBidWon",t)},j.callBidBillableBidder=function(e){J(e.bidder,"onBidBillable",e)},j.callSetTargetingBidder=function(e,t){J(e,"onSetTargeting",t)},j.callBidViewableBidder=function(e,t){J(e,"onBidViewable",t)},j.callBidderError=function(e,t,r){J(e,"onBidderError",{error:t,bidderRequest:r})},j.callDataDeletionRequest=(0,f.hook)("sync",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n="onDataDeletionRequest";Object.keys(k).filter((function(e){return!N.hasOwnProperty(e)})).forEach((function(e){var r=Y(e,n);if(null!=r){var i=E.auctionManager.getBidsRequested().filter((function(t){return function(e){for(var t=new Set;N.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=N[e];return e}(t.bidderCode)===e}));K.apply(void 0,[e,n].concat((0,o.default)(r),[i],t))}})),Object.entries(U).forEach((function(e){var r,i=(0,a.default)(e,2),o=i[0],s=i[1],c=null==s||null===(r=s.adapter)||void 0===r?void 0:r[n];if("function"==typeof c)try{c.apply(s.adapter,t)}catch(e){(0,d.logError)("error calling ".concat(n," of ").concat(o),e)}}))}));var Q=j;t.default=Q},43:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);Object.defineProperty(t,"__esModule",{value:!0}),t.addComponentAuction=void 0,t.duplicateRequest=k,t.guardTids=D,t.isValid=M,t.newBidder=R,t.prepareRequestWithOrtbData=j,t.processBidderRequests=void 0,t.registerBidder=function(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function r(e){var r=R(e);c.default.registerBidAdapter(r,e.code,t)}r(e),Array.isArray(e.aliases)&&e.aliases.forEach((function(t){var n,i,o=t;(0,h.isPlainObject)(t)&&(o=t.code,n=t.gvlid,i=t.skipPbsAliasing),c.default.aliasRegistry[o]=e.code,r(Object.assign({},e,{code:o,gvlid:n,skipPbsAliasing:i}))}))},t.registerSyncInner=void 0;var o=n(r(4319)),a=n(r(147)),s=n(r(8832)),d=n(r(4221)),c=n(r(1442)),u=r(6522),l=r(4223),p=r(8072),f=r(4239),g=r(4785),v=n(r(5404)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),b=r(9635),h=r(1779),y=r(4627),I=r(6572),E=r(6059),_=r(1380),A=r(1681),O=r(9675),S=r(7343),T=r(353),w=n(r(6108));function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}var x=["cpm","ttl","creativeId","netRevenue","currency"],P=["auctionId","transactionId"];function D(e){if((0,A.isActivityAllowed)(T.ACTIVITY_TRANSMIT_TID,(0,O.activityParams)(S.MODULE_TYPE_BIDDER,e)))return{bidRequest:function(e){return e},bidderRequest:function(e){return e}};function t(e,t,r){return P.includes(t)?null:Reflect.get(e,t,r)}function r(e,t){var r=new Proxy(e,t);return Object.entries(e).filter((function(e){var t=(0,s.default)(e,2);t[0];return"function"==typeof t[1]})).forEach((function(t){var n=(0,s.default)(t,2),i=n[0],o=n[1];return r[i]=o.bind(e)})),r}var n=(0,h.memoize)((function(e){return r(e,{get:t})}),(function(e){return e.bidId}));return{bidRequest:n,bidderRequest:function(e){return r(e,{get:function(r,i,o){return"bids"===i?e.bids.map(n):t(r,i,o)}})}}}function R(e){return Object.assign(new d.default(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(r,n,i,o,a,s){if(Array.isArray(r.bids)){var d=D(r.bidderCode),p={},f=[],g=q(r).measureTime("validate",(function(){return r.bids.filter((function(t){return function(t){if(!e.isBidRequestValid(t))return(0,h.logWarn)("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(t))),!1;return!0}(d.bidRequest(t))}))}));if(0!==g.length){var b={};g.forEach((function(e){b[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),N(e,g.map(d.bidRequest),d.bidderRequest(r),o,s,{onRequest:function(e){return m.emit(v.default.EVENTS.BEFORE_BIDDER_HTTP,r,e)},onResponse:function(t){a(e.code),f.push(t)},onFledgeAuctionConfigs:function(e){e.forEach((function(e){var t=b[e.bidId];t?U(t,e.config):(0,h.logWarn)("Received fledge auction configuration for an unknown bidId",e)}))},onError:function(t,n){n.timedOut||a(e.code),c.default.callBidderError(e.code,n,r),m.emit(v.default.EVENTS.BIDDER_ERROR,{error:n,bidderRequest:r}),(0,h.logError)("Server call for ".concat(e.code," failed: ").concat(t," ").concat(n.status,". Continuing without bids."))},onBid:function(t){var r=b[t.requestId];if(r){if(t.adapterCode=r.bidder,function(e,t){var r=E.bidderSettings.get(t,"allowAlternateBidderCodes")||!1,n=E.bidderSettings.get(t,"allowedAlternateBidderCodes");if(e&&t&&t!==e&&(n=(0,h.isArray)(n)?n.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(h.uniques):n,!r||(0,h.isArray)(n)&&"*"!==n[0]&&!n.includes(e)))return!0;return!1}(t.bidderCode,r.bidder))return(0,h.logWarn)("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(r.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),void n.reject(r.adUnitCode,t,v.default.REJECTION_REASON.BIDDER_DISALLOWED);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[r.bidder]);var i=Object.assign((0,l.createBid)(v.default.STATUS.GOOD,r),t,(0,h.pick)(r,P));!function(e,t){var r=(0,_.useMetrics)(t.metrics);r.checkpoint("addBidResponse"),p[e]=!0,r.measureTime("addBidResponse.validate",(function(){return M(e,t)}))?n(e,t):n.reject(e,t,v.default.REJECTION_REASON.INVALID)}(r.adUnitCode,i)}else(0,h.logWarn)("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring.")),n.reject(null,t,v.default.REJECTION_REASON.INVALID_REQUEST_ID)},onCompletion:y})}else y()}function y(){i(),u.config.runWithBidder(e.code,(function(){m.emit(v.default.EVENTS.BIDDER_DONE,r),t(f,r.gdprConsent,r.uspConsent,r.gppConsent)}))}}});function t(t,r,n,i){B(e,t,r,n,i)}}function j(e,t){var r,n,i=(0,w.default)(e);return i.ortb2.app=t.appData,i.ortb2.app.ext=null==e||null===(r=e.site)||void 0===r?void 0:r.ext,i.ortb2.app.publisher=null==e||null===(n=e.site)||void 0===n?void 0:n.publisher,delete i.ortb2.site,i}function k(e){var t=[];return e&&!Array.isArray(e)?(delete e.data.site,t.push(e),t):e&&Array.isArray(e)?t=[].concat((0,a.default)(t),(0,a.default)(e)):[]}var N=(0,y.hook)("sync",(function(e,t,r,n,i,s){var d,c=s.onRequest,l=s.onResponse,p=s.onFledgeAuctionConfigs,f=s.onError,g=s.onBid,v=s.onCompletion,m=q(r);v=m.startTiming("total").stopBefore(v);var b=m.measureTime("buildRequests",(function(){return e.buildRequests(t,r)})),y=r,I=u.config.getConfig("appDataConfig"),E=[];if(I&&null!=I&&I.bidders&&null!=I&&null!==(d=I.bidders)&&void 0!==d&&d.includes(r.bidderCode)&&null!=I&&I.appData){y=j(r,I);var _=m.measureTime("buildRequests",(function(){return e.buildRequests(t,y)}));_&&(E=k(_))}if(b&&0!==b.length){Array.isArray(b)||(b=[b]),b=[].concat((0,a.default)(b),(0,a.default)(E));var A=(0,h.delayExecution)(v,b.length);b.forEach((function(t){var r=m.fork();function a(e){null!=e&&(e.metrics=r.fork().renameWith()),g(e)}var s=i((function(n,i){u();try{n=JSON.parse(n)}catch(e){}n={body:n,headers:{get:i.getResponseHeader.bind(i)}},l(n);try{n=r.measureTime("interpretResponse",(function(){return e.interpretResponse(n,t)}))}catch(t){return(0,h.logError)("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),void A()}var o;n&&(0,h.isArray)(n.fledgeAuctionConfigs)?(p(n.fledgeAuctionConfigs),o=n.bids):o=n,o&&((0,h.isArray)(o)?o.forEach(a):a(o)),A()})),d=i((function(e,t){u(),f(e,t),A()}));c(t);var u=r.startTiming("net");switch(t.method){case"GET":n("".concat(t.url).concat(function(e){if(e)return"?".concat("object"===(0,o.default)(e)?(0,h.parseQueryStringParameters)(e):e);return""}(t.data)),{success:s,error:d},void 0,Object.assign({method:"GET",withCredentials:!0},t.options));break;case"POST":n(t.url,{success:s,error:d},"string"==typeof t.data?t.data:JSON.stringify(t.data),Object.assign({method:"POST",contentType:"text/plain",withCredentials:!0},t.options));break;default:(0,h.logWarn)("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),A()}}))}else v()}),"processBidderRequests");t.processBidderRequests=N;var B=(0,y.hook)("async",(function(e,t,r,n,i){var o=u.config.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!c.default.aliasRegistry[e.code])){var a=u.config.getConfig("userSync.filterSettings"),s=e.getUserSyncs({iframeEnabled:!(!a||!a.iframe&&!a.all),pixelEnabled:!(!a||!a.image&&!a.all)},t,r,n,i);s&&(Array.isArray(s)||(s=[s]),s.forEach((function(t){p.userSync.registerSync(t.type,e.code,t.url)})),p.userSync.bidderDone(e.code))}}),"registerSyncs");t.registerSyncInner=B;var U=(0,y.hook)("sync",(function(e,t){}),"addComponentAuction");function M(e,t){var r,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===n?I.auctionManager.index:n;function o(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}return e?t?(r=Object.keys(t),x.every((function(e){return(0,b.includes)(r,e)&&!(0,b.includes)([void 0,null],t[e])}))?"native"!==t.mediaType||(0,f.nativeBidIsValid)(t,{index:i})?"video"!==t.mediaType||(0,g.isValidVideoBid)(t,{index:i})?!("banner"===t.mediaType&&!function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,n=void 0===r?I.auctionManager.index:r;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;var i=n.getBidRequest(t),o=n.getMediaTypes(t),a=i&&i.sizes||o&&o.banner&&o.banner.sizes,d=(0,h.parseSizesInput)(a);if(1===d.length){var c=d[0].split("x"),u=(0,s.default)(c,2),l=u[0],p=u[1];return t.width=parseInt(l,10),t.height=parseInt(p,10),!0}return!1}(e,t,{index:i}))||((0,h.logError)(o("Banner bids require a width and height")),!1):((0,h.logError)(o("Video bid does not have required vastUrl or renderer property")),!1):((0,h.logError)(o("Native bid missing some required properties.")),!1):((0,h.logError)(o("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1)):((0,h.logWarn)("Some adapter tried to add an undefined bid for ".concat(e,".")),!1):((0,h.logWarn)("No adUnitCode was supplied to addBidResponse."),!1)}function q(e){return(0,_.useMetrics)(e.metrics).renameWith((function(t){return["adapter.client.".concat(t),"adapters.client.".concat(e.bidderCode,".").concat(t)]}))}t.addComponentAuction=U},1794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadExternalScript=function(e,t,r,s,d){if(!t||!e)return void(0,i.logError)("cannot load external script without url and moduleCode");if(!(0,n.includes)(a,t))return void(0,i.logError)("".concat(t," not whitelisted for loading external JavaScript"));s||(s=document);var c=p(s,e);if(c)return r&&"function"==typeof r&&(c.loaded?r():c.callbacks.push(r)),c.tag;var u=o.get(s)||{},l={loaded:!1,tag:null,callbacks:[]};u[e]=l,o.set(s,u),r&&"function"==typeof r&&l.callbacks.push(r);return(0,i.logWarn)("module ".concat(t," is loading external JavaScript")),function(t,r,n,o){n||(n=document);var a=n.createElement("script");a.type="text/javascript",a.async=!0;var s=p(n,e);s&&(s.tag=a);a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,r())}:a.onload=function(){r()};a.src=t,o&&(0,i.setScriptAttributes)(a,o);return(0,i.insertElement)(a,n),a}(e,(function(){l.loaded=!0;try{for(var e=0;e<l.callbacks.length;e++)l.callbacks[e]()}catch(e){(0,i.logError)("Error executing callback","adloader.js:loadExternalScript",e)}}),s,d);function p(e,t){var r=o.get(e);return r&&r[t]?r[t]:null}};var n=r(9635),i=r(1779),o=new WeakMap,a=["debugging","adloox","criteo","outstream","adagio","spotx","browsi","brandmetrics","justtag","tncId","akamaidap","ftrackId","inskin","hadron","medianet","improvedigital","aaxBlockmeter","confiant","arcspan","airgrid","clean.io","a1Media","geoedge","mediafilter","qortex","dynamicAdBoost","contxtful","id5"]},4026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPPID=void 0;var n=(0,r(4627).hook)("sync",(function(){}));t.getPPID=n},6150:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0,t.ajaxBuilder=p,t.fetch=t.dep=void 0,t.fetcherFactory=d;var i=n(r(4319)),o=r(6522),a=r(1779),s={fetch:window.fetch.bind(window),makeRequest:function(e,t){return new Request(e,t)},timeout:function(e,t){var r=new AbortController,n=setTimeout((function(){r.abort(),(0,a.logError)("Request timeout after ".concat(e,"ms"),t),n=null}),e);return{signal:r.signal,done:function(){n&&clearTimeout(n)}}}};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.request,n=t.done,i=function(t,r){var n,i,a;null==e||null!=(null===(n=r)||void 0===n?void 0:n.signal)||o.config.getConfig("disableAjaxTimeout")||(a=s.timeout(e,t),r=Object.assign({signal:a.signal},r));var d=s.fetch(t,r);return null!=(null===(i=a)||void 0===i?void 0:i.done)&&(d=d.finally(a.done)),d};return null==r&&null==n||(i=function(e){return function(t,i){var o=new URL(null==(null==t?void 0:t.url)?t:t.url,document.location).origin,a=e(t,i);return r&&r(o),n&&(a=a.finally((function(){return n(o)}))),a}}(i)),i}t.dep=s;var c=d();t.fetch=c;var u=4,l=p();function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.request,n=t.done;return function(t,s,d){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var l,p=c.method||(d?"POST":"GET"),f=document.createElement("a");f.href=t;var g="object"===(0,i.default)(s)&&null!==s?s:{success:function(){(0,a.logMessage)("xhr success")},error:function(e){(0,a.logError)("xhr error",null,e)}};if("function"==typeof s&&(g.success=s),(l=new window.XMLHttpRequest).onreadystatechange=function(){if(l.readyState===u){"function"==typeof n&&n(f.origin);var e=l.status;e>=200&&e<300||304===e?g.success(l.responseText,l):g.error(l.statusText,l)}},o.config.getConfig("disableAjaxTimeout")||(l.ontimeout=function(){(0,a.logError)("  xhr timeout after ",l.timeout,"ms")}),"GET"===p&&d){var v=(0,a.parseUrl)(t,c);Object.assign(v.search,d),t=(0,a.buildUrl)(v)}l.open(p,t,!0),o.config.getConfig("disableAjaxTimeout")||(l.timeout=e),c.withCredentials&&(l.withCredentials=!0),(0,a._each)(c.customHeaders,(function(e,t){l.setRequestHeader(t,e)})),c.preflight&&l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.setRequestHeader("Content-Type",c.contentType||"text/plain"),"function"==typeof r&&r(f.origin),"POST"===p&&d?l.send(d):l.send()}catch(e){(0,a.logError)("xhr construction",e),"object"===(0,i.default)(s)&&null!==s&&s.error(e)}}}t.ajax=l},5943:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);Object.defineProperty(t,"__esModule",{value:!0}),t.addBidResponse=t.addAppDataToBidResponse=t.AUCTION_STARTED=t.AUCTION_IN_PROGRESS=t.AUCTION_COMPLETED=void 0,t.addBidToAuction=z,t.addBidderRequests=void 0,t.adjustBids=ue,t.auctionCallbacks=G,t.getDSP=t.getCreativeId=t.getAdvertiserDomain=t.callPrebidCache=t.bidsBackCallback=t.batchingCache=void 0,t.getKeyValueTargetingPairs=de,t.getMediaTypeGranularity=Z,t.getPrimaryCatId=t.getPriceGranularity=t.getPriceByGranularity=void 0,t.getStandardBidderSettings=se,t.newAuction=function(e){var t=e.adUnits,r=e.adUnitCodes,n=e.callback,i=e.cbTimeout,o=e.labels,a=e.auctionId,d=e.ortb2Fragments,c=e.metrics;c=(0,O.useMetrics)(c);var u,l,f,g,v=t,m=o,b=r,h=a||(0,s.generateUUID)(),y=i,S=new Set,T=(0,A.defer)(),w=[],C=n,x=[],q=[],V=[],z=[],W=[];function H(){return{auctionId:h,timestamp:u,auctionEnd:l,auctionStatus:g,adUnits:v,adUnitCodes:b,labels:m,bidderRequests:x,noBids:V,bidsReceived:q,bidsRejected:w,winningBids:z,timeout:y,metrics:c,seatNonBids:W}}function Y(e){if(e?I.emit(_.default.EVENTS.AUCTION_TIMEOUT,H()):clearTimeout(f),void 0===l){var r=[];e&&((0,s.logMessage)("Auction ".concat(h," timedOut")),(r=x.filter((function(e){return!S.has(e.bidderRequestId)})).flatMap((function(e){return e.bids}))).length&&I.emit(_.default.EVENTS.BID_TIMEOUT,r)),g=j,l=Date.now(),c.checkpoint("auctionEnd"),c.timeBetween("requestBids","auctionEnd","requestBids.total"),c.timeBetween("callBids","auctionEnd","requestBids.callBids"),T.resolve();var n=H();if(0===S.size&&r.length>0){var i=r[0].adUnitCode;n.adUnits.forEach((function(e){e.code===i&&(e.noBidReason="ato")}))}I.emit(_.default.EVENTS.AUCTION_END,n),F(v,(function(){try{if(null!=C){var n=q.filter((function(e){return b.includes(e.adUnitCode)})).reduce(le,{});C.apply(M,[n,e,h]),C=null}}catch(e){(0,s.logError)("Error executing bidsBackHandler",null,e)}finally{r.length&&E.default.callTimedOutBidders(t,r,y);var i=p.config.getConfig("userSync")||{};i.enableOverride||P(i.syncDelay)}}))}}function K(){p.config.resetBidder(),(0,s.logInfo)("Bids Received for Auction with id: ".concat(h),q),g=j,Y(!1)}function J(e){S.add(e)}function Q(e){var t=this;e.forEach((function(e){var t;t=e,x=x.concat(t)}));var r={},n={bidRequests:e,run:function(){f=setTimeout((function(){return Y(!0)}),y),g=R,I.emit(_.default.EVENTS.AUCTION_INIT,H());var n=G(K,t);E.default.callBids(v,e,n.addBidResponse,n.adapterDone,{request:function(e,t){o(N,t),o(r,e),B[e]||(B[e]={SRA:!0,origin:t}),r[e]>1&&(B[e].SRA=!1)},done:function(e){N[e]--,U[0]&&i(U[0])&&U.shift()}},y,J,d)}};function i(e){var t=!0,r=p.config.getConfig("maxRequestsPerOrigin")||k;return e.bidRequests.some((function(e){var n=1,i=void 0!==e.src&&e.src===_.default.S2S.SRC?"s2s":e.bidderCode;return B[i]&&(!1===B[i].SRA&&(n=Math.min(e.bids.length,r)),N[B[i].origin]+n>r&&(t=!1)),!t})),t&&e.run(),t}function o(e,t){void 0===e[t]?e[t]=1:e[t]++}i(n)||((0,s.logWarn)("queueing auction due to limited endpoint capacity"),U.push(n))}return I.on(_.default.EVENTS.SEAT_NON_BID,(function(e){var t;e.auctionId===h&&(t=e.seatnonbid,W=W.concat(t))})),{addBidReceived:function(e){q=q.concat(e)},addBidRejected:function(e){w=w.concat(e)},addNoBid:function(e){V=V.concat(e)},callBids:function(){g=D,u=Date.now();var e=c.measureTime("requestBids.makeRequests",(function(){return E.default.makeBidRequests(v,u,h,y,m,d,c)}));(0,s.logInfo)("Bids Requested for Auction with id: ".concat(h),e),c.checkpoint("callBids"),e.length<1?((0,s.logWarn)("No valid bid requests returned for auction"),K()):L.call({dispatch:Q,context:this},e)},addWinningBid:function(e){var r=t.find((function(t){return t.transactionId===e.transactionId}));z=z.concat(e),(0,s.callBurl)(e),E.default.callBidWonBidder(e.adapterCode||e.bidder,e,t),r&&!r.deferBilling&&E.default.callBidBillableBidder(e)},setBidTargeting:function(e){E.default.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return z},getAuctionStart:function(){return u},getAuctionEnd:function(){return l},getTimeout:function(){return y},getAuctionId:function(){return h},getAuctionStatus:function(){return g},getAdUnits:function(){return v},getAdUnitCodes:function(){return b},getBidRequests:function(){return x},getBidsReceived:function(){return q},getNoBids:function(){return V},getNonBids:function(){return W},getFPD:function(){return d},getMetrics:function(){return c},end:T.promise}},t.resetAuctionState=function(){U.length=0,[N,B].forEach((function(e){return Object.keys(e).forEach((function(t){delete e[t]}))}))},t.responsesReady=void 0;var o=n(r(8212)),a=n(r(4319)),s=r(1779),d=r(3603),c=r(4239),u=r(2331),l=r(9723),p=r(6522),f=r(8072),g=r(4627),v=r(9635),m=r(4785),b=r(6613),h=r(6572),y=r(6059),I=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),E=n(r(1442)),_=n(r(5404)),A=r(8145),O=r(1380),S=r(5926),T=r(8851);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=f.userSync.syncUsers,D="started";t.AUCTION_STARTED=D;var R="inProgress";t.AUCTION_IN_PROGRESS=R;var j="completed";t.AUCTION_COMPLETED=j,I.on(_.default.EVENTS.BID_ADJUSTMENT,(function(e){e.responseCpm=e.cpm,ue(e)}));var k=4,N={},B={},U=[],M=(0,T.getGlobal)();var q=(0,g.hook)("sync",(function(e,t,r){this.dispatch.call(null,e,t)}),"addBidResponse");t.addBidResponse=q;var V=(0,g.hook)("sync",(function(e){return e}),"responsesReady");t.responsesReady=V;var L=(0,g.hook)("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests");t.addBidderRequests=L;var F=(0,g.hook)("async",(function(e,t){t&&t()}),"bidsBackCallback");function G(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,n=(void 0===r&&h.auctionManager.index,0),i=!1,o=new Set,c={};function u(){n--,i&&0===n&&e()}function f(e,t,r){return c[t.requestId]=!0,function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?h.auctionManager.index:n,o=i.getBidderRequest(e);$(o,e);var a=i.getAdUnit(e),d=o&&o.start||e.requestTimestamp;Object.assign(e,x(x({responseTimestamp:e.responseTimestamp||(0,s.timestamp)(),requestTimestamp:e.requestTimestamp||d,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t},(null==o?void 0:o.bidPoolId)&&{bidPoolId:o.bidPoolId}),(null==o?void 0:o.passiveBidPoolId)&&{passiveBidPoolId:o.passiveBidPoolId})),null!=(null==a?void 0:a.ttlBuffer)&&(e.ttlBuffer=a.ttlBuffer);e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),n++,r(u)}function g(e,r){f(e,r,(function(e){var n=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.index,i=void 0===n?h.auctionManager.index:n;I.emit(_.default.EVENTS.BID_ADJUSTMENT,e);var o=(null===(t=i.getBidRequest(e))||void 0===t?void 0:t.renderer)||i.getAdUnit(e).renderer,s=e.mediaType,c=i.getMediaTypes(e),u=c&&c[s],f=u&&u.renderer,g=null;f&&f.url&&f.render&&(!0!==f.backupOnly||!e.renderer)?g=f:o&&o.url&&o.render&&(!0!==o.backupOnly||!e.renderer)&&(g=o);g&&(e.renderer=l.Renderer.install({url:g.url,config:g.options}),e.renderer.setRender(g.render));var v=Z(e.mediaType,c,p.config.getConfig("mediaTypePriceGranularity")),m=(0,d.getPriceBucketString)(e.cpm,"object"===(0,a.default)(v)?v:p.config.getConfig("customPriceBucket"),p.config.getConfig("currency.granularityMultiplier"));return e.pbLg=m.low,e.pbMg=m.med,e.pbHg=m.high,e.pbAg=m.auto,e.pbDg=m.dense,e.pbCg=m.custom,e}(r);I.emit(_.default.EVENTS.BID_ACCEPTED,n),n.mediaType===b.VIDEO?function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.index,o=void 0===i?h.auctionManager.index:i,a=!0,d=(0,s.deepAccess)(o.getMediaTypes({requestId:t.originalRequestId||t.requestId,transactionId:t.transactionId}),"video"),c=d&&(0,s.deepAccess)(d,"context"),u=d&&(0,s.deepAccess)(d,"useCacheKey");p.config.getConfig("cache.url")&&(u||c!==m.OUTSTREAM)&&(!t.videoCacheKey||p.config.getConfig("cache.ignoreBidderCacheKey")?(a=!1,X(e,t,r,d)):t.vastUrl||((0,s.logError)("videoCacheKey specified but not required vastUrl for video bid"),a=!1));a&&(z(e,t),r())}(t,n,e):(null!=n.native&&"object"===(0,a.default)(n.native)&&Y(n),z(t,n),e())}))}function y(e,r,n){return f(e,r,(function(e){r.rejectionReason=n,(0,s.logWarn)("Bid from ".concat(r.bidder||"unknown bidder"," was rejected: ").concat(n),r),I.emit(_.default.EVENTS.BID_REJECTED,r),t.addBidRejected(r),e()}))}function E(){var r=t.getBidRequests(),a=p.config.getConfig("auctionOptions");if(o.add(this),a&&!(0,s.isEmpty)(a)){var d=a.secondaryBidders;d&&!r.every((function(e){return(0,v.includes)(d,e.bidderCode)}))&&(r=r.filter((function(e){return!(0,v.includes)(d,e.bidderCode)})))}i=r.every((function(e){return o.has(e)})),this.bids.forEach((function(e){c[e.bidId]||(t.addNoBid(e),I.emit(_.default.EVENTS.NO_BID,e))})),i&&0===n&&e()}return{addBidResponse:function(){function e(e,t){var r;q.call({dispatch:g},e,t,(r=!1,function(n){r||(y(e,t,n),r=!0)}))}return e.reject=y,e}(),adapterDone:function(){var e=this;V(A.GreedyPromise.resolve()).finally((function(){return E.call(e)}))}}}function z(e,t){!function(e){var t,r=!0===y.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0;e.bidderCode&&(r||e.dealId)&&(t=de(e.bidderCode,e));e.adserverTargeting=Object.assign(e.adserverTargeting||{},t)}(t),(0,O.useMetrics)(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),I.emit(_.default.EVENTS.BID_RESPONSE,t)}t.bidsBackCallback=F;var W,H,Y=function(e){var t,r,n=null===(t=h.auctionManager.index.getAdUnit(e))||void 0===t?void 0:t.nativeOrtbRequest,i=null===(r=e.native)||void 0===r?void 0:r.ortb;if(n&&i){var o=(0,c.toLegacyResponse)(i,n);Object.assign(e.native,o)}},K=function(e){(0,u.store)(e.map((function(e){return e.bidResponse})),(function(t,r){r.forEach((function(r,n){var i=e[n],o=i.auctionInstance,a=i.bidResponse,d=i.afterBidAdded;t?(0,s.logWarn)("Failed to save to the video cache: ".concat(t,". Video bid must be discarded.")):""===r.uuid?(0,s.logWarn)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(a.videoCacheKey=r.uuid,a.vastUrl||(a.vastUrl=(0,u.getCacheUrl)(a.videoCacheKey)),z(o,a),d())}))}))};p.config.getConfig("cache",(function(e){W="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,H="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0}));var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K,r=[[]],n=!1,i=function(e){return e()};return function(o,a,s){var d=H>0?e:i;r[r.length-1].length>=W&&r.push([]),r[r.length-1].push({auctionInstance:o,bidResponse:a,afterBidAdded:s}),n||(n=!0,d((function(){r.forEach(t),r=[[]],n=!1}),H))}};t.batchingCache=J;var Q=J(),X=(0,g.hook)("async",(function(e,t,r,n){Q(e,t,r)}),"callPrebidCache");t.callPrebidCache=X;var $=function(e,t){null!=e&&e.app&&t&&(t.app=!0)};function Z(e,t,r){if(e&&r){if(e===b.VIDEO){var n=(0,s.deepAccess)(t,"".concat(b.VIDEO,".context"),"instream");if(r["".concat(b.VIDEO,"-").concat(n)])return r["".concat(b.VIDEO,"-").concat(n)]}return r[e]}}t.addAppDataToBidResponse=$;var ee=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=void 0===t?h.auctionManager.index:t,n=Z(e.mediaType,r.getMediaTypes(e),p.config.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&n?"string"==typeof n?n:"custom":p.config.getConfig("priceGranularity")};t.getPriceGranularity=ee;var te=function(e){return function(t){var r=e||ee(t);return r===_.default.GRANULARITY_OPTIONS.AUTO?t.pbAg:r===_.default.GRANULARITY_OPTIONS.DENSE?t.pbDg:r===_.default.GRANULARITY_OPTIONS.LOW?t.pbLg:r===_.default.GRANULARITY_OPTIONS.MEDIUM?t.pbMg:r===_.default.GRANULARITY_OPTIONS.HIGH?t.pbHg:r===_.default.GRANULARITY_OPTIONS.CUSTOM?t.pbCg:void 0}};t.getPriceByGranularity=te;var re=function(){return function(e){return e.creativeId?e.creativeId:""}};t.getCreativeId=re;var ne=function(){return function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:""}};t.getAdvertiserDomain=ne;var ie=function(){return function(e){return e.meta&&(e.meta.networkId||e.meta.networkName)?(0,s.deepAccess)(e,"meta.networkName")||(0,s.deepAccess)(e,"meta.networkId"):""}};t.getDSP=ie;var oe=function(){return function(e){return e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:""}};function ae(e,t){return{key:e,val:"function"==typeof t?function(e,r){return t(e,r)}:function(e){return(0,s.getValue)(e,t)}}}function se(e,t){var r=_.default.TARGETING_KEYS,n=Object.assign({},y.bidderSettings.settingsFor(null));if(n[_.default.JSON_MAPPING.ADSERVER_TARGETING]||(n[_.default.JSON_MAPPING.ADSERVER_TARGETING]=function(){var e=_.default.TARGETING_KEYS;return[ae(e.BIDDER,"bidderCode"),ae(e.AD_ID,"adId"),ae(e.PRICE_BUCKET,te()),ae(e.SIZE,"size"),ae(e.DEAL,"dealId"),ae(e.SOURCE,"source"),ae(e.FORMAT,"mediaType"),ae(e.ADOMAIN,ne()),ae(e.ACAT,oe()),ae(e.DSP,ie()),ae(e.CRID,re())]}()),"video"===e){var i=n[_.default.JSON_MAPPING.ADSERVER_TARGETING].slice();if(n[_.default.JSON_MAPPING.ADSERVER_TARGETING]=i,[r.UUID,r.CACHE_ID].forEach((function(e){void 0===(0,v.find)(i,(function(t){return t.key===e}))&&i.push(ae(e,"videoCacheKey"))})),p.config.getConfig("cache.url")&&(!t||!1!==y.bidderSettings.get(t,"sendStandardTargeting"))){var o=(0,s.parseUrl)(p.config.getConfig("cache.url"));void 0===(0,v.find)(i,(function(e){return e.key===r.CACHE_HOST}))&&i.push(ae(r.CACHE_HOST,(function(e){return(0,s.deepAccess)(e,"adserverTargeting.".concat(r.CACHE_HOST))?e.adserverTargeting[r.CACHE_HOST]:o.hostname})))}}return n}function de(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,n=void 0===r?h.auctionManager.index:r;if(!t)return{};var i=n.getBidRequest(t),o={};return ce(o,se(t.mediaType,e),t,i),i&&i.ortb2Imp&&i.ortb2Imp.instl&&(o[_.default.TARGETING_KEYS.INTERSTITIAL]=i.ortb2Imp.instl),e&&y.bidderSettings.getOwn(e,_.default.JSON_MAPPING.ADSERVER_TARGETING)&&(ce(o,y.bidderSettings.ownSettingsFor(e),t,i),t.sendStandardTargeting=y.bidderSettings.get(e,"sendStandardTargeting")),t.native&&(o=Object.assign({},o,(0,c.getNativeTargeting)(t))),o}function ce(e,t,r,n){var i=t[_.default.JSON_MAPPING.ADSERVER_TARGETING];return r.size=r.getSize(),(i||[]).forEach((function(i){var o=i.key,a=i.val;if(e[o]&&(0,s.logWarn)("The key: "+o+" is being overwritten"),(0,s.isFn)(a))try{a=a(r,n)}catch(e){(0,s.logError)("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&o!==_.default.TARGETING_KEYS.DEAL&&o!==_.default.TARGETING_KEYS.ACAT&&o!==_.default.TARGETING_KEYS.DSP&&o!==_.default.TARGETING_KEYS.CRID||!(0,s.isEmptyStr)(a)&&null!=a?e[o]=a:(0,s.logInfo)("suppressing empty key '"+o+"' from adserver targeting")})),e}function ue(e){var t=(0,S.adjustCpm)(e.cpm,e);t>=0&&(e.cpm=t)}function le(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}t.getPrimaryCatId=oe},7163:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuctionIndex=function(e){Object.assign(this,{getAuction:function(t){var r=t.auctionId;if(null!=r)return e().find((function(e){return e.getAuctionId()===r}))},getAdUnit:function(t){var r=t.transactionId;if(null!=r)return e().flatMap((function(e){return e.getAdUnits()})).find((function(e){return e.transactionId===r}))},getMediaTypes:function(e){var t=e.transactionId,r=e.requestId;if(null!=r){var n=this.getBidRequest({requestId:r});if(null!=n&&(null==t||n.transactionId===t))return n.mediaTypes}else if(null!=t){var i=this.getAdUnit({transactionId:t});if(null!=i)return i.mediaTypes}},getBidderRequest:function(t){var r=t.requestId,n=t.bidderRequestId;if(null!=r||null!=n){var i=e().flatMap((function(e){return e.getBidRequests()}));return null!=n&&(i=i.filter((function(e){return e.bidderRequestId===n}))),null==r?i[0]:i.find((function(e){return e.bids&&null!=e.bids.find((function(e){return e.bidId===r}))}))}},getBidRequest:function(t){var r=t.requestId;if(null!=r)return e().flatMap((function(e){return e.getBidRequests()})).flatMap((function(e){return e.bids})).find((function(e){return e&&e.bidId===r}))}})}},6572:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.auctionManager=void 0,t.newAuctionManager=b;var i=n(r(8832)),o=n(r(147)),a=r(1779),s=r(5943),d=r(7163),c=n(r(5404)),u=r(1380),l=r(4628),p=r(4545),f=r(6522);function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m="minBidCacheTTL";function b(){var e=null,t=(0,l.ttlCollection)({startTime:function(e){return e.end.then((function(){return e.getAuctionEnd()}))},ttl:function(t){return null==e?null:t.end.then((function(){return 1e3*Math.max.apply(Math,[e].concat((0,o.default)(t.getBidsReceived().map(p.getTTL))))}))}});(0,p.onTTLBufferChange)((function(){null!=e&&t.refresh()})),f.config.getConfig(m,(function(r){e!==(e="number"==typeof(e=null==r?void 0:r[m])?e:null)&&t.refresh()}));var r,n={};function v(e){var r,n=g(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.getAuctionId()===e)return i}}catch(e){n.e(e)}finally{n.f()}}function b(){return t.toArray().flatMap((function(e){return e.getBidsReceived()}))}return n.addWinningBid=function(e){var t=(0,u.useMetrics)(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","render.pending"),t.timeBetween("requestBids","bidWon","render.e2e");var r=v(e.auctionId);r?(e.status=c.default.BID_STATUS.RENDERED,r.addWinningBid(e)):(0,a.logWarn)("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:function(e){return e.getAuctionStatus()===s.AUCTION_COMPLETED},post:function(e){return r?r(e):e}},getAdUnitCodes:{post:a.uniques}}).forEach((function(e){var r=(0,i.default)(e,2),o=r[0],a=r[1],s=a.name,d=void 0===s?o:s,c=a.pre,u=a.post,l=null==c?function(e){return e[d]()}:function(e){return c(e)?e[d]():[]},p=null==u?function(e){return e}:function(e){return e.filter(u)};n[o]=function(){return p(t.toArray().flatMap(l))}})),n.setBidsReceivedFilter=function(e){r=e},n.getAllBidsForAdUnitCode=function(e){return b().filter((function(t){return t&&t.adUnitCode===e}))},n.createAuction=function(e){var r=(0,s.newAuction)(e);return function(e){t.add(e)}(r),r},n.findBidByAdId=function(e){return b().find((function(t){return t.adId===e}))},n.getStandardBidderAdServerTargeting=function(){return(0,s.getStandardBidderSettings)()[c.default.JSON_MAPPING.ADSERVER_TARGETING]},n.setStatusForBids=function(e,t){var r=n.findBidByAdId(e);if(r&&(r.status=t),r&&t===c.default.BID_STATUS.BID_TARGETING_SET){var i=v(r.auctionId);i&&i.setBidTargeting(r)}},n.getLastAuctionId=function(){var e=t.toArray();return e.length&&e[e.length-1].getAuctionId()},n.clearAllAuctions=function(){t.clear()},n.index=new d.AuctionIndex((function(){return t.toArray()})),n}var h=b();t.auctionManager=h},4545:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTTL=function(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:o)},t.onTTLBufferChange=function(e){a.push(e)};var n=r(6522),i=r(1779),o=1,a=[];n.config.getConfig("ttlBuffer",(function(e){"number"==typeof e.ttlBuffer?o!==(o=e.ttlBuffer)&&a.forEach((function(e){return e(o)})):(0,i.logError)("Invalid value for ttlBuffer",e.ttlBuffer)}))},6059:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.bidderSettings=t.ScopedSettings=void 0;var i=n(r(5018)),o=n(r(4668)),a=r(1779),s=r(8851),d=n(r(5404));function c(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function u(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var l=new WeakSet,p=function(){function e(t,r){(0,i.default)(this,e),c(this,l),this.getSettings=t,this.defaultScope=r}return(0,o.default)(e,[{key:"get",value:function(e,t){var r=this.getOwn(e,t);return void 0===r&&(r=this.getOwn(null,t)),r}},{key:"getOwn",value:function(e,t){return e=u(this,l,f).call(this,e),(0,a.deepAccess)(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter((function(t){return t!==e.defaultScope}))}},{key:"settingsFor",value:function(e){return(0,a.mergeDeep)({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=u(this,l,f).call(this,e),this.getSettings()[e]||{}}}]),e}();function f(e){return null==e?this.defaultScope:e}t.ScopedSettings=p;var g=new p((function(){return(0,s.getGlobal)().bidderSettings||{}}),d.default.JSON_MAPPING.BD_SETTING_STANDARD);t.bidderSettings=g},4223:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBid=function(e,t){return new i(e,t)};var n=r(1779);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.src,i=void 0===r?"client":r,o=t.bidder,a=void 0===o?"":o,s=t.bidId,d=t.transactionId,c=t.auctionId,u=i,l=e||0;this.bidderCode=a,this.width=0,this.height=0,this.statusMessage=function(){switch(l){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),this.adId=(0,n.getUniqueIdentifierStr)(),this.requestId=s,this.transactionId=d,this.auctionId=c,this.mediaType="banner",this.source=u,this.getStatusCode=function(){return l},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,auctionId:this.auctionId}}}},6522:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.RANDOM=void 0,t.newConfig=S;var i=n(r(8212)),o=n(r(4319)),a=n(r(8832)),s=r(3603),d=r(9635),c=r(1779),u=n(r(5404));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var p="TRUE"===(0,c.getParameterByName)(u.default.DEBUG_MODE).toUpperCase(),f=3e3,g=!0,v=!1,m=!1,b=!0,h=10,y=400,I="random";t.RANDOM=I;var E={};E[I]=!0,E.fixed=!0;var _=I,A={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},O="*";function S(){var e,t,r,n=[],u=null;function I(){function n(e){return o[e].val}function i(e,t){o[e].val=t}e={};var o={publisherDomain:{set:function(e){null!=e&&(0,c.logWarn)("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),i("publisherDomain",e)}},priceGranularity:{val:A.MEDIUM,set:function(e){I(e)&&("string"==typeof e?i("priceGranularity",l(e)?e:A.MEDIUM):(0,c.isPlainObject)(e)&&(i("customPriceBucket",e),i("priceGranularity",A.CUSTOM),(0,c.logMessage)("Using custom price granularity")))}},customPriceBucket:{val:{},set:function(){}},mediaTypePriceGranularity:{val:{},set:function(e){null!=e&&i("mediaTypePriceGranularity",Object.keys(e).reduce((function(t,r){return I(e[r])?"string"==typeof e?t[r]=l(e[r])?e[r]:n("priceGranularity"):(0,c.isPlainObject)(e)&&(t[r]=e[r],(0,c.logMessage)("Using custom price granularity for ".concat(r))):(0,c.logWarn)("Invalid price granularity for media type: ".concat(r)),t}),{}))}},bidderSequence:{val:_,set:function(e){E[e]?i("bidderSequence",e):(0,c.logWarn)("Invalid order: ".concat(e,". Bidder Sequence was not set."))}},auctionOptions:{val:{},set:function(e){(function(e){if(!(0,c.isPlainObject)(e))return(0,c.logWarn)("Auction Options must be an object"),!1;for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];if("secondaryBidders"!==n&&"suppressStaleRender"!==n)return(0,c.logWarn)("Auction Options given an incorrect param: ".concat(n)),!1;if("secondaryBidders"===n){if(!(0,c.isArray)(e[n]))return(0,c.logWarn)("Auction Options ".concat(n," must be of type Array")),!1;if(!e[n].every(c.isStr))return(0,c.logWarn)("Auction Options ".concat(n," must be only string")),!1}else if("suppressStaleRender"===n&&!(0,c.isBoolean)(e[n]))return(0,c.logWarn)("Auction Options ".concat(n," must be of type boolean")),!1}return!0})(e)&&i("auctionOptions",e)}}},u={debug:p,bidderTimeout:f,enableSendAllBids:g,useBidCache:m,deviceAccess:b,timeoutBuffer:y,disableAjaxTimeout:v,maxNestedIframes:h};function l(e){return(0,d.find)(Object.keys(A),(function(t){return e===A[t]}))}function I(e){if(!e)return(0,c.logError)("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)l(e)||(0,c.logWarn)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if((0,c.isPlainObject)(e)&&!(0,s.isValidPriceConfig)(e))return(0,c.logError)("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}Object.defineProperties(u,Object.fromEntries(Object.entries(o).map((function(e){var t=(0,a.default)(e,2),r=t[0],o=t[1];return[r,Object.assign({get:n.bind(null,r),set:i.bind(null,r),enumerable:!0},o)]})))),t&&B(Object.keys(t).reduce((function(e,r){return t[r]!==u[r]&&(e[r]=u[r]||{}),e}),{})),t=u,r={}}function S(){if(u&&r&&(0,c.isPlainObject)(r[u])){var e=r[u],n=new Set(Object.keys(t).concat(Object.keys(e)));return(0,d.arrayFrom)(n).reduce((function(r,n){return void 0===e[n]?r[n]=t[n]:void 0===t[n]?r[n]=e[n]:(0,c.isPlainObject)(e[n])?r[n]=(0,c.mergeDeep)({},t[n],e[n]):r[n]=e[n],r}),{})}return Object.assign({},t)}var T=[S,function(){var e=S();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var t=arguments.length<=0?void 0:arguments[0];return t?(0,c.deepAccess)(e(),t):S()}return N.apply(void 0,arguments)}})),w=(0,a.default)(T,2),C=w[0],x=w[1],P=[x,C].map((function(e){return function(){var t=e.apply(void 0,arguments);return t&&"object"===(0,o.default)(t)&&(t=(0,c.deepClone)(t)),t}})),D=(0,a.default)(P,2),R=D[0],j=D[1];function k(r){if((0,c.isPlainObject)(r)){var n=Object.keys(r),i={};n.forEach((function(n){var o=r[n];(0,c.isPlainObject)(e[n])&&(0,c.isPlainObject)(o)&&(o=Object.assign({},e[n],o));try{i[n]=t[n]=o}catch(e){(0,c.logWarn)("Cannot set config for property ".concat(n," : "),e)}})),B(i)}else(0,c.logError)("setConfig options must be an object")}function N(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t;if("string"!=typeof e&&(o=e,e=O,r=t||{}),"function"==typeof o){var a={topic:e,callback:o};return n.push(a),r.init&&o(e===O?x():(0,i.default)({},e,x(e))),function(){n.splice(n.indexOf(a),1)}}(0,c.logError)("listener must be a function")}function B(e){var t=Object.keys(e);n.filter((function(e){return(0,d.includes)(t,e.topic)})).forEach((function(t){t.callback((0,i.default)({},t.topic,e[t.topic]))})),n.filter((function(e){return e.topic===O})).forEach((function(t){return t.callback(e)}))}function U(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{!function(e){if(!(0,c.isPlainObject)(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!(0,c.isPlainObject)(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((function(n){r[n]||(r[n]={}),Object.keys(e.config).forEach((function(i){var o=e.config[i];if((0,c.isPlainObject)(o)){var a=t?c.mergeDeep:Object.assign;r[n][i]=a({},r[n][i]||{},o)}else r[n][i]=o}))}))}catch(e){(0,c.logError)(e)}}function M(e,t){u=e;try{return t()}finally{q()}}function q(){u=null}return I(),{getCurrentBidder:function(){return u},resetBidder:q,getConfig:x,getAnyConfig:C,readConfig:R,readAnyConfig:j,setConfig:k,mergeConfig:function(e){if((0,c.isPlainObject)(e)){var t=(0,c.mergeDeep)(S(),e);return k(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t)),t}(0,c.logError)("mergeConfig input must be an object")},setDefaults:function(r){(0,c.isPlainObject)(e)?(Object.assign(e,r),Object.assign(t,r)):(0,c.logError)("defaults must be an object")},resetConfig:I,runWithBidder:M,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return M(e,t.bind.apply(t,[this].concat(n)))}(0,c.logWarn)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:U,getBidderConfig:function(){return r},mergeBidderConfig:function(e){return U(e,!0)}}}var T=S();t.config=T},1526:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.gppDataHandler=t.gdprDataHandler=t.coppaDataHandler=t.allConsent=t.VENDORLESS_GVLID=t.GDPR_GVLIDS=t.FIRST_PARTY_GVLID=t.ConsentHandler=void 0,t.gvlidRegistry=N,t.multiHandler=F,t.uspDataHandler=void 0;var i=n(r(8832)),o=n(r(5372)),a=n(r(906)),s=n(r(3315)),d=n(r(409)),c=n(r(5018)),u=n(r(4668)),l=n(r(8212)),p=n(r(5093)),f=n(r(9905)),g=r(1779),v=r(8145),m=r(6522);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}function h(e,t,r){y(e,t),t.set(e,r)}function y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var E=Object.freeze({});t.VENDORLESS_GVLID=E;var _=Object.freeze({});t.FIRST_PARTY_GVLID=_;var A=new WeakMap,O=new WeakMap,S=new WeakMap,T=new WeakMap,w=new WeakMap,C=new WeakMap,x=new WeakSet,P=function(){function e(){var t,r;(0,c.default)(this,e),y(t=this,r=x),r.add(t),h(this,A,{writable:!0,value:void 0}),h(this,O,{writable:!0,value:void 0}),h(this,S,{writable:!0,value:void 0}),h(this,T,{writable:!0,value:void 0}),h(this,w,{writable:!0,value:!0}),h(this,C,{writable:!0,value:void 0}),(0,l.default)(this,"generatedTime",void 0),(0,l.default)(this,"hashFields",void 0),this.reset()}return(0,u.default)(e,[{key:"reset",value:function(){(0,f.default)(this,S,(0,v.defer)()),(0,f.default)(this,A,!1),(0,f.default)(this,O,null),(0,f.default)(this,T,!1),this.generatedTime=null}},{key:"enable",value:function(){(0,f.default)(this,A,!0)}},{key:"enabled",get:function(){return(0,p.default)(this,A)}},{key:"ready",get:function(){return(0,p.default)(this,T)}},{key:"promise",get:function(){return(0,p.default)(this,T)?v.GreedyPromise.resolve((0,p.default)(this,O)):((0,p.default)(this,A)||I(this,x,D).call(this,null),(0,p.default)(this,S).promise)}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,g.timestamp)();this.generatedTime=t,(0,f.default)(this,w,!0),I(this,x,D).call(this,e)}},{key:"getConsentData",value:function(){return(0,p.default)(this,O)}},{key:"hash",get:function(){var e=this;return(0,p.default)(this,w)&&((0,f.default)(this,C,(0,g.cyrb53Hash)(JSON.stringify((0,p.default)(this,O)&&this.hashFields?this.hashFields.map((function(t){return(0,p.default)(e,O)[t]})):(0,p.default)(this,O)))),(0,f.default)(this,w,!1)),(0,p.default)(this,C)}}]),e}();function D(e){(0,f.default)(this,T,!0),(0,f.default)(this,O,e),(0,p.default)(this,S).resolve(e)}t.ConsentHandler=P;var R=function(e){(0,a.default)(r,e);var t=b(r);function r(){return(0,c.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&this.generatedTime)return{usp:e,generatedAt:this.generatedTime}}}]),r}(P),j=function(e){(0,a.default)(r,e);var t=b(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,l.default)((0,o.default)(e),"hashFields",["gdprApplies","consentString"]),e}return(0,u.default)(r,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:(0,g.isStr)(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}]),r}(P),k=function(e){(0,a.default)(r,e);var t=b(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,l.default)((0,o.default)(e),"hashFields",["applicableSections","gppString"]),e}return(0,u.default)(r,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}]),r}(P);function N(){var e={},t={},r={};return{register:function(n,i,o){o&&((e[i]=e[i]||{})[n]=o,t.hasOwnProperty(i)?t[i]!==o&&(t[i]=r):t[i]=o)},get:function(n){var i={modules:e[n]||{}};return t.hasOwnProperty(n)&&t[n]!==r&&(i.gvlid=t[n]),i}}}var B=new j;t.gdprDataHandler=B;var U=new R;t.uspDataHandler=U;var M=new k;t.gppDataHandler=M;var q=function(){function e(){return!!m.config.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset:function(){},get promise(){return v.GreedyPromise.resolve(e())},get hash(){return e()?"1":"0"}}}();t.coppaDataHandler=q;var V=N();t.GDPR_GVLIDS=V;var L={gdpr:B,usp:U,gpp:M,coppa:q};function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return e=Object.entries(e),Object.assign({get promise(){return v.GreedyPromise.all(e.map((function(e){var t=(0,i.default)(e,2),r=t[0];return t[1].promise.then((function(e){return[r,e]}))}))).then((function(e){return Object.fromEntries(e)}))},get hash(){return(0,g.cyrb53Hash)(e.map((function(e){var t=(0,i.default)(e,2);t[0];return t[1].hash})).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map((function(t){return[t,(r=t,function(){return Object.fromEntries(e.map((function(e){var t=(0,i.default)(e,2);return[t[0],t[1][r]()]})))})];var r}))))}var G=F();t.allConsent=G},3603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPriceBucketString=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=parseFloat(e);isNaN(n)&&(n="");return{low:""===n?"":p(e,s,r),med:""===n?"":p(e,d,r),high:""===n?"":p(e,c,r),auto:""===n?"":p(e,l,r),dense:""===n?"":p(e,u,r),custom:""===n?"":p(e,t,r)}},t.isValidPriceConfig=f;var n=r(9635),i=r(1779),o=r(6522),a=2,s={buckets:[{max:5,increment:.5}]},d={buckets:[{max:20,increment:.1}]},c={buckets:[{max:20,increment:.01}]},u={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},l={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function p(e,t,r){var s="";if(!f(t))return s;var d=t.buckets.reduce((function(e,t){return e.max>t.max?e:t}),{max:0}),c=0,u=(0,n.find)(t.buckets,(function(t){if(e>d.max*r){var n=t.precision;void 0===n&&(n=a),s=(t.max*r).toFixed(n)}else{if(e<=t.max*r&&e>=c*r)return t.min=c,t;c=t.max}}));return u&&(s=function(e,t,r){var n=void 0!==t.precision?t.precision:a,s=t.increment*r,d=t.min*r,c=Math.floor,u=o.config.getConfig("cpmRoundingFunction");"function"==typeof u&&(c=u);var l,p,f=Math.pow(10,n+2),g=(e*f-d*f)/(s*f);try{l=c(g)*s+d}catch(e){p=!0}(p||"number"!=typeof l)&&((0,i.logWarn)("Invalid rounding function passed in config"),l=Math.floor(g)*s+d);return(l=Number(l.toFixed(10))).toFixed(n)}(e,u,r)),s}function f(e){if((0,i.isEmpty)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach((function(e){e.max&&e.increment||(t=!1)})),t}},4138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEBUG_KEY=void 0,t.debuggingControls=g,t.debuggingModuleLoader=f,t.loadSession=function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=v,r=null;try{r=e.getItem(u)}catch(e){}null!==r&&t.enable()}},t.reset=void 0;var n=r(6522),i=r(4627),o=r(8851),a=r(1779),s=r(4223),d=r(1794),c=r(8145),u="__pbjs_debugging__";function l(){return(0,o.getGlobal)().installedModules.includes("debugging")}function p(e){return new c.GreedyPromise((function(t){(0,d.loadExternalScript)(e,"debugging",t)}))}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,r=void 0===t?l:t,d=e.script,f=void 0===d?p:d,g=null;return function(){return null==g&&(g=new c.GreedyPromise((function(e,t){setTimeout((function(){if(r())e();else{var d="https://cdn.jsdelivr.net/npm/prebid.js@8.34.0/dist/debugging-standalone.js";(0,a.logMessage)('Debugging module not installed, loading it from "'.concat(d,'"...')),(0,o.getGlobal)()._installDebugging=!0,f(d).then((function(){(0,o.getGlobal)()._installDebugging({DEBUG_KEY:u,hook:i.hook,config:n.config,createBid:s.createBid,logger:(0,a.prefixLog)("DEBUG:")})})).then(e,t)}}))}))),g}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,r=void 0===t?f():t,n=e.hook,o=void 0===n?(0,i.getHook)("requestBids"):n,a=null,s=!1;function d(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(a||c.GreedyPromise.resolve()).then((function(){return e.apply(t,n)}))}function u(){o.getHooks({hook:d}).remove(),s=!1}return{enable:function(){s||(a=r(),o.before(d,99),s=!0)},disable:u,reset:function(){a=null,u()}}}t.DEBUG_KEY=u;var v=g(),m=v.reset;t.reset=m,n.config.getConfig("debugging",(function(e){var t=e.debugging;null!=t&&t.enabled?v.enable():v.disable()}))},985:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);Object.defineProperty(t,"__esModule",{value:!0}),t.addEvents=void 0,t.clearEvents=function(){p.clear()},t.on=t.off=t.has=t.getEvents=t.get=t.emit=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(1779)),a=n(r(5404)),s=r(4628),d=r(6522);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var u="eventHistoryTTL",l=null,p=(0,s.ttlCollection)({monotonic:!0,ttl:function(){return l}});d.config.getConfig(u,(function(e){var t,r=l;e=null===(t=e)||void 0===t?void 0:t[u],r!==(l="number"==typeof e?1e3*e:null)&&p.refresh()}));var f=Array.prototype.slice,g=Array.prototype.push,v=Object.values(a.default.EVENTS),m=a.default.EVENT_ID_PATHS,b=function(){var e={},t={};function r(e){return v.includes(e)}return t.has=r,t.on=function(t,n,i){if(r(t)){var a=e[t]||{que:[]};i?(a[i]=a[i]||{que:[]},a[i].que.push(n)):a.que.push(n),e[t]=a}else o.logError("Wrong event name : "+t+" Valid event names :"+v)},t.emit=function(t){!function(t,r){o.logMessage("Emitting event for: "+t);var n=r[0]||{},i=n[m[t]],a=e[t]||{que:[]},s=Object.keys(a),d=[];p.add({eventType:t,args:n,id:i,elapsedTime:o.getPerformanceNow()}),i&&s.includes(i)&&g.apply(d,a[i].que),g.apply(d,a.que),(d||[]).forEach((function(e){if(e)try{e.apply(null,r)}catch(e){o.logError("Error executing handler:","events.js",e,t)}}))}(t,f.call(arguments,1))},t.off=function(t,r,n){var i=e[t];o.isEmpty(i)||o.isEmpty(i.que)&&o.isEmpty(i[n])||n&&(o.isEmpty(i[n])||o.isEmpty(i[n].que))||(n?(i[n].que||[]).forEach((function(e){var t=i[n].que;e===r&&t.splice(t.indexOf(e),1)})):(i.que||[]).forEach((function(e){var t=i.que;e===r&&t.splice(t.indexOf(e),1)})),e[t]=i)},t.get=function(){return e},t.addEvents=function(e){v=v.concat(e)},t.getEvents=function(){return p.toArray().map((function(e){return Object.assign({},e)}))},t}();o._setEventEmitter(b.emit.bind(b));var h=b.on,y=b.off,I=b.get,E=b.getEvents,_=b.emit,A=b.addEvents,O=b.has;t.has=O,t.addEvents=A,t.emit=_,t.getEvents=E,t.get=I,t.off=y,t.on=h},6978:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.enrichFPD=t.dep=void 0;var i=n(r(8832)),o=r(4627),a=r(4080),s=r(4663),d=r(1779),c=r(6522),u=r(5400),l=r(8145),p=r(1604),f=r(1681),g=r(9675),v=r(353),m=r(7343);function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y={getRefererInfo:a.getRefererInfo,findRootDomain:s.findRootDomain,getWindowTop:d.getWindowTop,getWindowSelf:d.getWindowSelf,getHighEntropySUA:u.getHighEntropySUA,getLowEntropySUA:u.getLowEntropySUA};t.dep=y;var I=(0,p.clientSectionChecker)("FPD"),E=(0,o.hook)("sync",(function(e){var t,r=[e,(t=c.config.getConfig("firstPartyData.uaHints"),Array.isArray(t)&&0!==t.length?y.getHighEntropySUA(t):l.GreedyPromise.resolve(y.getLowEntropySUA())).catch((function(){return null})),l.GreedyPromise.resolve("cookieDeprecationLabel"in navigator&&(0,f.isActivityAllowed)(v.ACTIVITY_ACCESS_DEVICE,(0,g.activityParams)(m.MODULE_TYPE_PREBID,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch((function(){return null}))];return l.GreedyPromise.all(r).then((function(e){var t=(0,i.default)(e,3),r=t[0],n=t[1],o=t[2],a=y.getRefererInfo();if(function(e){["app","site","device"].forEach((function(t){var r=c.config.getConfig(t);null!=r&&(e[t]=(0,d.mergeDeep)({},r,e[t]))}))}(r),Object.entries(O).forEach((function(e){var t=(0,i.default)(e,2),n=t[0],o=(0,t[1])(r,a);o&&Object.keys(o).length>0&&(r[n]=(0,d.mergeDeep)({},o,r[n]))})),n&&(0,d.deepSetValue)(r,"device.sua",Object.assign({},n,r.device.sua)),o){var s={cdep:o};(0,d.deepSetValue)(r,"device.ext",Object.assign({},s,r.device.ext))}r=I(r);var u,l=b(p.CLIENT_SECTIONS);try{for(l.s();!(u=l.n()).done;){var f=u.value;if((0,p.hasSection)(r,f)){r[f]=(0,d.mergeDeep)({},S(r,a),r[f]);break}}}catch(e){l.e(e)}finally{l.f()}return r}))}));function _(e){try{return e(y.getWindowTop())}catch(t){return e(y.getWindowSelf())}}function A(e){return(0,d.getDefinedParams)(e,Object.keys(e))}t.enrichFPD=E;var O={site:function(e,t){if(!p.CLIENT_SECTIONS.filter((function(e){return"site"!==e})).some(p.hasSection.bind(null,e)))return A({page:t.page,ref:t.ref})},device:function(){return _((function(e){return{w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:(0,d.getDNT)()?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()}}))},regs:function(){var e={};_((function(e){return e.navigator.globalPrivacyControl}))&&(0,d.deepSetValue)(e,"ext.gpc",1);var t=c.config.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function S(e,t){var r,n,i,o=(0,a.parseDomain)(t.page,{noLeadingWww:!0});return A({domain:o,keywords:null===(r=_((function(e){return e.document.querySelector("meta[name='keywords']")})))||void 0===r||null===(n=r.content)||void 0===n||null===(i=n.replace)||void 0===i?void 0:i.call(n,/\s/g,""),publisher:A({domain:y.findRootDomain(o)})})}},1604:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_SECTIONS=void 0,t.clientSectionChecker=function(e){return function(t){return i.reduce((function(r,i){return o(t,i)&&(null!=r?((0,n.logWarn)("".concat(e," specifies both '").concat(r,"' and '").concat(i,"'; dropping the latter.")),delete t[i]):r=i),r}),null),t}},t.hasSection=o;var n=r(1779),i=["dooh","app","site"];function o(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}t.CLIENT_SECTIONS=i},4663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findRootDomain=t.coreStorage=void 0;var n=r(1779),i=(0,r(9084).getCoreStorageManager)("fpdEnrichment");t.coreStorage=i;var o=(0,n.memoize)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!i.cookiesAreEnabled())return e;var t,r,o=e.split(".");if(2===o.length)return e;var a=-2,s="_rdc".concat(Date.now()),d="writeable";do{t=o.slice(a).join(".");var c=new Date((0,n.timestamp)()+1e4).toUTCString();i.setCookie(s,d,c,"Lax",t,void 0),i.getCookie(s,void 0)===d?(r=!1,i.setCookie(s,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,t,void 0)):(a+=-1,r=Math.abs(a)<=o.length)}while(r);return t}));t.findRootDomain=o},5400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLowEntropySUA=t.getHighEntropySUA=t.SUA_SOURCE_UNKNOWN=t.SUA_SOURCE_UA_HEADER=t.SUA_SOURCE_LOW_ENTROPY=t.SUA_SOURCE_HIGH_ENTROPY=t.LOW_ENTROPY_HINTS=t.HIGH_ENTROPY_HINTS=void 0,t.highEntropySUAAccessor=p,t.lowEntropySUAAccessor=l,t.uaDataToSUA=f;var n=r(1779),i=r(8145);t.SUA_SOURCE_UNKNOWN=0;var o=1;t.SUA_SOURCE_LOW_ENTROPY=o;var a=2;t.SUA_SOURCE_HIGH_ENTROPY=a;t.SUA_SOURCE_UA_HEADER=3;var s=["architecture","bitness","model","platformVersion","fullVersionList"];t.HIGH_ENTROPY_HINTS=s;var d=["brands","mobile","platform"];t.LOW_ENTROPY_HINTS=d;var c=l();t.getLowEntropySUA=c;var u=p();function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,r=t&&d.some((function(e){return void 0!==t[e]}))?Object.freeze(f(o,t)):null;return function(){return r}}function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,r={},o=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!o.has(e)){var d=Array.from(e);d.sort(),o.set(e,d.join("|"))}var c=o.get(e);if(!r.hasOwnProperty(c))try{r[c]=t.getHighEntropyValues(e).then((function(e){return(0,n.isEmpty)(e)?null:Object.freeze(f(a,e))})).catch((function(){return null}))}catch(e){r[c]=i.GreedyPromise.resolve(null)}return r[c]}}function f(e,t){function r(e,t){var r={brand:e};return(0,n.isStr)(t)&&!(0,n.isEmptyStr)(t)&&(r.version=t.split(".")),r}var i={source:e};return t.platform&&(i.platform=r(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(i.browsers=(t.fullVersionList||t.brands).map((function(e){return r(e.brand,e.version)}))),void 0!==t.mobile&&(i.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((function(e){var r=t[e];(0,n.isStr)(r)&&(i[e]=r)})),i}t.getHighEntropySUA=u},4627:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.hook=t.getHook=void 0,t.module=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).postInstallAllowed,n=void 0!==r&&r;s("async",(function(r){r.forEach((function(e){return t.apply(void 0,(0,i.default)(e))})),n&&(l[e]=t)}),e)([])},t.ready=void 0,t.setupBeforeHookFnOnce=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;0===e.getHooks({hook:t}).length&&e.before(t,r)},t.submodule=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=l[e];if(i)return i.apply(void 0,r);u(e).before((function(e,t){t.push(r),e(t)}))},t.wrapHook=function(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((function(t){return[t,{get:function(){return e[t]}}]})))),t};var i=n(r(147)),o=n(r(5481)),a=r(8145),s=(0,o.default)({ready:o.default.SYNC|o.default.ASYNC|o.default.QUEUE});t.hook=s;var d=(0,a.defer)();s.ready=function(){var e=s.ready;return function(){try{return e.apply(s,arguments)}finally{d.resolve()}}}();var c=d.promise;t.ready=c;var u=s.get;t.getHook=u;var l={}},6613:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO=t.NATIVE=t.BANNER=t.ADPOD=void 0;t.NATIVE="native";t.VIDEO="video";t.BANNER="banner";t.ADPOD="adpod"},4239:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.NATIVE_TARGETING_KEYS=t.IMAGE=void 0,t.convertOrtbRequestToProprietaryNative=function(e){if(!e||!(0,s.isArray)(e))return e;if(!e.some((function(e){var t;return null===(t=((null==e?void 0:e.mediaTypes)||{})[l.NATIVE])||void 0===t?void 0:t.ortb})))return e;var t,r=(0,s.deepClone)(e),n=p(r);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.mediaTypes&&i.mediaTypes[l.NATIVE]&&i.mediaTypes[l.NATIVE].ortb&&(i.mediaTypes[l.NATIVE]=Object.assign((0,s.pick)(i.mediaTypes[l.NATIVE],A),q(i.mediaTypes[l.NATIVE].ortb)),i.nativeParams=x(i.mediaTypes[l.NATIVE]))}}catch(e){n.e(e)}finally{n.f()}return r;return e},t.decorateAdUnitsWithNativeParams=function(e){e.forEach((function(e){var t=e.nativeParams||(0,s.deepAccess)(e,"mediaTypes.native");t&&(e.nativeParams=x(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||M(e.nativeParams))}))},t.fireClickTrackers=k,t.fireImpressionTrackers=j,t.fireNativeTrackers=function(e,t){var r=t.native.ortb||V(t.native);"click"===e.action?k(r,null==e?void 0:e.assetId):j(r);return e.action},t.fromOrtbNativeRequest=q,t.getAllAssetsMessage=function(e,t){return N(e,t,null)},t.getAssetMessage=function(e,t){var r=e.assets.map((function(e){return B[e]}));return N(e,t,r)},t.getNativeTargeting=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=void 0===t?c.auctionManager.index:t,n={},i=r.getAdUnit(e);(0,s.deepAccess)(i,"nativeParams.rendererUrl")?e.native.rendererUrl=U(i.nativeParams.rendererUrl):(0,s.deepAccess)(i,"nativeParams.adTemplate")&&(e.native.adTemplate=U(i.nativeParams.adTemplate));var o=!1!==(0,s.deepAccess)(i,"nativeParams.sendTargetingKeys"),a=function(e){var t={};(0,s.deepAccess)(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((function(e){t[e]="hb_native_".concat(e)}));return v(v({},u.default.NATIVE_KEYS),t)}(i),d=v(v({},e.native),e.native.ext);return delete d.ext,Object.keys(d).forEach((function(t){var r=a[t],d=U(e.native[t])||U((0,s.deepAccess)(e,"native.ext.".concat(t)));if("adTemplate"!==t&&r&&d){var c=(0,s.deepAccess)(i,"nativeParams.".concat(t,".sendId"));if("boolean"!=typeof c&&(c=(0,s.deepAccess)(i,"nativeParams.ext.".concat(t,".sendId"))),c)d="".concat(r,":").concat(e.adId);var u=(0,s.deepAccess)(i,"nativeParams.".concat(t,".sendTargetingKeys"));"boolean"!=typeof u&&(u=(0,s.deepAccess)(i,"nativeParams.ext.".concat(t,".sendTargetingKeys"))),("boolean"==typeof u?u:o)&&(n[r]=d)}})),n},t.hasNonNativeBidder=void 0,t.isNativeOpenRTBBidValid=R,t.isOpenRTBBidRequestValid=P,t.legacyPropertiesToOrtbNative=V,t.nativeAdapters=t.nativeAdUnit=void 0,t.nativeBidIsValid=function(e){var t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=(void 0===r?c.auctionManager.index:r).getAdUnit(e);if(!n)return!1;var i=n.nativeOrtbRequest;return R((null===(t=e.native)||void 0===t?void 0:t.ortb)||L(e.native,i),i)},t.nativeBidder=void 0,t.processNativeAdUnitParams=x,t.toLegacyResponse=function(e,t){var r={},n=(null==t?void 0:t.assets)||[];r.clickUrl=e.link.url,r.privacyLink=e.privacy;var o,a=p((null==e?void 0:e.assets)||[]);try{var s=function(){var e=o.value,t=n.find((function(t){return e.id===t.id}));e.title?r.title=e.title.text:e.img?r[t.img.type===E.MAIN?"image":"icon"]={url:e.img.url,width:e.img.w,height:e.img.h}:e.data&&(r[S[T[t.data.type]]]=e.data.value)};for(a.s();!(o=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}r.impressionTrackers=[];var d,c=[];e.imptrackers&&(d=r.impressionTrackers).push.apply(d,(0,i.default)(e.imptrackers));var u,l=p((null==e?void 0:e.eventtrackers)||[]);try{for(l.s();!(u=l.n()).done;){var f=u.value;f.event===C.impression&&f.method===w.img&&r.impressionTrackers.push(f.url),f.event===C.impression&&f.method===w.js&&c.push(f.url)}}catch(e){l.e(e)}finally{l.f()}c=c.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),null!=e&&e.jstracker&&c.push(e.jstracker);c.length&&(r.javascriptTrackers=c.join("\n"));return r},t.toOrtbNativeRequest=M,t.toOrtbNativeResponse=L;var i=n(r(147)),o=n(r(8832)),a=n(r(8212)),s=r(1779),d=r(9635),c=r(6572),u=n(r(5404)),l=r(6613);function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=[];t.nativeAdapters=m;var b=Object.keys(u.default.NATIVE_KEYS).map((function(e){return u.default.NATIVE_KEYS[e]}));t.NATIVE_TARGETING_KEYS=b;var h={ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}};t.IMAGE=h;var y={image:h},I=u.default.NATIVE_ASSET_TYPES,E=u.default.NATIVE_IMAGE_TYPES,_=u.default.PREBID_NATIVE_DATA_KEYS_TO_ORTB,A=u.default.NATIVE_KEYS_THAT_ARE_NOT_ASSETS,O=u.default.NATIVE_KEYS,S=F(_),T=F(I),w={img:1,js:2,1:"img",2:"js"},C={impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4};function x(e){if(e&&e.type&&function(e){if(!e||!(0,d.includes)(Object.keys(y),e))return(0,s.logError)("".concat(e," nativeParam is not supported")),!1;return!0}(e.type)&&(e=y[e.type]),!e||!e.ortb||P(e.ortb))return e}function P(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return(0,s.logError)("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var r=t.map((function(e){return e.id}));return t.length!==new Set(r).size||r.some((function(e){return e!==parseInt(e,10)}))?((0,s.logError)("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?((0,s.logError)("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((function(e){return function(e){if(!(0,s.isPlainObject)(e))return(0,s.logError)("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!(0,s.isNumber)(e.img.w)&&!(0,s.isNumber)(e.img.wmin))return(0,s.logError)("for img asset there must be 'w' or 'wmin' property"),!1;if(!(0,s.isNumber)(e.img.h)&&!(0,s.isNumber)(e.img.hmin))return(0,s.logError)("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!(0,s.isNumber)(e.title.len))return(0,s.logError)("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!(0,s.isNumber)(e.data.type))return(0,s.logError)("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&(0,s.isNumber)(e.video.minduration)&&(0,s.isNumber)(e.video.maxduration)))return(0,s.logError)("video asset is not properly configured"),!1;return!0}(e)}))}t.nativeAdUnit=function(e){var t="native"===e.mediaType,r=(0,s.deepAccess)(e,"mediaTypes.native");return t||r};var D=function(e){return(0,d.includes)(m,e.bidder)};t.nativeBidder=D;function R(e,t){if(!(0,s.deepAccess)(e,"link.url"))return(0,s.logError)("native response doesn't have 'link' property. Ortb response: ",e),!1;var r=t.assets.filter((function(e){return 1===e.required})).map((function(e){return e.id})),n=e.assets.map((function(e){return e.id})),i=r.every((function(e){return(0,d.includes)(n,e)}));return i||(0,s.logError)("didn't receive a bid with all required assets. Required ids: ".concat(r,", but received ids in response: ").concat(n)),i}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.runMarkup,n=void 0===r?function(e){return(0,s.insertHtmlIntoIframe)(e)}:r,i=t.fetchURL,o=void 0===i?s.triggerPixel:i,a=(e.eventtrackers||[]).filter((function(e){return e.event===C.impression})).reduce((function(e,t){return w.hasOwnProperty(t.method)&&e[w[t.method]].push(t.url),e}),{img:[],js:[]}),d=a.img,c=a.js;e.imptrackers&&(d=d.concat(e.imptrackers)),d.forEach((function(e){return o(e)})),c=c.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),e.jstracker&&(c=c.concat([e.jstracker])),c.length&&n(c.join("\n"))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fetchURL,n=void 0===r?s.triggerPixel:r;if(t){var i,o=(e.assets||[]).filter((function(e){return e.link})).reduce((function(e,t){return e[t.id]=t.link,e}),{}),a=(null===(i=e.link)||void 0===i?void 0:i.clicktrackers)||[],d=o[t],c=a;d&&(c=d.clicktrackers||[]),c.forEach((function(e){return n(e)}))}else{var u;((null===(u=e.link)||void 0===u?void 0:u.clicktrackers)||[]).forEach((function(e){return n(e)}))}}function N(e,t,r){var n,i,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,a=void 0===o?c.auctionManager.index:o,s={message:"assetResponse",adId:e.adId},d=a.getAdUnit(t),l=t.native;return t.native.ortb?s.ortb=t.native.ortb:null!==(n=d.mediaTypes)&&void 0!==n&&null!==(i=n.native)&&void 0!==i&&i.ortb&&(s.ortb=L(t.native,d.nativeOrtbRequest)),s.assets=[],(null==r?Object.keys(l):r).forEach((function(e){if("adTemplate"===e&&l[e])s.adTemplate=U(l[e]);else if("rendererUrl"===e&&l[e])s.rendererUrl=U(l[e]);else if("ext"===e)Object.keys(l[e]).forEach((function(t){if(l[e][t]){var r=U(l[e][t]);s.assets.push({key:t,value:r})}}));else if(l[e]&&u.default.NATIVE_KEYS.hasOwnProperty(e)){var t=U(l[e]);s.assets.push({key:e,value:t})}})),s}t.hasNonNativeBidder=function(e){return e.bids.filter((function(e){return!D(e)})).length};var B=Object.fromEntries(Object.entries(u.default.NATIVE_KEYS).map((function(e){var t=(0,o.default)(e,2),r=t[0];return[t[1],r]})));function U(e){return(null==e?void 0:e.url)||e}function M(e){if(e||(0,s.isPlainObject)(e)){var t={ver:"1.2",assets:[]};for(var r in e)if(!A.includes(r))if(O.hasOwnProperty(r))if("privacyLink"!==r){var n=e[r],i=0;n.required&&(0,s.isBoolean)(n.required)&&(i=Number(n.required));var o={id:t.assets.length,required:i};if(r in _)o.data={type:I[_[r]]},n.len&&(o.data.len=n.len);else if("icon"===r||"image"===r){if(o.img={type:"icon"===r?E.ICON:E.MAIN},n.aspect_ratios)if((0,s.isArray)(n.aspect_ratios))if(n.aspect_ratios.length){var a=n.aspect_ratios[0],d=a.min_width,c=a.min_height;(0,s.isInteger)(d)&&(0,s.isInteger)(c)?(o.img.wmin=d,o.img.hmin=c):(0,s.logError)("image.aspect_ratios min_width or min_height are invalid: ",d,c);var u=n.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));u.length>0&&(o.img.ext={aspectratios:u})}else(0,s.logError)("image.aspect_ratios was passed, but it's empty:",n.aspect_ratios);else(0,s.logError)("image.aspect_ratios was passed, but it's not a an array:",n.aspect_ratios);n.sizes&&(2===n.sizes.length&&(0,s.isInteger)(n.sizes[0])&&(0,s.isInteger)(n.sizes[1])?(o.img.w=n.sizes[0],o.img.h=n.sizes[1],delete o.img.hmin,delete o.img.wmin):(0,s.logError)("image.sizes was passed, but its value is not an array of integers:",n.sizes))}else"title"===r?o.title={len:n.len||140}:"ext"===r&&(o.ext=n,delete o.required);t.assets.push(o)}else t.privacy=1;else(0,s.logError)("Unrecognized native asset code: ".concat(r,". Asset will be ignored."));return t}(0,s.logError)("Native assets object is empty or not an object: ",e)}function q(e){if(P(e)){var t,r={},n=p(e.assets);try{var i=function(){var n=t.value;if(n.title){var i={required:!!n.required&&Boolean(n.required),len:n.title.len};r.title=i}else if(n.img){var o={required:!!n.required&&Boolean(n.required)};if(n.img.w&&n.img.h)o.sizes=[n.img.w,n.img.h];else if(n.img.wmin&&n.img.hmin){var a=function(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}(n.img.wmin,n.img.hmin);o.aspect_ratios=[{min_width:n.img.wmin,min_height:n.img.hmin,ratio_width:n.img.wmin/a,ratio_height:n.img.hmin/a}]}n.img.type===E.MAIN?r.image=o:r.icon=o}else if(n.data){var s=Object.keys(I).find((function(e){return I[e]===n.data.type})),d=Object.keys(_).find((function(e){return _[e]===s}));r[d]={required:!!n.required&&Boolean(n.required)},n.data.len&&(r[d].len=n.data.len)}e.privacy&&(r.privacyLink={required:!1})};for(n.s();!(t=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}return r}}function V(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach((function(e){var r=(0,o.default)(e,2),n=r[0],i=r[1];switch(n){case"clickUrl":t.link.url=i;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(i)?i:[i];break;case"impressionTrackers":(Array.isArray(i)?i:[i]).forEach((function(e){t.eventtrackers.push({event:C.impression,method:w.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(i)?i.join(""):i;break;case"privacyLink":t.privacy=i}})),t}function L(e,t){var r=v(v({},V(e)),{},{assets:[]});function n(e,n){var i=t.assets.find(e);null!=i&&(n(i=(0,s.deepClone)(i)),r.assets.push(i))}return Object.keys(e).filter((function(t){return!!e[t]})).forEach((function(t){var r=U(e[t]);switch(t){case"title":n((function(e){return null!=e.title}),(function(e){e.title={text:r}}));break;case"image":case"icon":var i="image"===t?E.MAIN:E.ICON;n((function(e){return null!=e.img&&e.img.type===i}),(function(e){e.img={url:r}}));break;default:t in _&&n((function(e){return null!=e.data&&e.data.type===I[_[t]]}),(function(e){e.data={value:r}}))}})),r}function F(e){var t={};for(var r in e)t[e[r]]=r;return t}},9502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProcessors=t.RESPONSE=t.REQUEST=t.PROCESSOR_TYPES=t.PROCESSOR_DIALECTS=t.PBS=t.IMP=t.DEFAULT=t.BID_RESPONSE=void 0,t.processorRegistry=l,t.registerOrtbProcessor=void 0;var r=["request","imp","bidResponse","response"];t.PROCESSOR_TYPES=r;var n=["default","pbs"];t.PROCESSOR_DIALECTS=n;var i=r[0],o=r[1],a=r[2],s=r[3];t.RESPONSE=s,t.BID_RESPONSE=a,t.IMP=o,t.REQUEST=i;var d=n[0],c=n[1];t.PBS=c,t.DEFAULT=d;var u=new Set(r);function l(){var e={};return{registerOrtbProcessor:function(t){var n=t.type,i=t.name,o=t.fn,a=t.priority,s=void 0===a?0:a,c=t.dialects,l=void 0===c?[d]:c;if(!u.has(n))throw new Error("ORTB processor type must be one of: ".concat(r.join(", ")));l.forEach((function(t){e.hasOwnProperty(t)||(e[t]={}),e[t].hasOwnProperty(n)||(e[t][n]={}),e[t][n][i]={priority:s,fn:o}}))},getProcessors:function(t){return e[t]||{}}}}var p=l(),f=p.registerOrtbProcessor,g=p.getProcessors;t.getProcessors=g,t.registerOrtbProcessor=f},9635:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayFrom=function(){return Array.from.apply(Array,arguments)},t.find=function(e,t,r){return e&&e.find(t,r)},t.findIndex=function(e,t,r){return e&&e.findIndex(t,r)},t.includes=function(e,t,r){return e&&e.includes(t,r)||!1}},7236:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);t.Ay=void 0;var o=n(r(8832)),a=n(r(8212)),s=r(8851),d=r(1779),c=r(9375),u=r(8072),l=r(6522),p=r(6572),f=r(8133),g=r(4627),v=r(4138),m=r(9635),b=r(1802),h=r(4223),y=r(9084),I=P(r(1442)),E=n(r(5404)),_=P(r(985)),A=r(1380),O=r(8145),S=r(6978),T=r(1526),w=r(8584),C=r(4785);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}var D=(0,s.getGlobal)(),R=u.userSync.triggerUserSyncs,j=E.default.EVENTS,k=j.ADD_AD_UNITS,N=j.REQUEST_BIDS,B=j.SET_TARGETING,U={bidWon:function(e){if(!p.auctionManager.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(d.flatten).filter(d.uniques).includes(e))return void(0,d.logError)('The "'+e+'" placement is not defined.');return!0}};function M(e,t){var r=[];return(0,d.isArray)(e)&&(t?e.length===t:e.length>0)&&(e.every((function(e){return(0,d.isArrayOfNums)(e,2)}))?r=e:(0,d.isArrayOfNums)(e,2)&&r.push(e)),r}function q(e){var t=(0,d.deepClone)(e),r=t.mediaTypes.banner,n=M(r.sizes);return n.length>0?(r.sizes=n,t.sizes=n):((0,d.logError)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function V(e){var t=(0,d.deepClone)(e),r=t.mediaTypes.video;if(r.playerSize){var n="number"==typeof r.playerSize[0]?2:1,i=M(r.playerSize,n);i.length>0?(2===n&&(0,d.logInfo)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),r.playerSize=i,t.sizes=i):((0,d.logError)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}function L(e){var t=(0,d.deepClone)(e),r=t.mediaTypes.native;if(r.ortb){var n=Object.keys(E.default.NATIVE_KEYS).filter((function(e){return E.default.NATIVE_KEYS[e].includes("hb_native_")})),i=Object.keys(r).filter((function(e){return n.includes(e)}));i.length>0&&((0,d.logError)("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(i," keys from request.")),i.forEach((function(e){return delete t.mediaTypes.native[e]})))}return r.image&&r.image.sizes&&!Array.isArray(r.image.sizes)&&((0,d.logError)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),r.image&&r.image.aspect_ratios&&!Array.isArray(r.image.aspect_ratios)&&((0,d.logError)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),r.icon&&r.icon.sizes&&!Array.isArray(r.icon.sizes)&&((0,d.logError)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}function F(e,t){var r=(0,d.deepAccess)(e,"mediaTypes.".concat(t,".pos"));if(!(0,d.isNumber)(r)||isNaN(r)||!isFinite(r)){var n="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");(0,d.logWarn)(n),_.emit(E.default.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments:n}),delete e.mediaTypes[t].pos}return e}function G(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},r=e.mediaTypes,n=e.bids;return null==n||(0,d.isArray)(n)?null==n&&null==e.ortb2Imp?((0,d.logError)(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):r&&0!==Object.keys(r).length?(null==e.ortb2Imp||null!=n&&0!==n.length||(e.bids=[{bidder:null}],(0,d.logMessage)(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):((0,d.logError)(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):((0,d.logError)(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}(0,v.loadSession)(),D.bidderSettings=D.bidderSettings||{},D.libLoaded=!0,D.version="v8.34.0",(0,d.logInfo)("Prebid.js v8.34.0 loaded"),D.installedModules=D.installedModules||[],D.adUnits=D.adUnits||[],D.triggerUserSyncs=R;var z={validateAdUnit:G,validateBannerMediaType:q,validateSizes:M};Object.assign(z,{validateNativeMediaType:L}),Object.assign(z,{validateVideoMediaType:V});var W,H=(0,g.hook)("sync",(function(e){var t=[];return e.forEach((function(e){if(null!=(e=G(e))){var r,n,i,o=e.mediaTypes;o.banner&&(r=q(e),o.banner.hasOwnProperty("pos")&&(r=F(r,"banner"))),o.video&&(n=V(r||e),o.video.hasOwnProperty("pos")&&(n=F(n,"video"))),o.native&&(i=L(n||(r||e)));var a=Object.assign({},r,n,i);t.push(a)}})),t}),"checkAdUnitSetup");function Y(e){var t=p.auctionManager[e]().filter((function(e){return p.auctionManager.getAdUnitCodes().includes(e.adUnitCode)})),r=p.auctionManager.getLastAuctionId();return t.map((function(e){return e.adUnitCode})).filter(d.uniques).map((function(e){return t.filter((function(t){return t.auctionId===r&&t.adUnitCode===e}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return(0,a.default)({},e[0].adUnitCode,{bids:e})})).reduce((function(e,t){return Object.assign(e,t)}),{})}D.getAdserverTargetingForAdUnitCodeStr=function(e){if((0,d.logInfo)("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=D.getAdserverTargetingForAdUnitCode(e);return(0,d.transformAdServerTargetingObj)(t)}(0,d.logMessage)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},D.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=p.auctionManager.getAllBidsForAdUnitCode(e).filter(f.isBidUsable);return t.length?t.reduce(d.getHighestCpm):{}}(0,d.logMessage)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},D.getAdserverTargetingForAdUnitCode=function(e,t){return D.getAdserverTargeting(e,t)[e]},D.getAdserverTargeting=function(e,t){return(0,d.logInfo)("Invoking pbjs.getAdserverTargeting",arguments),f.targeting.getAllTargeting(e,t)},D.getConsentMetadata=function(){return(0,d.logInfo)("Invoking pbjs.getConsentMetadata"),T.allConsent.getConsentMeta()},D.getNoBids=function(){return(0,d.logInfo)("Invoking pbjs.getNoBids",arguments),Y("getNoBids")},D.getNoBidsForAdUnitCode=function(e){return{bids:p.auctionManager.getNoBids().filter((function(t){return t.adUnitCode===e}))}},D.getBidResponses=function(){return(0,d.logInfo)("Invoking pbjs.getBidResponses",arguments),Y("getBidsReceived")},D.getBidResponsesForAdUnitCode=function(e){return{bids:p.auctionManager.getBidsReceived().filter((function(t){return t.adUnitCode===e}))}},D.getBidResponsesForBidPoolId=function(e){return{bids:p.auctionManager.getBidsReceived().filter((function(t){return t.bidPoolId===e||t.passiveBidPoolId===e}))}},pbjs.clearAllAuctions=function(){(0,d.logInfo)("Invoking pbjs.clearBidResponsesFromBidPool",arguments),p.auctionManager.clearAllAuctions()},D.setTargetingForGPTAsync=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.getHighestCpm,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:d.sortByHighestCpm;if((0,d.logInfo)("Invoking pbjs.setTargetingForGPTAsync",arguments),(0,d.isGptPubadsDefined)()){var a=f.targeting.getAllTargeting(e,r,n,!0,void 0,i,o);f.targeting.resetPresetTargeting(e,t),f.targeting.setTargetingForGPT(a,t),Object.keys(a).forEach((function(e){Object.keys(a[e]).forEach((function(t){"hb_adid"===t&&p.auctionManager.setStatusForBids(a[e][t],E.default.BID_STATUS.BID_TARGETING_SET)}))})),_.emit(B,a)}else(0,d.logError)("window.googletag is not defined on the page")},D.setTargetingForAst=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,d.logInfo)("Invoking pbjs.setTargetingForAn",arguments),f.targeting.isApntagDefined()?(f.targeting.setTargetingForAst(e,t),_.emit(B,f.targeting.getAllTargeting())):(0,d.logError)("window.apntag is not defined on the page")},D.clearTargetingForSharedBidPool=function(e){(0,d.logInfo)("Invoking pbjs.clearTargetingForSharedBidPool",arguments),f.targeting.clearTargetingForSharedBidPool(e)},D.renderAd=(0,g.hook)("async",(function(e,t,r){(0,d.logInfo)("Invoking pbjs.renderAd",arguments),(0,d.logMessage)("Calling renderAd with adId :"+t),(0,w.renderAdDirect)(e,t,r)})),D.removeAdUnit=function(e){((0,d.logInfo)("Invoking pbjs.removeAdUnit",arguments),e)?((0,d.isArray)(e)?e:[e]).forEach((function(e){for(var t=D.adUnits.length-1;t>=0;t--)D.adUnits[t].code===e&&D.adUnits.splice(t,1)})):D.adUnits=[]},D.requestBids=(W=(0,g.hook)("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,r=e.timeout,n=e.adUnits,i=e.adUnitCodes,a=e.labels,s=e.auctionId,c=e.ttlBuffer,u=e.ortb2,p=e.metrics,f=e.defer;_.emit(N);var g=r||l.config.getConfig("bidderTimeout");(0,d.logInfo)("Invoking pbjs.requestBids",arguments),i&&i.length?n=n.filter((function(e){return(0,m.includes)(i,e.code)})):i=n&&n.map((function(e){return e.code}));var v={global:(0,d.mergeDeep)({},l.config.getAnyConfig("ortb2")||{},u||{}),bidder:Object.fromEntries(Object.entries(l.config.getBidderConfig()).map((function(e){var t=(0,o.default)(e,2);return[t[0],t[1].ortb2]})).filter((function(e){var t=(0,o.default)(e,2);return t[0],null!=t[1]})))};return(0,S.enrichFPD)(O.GreedyPromise.resolve(v.global)).then((function(e){return v.global=e,K({bidsBackHandler:t,timeout:g,adUnits:n,adUnitCodes:i,labels:a,auctionId:s,ttlBuffer:c,ortb2Fragments:v,metrics:p,defer:f})}))}),"requestBids"),(0,g.wrapHook)(W,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adUnits||D.adUnits;return e.adUnits=(0,d.isArray)(t)?t.slice():[t],e.metrics=(0,A.newMetrics)(),e.metrics.checkpoint("requestBids"),e.defer=(0,O.defer)({promiseFactory:function(e){return new Promise(e)}}),W.call(this,e),e.defer.promise})));var K=(0,g.hook)("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,r=e.timeout,n=e.adUnits,i=e.ttlBuffer,o=e.adUnitCodes,a=e.labels,s=e.auctionId,c=e.ortb2Fragments,u=e.metrics,g=e.defer,v=(0,I.getS2SBidderSet)(l.config.getConfig("s2sConfig")||[]);function h(e,r,n){if("function"==typeof t)try{t(e,r,n)}catch(e){(0,d.logError)("Error executing bidsBackHandler",null,e)}g.resolve({bids:e,timedOut:r,auctionId:n})}if(function(e){e.forEach((function(e){return(0,C.fillVideoDefaults)(e)}))}(n),(n=(0,A.useMetrics)(u).measureTime("requestBids.validate",(function(){return H(n)}))).forEach((function(e){var t,r,n=Object.keys(e.mediaTypes||{banner:"banner"}),o=e.bids.map((function(e){return e.bidder})),a=I.default.bidderRegistry,s=o.filter((function(e){return!v.has(e)})),c=(null===(t=e.ortb2Imp)||void 0===t||null===(r=t.ext)||void 0===r?void 0:r.tid)||(0,d.generateUUID)();e.transactionId=c,null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),(0,d.deepSetValue)(e,"ortb2Imp.ext.tid",c),s.forEach((function(t){var r=a[t],i=r&&r.getSpec&&r.getSpec(),o=i&&i.supportedMediaTypes||["banner"];n.some((function(e){return(0,m.includes)(o,e)}))?b.adunitCounter.incrementBidderRequestsCounter(e.code,t):((0,d.logWarn)((0,d.unsupportedBidderMessage)(e,t)),e.bids=e.bids.filter((function(e){return e.bidder!==t})))})),b.adunitCounter.incrementRequestsCounter(e.code)})),n&&0!==n.length){var y=p.auctionManager.createAuction({adUnits:n,adUnitCodes:o,callback:h,cbTimeout:r,labels:a,auctionId:s,ortb2Fragments:c,metrics:u}),E=n.length;E>15&&(0,d.logInfo)("Current auction ".concat(y.getAuctionId()," contains ").concat(E," adUnits."),n),o.forEach((function(e){return f.targeting.setLatestAuctionForAdUnit(e,y.getAuctionId())})),y.callBids()}else(0,d.logMessage)("No adUnits configured. No bids requested."),h()}),"startAuction");function J(e,t){function r(e){for(var t;t=e.shift();)t()}r(y.storageCallbacks),r(Q),e.call(this,t)}D.requestBids.before(J,49),D.addAdUnits=function(e){(0,d.logInfo)("Invoking pbjs.addAdUnits",arguments),D.adUnits.push.apply(D.adUnits,(0,d.isArray)(e)?e:[e]),_.emit(k)},D.onEvent=function(e,t,r){(0,d.logInfo)("Invoking pbjs.onEvent",arguments),(0,d.isFn)(t)?!r||U[e].call(null,r)?_.on(e,t,r):(0,d.logError)('The id provided is not valid for event "'+e+'" and no handler was set.'):(0,d.logError)('The event handler provided is not a function and was not set on event "'+e+'".')},D.offEvent=function(e,t,r){(0,d.logInfo)("Invoking pbjs.offEvent",arguments),r&&!U[e].call(null,r)||_.off(e,t,r)},D.getEvents=function(){return(0,d.logInfo)("Invoking pbjs.getEvents"),_.getEvents()},D.registerBidAdapter=function(e,t){(0,d.logInfo)("Invoking pbjs.registerBidAdapter",arguments);try{I.default.registerBidAdapter(e(),t)}catch(e){(0,d.logError)("Error registering bidder adapter : "+e.message)}},D.registerAnalyticsAdapter=function(e){(0,d.logInfo)("Invoking pbjs.registerAnalyticsAdapter",arguments);try{I.default.registerAnalyticsAdapter(e)}catch(e){(0,d.logError)("Error registering analytics adapter : "+e.message)}},D.createBid=function(e){return(0,d.logInfo)("Invoking pbjs.createBid",arguments),(0,h.createBid)(e)};var Q=[],X=(0,g.hook)("async",(function(e){e&&!(0,d.isEmpty)(e)?((0,d.logInfo)("Invoking pbjs.enableAnalytics for: ",e),I.default.enableAnalytics(e)):(0,d.logError)("pbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");D.enableAnalytics=function(e){Q.push(X.bind(this,e))},D.aliasBidder=function(e,t,r){(0,d.logInfo)("Invoking pbjs.aliasBidder",arguments),e&&t?I.default.aliasBidAdapter(e,t,r):(0,d.logError)("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},D.aliasRegistry=I.default.aliasRegistry,l.config.getConfig("aliasRegistry",(function(e){"private"===e.aliasRegistry&&delete D.aliasRegistry})),D.setBidsReceivedFilter=function(e){return p.auctionManager.setBidsReceivedFilter(e)},D.getAllWinningBids=function(){return p.auctionManager.getAllWinningBids()},D.getAllPrebidWinningBids=function(){return p.auctionManager.getBidsReceived().filter((function(e){return e.status===E.default.BID_STATUS.BID_TARGETING_SET}))},D.getHighestCpmBids=function(e){return f.targeting.getWinningBids(e)},D.getHighestCpmBidsForPoolId=function(e){return f.targeting.getWinningPoolIdBids(e)},D.markWinningBidAsUsed=function(e){var t=$(e,"Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function.");t.length>0&&p.auctionManager.addWinningBid(t[0])};var $=function(e,t){var r=[];return e.adUnitCode&&e.adId?r=p.auctionManager.getBidsReceived().filter((function(t){return t.adId===e.adId&&t.adUnitCode===e.adUnitCode})):(e.bidPoolId||e.passiveBidPoolId)&&e.adId?r=p.auctionManager.getBidsReceived().filter((function(t){return t.adId===e.adId&&(t.bidPoolId===e.bidPoolId||t.passiveBidPoolId===e.passiveBidPoolId)})):e.adUnitCode?r=f.targeting.getWinningBids(e.adUnitCode):e.adId?r=p.auctionManager.getBidsReceived().filter((function(t){return t.adId===e.adId})):e.bidPoolId||e.passiveBidPoolId?r=f.targeting.getWinningPoolIdBids(e.bidPoolId||e.passiveBidPoolId):(0,d.logWarn)(t),r};function Z(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){(0,d.logError)("Error processing command :","prebid.js",e)}}))}D.getConfig=l.config.getAnyConfig,D.readConfig=l.config.readAnyConfig,D.mergeConfig=l.config.mergeConfig,D.mergeBidderConfig=l.config.mergeBidderConfig,D.setConfig=l.config.setConfig,D.setBidderConfig=l.config.setBidderConfig,D.que.push((function(){return(0,c.listenMessagesFromCreative)()})),D.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){(0,d.logError)("Error processing command :",e.message,e.stack)}else(0,d.logError)("Commands written into pbjs.cmd.push must be wrapped in a function")},D.que.push=D.cmd.push,D.processQueue=function(){g.hook.ready(),Z(D.que),Z(D.cmd)},D.triggerBilling=function(e){var t=$(e,"Improper use of triggerBilling. It requires a bid with at least an adUnitCode or an adId to function."),r=t.find((function(t){return t.requestId===e.requestId}))||t[0];if(t.length>0&&r)try{I.default.callBidBillableBidder(r)}catch(e){(0,d.logError)("Error when triggering billing :",e)}else(0,d.logWarn)("The bid provided to triggerBilling did not match any bids received.")};var ee=D;t.Ay=ee},8851:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobal=function(){return n},t.registerModule=function(e){n.installedModules.push(e)};var r=window,n=r.pbjs=r.pbjs||{};n.cmd=n.cmd||[],n.que=n.que||[],r===window&&(r._pbjsGlobals=r._pbjsGlobals||[],r._pbjsGlobals.push("pbjs"))},4080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cacheWithLocation=c,t.detectReferer=d,t.ensureProtocol=o,t.getRefererInfo=void 0,t.parseDomain=a;var n=r(6522),i=r(1779);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return e;if(/\w+:\/\//.exec(e))return e;var r=t.location.protocol;try{r=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?r+e:"".concat(r,"//").concat(e)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.noLeadingWww,n=void 0!==r&&r,i=t.noPort,a=void 0!==i&&i;try{e=new URL(o(e))}catch(e){return}return e=a?e.hostname:e.host,n&&e.startsWith("www.")&&(e=e.substring(4)),e}function s(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}function d(e){return function(){var t,r,d,c,u=[],l=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(e),p=n.config.getConfig("maxNestedIframes"),f=!1,g=0,v=!1,m=!1,b=!1;do{var h=t,y=m,I=void 0,E=!1,_=null;m=!1,t=t?t.parent:e;try{I=t.location.href||null}catch(e){E=!0}if(E)if(y){var A=h.context;try{r=_=A.sourceUrl,b=!0,v=!0,t===e.top&&(f=!0),A.canonicalUrl&&(d=A.canonicalUrl)}catch(e){}}else{(0,i.logWarn)("Trying to access cross domain iframe. Continuing without referrer and location");try{var O=h.document.referrer;O&&(_=O,t===e.top&&(f=!0))}catch(e){}!_&&l&&l[g-1]&&(_=l[g-1],t===e.top&&(b=!0)),_&&!v&&(r=_)}else{if(I&&(r=_=I,v=!1,t===e.top)){f=!0;var S=s(t.document);S&&(d=S)}t.context&&t.context.sourceUrl&&(m=!0)}u.push(_),g++}while(t!==e.top&&g<p);u.reverse();try{c=e.top.document.referrer}catch(e){}var T=f||b?r:null,w=n.config.getConfig("pageUrl")||d||null,C=n.config.getConfig("pageUrl")||T||o(w,e);return T&&T.indexOf("?")>-1&&-1===C.indexOf("?")&&(C="".concat(C).concat(T.substring(T.indexOf("?")))),{reachedTop:f,isAmp:v,numIframes:g-1,stack:u,topmostLocation:r||null,location:T,canonicalUrl:w,page:C,domain:a(C)||null,ref:c||null,legacy:{reachedTop:f,isAmp:v,numIframes:g-1,stack:u,referer:r||null,canonicalUrl:w}}}}function c(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return i.top!==i?e:function(){var o=s(i.document),a=i.location.href;return t===o&&a===r||(t=o,r=a,n=e()),n}}var u=c(d(window));t.getRefererInfo=u},9375:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);Object.defineProperty(t,"__esModule",{value:!0}),t.getReplier=y,t.listenMessagesFromCreative=function(){window.addEventListener("message",I,!1)},t.receiveMessage=I,t.resizeRemoteCreative=E;var o,a=n(r(8212)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),d=r(4239),c=n(r(5404)),u=r(1779),l=r(6572),p=r(9635),f=r(8977),g=r(9344);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}var m=c.default.EVENTS.BID_WON,b=new WeakSet,h=(o={},(0,a.default)(o,g.PREBID_REQUEST,(function(e,t,r){(0,f.handleRender)((function(t){E(r),e(Object.assign({message:g.PREBID_RESPONSE},t))}),{options:t.options,adId:t.adId,bidResponse:r})})),(0,a.default)(o,g.PREBID_EVENT,(function(e,t,r){if(null==r)return void(0,u.logError)("Cannot find ad '".concat(t.adId,"' for x-origin event request"));if(r.status!==c.default.BID_STATUS.RENDERED)return(0,f.emitAdRenderFail)({bid:r,id:t.adId,reason:c.default.AD_RENDER_FAILED_REASON.EXCEPTION,message:t.info&&t.info.message}),void(0,u.logWarn)("Received x-origin event request without corresponding render request for ad '".concat(t.adId,"'"));switch(t.event){case c.default.EVENTS.AD_RENDER_FAILED:(0,f.emitAdRenderFail)({bid:r,id:t.adId,reason:t.info.reason,message:t.info&&t.info.message});break;case c.default.EVENTS.AD_RENDER_SUCCEEDED:(0,f.emitAdRenderSucceeded)({doc:null,bid:r,id:t.adId});break;default:(0,u.logError)("Received x-origin event request for unsupported event: '".concat(t.event,"' (adId: '").concat(t.adId,"')"))}})),o);function y(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw(0,u.logError)(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}function I(e){var t="request_ad"===e.data.message,r=e.message?"message":"data",n={};try{n=t?{adId:e.data.adId||e.data.id,message:"Prebid Request"}:JSON.parse(e[r])}catch(e){return}if(n&&n.adId&&n.message){var i=(0,p.find)(l.auctionManager.getBidsReceived(),(function(e){return e.adId===n.adId}));if(h.hasOwnProperty(n.message)){var o="Prebid Native"===n.message?y(e):e;h[n.message](o,n,i,t)}}}function E(e){var t=e.adId,r=e.adUnitCode,n=e.width,i=e.height;["div","iframe"].forEach((function(e){var o=function(e){var n=function(e,t){return(0,u.isGptPubadsDefined)()?function(e){var t=(0,p.find)(window.googletag.pubads().getSlots(),(function(t){return(0,p.find)(t.getTargetingKeys(),(function(r){return(0,p.includes)(t.getTargeting(r),e)}))}));return t?t.getSlotElementId():null}(e):(0,u.isApnGetTagDefined)()?function(e){var t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,r),i=document.getElementById(n);return i&&i.querySelector(e)}(e+':not([style*="display: none"])');if(o){var a=function(e){if(window.googletag)return(0,p.find)(window.googletag.pubads().getSlots(),(function(t){return(0,p.includes)(t.getTargeting("hb_instl"),"1")&&(0,p.includes)(t.getTargeting("hb_adid"),e)}))}(t),s=o.style;s.width=a?"100vw":n?n+"px":"100%",s.height=a?"100vh":i+"px"}else(0,u.logWarn)("Unable to locate matching page element for adUnitCode ".concat(r,".  Can't resize it to ad's dimensions.  Please review setup."))}))}Object.assign(h,(0,a.default)({},g.PREBID_NATIVE,(function(e,t,r){if(null==r)return void(0,u.logError)("Cannot find ad for x-origin event request: '".concat(t.adId,"'"));b.has(r)||(b.add(r),l.auctionManager.addWinningBid(r),s.emit(m,r));switch(t.action){case"assetRequest":e((0,d.getAssetMessage)(t,r));break;case"allAssetRequest":e((0,d.getAllAssetsMessage)(t,r));break;case"resizeNativeHeight":r.height=t.height,r.width=t.width,E(r);break;default:(0,d.fireNativeTrackers)(t,r)}})))},9084:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_TYPE_LOCALSTORAGE=t.STORAGE_TYPE_COOKIES=void 0,t.deviceAccessRule=h,t.getCoreStorageManager=function(e){return b({moduleName:e,moduleType:s.MODULE_TYPE_PREBID})},t.getStorageManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleType,r=e.moduleName,n=e.bidderCode;function i(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}n?((t&&t!==s.MODULE_TYPE_BIDDER||r)&&i(),t=s.MODULE_TYPE_BIDDER,r=n):r&&t||i();return b({moduleType:t,moduleName:r})},t.newStorageManager=b,t.resetData=function(){t.storageCallbacks=m=[]},t.storageAllowedRule=y,t.storageCallbacks=void 0;var i=n(r(8212)),o=r(1779),a=r(6059),s=r(7343),d=r(1681),c=r(8534),u=r(353),l=r(6522),p=n(r(1442)),f=r(9675),g="html5";t.STORAGE_TYPE_LOCALSTORAGE=g;var v="cookie";t.STORAGE_TYPE_COOKIES=v;var m=[];function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleName,r=e.moduleType,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isAllowed,a=void 0===n?d.isActivityAllowed:n;function b(e,n){var o=t,d=l.config.getCurrentBidder();return d&&r===s.MODULE_TYPE_BIDDER&&p.default.aliasRegistry[d]===t&&(o=d),e({valid:a(u.ACTIVITY_ACCESS_DEVICE,(0,f.activityParams)(r,o,(0,i.default)({},c.ACTIVITY_PARAM_STORAGE_TYPE,n)))})}function h(e,t,r){if(!r||"function"!=typeof r)return b(e,t);m.push((function(){var n=b(e,t);r(n)}))}var y=function(e){return h((function(e){if(e&&e.valid)try{return!!window.localStorage}catch(e){(0,o.logError)("Local storage api disabled")}return!1}),g,e)};return{setCookie:function(e,t,r,n,i,o){return h((function(o){if(o&&o.valid){var a=i&&""!==i?" ;domain=".concat(encodeURIComponent(i)):"",s=r&&""!==r?" ;expires=".concat(r):"",d=null!=n&&"none"==n.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(s,"; path=/").concat(a).concat(n?"; SameSite=".concat(n):"").concat(d)}}),v,o)},getCookie:function(e,t){return h((function(t){if(t&&t.valid){var r=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return r?decodeURIComponent(r[2]):null}return null}),v,t)},localStorageIsEnabled:function(e){return h((function(e){if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(e){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(e){}}return!1}),g,e)},cookiesAreEnabled:function(e){return h((function(e){return!(!e||!e.valid)&&(0,o.checkCookieSupport)()}),v,e)},setDataInLocalStorage:function(e,t,r){return h((function(r){r&&r.valid&&y()&&window.localStorage.setItem(e,t)}),g,r)},getDataFromLocalStorage:function(e,t){return h((function(t){return t&&t.valid&&y()?window.localStorage.getItem(e):null}),g,t)},removeDataFromLocalStorage:function(e,t){return h((function(t){t&&t.valid&&y()&&window.localStorage.removeItem(e)}),g,t)},hasLocalStorage:y,findSimilarCookies:function(e,t){return h((function(t){if(t&&t.valid){var r=[];if((0,o.hasDeviceAccess)())for(var n=document.cookie.split(";");n.length;){var i=n.pop(),a=i.indexOf("=");a=a<0?i.length:a,decodeURIComponent(i.slice(0,a).replace(/^\s+/,"")).indexOf(e)>=0&&r.push(decodeURIComponent(i.slice(a+1)))}return r}}),v,t)}}}function h(){if(!(0,o.hasDeviceAccess)())return{allow:!1}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.bidderSettings;if(e[c.ACTIVITY_PARAM_COMPONENT_TYPE]===s.MODULE_TYPE_BIDDER){var r=t.get(e[c.ACTIVITY_PARAM_ADAPTER_CODE],"storageAllowed");if(r&&!0!==r){var n=e[c.ACTIVITY_PARAM_STORAGE_TYPE];r=Array.isArray(r)?r.some((function(e){return e===n})):r===n}else r=!!r;return r?void 0:{allow:r}}}t.storageCallbacks=m,(0,d.registerActivityControl)(u.ACTIVITY_ACCESS_DEVICE,"deviceAccess config",h),(0,d.registerActivityControl)(u.ACTIVITY_ACCESS_DEVICE,"bidderSettings.*.storageAllowed",y)},8133:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);Object.defineProperty(t,"__esModule",{value:!0}),t.getHighestCpmBidsFromBidPool=t.filters=t.TARGETING_KEYS=void 0,t.isBidUsable=x,t.newTargeting=j,t.sortByDealAndPriceBucketOrCpm=R,t.targeting=void 0;var o=n(r(8212)),a=n(r(147)),s=r(1779),d=r(6522),c=r(4239),u=r(6572),l=r(6613),p=r(4627),f=r(6059),g=r(9635),v=n(r(5404)),m=r(7463),b=r(4545),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),y=r(8851);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}var E=[],_=(0,y.getGlobal)(),A=20,O="targetingControls.allowTargetingKeys",S="targetingControls.addTargetingKeys",T='Only one of "'.concat(O,'" or "').concat(S,'" can be set'),w=Object.keys(v.default.TARGETING_KEYS).map((function(e){return v.default.TARGETING_KEYS[e]}));t.TARGETING_KEYS=w;var C={isActualBid:function(e){return e.getStatusCode()===v.default.STATUS.GOOD},isBidNotExpired:function(e){return e.responseTimestamp+1e3*(0,b.getTTL)(e)>(0,s.timestamp)()},isUnusedBid:function(e){return e&&!e.sharedBidInUse&&(e.status&&!(0,g.includes)([v.default.BID_STATUS.RENDERED],e.status)||!e.status)}};function x(e){return!Object.values(C).some((function(t){return!t(e)}))}t.filters=C;var P=function(e,t){u.auctionManager.getBidsReceived().filter((function(r){return r.status!==v.default.BID_STATUS.RENDERED&&(r.bidPoolId===t||r.passiveBidPoolId===t)&&r.sharedBidInUse===e})).forEach((function(e){delete e.sharedBidInUse}))};h.on(v.default.EVENTS.BEFORE_REQUEST_BIDS,(function(e){e.forEach((function(e){var t=e.code,r=_.adUnits.filter((function(e){return e.code===t}));if(r.length){var n,i,o=null===(n=r[0])||void 0===n?void 0:n.passiveBidPoolId,a=null===(i=r[0])||void 0===i?void 0:i.bidPoolId;a&&P(t,a),o&&P(t,o)}}))})),h.on(v.default.EVENTS.BID_WON,(function(e){var t=e.sharedBidInUse,r=e.bidPoolId,n=e.passiveBidPoolId;setTimeout((function(){t&&r&&P(t,r),t&&n&&P(t,n)}),1e3)}));var D=(0,p.hook)("sync",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s.sortByHighestCpm;if(!i){var c=[],u=d.config.getConfig("sendBidsControl.dealPrioritization"),l=Object.keys(n),p=(0,s.groupBy)(e,"adUnitCode");return l.length&&(p=Object.keys(p).reduce((function(e,t){var r=!1;return l.forEach((function(i){if((0,g.includes)(n[i].codes,t)){var o=n[i].adUnit;e[o]||(e[o]=[]),e[o]=e[o].concat(p[t]),r=!0}})),r||(e[t]=p[t]),e}),{})),Object.keys(p).forEach((function(e){var n=[],i=(0,s.groupBy)(p[e],"bidderCode");Object.keys(i).forEach((function(e){return n.push(i[e].reduce(t))})),r>0?(n=u?n.sort(R(!0,o)):n.sort(o),c.push.apply(c,(0,a.default)(n.slice(0,r)))):c.push.apply(c,(0,a.default)(n))})),c}return e}));function R(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.sortByHighestCpm;return function(r,n){return void 0!==r.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===r.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?t(r,n):n.adserverTargeting.hb_pb-r.adserverTargeting.hb_pb}}function j(e){var t={},r={};function n(e,t,r){return e.adserverTargeting&&t&&((0,s.isArray)(t)&&(0,g.includes)(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t||Object.keys(r).some((function(t){return(0,g.includes)(r[t].codes,e.adUnitCode)})))}function i(t){return"string"==typeof t?[t]:(0,s.isArray)(t)?t:e.getAdUnitCodes()||[]}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.getOldestHighestCpmBid,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=e.getBidsReceived();if(d.config.getConfig("useBidCache")){var o=d.config.getConfig("bidCacheFilterFunction");"function"==typeof o&&(i=i.filter((function(e){return r[e.adUnitCode]===e.auctionId||!!o(e)})))}else i=i.filter((function(e){return r[e.adUnitCode]===e.auctionId}));return(i=i.filter((function(e){return(0,s.deepAccess)(e,"video.context")!==l.ADPOD})).filter(x)).forEach((function(e){return e.latestTargetedAuctionId=r[e.adUnitCode],e})),D(i,t,void 0,void 0,void 0,n)}function p(e){return e&&"string"==typeof e?[e]:(0,s.isArray)(e)?e:[]}function b(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m.getHighestCpm,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.sortByHighestCpm,c=t.getWinningBids(e,r,n,i,d),u=h();return e&&1===e.length&&Object.keys(n).length>0&&c.length>1&&(c=c.sort(d).slice(0,1)),c=c.map((function(e){return(0,o.default)({},e.adUnitCode,Object.keys(e.adserverTargeting).filter((function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===u.indexOf(t)})).reduce((function(t,r){var n=[e.adserverTargeting[r]],i=(0,o.default)({},r.substring(0,A),n);if(r===v.default.TARGETING_KEYS.DEAL){var s="".concat(r,"_").concat(e.bidderCode).substring(0,A),d=(0,o.default)({},s,n);return[].concat((0,a.default)(t),[i,d])}return[].concat((0,a.default)(t),[i])}),[]))})),c}function h(){return e.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(w).filter(s.uniques)}function y(){var e=h();return e=e.concat(c.NATIVE_TARGETING_KEYS),function(t){return-1===e.indexOf(t)}}function I(e){return(0,o.default)({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(y()).map((function(t){return(0,o.default)({},t.substring(0,A),[e.adserverTargeting[t]])})))}function C(e,t){return t.map((function(t){return(0,o.default)({},"".concat(t,"_").concat(e.bidderCode).substring(0,A),[e.adserverTargeting[t]])}))}return t.setLatestAuctionForAdUnit=function(e,t){r[e]=t},t.resetPresetTargeting=function(t,r){if((0,s.isGptPubadsDefined)()){var n=i(t),o=e.getAdUnits().filter((function(e){return(0,g.includes)(n,e.code)})),a=E.reduce((function(e,t){return e[t]=null,e}),{});window.googletag.pubads().getSlots().forEach((function(e){var t=(0,s.isFn)(r)&&r(e);o.forEach((function(r){(r.code===e.getAdUnitPath()||r.code===e.getSlotElementId()||(0,s.isFn)(t)&&t(r.code))&&e.updateTargetingFromMap(a)}))}))}},t.resetPresetTargetingAST=function(e){i(e).forEach((function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var r=Object.keys(t.keywords),n={};r.forEach((function(e){(0,g.includes)(E,e.toLowerCase())||(n[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:n})}}))},t.getAllTargeting=function(t,r,a){var l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=arguments.length>4?arguments[4]:void 0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:m.getHighestCpm,A=arguments.length>6&&void 0!==arguments[6]?arguments[6]:s.sortByHighestCpm;f||(f=u(h,A));var x=i(t),P=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};return e.forEach((function(e){var i;null!=e&&e.passiveBidPoolId&&(0,g.includes)(r,null==e?void 0:e.passiveBidPoolId)&&(n[null==e?void 0:e.passiveBidPoolId]=n[null==e?void 0:e.passiveBidPoolId]||{codes:[],adUnit:[]},n[null==e?void 0:e.passiveBidPoolId].codes.push(e.code),(0,g.includes)(t,e.code)&&!(0,g.includes)(null===(i=n[null==e?void 0:e.passiveBidPoolId])||void 0===i?void 0:i.adUnit,e.code)&&n[null==e?void 0:e.passiveBidPoolId].adUnit.push(e.code));null!=e&&e.bidPoolId&&(0,g.includes)(r,e.bidPoolId)&&(n[e.bidPoolId]=n[e.bidPoolId]||{codes:[],adUnit:[]},n[e.bidPoolId].codes.push(e.code),(0,g.includes)(t,e.code)&&!(0,g.includes)(n[e.bidPoolId].adUnit,e.code)&&n[e.bidPoolId].adUnit.push(e.code))})),n=Object.keys(n).reduce((function(e,t){return 1===n[t].adUnit.length&&(e[t]={codes:n[t].codes,adUnit:n[t].adUnit[0]}),e}),{}),n}(_.adUnits,x,p(r)),j=b(x,f,P,h,A).concat(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.keys(r),i=function(e,t){var r=!!n.length&&n.some((function(e){return e===t.bidPoolId||e===t.passiveBidPoolId}));return function(e,t,r){function n(e){return function(r){(0,s.isArray)(r.adserverTargeting[e])||(r.adserverTargeting[e]=[r.adserverTargeting[e]]),r.adserverTargeting[e]=r.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(s.uniques),delete t.adserverTargeting[e]}}function i(e){return function(r){return r.adUnitCode===t.adUnitCode&&r.adserverTargeting[e]}}function o(e){return function(r){return(r.bidPoolId===t.bidPoolId||r.passiveBidPoolId===t.passiveBidPoolId)&&r.adserverTargeting[e]}}var a=function(e){return r?o(e):i(e)};return Object.keys(t.adserverTargeting).filter(y()).forEach((function(t){e.length&&e.filter(a(t)).forEach(n(t))})),e.push(t),e}(e,t,r)};return t.filter((function(t){var r=!!n.length&&n.some((function(e){return e===t.bidPoolId||e===t.passiveBidPoolId}));return r||(0,g.includes)(e,t.adUnitCode)})).map((function(e){return Object.assign({},e)})).reduce(i,[]).map(I).filter((function(e){return e}))}(x,f,P)).concat(d.config.getConfig("enableSendAllBids")?function(e,t,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:m.getHighestCpm,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:s.sortByHighestCpm,p=w.concat(c.NATIVE_TARGETING_KEYS),f=d.config.getConfig("sendBidsControl.bidLimit"),g=f!==i&&i?i:f,b=D(t,u,g,r,void 0,l),h=d.config.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),y=h?h.map((function(e){return v.default.TARGETING_KEYS[e]})):p;return b.map((function(t){if(n(t,e,r))return t.bidPoolId&&a?t.sharedBidInUse=r[t.bidPoolId]?r[t.bidPoolId].adUnit:t.adUnitCode:t.passiveBidPoolId&&a&&(t.sharedBidInUse=r[t.passiveBidPoolId]?r[t.passiveBidPoolId].adUnit:t.adUnitCode),(0,o.default)({},t.adUnitCode,C(t,p.filter((function(e){return void 0!==t.adserverTargeting[e]&&-1!==y.indexOf(e)}))))})).filter((function(e){return e}))}(x,f,P,a,l,h,A):function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m.getHighestCpm,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s.sortByHighestCpm;if(!0===d.config.getConfig("targetingControls.alwaysIncludeDeals")){var l=w.concat(c.NATIVE_TARGETING_KEYS);return D(t,a,0,r,void 0,u).map((function(t){if(t.dealId&&n(t,e,r))return t.bidPoolId&&i?t.sharedBidInUse=r[t.bidPoolId]?r[t.bidPoolId].adUnit:t.adUnitCode:t.passiveBidPoolId&&i&&(t.sharedBidInUse=r[t.passiveBidPoolId]?r[t.passiveBidPoolId].adUnit:t.adUnitCode),(0,o.default)({},t.adUnitCode,C(t,l.filter((function(e){return void 0!==t.adserverTargeting[e]}))))})).filter((function(e){return e}))}return[]}(x,f,P,l,h,A)).concat(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function n(e){return(0,s.deepAccess)(e,v.default.JSON_MAPPING.ADSERVER_TARGETING)}function i(e){var t=n(e);return Object.keys(t).map((function(e){return(0,s.isStr)(t[e])&&(t[e]=t[e].split(",").map((function(e){return e.trim()}))),(0,s.isArray)(t[e])||(t[e]=[t[e]]),(0,o.default)({},e,t[e])}))}return e.getAdUnits().filter((function(e){var i=Object.keys(r),o=!!i.length&&i.some((function(t){return t===e.bidPoolId||t===e.passiveBidPoolId}));return(o||(0,g.includes)(t,e.code))&&n(e)})).map((function(e){return(0,o.default)({},e.code,i(e))}))}(x,P));j.map((function(e){Object.keys(e).map((function(t){e[t].map((function(e){var t=Object.keys(e);-1===E.indexOf(t[0])&&(E=t.concat(E))}))}))})),j=function(e,t){var r=[],n=Object.keys(t);return e.reduce((function(e,i){var a=Object.keys(i)[0],s=n.reduce((function(e,r){if((0,g.includes)(t[r].codes,a))return t[r]}),{});if(a&&n.length){var d=(0,o.default)({},s.adUnit,i[a]);r.push(d)}else e.push(i);return e}),[]).concat(r)}(j,P);var k=Object.keys(Object.assign({},v.default.DEFAULT_TARGETING_KEYS,v.default.NATIVE_KEYS)),N=d.config.getConfig(O),B=d.config.getConfig(S);if(null!=B&&null!=N)throw new Error(T);N=null!=B?k.concat(B):N||k,Array.isArray(N)&&N.length>0&&(j=function(e,t){var r=Object.assign({},v.default.TARGETING_KEYS,v.default.NATIVE_KEYS),n=Object.keys(r),i={};(0,s.logInfo)("allowTargetingKeys - allowed keys [ ".concat(t.map((function(e){return r[e]})).join(", ")," ]")),e.map((function(e){var o=Object.keys(e)[0],a=e[o].filter((function(e){var o=Object.keys(e)[0],a=0===n.filter((function(e){return 0===o.indexOf(r[e])})).length||(0,g.find)(t,(function(e){var t=r[e];return 0===o.indexOf(t)}));return i[o]=!a,a}));e[o]=a}));var o=Object.keys(i).filter((function(e){return i[e]}));return(0,s.logInfo)("allowTargetingKeys - removed keys [ ".concat(o.join(", ")," ]")),e.filter((function(e){return e[Object.keys(e)[0]].length>0}))}(j,N)),j=function(e){var t=e.map((function(e){return(0,o.default)({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return(0,o.default)({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))})).reduce((function(e,t){return Object.assign(t,e)}),{}))})).reduce((function(e,t){var r=Object.keys(t)[0];return e[r]=Object.assign({},e[r],t[r]),e}),{});return t}(j);var U=d.config.getConfig("targetingControls.auctionKeyMaxChars");return U&&((0,s.logInfo)("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(U," characters.  Running checks on auction keys...")),j=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.sortByHighestCpm,n=(0,s.deepClone)(e),i=Object.keys(n).map((function(e){return{adUnitCode:e,adserverTargeting:n[e]}})).sort(R(void 0,r));return i.reduce((function(e,r,i,o){var a,d=(a=r.adserverTargeting,Object.keys(a).reduce((function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(a[t]),"%26")}),""));i+1===o.length&&(d=d.slice(0,-3));var c=r.adUnitCode,u=d.length;return u<=t?(t-=u,(0,s.logInfo)("AdUnit '".concat(c,"' auction keys comprised of ").concat(u," characters.  Deducted from running threshold; new limit is ").concat(t),n[c]),e[c]=n[c]):(0,s.logWarn)("The following keys for adUnitCode '".concat(c,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(u,", the current allotted amount was ").concat(t,".\n"),n[c]),i+1===o.length&&0===Object.keys(e).length&&(0,s.logError)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}(j,U,A)),x.forEach((function(e){j[e]||(j[e]={})})),j},d.config.getConfig("targetingControls",(function(e){null!=(0,s.deepAccess)(e,O)&&null!=(0,s.deepAccess)(e,S)&&(0,s.logError)(T)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((function(r){Object.keys(e).filter(t?t(r):(0,s.isAdUnitCodeMatchingSlot)(r)).forEach((function(t){Object.keys(e[t]).forEach((function(r){var n=e[t][r];"string"==typeof n&&-1!==n.indexOf(",")&&(n=n.split(",")),e[t][r]=n})),(0,s.logMessage)("Attempting to set targeting-map for slot: ".concat(r.getSlotElementId()," with targeting-map:"),e[t]),r.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m.getHighestCpm,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.sortByHighestCpm,a=t||u(n,o),d=i(e),c=Object.keys(r);return a.filter((function(e){return!!c.length&&c.some((function(t){return t===e.bidPoolId||t===e.passiveBidPoolId}))||(0,g.includes)(d,e.adUnitCode)})).filter((function(e){return!0===f.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return!!c.length&&c.some((function(t){return t===e.bidPoolId||t===e.passiveBidPoolId}))&&(e.bidPoolId||e.passiveBidPoolId)||e.adUnitCode})).filter(s.uniques).map((function(e){return a.filter((function(t){return t.bidPoolId===e||t.passiveBidPoolId===e||t.adUnitCode===e?t:null})).reduce(n)}))},t.getWinningPoolIdBids=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.getHighestCpm,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.sortByHighestCpm,i=t||u(r,n),o=p(e),a=o.length>0;return i.filter((function(e){return(0,g.includes)(o,e.bidPoolId)||(0,g.includes)(o,e.passiveBidPoolId)})).filter((function(e){return!0===f.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return a?e.bidPoolId||e.passiveBidPoolId:e.adUnitCode})).filter(s.uniques).map((function(e){return i.filter((function(t){return a?t.bidPoolId===e||t.passiveBidPoolId===e?t:null:t.adUnitCode===e?t:null})).reduce(r)}))},t.setTargetingForAst=function(e,r){var n=t.getAllTargeting(e,r);try{t.resetPresetTargetingAST(e)}catch(e){(0,s.logError)("unable to reset targeting for AST"+e)}Object.keys(n).forEach((function(e){return Object.keys(n[e]).forEach((function(t){if((0,s.logMessage)("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),(0,s.isStr)(n[e][t])||(0,s.isArray)(n[e][t])){var r={};t.search(/pt[0-9]/)<0?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}}))}))},t.clearTargetingForSharedBidPool=function(e){var t=i(e);_.adUnits.forEach((function(e){if((0,g.includes)(t,e.code)){var r=e.bidPoolId,n=e.passiveBidPoolId,i=e.code;i&&r&&P(i,r),i&&n&&P(i,n)}}))},t.isApntagDefined=function(){if(window.apntag&&(0,s.isFn)(window.apntag.setKeywords))return!0},t}t.getHighestCpmBidsFromBidPool=D;var k=j(u.auctionManager);t.targeting=k},8072:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.USERSYNC_DEFAULT_CONFIG=void 0,t.newUserSync=b,t.userSync=void 0;var i=n(r(8212)),o=n(r(8832)),a=r(1779),s=r(6522),d=r(9635),c=r(9084),u=r(1681),l=r(353),p=r(8534),f=r(7343),g=r(9675),v={syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0};t.USERSYNC_DEFAULT_CONFIG=v,s.config.setDefaults({userSync:(0,a.deepClone)(v)});var m=(0,c.getCoreStorageManager)("usersync");function b(e){var t={},r={image:[],iframe:[]},n=new Set,c={},u={image:!0,iframe:!1},v=e.config;function m(){if(v.syncEnabled&&e.browserSupportsCookies){try{!function(){if(!u.iframe)return;b(r.iframe,(function(e){var t=(0,o.default)(e,2),n=t[0],i=t[1];(0,a.logMessage)("Invoking iframe user sync for bidder: ".concat(n)),(0,a.insertUserSyncIframe)(i),function(e,t){e.image=e.image.filter((function(e){return e[0]!==t}))}(r,n)}))}(),function(){if(!u.image)return;b(r.image,(function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];(0,a.logMessage)("Invoking image pixel user sync for bidder: ".concat(r)),(0,a.triggerPixel)(n)}))}()}catch(e){return(0,a.logError)("Error firing user syncs",e)}r={image:[],iframe:[]}}}function b(e,t){(0,a.shuffle)(e).forEach(t)}function h(e,t){var r=v.filterSettings;if(function(e,t){if(e.all&&e[t])return(0,a.logWarn)('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var r=e.all?e.all:e[t],n=e.all?"all":t;if(!r)return!1;var i=r.filter,o=r.bidders;if(i&&"include"!==i&&"exclude"!==i)return(0,a.logWarn)('UserSync "filterSettings.'.concat(n,".filter\" setting '").concat(i,"' is not a valid option; use either 'include' or 'exclude'.")),!1;if("*"!==o&&!(Array.isArray(o)&&o.length>0&&o.every((function(e){return(0,a.isStr)(e)&&"*"!==e}))))return(0,a.logWarn)('Detected an invalid setup in userSync "filterSettings.'.concat(n,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1;return!0}(r,e)){u[e]=!0;var n=r.all?r.all:r[e],i="*"===n.bidders?[t]:n.bidders,o={include:function(e,t){return!(0,d.includes)(e,t)},exclude:function(e,t){return(0,d.includes)(e,t)}};return o[n.filter||"include"](i,t)}return!u[e]}return s.config.getConfig("userSync",(function(e){if(e.userSync){var t=e.userSync.filterSettings;(0,a.isPlainObject)(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}v=Object.assign(v,e.userSync)})),e.regRule(l.ACTIVITY_SYNC_USER,"userSync config",(function(e){if(!v.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[p.ACTIVITY_PARAM_COMPONENT_TYPE]===f.MODULE_TYPE_BIDDER){var r=e[p.ACTIVITY_PARAM_SYNC_TYPE],n=e[p.ACTIVITY_PARAM_COMPONENT_NAME];if(!t.canBidderRegisterSync(r,n))return{allow:!1,reason:"".concat(r," syncs are not enabled for ").concat(n)}}})),t.registerSync=function(t,o,s){var d;return n.has(o)?(0,a.logMessage)('already fired syncs for "'.concat(o,'", ignoring registerSync call')):v.syncEnabled&&(0,a.isArray)(r[t])?o?0!==v.syncsPerBidder&&Number(c[o])>=v.syncsPerBidder?(0,a.logWarn)('Number of user syncs exceeded for "'.concat(o,'"')):void(e.isAllowed(l.ACTIVITY_SYNC_USER,(0,g.activityParams)(f.MODULE_TYPE_BIDDER,o,(d={},(0,i.default)(d,p.ACTIVITY_PARAM_SYNC_TYPE,t),(0,i.default)(d,p.ACTIVITY_PARAM_SYNC_URL,s),d)))&&(r[t].push([o,s]),c=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(c,o))):(0,a.logWarn)("Bidder is required for registering sync"):(0,a.logWarn)('User sync type "'.concat(t,'" not supported'))},t.bidderDone=n.add.bind(n),t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(m,Number(e));m()},t.triggerUserSyncs=function(){v.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!v.filterSettings||!h(e,t)},t}var h=b(Object.defineProperties({config:s.config.getConfig("userSync"),isAllowed:u.isActivityAllowed,regRule:u.registerActivityControl},{browserSupportsCookies:{get:function(){return!(0,a.isSafariBrowser)()&&m.cookiesAreEnabled()}}}));t.userSync=h},1779:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t._each=function(e,t){var r=this;if(K(null==e?void 0:e.forEach))return e.forEach(t,this);Object.entries(e||{}).forEach((function(e){var n=(0,s.default)(e,2),i=n[0],o=n[1];return t.call(r,o,i)}))},t._map=function(e,t){return K(null==e?void 0:e.map)?e.map(t):Object.entries(e||{}).map((function(r){var n=(0,s.default)(r,2),i=n[0],o=n[1];return t(o,i,e)}))},t._setEventEmitter=function(e){i=e},t.binarySearch=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},n=0,i=e.length&&e.length-1,o=r(t);for(;i-n>1;){var a=n+Math.round((i-n)/2);o>r(e[a])?n=a:i=a}for(;e.length>n&&o>r(e[n]);)n++;return n},t.buildUrl=function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(P.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")},t.callBurl=function(e){var t=e.source,r=e.burl;t===p.default.S2S.SRC&&r&&P.triggerPixel(r)},t.checkCookieSupport=ue,t.cleanObj=function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,s.default)(e,2);t[0];return void 0!==t[1]})))},t.compareCodeAndSlot=void 0,t.contains=function(e,t){return K(null==e?void 0:e.includes)&&e.includes(t)},t.createInvisibleIframe=H,t.createTrackPixelHtml=function(e){if(!e)return"";var t=encodeURI(e),r='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return r+='<img src="'+t+'"></div>'},t.createTrackPixelIframeHtml=re,t.cyrb53Hash=function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=function(e,t){if(K(Math.imul))return Math.imul(e,t);var r=(4194303&e)*(t|=0);return 4290772992&e&&(r+=(4290772992&e)*t|0),0|r},i=3735928559^r,o=1103547991^r,a=0;a<e.length;a++)i=n(i^(t=e.charCodeAt(a)),2654435761),o=n(o^t,1597334677);return i=n(i^i>>>16,2246822507)^n(o^o>>>13,3266489909),(4294967296*(2097151&(o=n(o^o>>>16,2246822507)^n(i^i>>>13,3266489909)))+(i>>>0)).toString()},t.debugTurnedOn=W,Object.defineProperty(t,"deepAccess",{enumerable:!0,get:function(){return v.default}}),t.deepClone=function(e){return(0,u.klona)(e)||{}},t.deepEqual=ve,Object.defineProperty(t,"deepSetValue",{enumerable:!0,get:function(){return m.dset}}),t.delayExecution=function(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got ".concat(t));var r=0;return function(){++r===t&&e.apply(this,arguments)}},t.flatten=ie,t.formatQS=ge,t.generateUUID=function e(t){return t?(t^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},t.getBidIdParameter=function(e,t){return(null==t?void 0:t[e])||""},t.getBidRequest=function(e,t){if(!e)return;return t.flatMap((function(e){return e.bids})).find((function(t){return["bidId","adId","bid_id"].some((function(r){return t[r]===e}))}))},t.getBidderCodes=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.adUnits).map((function(e){return e.bids.map((function(e){return e.bidder})).reduce(ie,[])})).reduce(ie,[]).filter((function(e){return void 0!==e})).filter(ne)},t.getDNT=function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},t.getDefinedParams=function(e,t){return t.filter((function(t){return e[t]})).reduce((function(t,r){return Object.assign(t,(0,a.default)({},r,e[r]))}),{})},t.getOldestHighestCpmBid=t.getLatestHighestCpmBid=t.getHighestCpm=void 0,t.getParameterByName=function(e){return fe(q().search)[e]||""},t.getPerformanceNow=function(){return window.performance&&window.performance.now&&window.performance.now()||0},t.getPrebidInternal=function(){return D},t.getUniqueIdentifierStr=k,t.getUserConfiguredParams=function(e,t,r){return e.filter((function(e){return e.code===t})).flatMap((function(e){return e.bids})).filter((function(e){return e.bidder===r})).map((function(e){return e.params||{}}))},t.getValue=function(e,t){return e[t]},t.getWindowLocation=q,t.getWindowSelf=M,t.getWindowTop=U,t.groupBy=function(e,t){return e.reduce((function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e}),{})},t.hasConsoleLogger=function(){return O},t.hasDeviceAccess=function(){return!1!==c.config.getConfig("deviceAccess")},t.inIframe=function(){try{return P.getWindowSelf()!==P.getWindowTop()}catch(e){return!0}},t.insertElement=$,t.insertHtmlIntoIframe=function(e){if(!e)return;var t=H();P.insertElement(t,document,"body"),r=t.contentWindow.document,r.open(),r.write(e),r.close();var r},t.insertUserSyncIframe=te,t.internal=void 0,t.isA=Y,t.isAdUnitCodeMatchingSlot=function(e){return function(t){return le(e,t)}},t.isApnGetTagDefined=function(){if(window.apntag&&K(window.apntag.getTag))return!0},t.isArray=void 0,t.isArrayOfNums=function(e,t){return Q(e)&&(!t||e.length===t)&&e.every((function(e){return pe(e)}))},t.isBoolean=function(e){return Y(e,E)},t.isEmpty=function(e){if(!e)return!0;if(Q(e)||J(e))return!(e.length>0);return Object.keys(e).length<=0},t.isEmptyStr=function(e){return J(e)&&(!e||0===e.length)},t.isFn=K,t.isGptPubadsDefined=function(){if(window.googletag&&K(window.googletag.pubads)&&K(window.googletag.pubads().getSlots))return!0},t.isInteger=void 0,t.isNumber=function(e){return Y(e,y)},t.isPlainObject=X,t.isSafariBrowser=function(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)},t.isStr=J,t.isValidMediaTypes=function(e){var t=["banner","native","video"];if(!Object.keys(e).every((function(e){return(0,l.includes)(t,e)})))return!1;if(e.video&&e.video.context)return(0,l.includes)(["instream","outstream","adpod"],e.video.context);return!0},t.logError=G,t.logInfo=L,t.logMessage=V,t.logWarn=F,t.memoize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=new Map,n=function(){var n=t.apply(this,arguments);return r.has(n)||r.set(n,e.apply(this,arguments)),r.get(n)};return n.clear=r.clear.bind(r),n},t.mergeDeep=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t;var s=n.shift();if(X(t)&&X(s)){var d=function(r){X(s[r])?(t[r]||Object.assign(t,(0,a.default)({},r,{})),e(t[r],s[r])):Q(s[r])?t[r]?Q(t[r])&&s[r].forEach((function(e){for(var n=1,i=0;i<t[r].length;i++)if(ve(t[r][i],e)){n=0;break}n&&t[r].push(e)})):Object.assign(t,(0,a.default)({},r,(0,o.default)(s[r]))):Object.assign(t,(0,a.default)({},r,s[r]))};for(var c in s)d(c)}return e.apply(void 0,[t].concat(n))},t.parseGPTSingleSizeArray=N,t.parseGPTSingleSizeArrayToRtbSize=function(e){if(B(e))return{w:e[0],h:e[1]}},t.parseQS=fe,t.parseQueryStringParameters=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t+=r+"="+encodeURIComponent(e[r])+"&");return t=t.replace(/&$/,"")},t.parseSizesInput=function(e){if("string"==typeof e)return e.split(",").filter((function(e){return e.match(/^(\d)+x(\d)+$/i)}));if("object"===(0,d.default)(e))return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?[N(e)]:e.map(N);return[]},t.parseUrl=function(e,t){var r=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?r.href=e:r.href=decodeURIComponent(e);var n=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:r.href,protocol:(r.protocol||"").replace(/:$/,""),hostname:r.hostname,port:+r.port,pathname:r.pathname.replace(/^(?!\/)/,"/"),search:n?r.search:P.parseQS(r.search||""),hash:(r.hash||"").replace(/^#/,""),host:r.host||window.location.host}},t.pick=function(e,t){if("object"!==(0,d.default)(e))return{};return t.reduce((function(r,n,i){if("function"==typeof n)return r;var o=n,a=n.match(/^(.+?)\sas\s(.+?)$/i);a&&(n=a[1],o=a[2]);var s=e[n];return"function"==typeof t[i+1]&&(s=t[i+1](s,r)),void 0!==s&&(r[o]=s),r}),{})},t.prefixLog=function(e){function t(t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(void 0,[e].concat(n))}}return{logError:t(G),logWarn:t(F),logMessage:t(V),logInfo:t(L)}},t.replaceAuctionPrice=function(e,t){return ce(e,{AUCTION_PRICE:t})},t.replaceClickThrough=function(e,t){if(!e||!t||"string"!=typeof t)return;return e.replace(/\${CLICKTHROUGH}/g,t)},t.replaceMacros=ce,t.safeJSONParse=function(e){try{return JSON.parse(e)}catch(e){}},t.setScriptAttributes=function(e,t){Object.entries(t).forEach((function(t){var r=(0,s.default)(t,2),n=r[0],i=r[1];return e.setAttribute(n,i)}))},t.shuffle=function(e){var t=e.length;for(;t>0;){var r=Math.floor(Math.random()*t),n=e[--t];e[t]=e[r],e[r]=n}return e},t.sortByHighestCpm=void 0,t.timestamp=function(){return(new Date).getTime()},t.transformAdServerTargetingObj=function(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&"):""},t.triggerPixel=ee,t.uniques=ne,t.unsupportedBidderMessage=function(e,t){var r=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(r," ad unit\n    containing bidders that don't support ").concat(r,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")},t.waitForElementToLoad=Z;var i,o=n(r(147)),a=n(r(8212)),s=n(r(8832)),d=n(r(4319)),c=r(6522),u=r(8518),l=r(9635),p=n(r(5404)),f=r(8145),g=r(8851),v=n(r(8928)),m=r(9927),b="String",h="Function",y="Number",I="Object",E="Boolean",_=Object.prototype.toString,A=Boolean(window.console),O=Boolean(A&&window.console.log),S=Boolean(A&&window.console.info),T=Boolean(A&&window.console.warn),w=Boolean(A&&window.console.error),C=(0,g.getGlobal)();function x(){null!=i&&i.apply(void 0,arguments)}var P={checkCookieSupport:ue,createTrackPixelIframeHtml:re,getWindowSelf:M,getWindowTop:U,getWindowLocation:q,insertUserSyncIframe:te,insertElement:$,isFn:K,triggerPixel:ee,logError:G,logWarn:F,logMessage:V,logInfo:L,parseQS:fe,formatQS:ge,deepEqual:ve};t.internal=P;var D={};var R,j=(R=0,function(){return++R});function k(){return j()+Math.random().toString(16).substr(2)}function N(e){if(B(e))return e[0]+"x"+e[1]}function B(e){return Q(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function U(){return window.top}function M(){return window.self}function q(){return window.location}function V(){W()&&O&&console.log.apply(console,z(arguments,"MESSAGE:"))}function L(){W()&&S&&console.info.apply(console,z(arguments,"INFO:"))}function F(){W()&&T&&console.warn.apply(console,z(arguments,"WARNING:")),x(p.default.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments})}function G(){W()&&w&&console.error.apply(console,z(arguments,"ERROR:")),x(p.default.EVENTS.AUCTION_DEBUG,{type:"ERROR",arguments})}function z(e,t){e=[].slice.call(e);var r=c.config.getCurrentBidder();return t&&e.unshift(t),r&&e.unshift(n("#aaa")),e.unshift(n("#3b88c3")),e.unshift("%cPrebid"+(r?"%c".concat(r):"")),e;function n(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function W(){return!!c.config.getConfig("debug")}function H(){var e=document.createElement("iframe");return e.id=k(),e.height=0,e.width=0,e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.scrolling="no",e.frameBorder="0",e.src="about:blank",e.style.display="none",e.style.height="0px",e.style.width="0px",e.allowtransparency="true",e}function Y(e,t){return _.call(e)==="[object "+t+"]"}function K(e){return Y(e,h)}function J(e){return Y(e,b)}var Q=Array.isArray.bind(Array);function X(e){return Y(e,I)}function $(e,t,r,n){var i;t=t||document,i=r?t.getElementsByTagName(r):t.getElementsByTagName("head");try{if((i=i.length?i:t.getElementsByTagName("body")).length){i=i[0];var o=n?null:i.firstChild;return i.insertBefore(e,o)}}catch(e){}}function Z(e,t){var r=null;return new f.GreedyPromise((function(n){var i=function t(){e.removeEventListener("load",t),e.removeEventListener("error",t),null!=r&&window.clearTimeout(r),n()};e.addEventListener("load",i),e.addEventListener("error",i),null!=t&&(r=window.setTimeout(i,t))}))}function ee(e,t,r){var n=new Image;t&&P.isFn(t)&&Z(n,r).then(t),n.src=e}function te(e,t,r){var n=P.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=n;var o=i.firstChild;t&&P.isFn(t)&&Z(o,r).then(t),P.insertElement(o,document,"html",!0)}function re(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e=encodeURI(e)),t&&(t='sandbox="'.concat(t,'"')),"<iframe ".concat(t,' id="').concat(k(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')):""}function ne(e,t,r){return r.indexOf(e)===t}function ie(e,t){return e.concat(t)}t.isArray=Q;var oe=de("timeToRespond",(function(e,t){return e>t}));t.getHighestCpm=oe;var ae=de("responseTimestamp",(function(e,t){return e>t}));t.getOldestHighestCpmBid=ae;var se=de("responseTimestamp",(function(e,t){return e<t}));function de(e,t){return function(r,n){return r.cpm===n.cpm?t(r[e],n[e])?n:r:r.cpm<n.cpm?n:r}}t.getLatestHighestCpmBid=se;function ce(e,t){if(e)return Object.entries(t).reduce((function(e,t){var r=(0,s.default)(t,2),n=r[0],i=r[1];return e.replace(new RegExp("\\$\\{"+n+"\\}","g"),i||"")}),e)}function ue(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}t.sortByHighestCpm=function(e,t){return t.cpm-e.cpm};var le=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t};t.compareCodeAndSlot=le;var pe=Number.isInteger.bind(Number);function fe(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var r=t.split("="),n=(0,s.default)(r,2),i=n[0],o=n[1];return/\[\]$/.test(i)?(e[i=i.replace("[]","")]=e[i]||[],e[i].push(o)):e[i]=o||"",e}),{}):{}}function ge(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"[]=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")}function ve(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkTypes,n=void 0!==r&&r;if(e===t)return!0;if("object"!==(0,d.default)(e)||null===e||"object"!==(0,d.default)(t)||null===t||n&&e.constructor!==t.constructor)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e){if(!t.hasOwnProperty(i))return!1;if(!ve(e[i],t[i],{checkTypes:n}))return!1}return!0}t.isInteger=pe},5926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustCpm=function(e,t,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=s.index,c=void 0===d?n.auctionManager.index:d,u=s.bs,l=void 0===u?i.bidderSettings:u;r=r||c.getBidRequest(t);var p=null==t?void 0:t.adapterCode,f=(null==t?void 0:t.bidderCode)||(null===(a=r)||void 0===a?void 0:a.bidder),g=l.get(null==t?void 0:t.adapterCode,"adjustAlternateBids"),v=l.getOwn(f,"bidCpmAdjustment")||l.get(g?p:f,"bidCpmAdjustment");if(v&&"function"==typeof v)try{return v(e,Object.assign({},t),r)}catch(e){(0,o.logError)("Error during bid adjustment",e)}return e};var n=r(6572),i=r(6059),o=r(1779)},8619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasPurpose1Consent=function(e){if(null!=e&&e.gdprApplies)return!0===(0,n.deepAccess)(e,"vendorData.purpose.consents.1");return!0};var n=r(1779)},1380:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG_TOGGLE=void 0,t.hookTimer=I,t.metricsFactory=l,t.timedBidResponseHook=t.timedAuctionHook=t.newMetrics=void 0,t.useMetrics=b;var i=n(r(8832)),o=r(6522);function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){d=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(d)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d="performanceMetrics";t.CONFIG_TOGGLE=d;var c=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},u=new WeakMap;function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.now,r=void 0===t?c:t,n=e.mkNode,i=void 0===n?g:n,o=e.mkTimer,a=void 0===o?f:o,s=e.mkRenamer,d=void 0===s?function(e){return e}:s,l=e.nodes,p=void 0===l?u:l;return function(){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(t){t(e)}}};n=d(n);var o,s=(o="timestamps",function(e){return t.dfWalk({visit:function(t,r){var n=r[o];if(n.hasOwnProperty(e))return n[e]}})});function c(e,r){var i=n(e);t.dfWalk({follow:function(e,t){return t.propagate&&(!e||!e.stopPropagation)},visit:function(e,t){i.forEach((function(n){null==e?t.metrics[n]=r:(t.groups.hasOwnProperty(n)||(t.groups[n]=[]),t.groups[n].push(r))}))}})}function u(e){return a(r,(function(t){return c(e,t)}))}function l(){var e={};return t.dfWalk({visit:function(t,r){e=Object.assign({},!t||t.includeGroups?r.groups:null,r.metrics,e)}}),e}var f={startTiming:u,measureTime:function(e,t){return u(e).stopAfter(t)()},measureHookTime:function(e,t,r){var n=u(e);return r(function(e){var t=n.stopBefore(e);return t.bail=e.bail&&n.stopBefore(e.bail),t.stopTiming=n,t.untimed=e,t}(t))},checkpoint:function(e){t.timestamps[e]=r()},timeSince:function(e,t){var n=s(e),i=null!=n?r()-n:null;return null!=t&&c(t,i),i},timeBetween:function(e,t,r){var n=s(e),i=s(t),o=null!=n&&null!=i?i-n:null;return null!=r&&c(r,o),o},setMetric:c,getMetrics:l,fork:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.propagate,a=void 0===o||o,s=r.stopPropagation,d=void 0!==s&&s,c=r.includeGroups;return e(i([[t,{propagate:a,stopPropagation:d,includeGroups:void 0!==c&&c}]]),n)},join:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.propagate,i=void 0===n||n,o=r.stopPropagation,a=void 0!==o&&o,s=r.includeGroups,d=void 0!==s&&s,c=p.get(e);null!=c&&c.addParent(t,{propagate:i,stopPropagation:a,includeGroups:d})},newMetrics:function(){return e(t.newSibling(),n)},renameWith:function(r){return e(t,r)},toJSON:function(){return l()}};return p.set(f,t),f}(i([]))}}function p(e,t,r){return function(){t&&t();try{return e.apply(this,arguments)}finally{r&&r()}}}function f(e,t){var r=e(),n=!1;function i(){n||(t(e()-r),n=!0)}return i.stopBefore=function(e){return p(e,i)},i.stopAfter=function(e){return p(e,null,i)},i}function g(e){return{metrics:{},timestamps:{},groups:{},addParent:function(t,r){e.push([t,r])},newSibling:function(){return g(e.slice())},dfWalk:function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.visit,o=r.follow,s=void 0===o?function(){return!0}:o,d=r.visited,c=void 0===d?new Set:d,u=r.inEdge;if(!c.has(this)){if(c.add(this),null!=(t=n(u,this)))return t;var l,p=a(e);try{for(p.s();!(l=p.n()).done;){var f=(0,i.default)(l.value,2),g=f[0],v=f[1];if(s(u,v)&&null!=(t=g.dfWalk({visit:n,follow:s,visited:c,inEdge:v})))return t}}catch(e){p.e(e)}finally{p.f()}}}}}var v=function(){var e=function(){},t=function(){return{}},r={forEach:e},n=function(){return null};n.stopBefore=function(e){return e},n.stopAfter=function(e){return e};var i=Object.defineProperties({dfWalk:e,newSibling:function(){return i},addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((function(e){return[e,{get:t}]}))));return l({now:function(){return 0},mkNode:function(){return i},mkRenamer:function(){return function(){return r}},mkTimer:function(){return n},nodes:{get:e,set:e}})()}(),m=!0;function b(e){return m&&e||v}o.config.getConfig(d,(function(e){m=!!e[d]}));var h,y=(h=l(),function(){return m?h():v});function I(e,t){return function(r,n){return function(i){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var d=this;return b(t.apply(d,a)).measureHookTime(e+r,i,(function(e){return n.call.apply(n,[d,e].concat(a))}))}}}t.newMetrics=y;var E=I("requestBids.",(function(e){return e.metrics}));t.timedAuctionHook=E;var _=I("addBidResponse.",(function(e,t){return t.metrics}));t.timedBidResponseHook=_},8145:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.GreedyPromise=void 0,t.defer=function(){var e,t,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).promiseFactory;function n(e){return function(t){return e(t)}}return{promise:(void 0===r?function(e){return new v(e)}:r)((function(r,n){e=r,t=n})),resolve:n(e),reject:n(t)}};var i=n(r(8832)),o=n(r(5018)),a=n(r(4668)),s=n(r(5093)),d=n(r(9905));function c(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function u(e,t,r){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),r}var l=0,p=1,f=new WeakMap,g=new WeakMap,v=function(){function e(t){if((0,o.default)(this,e),c(this,f,{writable:!0,value:void 0}),c(this,g,{writable:!0,value:void 0}),"function"!=typeof t)throw new Error("resolver not a function");var r=[],n=[],a=[l,p].map((function(e){return function(t){if(e===l&&"function"==typeof(null==t?void 0:t.then))t.then(u,v);else if(!r.length)for(r.push(e,t);n.length;)n.shift()()}})),s=(0,i.default)(a,2),u=s[0],v=s[1];try{t(u,v)}catch(e){v(e)}(0,d.default)(this,f,r),(0,d.default)(this,g,n)}return(0,a.default)(e,[{key:"then",value:function(e,t){var r=this,n=(0,s.default)(this,f);return new this.constructor((function(o,a){var d=function(){var r=n[1],s=n[0]===l?[e,o]:[t,a],d=(0,i.default)(s,2),c=d[0],u=d[1];if("function"==typeof c){try{r=c(r)}catch(e){return void a(e)}u=o}u(r)};n.length?d():(0,s.default)(r,g).push(d)}))}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var t,r=this;return this.then((function(r){return t=r,e()}),(function(n){return t=r.constructor.reject(n),e()})).then((function(){return t}))}}],[{key:"timeout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new e((function(e){0===t?e():setTimeout(e,t)}))}},{key:"race",value:function(t){var r=this;return new this((function(n,i){u(r,e,m).call(r,t,(function(e,t){return e?n(t):i(t)}))}))}},{key:"all",value:function(t){var r=this;return new this((function(n,i){var o=[];u(r,e,m).call(r,t,(function(e,t,r){return e?o[r]=t:i(t)}),(function(){return n(o)}))}))}},{key:"allSettled",value:function(t){var r=this;return new this((function(n){var i=[];u(r,e,m).call(r,t,(function(e,t,r){return i[r]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}}),(function(){return n(i)}))}))}},{key:"resolve",value:function(e){return new this((function(t){return t(e)}))}},{key:"reject",value:function(e){return new this((function(t,r){return r(e)}))}}]),e}();function m(e,t,r){var n=this,i=e.length;function o(){t.apply(this,arguments),--i<=0&&r&&r()}0===e.length&&r?r():e.forEach((function(e,t){return n.resolve(e).then((function(e){return o(!0,e,t)}),(function(e){return o(!1,e,t)}))}))}t.GreedyPromise=v},7463:(e,t)=>{"use strict";function r(e,t){return e===t?0:e<t?-1:1}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t,n){return r(e(t),e(n))}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return function(t,r){return-e(t,r)||0}}function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){for(var n=0,i=t;n<i.length;n++){var o=(0,i[n])(e,r);if(0!==o)return o}return 0}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return function(t,r){return e(r,t)<0?r:t}}function s(){return a(i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r))}Object.defineProperty(t,"__esModule",{value:!0}),t.getOldestHighestCpmBid=t.getLatestHighestCpmBid=t.getHighestCpm=void 0,t.keyCompare=n,t.maximum=s,t.minimum=a,t.reverseCompare=i,t.simpleCompare=r,t.tiebreakCompare=o;var d=n((function(e){return e.cpm})),c=n((function(e){return e.responseTimestamp})),u=s(o(d,i(n((function(e){return e.timeToRespond})))));t.getHighestCpm=u;var l=s(o(d,i(c)));t.getOldestHighestCpmBid=l;var p=s(o(d,c));t.getLatestHighestCpmBid=p},4628:(e,t,r)=>{"use strict";var n=r(4293);Object.defineProperty(t,"__esModule",{value:!0}),t.ttlCollection=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=n.startTime,u=void 0===c?s.timestamp:c,l=n.ttl,p=void 0===l?function(){return null}:l,f=n.monotonic,g=void 0!==f&&f,v=n.slack,m=void 0===v?5e3:v,b=new Map,h=[],y=g?function(e){return h.push(e)}:function(e){return h.splice((0,s.binarySearch)(h,e,(function(e){return e.expiry})),0,e)};function I(){if(r&&clearTimeout(r),h.length>0){var e=(0,s.timestamp)();t=Math.max(e,h[0].expiry+m),r=setTimeout((function(){for(var e=(0,s.timestamp)(),t=0,n=0,i=h;n<i.length;n++){var o=i[n];if(o.expiry>e)break;b.delete(o.item),t++}h.splice(0,t),r=null,I()}),t-e)}else r=null}function E(e){var n,i={},s=_;var d=Object.entries({start:u,delta:p}).map((function(d){var c,u=(0,o.default)(d,2),l=u[0],p=u[1];return function(){var o=c={};a.GreedyPromise.resolve(p(e)).then((function(e){o===c&&(i[l]=e,s===_&&null!=i.start&&null!=i.delta&&(n=i.start+i.delta,y(g),(null==r||t>n+m)&&I()))}))}})),c=(0,o.default)(d,2),l=c[0],f=c[1],g={item:e,refresh:f,get expiry(){return n}};return l(),f(),g}var _={};return e={},(0,i.default)(e,Symbol.iterator,(function(){return b.keys()})),(0,i.default)(e,"add",(function(e){!b.has(e)&&b.set(e,E(e))})),(0,i.default)(e,"clear",(function(){h.length=0,I(),b.clear(),_={}})),(0,i.default)(e,"toArray",(function(){return Array.from(b.keys())})),(0,i.default)(e,"refresh",(function(){h.length=0,I();var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(b.values());try{for(t.s();!(e=t.n()).done;){e.value.refresh()}}catch(e){t.e(e)}finally{t.f()}})),e};var i=n(r(8212)),o=n(r(8832)),a=r(8145),s=r(1779);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},4785:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkVideoBidSetup=t.OUTSTREAM=t.INSTREAM=void 0,t.fillVideoDefaults=function(e){var t,r=null==e||null===(t=e.mediaTypes)||void 0===t?void 0:t.video;null!=r&&null==r.plcmt&&(r.context===s||[2,3,4].includes(r.placement)?r.plcmt=4:r.context!==s&&[2,6].includes(r.playbackmethod)&&(r.plcmt=2))},t.isValidVideoBid=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=void 0===t?a.auctionManager.index:t,i=(0,n.deepAccess)(r.getMediaTypes(e),"video"),o=i&&(0,n.deepAccess)(i,"context"),s=i&&(0,n.deepAccess)(i,"useCacheKey"),c=r.getAdUnit(e);return d(e,c,i,o,s)};var n=r(1779),i=r(6522),o=r(4627),a=r(6572),s="outstream";t.OUTSTREAM=s;t.INSTREAM="instream";var d=(0,o.hook)("sync",(function(e,t,r,o,a){return r&&(a||o!==s)?i.config.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):((0,n.logError)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1):!(o===s&&!a)||!!(e.renderer||t&&t.renderer||r.renderer)}),"checkVideoBidSetup");t.checkVideoBidSetup=d},2331:(e,t,r)=>{"use strict";var n=r(4293),i=r(4319);Object.defineProperty(t,"__esModule",{value:!0}),t.getCacheUrl=function(e){return"".concat(a.config.getConfig("cache.url"),"?uuid=").concat(e)},t.store=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.ajaxBuilder,n={puts:e.map(p)};r(a.config.getConfig("cache.timeout"))(a.config.getConfig("cache.url"),function(e,t){return{success:function(t){var r;try{r=JSON.parse(t).responses}catch(t){return void e(t,[])}r?e(null,r):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(r,n){!function(e,t){var r=e.responseText,n=/cache element.\d+ exceeded max size: Payload size .\d+ exceeded max.\d+/;if(!r.match(n))return;var i=/(\d+)/g,o=r.match(i),a={bids:t,responseSize:o[1],maxSizeAllowed:o[2]};d.emit(c.default.EVENTS.VAST_EXCEEDED_LIMIT,a)}(n,t),e(new Error("Error storing video ad in the cache: ".concat(r,": ").concat(JSON.stringify(n))),[])}}}(t,e),JSON.stringify(n),{contentType:"text/plain",withCredentials:!0})};var o=r(6150),a=r(6522),s=r(6572),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(985)),c=n(r(5404));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=15;function p(e){var t,r,n,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,o=void 0===i?s.auctionManager.index:i,d=e.vastXml?e.vastXml:(t=e.vastUrl,r=e.vastImpUrl,n=r?"<![CDATA[".concat(r,"]]>"):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(t,"]]></VASTAdTagURI>\n        <Impression>").concat(n,"</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>")),c=o.getAuction(e),u={type:"xml",value:d,ttlseconds:Number(e.ttl)+l};return a.config.getConfig("cache.vasttrack")&&(u.bidder=e.bidder,u.bidid=e.requestId,u.aid=e.auctionId),null!=c&&(u.timestamp=c.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(u.key=e.customCacheKey),u}},9088:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){null!==e&&this.fromHexString(e)}return e.prototype.toHexString=function(){if(this.s<0)return"-"+this.negate().toHexString();var e,t=!1,r="",n=this.t,i=this.DB-n*this.DB%4;if(n-- >0)for(i<this.DB&&(e=this[n]>>i)>0&&(t=!0,r=l(e));n>=0;)i<4?(e=(this[n]&(1<<i)-1)<<4-i,e|=this[--n]>>(i+=this.DB-4)):(e=this[n]>>(i-=4)&15,i<=0&&(i+=this.DB,--n)),e>0&&(t=!0),t&&(r+=l(e));return t?r:"0"},e.prototype.fromHexString=function(t){if(null!==t){this.t=0,this.s=0;for(var r=t.length,n=!1,i=0;--r>=0;){var o=c(t,r);o<0?"-"==t.charAt(r)&&(n=!0):(n=!1,0==i?this[this.t++]=o:i+4>this.DB?(this[this.t-1]|=(o&(1<<this.DB-i)-1)<<i,this[this.t++]=o>>this.DB-i):this[this.t-1]|=o<<i,(i+=4)>=this.DB&&(i-=this.DB))}0,this.clamp(),n&&e.ZERO.subTo(this,this)}},e.prototype.negate=function(){var t=i();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.mod=function(t){var r=i();return this.abs().divRemTo(t,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&t.subTo(r,r),r},e.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},e.prototype.lShiftTo=function(e,t){for(var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(e/this.DB),a=this.s<<r&this.DM,s=this.t-1;s>=0;--s)t[s+o+1]=this[s]>>n|a,a=(this[s]&i)<<r;for(s=o-1;s>=0;--s)t[s]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},e.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},e.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},e.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},e.prototype.multiplyTo=function(t,r){var n=this.abs(),i=t.abs(),o=n.t;for(r.t=o+i.t;--o>=0;)r[o]=0;for(o=0;o<i.t;++o)r[o+n.t]=n.am(0,i[o],r,o,0,n.t);r.s=0,r.clamp(),this.s!=t.s&&e.ZERO.subTo(r,r)},e.prototype.divRemTo=function(t,r,n){var a=t.abs();if(!(a.t<=0)){var s=this.abs();if(s.t<a.t)return null!=r&&r.fromHexString("0"),void(null!=n&&this.copyTo(n));null==n&&(n=i());var d=i(),c=this.s,u=t.s,l=this.DB-o(a[a.t-1]);l>0?(a.lShiftTo(l,d),s.lShiftTo(l,n)):(a.copyTo(d),s.copyTo(n));var p=d.t,f=d[p-1];if(0!=f){var g=f*(1<<this.F1)+(p>1?d[p-2]>>this.F2:0),v=this.FV/g,m=(1<<this.F1)/g,b=1<<this.F2,h=n.t,y=h-p,I=null==r?i():r;for(d.dlShiftTo(y,I),n.compareTo(I)>=0&&(n[n.t++]=1,n.subTo(I,n)),e.ONE.dlShiftTo(p,I),I.subTo(d,d);d.t<p;)d[d.t++]=0;for(;--y>=0;){var E=n[--h]==f?this.DM:Math.floor(n[h]*v+(n[h-1]+b)*m);if((n[h]+=d.am(0,E,n,y,0,p))<E)for(d.dlShiftTo(y,I),n.subTo(I,n);n[h]<--E;)n.subTo(I,n)}null!=r&&(n.drShiftTo(p,r),c!=u&&e.ZERO.subTo(r,r)),n.t=p,n.clamp(),l>0&&n.rShiftTo(l,n),c<0&&e.ZERO.subTo(n,n)}}},e.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var a=r+1;a<this.t;++a)t[a-r-1]|=(this[a]&o)<<i,t[a-r]=this[a]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}},e.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},e.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},e.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},e.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new p(t):new f(t),this.exp(e,r)},e.prototype.exp=function(t,r){if(t>4294967295||t<1)return e.ONE;var n=i(),a=i(),s=r.convert(this),d=o(t)-1;for(s.copyTo(n);--d>=0;)if(r.sqrTo(n,a),(t&1<<d)>0)r.mulTo(a,s,n);else{var c=n;n=a,a=c}return r.revert(n)},e.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},e.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},e.prototype.am1=function(e,t,r,n,i,o){for(;--o>=0;){var a=t*this[e++]+r[n]+i;i=Math.floor(a/67108864),r[n++]=67108863&a}return i},e.prototype.am2=function(e,t,r,n,i,o){for(var a=32767&t,s=t>>15;--o>=0;){var d=32767&this[e],c=this[e++]>>15,u=s*d+c*a;i=((d=a*d+((32767&u)<<15)+r[n]+(1073741823&i))>>>30)+(u>>>15)+s*c+(i>>>30),r[n++]=1073741823&d}return i},e.prototype.am3=function(e,t,r,n,i,o){for(var a=16383&t,s=t>>14;--o>=0;){var d=16383&this[e],c=this[e++]>>14,u=s*d+c*a;i=((d=a*d+((16383&u)<<14)+r[n]+i)>>28)+(u>>14)+s*c,r[n++]=268435455&d}return i},e}();function i(){return new n(null)}function o(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}t.BigInteger=n,t.nbi=i,t.nbits=o;var a,s,d=[];for(a="0".charCodeAt(0),s=0;s<=9;++s)d[a++]=s;for(a="a".charCodeAt(0),s=10;s<36;++s)d[a++]=s;for(a="A".charCodeAt(0),s=10;s<36;++s)d[a++]=s;function c(e,t){var r=d[e.charCodeAt(t)];return null==r?-1:r}t.intAt=c;var u="0123456789abcdefghijklmnopqrstuvwxyz";function l(e){return u.charAt(e)}t.int2char=l;t.b64toHex=function(e){var t,r="",n=0,i=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t));o<0||(0==n?(r+=l(o>>2),i=3&o,n=1):1==n?(r+=l(i<<2|o>>4),i=15&o,n=2):2==n?(r+=l(i),r+=l(o>>2),i=3&o,n=3):(r+=l(i<<2|o>>4),r+=l(15&o),n=0))}return 1==n&&(r+=l(i<<2)),r},t.removeExtraSymbols=function(e){return e.replace(/^1f+00/,"").replace("3031300d060960864801650304020105000420","")};var p=function(){function e(e){this.m=e}return e.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},e.prototype.revert=function(e){return e},e.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},e.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}(),f=function(){function e(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}return e.prototype.convert=function(e){var t=i();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(n.ZERO)>0&&this.m.subTo(t,t),t},e.prototype.revert=function(e){var t=i();return e.copyTo(t),this.reduce(t),t},e.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},e.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}();function g(e){var t=i();return t.fromHexString(e.toString()),t}t.nbv=g,n.ZERO=g(0),n.ONE=g(1),"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=n.prototype.am2,r=30):"Netscape"!=navigator.appName?(n.prototype.am=n.prototype.am1,r=26):(n.prototype.am=n.prototype.am3,r=28),n.prototype.DB=r,n.prototype.DM=(1<<r)-1,n.prototype.DV=1<<r;n.prototype.FV=Math.pow(2,52),n.prototype.F1=52-r,n.prototype.F2=2*r-52},1456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.hash=function(t){t=e.utf8Encode(t||"");for(var r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=(t+=String.fromCharCode(128)).length/4+2,o=Math.ceil(i/16),a=new Array(o),s=0;s<o;s++){a[s]=new Array(16);for(var d=0;d<16;d++)a[s][d]=t.charCodeAt(64*s+4*d)<<24|t.charCodeAt(64*s+4*d+1)<<16|t.charCodeAt(64*s+4*d+2)<<8|t.charCodeAt(64*s+4*d+3)}var c=8*(t.length-1)/Math.pow(2,32),u=8*(t.length-1)>>>0;a[o-1][14]=Math.floor(c),a[o-1][15]=u;for(s=0;s<o;s++){for(var l=new Array(64),p=0;p<16;p++)l[p]=a[s][p];for(p=16;p<64;p++)l[p]=e.q1(l[p-2])+l[p-7]+e.q0(l[p-15])+l[p-16]>>>0;var f=n[0],g=n[1],v=n[2],m=n[3],b=n[4],h=n[5],y=n[6],I=n[7];for(p=0;p<64;p++){var E=I+e.z1(b)+e.Ch(b,h,y)+r[p]+l[p],_=e.z0(f)+e.Maj(f,g,v);I=y,y=h,h=b,b=m+E>>>0,m=v,v=g,g=f,f=E+_>>>0}n[0]=n[0]+f>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+m>>>0,n[4]=n[4]+b>>>0,n[5]=n[5]+h>>>0,n[6]=n[6]+y>>>0,n[7]=n[7]+I>>>0}var A=new Array(n.length);for(I=0;I<n.length;I++)A[I]=("00000000"+n[I].toString(16)).slice(-8);return A.join("")},e.utf8Encode=function(e){try{return(new TextEncoder).encode(e).reduce((function(e,t){return e+String.fromCharCode(t)}),"")}catch(t){return unescape(encodeURIComponent(e))}},e.ROTR=function(e,t){return t>>>e|t<<32-e},e.z0=function(t){return e.ROTR(2,t)^e.ROTR(13,t)^e.ROTR(22,t)},e.z1=function(t){return e.ROTR(6,t)^e.ROTR(11,t)^e.ROTR(25,t)},e.q0=function(t){return e.ROTR(7,t)^e.ROTR(18,t)^t>>>3},e.q1=function(t){return e.ROTR(17,t)^e.ROTR(19,t)^t>>>10},e.Ch=function(e,t,r){return e&t^~e&r},e.Maj=function(e,t,r){return e&t^e&r^t&r},e}();t.Sha256=r},9882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9088),i=r(1456);t.verify=function(e,t,r,o){var a=new n.BigInteger(n.b64toHex(t)),s=new n.BigInteger(n.b64toHex(r)),d=a.modPowInt(o,s);return n.removeExtraSymbols(d.toHexString())===i.Sha256.hash(e)}},8928:(e,t,r)=>{"use strict";function n(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}r.r(t),r.d(t,{default:()=>n})},9927:(e,t)=>{t.dset=function(e,t,r){t.split&&(t=t.split("."));for(var n,i,o=0,a=t.length,s=e;o<a&&"__proto__"!==(i=t[o++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=o===a?r:typeof(n=s[i])==typeof t?n:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}},5481:e=>{s.SYNC=1,s.ASYNC=2,s.QUEUE=4;var t="fun-hooks";var r=Object.freeze({useProxy:!0,ready:0}),n=new WeakMap,i="2,1,0"===[1].reduce((function(e,t,r){return[e,t,r]}),2).toString()?Array.prototype.reduce:function(e,t){var r,n=Object(this),i=n.length>>>0,o=0;if(t)r=t;else{for(;o<i&&!(o in n);)o++;r=n[o++]}for(;o<i;)o in n&&(r=e(r,n[o],o,n)),o++;return r};function o(e,t){return Array.prototype.slice.call(e,t)}var a=Object.assign||function(e){return i.call(o(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(r){e[r]=t[r]})),e}),e)};function s(e){var d,c={},u=[];function l(e,t){return"function"==typeof e?v.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?v.apply(null,arguments):"object"==typeof e?p.apply(null,arguments):void 0}function p(e,t,r){var n=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),n=!1);var i={},o=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==o.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var n=t.split(":"),o=n[0],a=n[1]||"sync";if(!i[o]){var s=e[o];i[o]=e[o]=v(a,s,r?[r,o]:void 0)}})),e=Object.getPrototypeOf(e)}while(n&&e);return i}function f(e){var r=Array.isArray(e)?e:e.split(".");return i.call(r,(function(n,i,o){var a=n[i],s=!1;return a||(o===r.length-1?(d||u.push((function(){s||console.warn(t+": referenced '"+e+"' but it was never created")})),n[i]=g((function(e){n[i]=e,s=!0}))):n[i]={})}),c)}function g(e){var t=[],r=[],i=function(){},o={before:function(e,r){return d.call(this,t,"before",e,r)},after:function(e,t){return d.call(this,r,"after",e,t)},getHooks:function(e){var n=t.concat(r);"object"==typeof e&&(n=n.filter((function(t){return Object.keys(e).every((function(r){return t[r]===e[r]}))})));try{a(n,{remove:function(){return n.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return n},removeAll:function(){return this.getHooks().remove()}},s={install:function(n,o,a){this.type=n,i=a,a(t,r),e&&e(o)}};return n.set(o.after,s),o;function d(e,n,o,a){var s={hook:o,type:n,priority:a||10,remove:function(){var n=e.indexOf(s);-1!==n&&(e.splice(n,1),i(t,r))}};return e.push(s),e.sort((function(e,t){return t.priority-e.priority})),i(t,r),this}}function v(r,i,c){var l=i.after&&n.get(i.after);if(l){if(l.type!==r)throw t+": recreated hookable with different type";return i}var p,v,m=c?f(c):g(),b={get:function(e,t){return m[t]||Reflect.get.apply(Reflect,arguments)}};return d||u.push(h),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?v=new Proxy(i,b):(v=function(){return b.apply?b.apply(i,this,o(arguments)):i.apply(this,arguments)},a(v,m)),n.get(v.after).install(r,v,(function(e,t){var n,i=[];e.length||t.length?(e.forEach(a),n=i.push(void 0)-1,t.forEach(a),p=function(e,t,a){var s,d=0,c="async"===r&&"function"==typeof a[a.length-1]&&a.pop();function u(e){"sync"===r?s=e:c&&c.apply(null,arguments)}function l(e){if(i[d]){var n=o(arguments);return l.bail=u,n.unshift(l),i[d++].apply(t,n)}"sync"===r?s=e:c&&c.apply(null,arguments)}return i[n]=function(){var n=o(arguments,1);"async"===r&&c&&(delete l.bail,n.push(l));var i=e.apply(t,n);"sync"===r&&l(i)},l.apply(null,a),s}):p=void 0;function a(e){i.push(e.hook)}h()})),v;function h(){!d&&("sync"!==r||e.ready&s.SYNC)&&("async"!==r||e.ready&s.ASYNC)?"sync"!==r&&e.ready&s.QUEUE?b.apply=function(){var e=arguments;u.push((function(){v.apply(e[1],e[2])}))}:b.apply=function(){throw t+": hooked function not ready"}:b.apply=p}}return(e=a({},r,e)).ready?l.ready=function(){d=!0,function(e){for(var t;t=e.shift();)t()}(u)}:d=!0,l.get=f,l}e.exports=s},8518:(e,t)=>{t.klona=function e(t){var r,n,i;if(Array.isArray(t)){for(n=Array(r=t.length);r--;)n[r]=(i=t[r])&&"object"==typeof i?e(i):i;return n}if("[object Object]"===Object.prototype.toString.call(t)){for(r in n={},t)"__proto__"===r?Object.defineProperty(n,r,{value:e(t[r]),configurable:!0,enumerable:!0,writable:!0}):n[r]=(i=t[r])&&"object"==typeof i?e(i):i;return n}return t}},3103:(e,t,r)=>{var n=r(4715)(r(8942),"DataView");e.exports=n},5098:(e,t,r)=>{var n=r(3305),i=r(9361),o=r(1112),a=r(5276),s=r(5071);function d(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=i,d.prototype.get=o,d.prototype.has=a,d.prototype.set=s,e.exports=d},1386:(e,t,r)=>{var n=r(2393),i=r(2049),o=r(7144),a=r(7452),s=r(3964);function d(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=i,d.prototype.get=o,d.prototype.has=a,d.prototype.set=s,e.exports=d},9770:(e,t,r)=>{var n=r(4715)(r(8942),"Map");e.exports=n},8250:(e,t,r)=>{var n=r(9753),i=r(5681),o=r(88),a=r(4732),s=r(9068);function d(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=i,d.prototype.get=o,d.prototype.has=a,d.prototype.set=s,e.exports=d},9413:(e,t,r)=>{var n=r(4715)(r(8942),"Promise");e.exports=n},4512:(e,t,r)=>{var n=r(4715)(r(8942),"Set");e.exports=n},1340:(e,t,r)=>{var n=r(1386),i=r(4103),o=r(4160),a=r(4162),s=r(7462),d=r(6638);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=d,e.exports=c},5650:(e,t,r)=>{var n=r(8942).Symbol;e.exports=n},1623:(e,t,r)=>{var n=r(8942).Uint8Array;e.exports=n},9270:(e,t,r)=>{var n=r(4715)(r(8942),"WeakMap");e.exports=n},9968:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},9847:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}},358:(e,t,r)=>{var n=r(6137),i=r(3283),o=r(3142),a=r(5853),s=r(9632),d=r(8666),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),u=!r&&i(e),l=!r&&!u&&a(e),p=!r&&!u&&!l&&d(e),f=r||u||l||p,g=f?n(e.length,String):[],v=g.length;for(var m in e)!t&&!c.call(e,m)||f&&("length"==m||l&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||g.push(m);return g}},1129:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},3422:(e,t,r)=>{var n=r(7073),i=r(6285),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var a=e[t];o.call(e,t)&&i(a,r)&&(void 0!==r||t in e)||n(e,t,r)}},7034:(e,t,r)=>{var n=r(6285);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},7930:(e,t,r)=>{var n=r(9032),i=r(1211);e.exports=function(e,t){return e&&n(t,i(t),e)}},125:(e,t,r)=>{var n=r(9032),i=r(5288);e.exports=function(e,t){return e&&n(t,i(t),e)}},7073:(e,t,r)=>{var n=r(2532);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},9334:(e,t,r)=>{var n=r(1340),i=r(9968),o=r(3422),a=r(7930),s=r(125),d=r(7099),c=r(4354),u=r(3546),l=r(4733),p=r(393),f=r(3650),g=r(8486),v=r(7350),m=r(424),b=r(5964),h=r(3142),y=r(5853),I=r(7681),E=r(1580),_=r(3943),A=r(1211),O=r(5288),S="[object Arguments]",T="[object Function]",w="[object Object]",C={};C[S]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[w]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[T]=C["[object WeakMap]"]=!1,e.exports=function e(t,r,x,P,D,R){var j,k=1&r,N=2&r,B=4&r;if(x&&(j=D?x(t,P,D,R):x(t)),void 0!==j)return j;if(!E(t))return t;var U=h(t);if(U){if(j=v(t),!k)return c(t,j)}else{var M=g(t),q=M==T||"[object GeneratorFunction]"==M;if(y(t))return d(t,k);if(M==w||M==S||q&&!D){if(j=N||q?{}:b(t),!k)return N?l(t,s(j,t)):u(t,a(j,t))}else{if(!C[M])return D?t:{};j=m(t,M,k)}}R||(R=new n);var V=R.get(t);if(V)return V;R.set(t,j),_(t)?t.forEach((function(n){j.add(e(n,r,x,n,t,R))})):I(t)&&t.forEach((function(n,i){j.set(i,e(n,r,x,i,t,R))}));var L=U?void 0:(B?N?f:p:N?O:A)(t);return i(L||t,(function(n,i){L&&(n=t[i=n]),o(j,i,e(n,r,x,i,t,R))})),j}},9747:(e,t,r)=>{var n=r(1580),i=Object.create,o=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=o},8244:(e,t,r)=>{var n=r(1129),i=r(3142);e.exports=function(e,t,r){var o=t(e);return i(e)?o:n(o,r(e))}},7379:(e,t,r)=>{var n=r(5650),i=r(8870),o=r(9005),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},6027:(e,t,r)=>{var n=r(7379),i=r(547);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},777:(e,t,r)=>{var n=r(8486),i=r(547);e.exports=function(e){return i(e)&&"[object Map]"==n(e)}},9624:(e,t,r)=>{var n=r(3655),i=r(4759),o=r(1580),a=r(4066),s=/^\[object .+?Constructor\]$/,d=Function.prototype,c=Object.prototype,u=d.toString,l=c.hasOwnProperty,p=RegExp("^"+u.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(n(e)?p:s).test(a(e))}},1935:(e,t,r)=>{var n=r(8486),i=r(547);e.exports=function(e){return i(e)&&"[object Set]"==n(e)}},674:(e,t,r)=>{var n=r(7379),i=r(5387),o=r(547),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[n(e)]}},195:(e,t,r)=>{var n=r(4882),i=r(8121),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},7200:(e,t,r)=>{var n=r(1580),i=r(4882),o=r(8546),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=i(e),r=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&r.push(s);return r}},6137:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},9460:e=>{e.exports=function(e){return function(t){return e(t)}}},8898:(e,t,r)=>{var n=r(1623);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},7099:(e,t,r)=>{e=r.nmd(e);var n=r(8942),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}},2480:(e,t,r)=>{var n=r(8898);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},8340:e=>{var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},8069:(e,t,r)=>{var n=r(5650),i=n?n.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},2264:(e,t,r)=>{var n=r(8898);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},4354:e=>{e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},9032:(e,t,r)=>{var n=r(3422),i=r(7073);e.exports=function(e,t,r,o){var a=!r;r||(r={});for(var s=-1,d=t.length;++s<d;){var c=t[s],u=o?o(r[c],e[c],c,r,e):void 0;void 0===u&&(u=e[c]),a?i(r,c,u):n(r,c,u)}return r}},3546:(e,t,r)=>{var n=r(9032),i=r(7979);e.exports=function(e,t){return n(e,i(e),t)}},4733:(e,t,r)=>{var n=r(9032),i=r(5832);e.exports=function(e,t){return n(e,i(e),t)}},1950:(e,t,r)=>{var n=r(8942)["__core-js_shared__"];e.exports=n},2532:(e,t,r)=>{var n=r(4715),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},4967:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},393:(e,t,r)=>{var n=r(8244),i=r(7979),o=r(1211);e.exports=function(e){return n(e,o,i)}},3650:(e,t,r)=>{var n=r(8244),i=r(5832),o=r(5288);e.exports=function(e){return n(e,o,i)}},4700:(e,t,r)=>{var n=r(9067);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},4715:(e,t,r)=>{var n=r(9624),i=r(155);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},4784:(e,t,r)=>{var n=r(3766)(Object.getPrototypeOf,Object);e.exports=n},8870:(e,t,r)=>{var n=r(5650),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=a.call(e);return n&&(t?e[s]=r:delete e[s]),i}},7979:(e,t,r)=>{var n=r(9847),i=r(9306),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},5832:(e,t,r)=>{var n=r(1129),i=r(4784),o=r(7979),a=r(9306),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,o(e)),e=i(e);return t}:a;e.exports=s},8486:(e,t,r)=>{var n=r(3103),i=r(9770),o=r(9413),a=r(4512),s=r(9270),d=r(7379),c=r(4066),u="[object Map]",l="[object Promise]",p="[object Set]",f="[object WeakMap]",g="[object DataView]",v=c(n),m=c(i),b=c(o),h=c(a),y=c(s),I=d;(n&&I(new n(new ArrayBuffer(1)))!=g||i&&I(new i)!=u||o&&I(o.resolve())!=l||a&&I(new a)!=p||s&&I(new s)!=f)&&(I=function(e){var t=d(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case v:return g;case m:return u;case b:return l;case h:return p;case y:return f}return t}),e.exports=I},155:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},3305:(e,t,r)=>{var n=r(4497);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},9361:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},1112:(e,t,r)=>{var n=r(4497),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},5276:(e,t,r)=>{var n=r(4497),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},5071:(e,t,r)=>{var n=r(4497);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},7350:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},424:(e,t,r)=>{var n=r(8898),i=r(2480),o=r(8340),a=r(8069),s=r(2264);e.exports=function(e,t,r){var d=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new d(+e);case"[object DataView]":return i(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,r);case"[object Map]":case"[object Set]":return new d;case"[object Number]":case"[object String]":return new d(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},5964:(e,t,r)=>{var n=r(9747),i=r(4784),o=r(4882);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:n(i(e))}},9632:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},9067:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4759:(e,t,r)=>{var n,i=r(1950),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},4882:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},2393:e=>{e.exports=function(){this.__data__=[],this.size=0}},2049:(e,t,r)=>{var n=r(7034),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},7144:(e,t,r)=>{var n=r(7034);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},7452:(e,t,r)=>{var n=r(7034);e.exports=function(e){return n(this.__data__,e)>-1}},3964:(e,t,r)=>{var n=r(7034);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},9753:(e,t,r)=>{var n=r(5098),i=r(1386),o=r(9770);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},5681:(e,t,r)=>{var n=r(4700);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},88:(e,t,r)=>{var n=r(4700);e.exports=function(e){return n(this,e).get(e)}},4732:(e,t,r)=>{var n=r(4700);e.exports=function(e){return n(this,e).has(e)}},9068:(e,t,r)=>{var n=r(4700);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},4497:(e,t,r)=>{var n=r(4715)(Object,"create");e.exports=n},8121:(e,t,r)=>{var n=r(3766)(Object.keys,Object);e.exports=n},8546:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},2306:(e,t,r)=>{e=r.nmd(e);var n=r(4967),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&n.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},9005:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},3766:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},8942:(e,t,r)=>{var n=r(4967),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},4103:(e,t,r)=>{var n=r(1386);e.exports=function(){this.__data__=new n,this.size=0}},4160:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},4162:e=>{e.exports=function(e){return this.__data__.get(e)}},7462:e=>{e.exports=function(e){return this.__data__.has(e)}},6638:(e,t,r)=>{var n=r(1386),i=r(9770),o=r(8250);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(a)}return r.set(e,t),this.size=r.size,this}},4066:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},6108:(e,t,r)=>{var n=r(9334);e.exports=function(e){return n(e,5)}},6285:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3283:(e,t,r)=>{var n=r(6027),i=r(547),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,d=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=d},3142:e=>{var t=Array.isArray;e.exports=t},6529:(e,t,r)=>{var n=r(3655),i=r(5387);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},5853:(e,t,r)=>{e=r.nmd(e);var n=r(8942),i=r(4772),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?n.Buffer:void 0,d=(s?s.isBuffer:void 0)||i;e.exports=d},3655:(e,t,r)=>{var n=r(7379),i=r(1580);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},5387:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7681:(e,t,r)=>{var n=r(777),i=r(9460),o=r(2306),a=o&&o.isMap,s=a?i(a):n;e.exports=s},1580:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},547:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3943:(e,t,r)=>{var n=r(1935),i=r(9460),o=r(2306),a=o&&o.isSet,s=a?i(a):n;e.exports=s},8666:(e,t,r)=>{var n=r(674),i=r(9460),o=r(2306),a=o&&o.isTypedArray,s=a?i(a):n;e.exports=s},1211:(e,t,r)=>{var n=r(358),i=r(195),o=r(6529);e.exports=function(e){return o(e)?n(e):i(e)}},5288:(e,t,r)=>{var n=r(358),i=r(7200),o=r(6529);e.exports=function(e){return o(e)?n(e,!0):i(e)}},9306:e=>{e.exports=function(){return[]}},4772:e=>{e.exports=function(){return!1}},6442:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},3634:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},6270:(e,t,r)=>{var n=r(6442);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},5372:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},9436:e=>{function t(e,t,r,n,i,o,a){try{var s=e[o](a),d=s.value}catch(e){return void r(e)}s.done?t(d):Promise.resolve(d).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=e.apply(r,n);function s(e){t(a,i,o,s,d,"next",e)}function d(e){t(a,i,o,s,d,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},183:e=>{e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.__esModule=!0,e.exports.default=e.exports},451:e=>{e.exports=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}},e.exports.__esModule=!0,e.exports.default=e.exports},5018:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},1170:e=>{e.exports=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)},e.exports.__esModule=!0,e.exports.default=e.exports},5093:(e,t,r)=>{var n=r(183),i=r(1170);e.exports=function(e,t){var r=i(e,t,"get");return n(e,r)},e.exports.__esModule=!0,e.exports.default=e.exports},9905:(e,t,r)=>{var n=r(451),i=r(1170);e.exports=function(e,t,r){var o=i(e,t,"set");return n(e,o,r),r},e.exports.__esModule=!0,e.exports.default=e.exports},4668:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},8212:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},409:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},906:(e,t,r)=>{var n=r(9893);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4293:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},604:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6525:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},5523:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8438:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},7996:(e,t,r)=>{var n=r(8731);e.exports=function(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},8731:e=>{e.exports=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},3315:(e,t,r)=>{var n=r(4319).default,i=r(5372);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7048:(e,t,r)=>{var n=r(4319).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",d=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new T(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return C()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=A(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var d=p(e,t,r);if("normal"===d.type){if(n=r.done?"completed":"suspendedYield",d.arg===f)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(n="completed",r.method="throw",r.arg=d.arg)}}}(e,r,a),o}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f={};function g(){}function v(){}function m(){}var b={};u(b,s,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(w([])));y&&y!==r&&o.call(y,s)&&(b=y);var I=m.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(i,a,s,d){var c=p(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==n(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,d)}),(function(e){r("throw",e,s,d)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,d)}))}d(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function A(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function w(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=m,u(I,"constructor",m),u(m,"constructor",v),v.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(_.prototype),u(_.prototype,d,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new _(l(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(I),u(I,c,"Generator"),u(I,s,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=w,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),d=o.call(i,"finallyLoc");if(s&&d){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:w(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},9893:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},8832:(e,t,r)=>{var n=r(3634),i=r(6525),o=r(8243),a=r(5523);e.exports=function(e,t){return n(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},147:(e,t,r)=>{var n=r(6270),i=r(604),o=r(8243),a=r(8438);e.exports=function(e){return n(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},4319:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},8243:(e,t,r)=>{var n=r(6442);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},5799:(e,t,r)=>{var n=r(7048)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},5704:(e,t)=>{"use strict";const r="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",n=new RegExp(`^${r}$`,"i"),i=!!String.prototype.trim;function o(e){return null!=e}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){return i?(""+e).trim():(""+e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function d(e){return"string"==typeof e}function c(e){return!!e&&"object"==typeof e&&!a(e)}function u(e,t){return new Date((new Date).getTime()+e*t)}function l(e,t,r){if(c(t)){let n;return n="message"in t&&"string"==typeof t.message?new Error(r||t.message):new Error(r),n.name=e,"stack"in t&&"string"==typeof t.stack&&(n.stack=t.stack),"lineNumber"in t&&"number"==typeof t.lineNumber&&(n.lineNumber=t.lineNumber),"columnNumber"in t&&"number"==typeof t.columnNumber&&(n.columnNumber=t.columnNumber),n}{const t=Error(r);return t.name=e,t}}const p="li_errors";t.ERRORS_CHANNEL=p,t.ReplayEmitter=class{data;constructor(e){const t=parseInt(e.toString())||5;this.data={h:{},q:{},size:t}}on(e,t,r){const n={callback:t.bind(r),unbound:t};return this.data={...this.data,h:{...this.data.h,[e]:[...this.data.h[e]||[],n]}},(this.data.q[e]||[]).forEach((e=>t.call(r,e))),this}once(e,t,r){const n=this.data.q[e]||[];if(n.length>0)return t.call(r,n[0]),this;{const n=i=>{this.off(e,n),t.call(r,i)};return n._=t,this.on(e,n,r)}}emit(e,t){(this.data.h[e]||[]).forEach((e=>e.callback(t)));const r=this.data.q[e]||[];return this.data={...this.data,q:{...this.data.q,[e]:[...r.length<this.data.size?r:r.slice(1),t]}},this}off(e,t){const r=this.data.h[e],n=r&&t&&r.filter((e=>e.unbound!==t))||[];if(n.length)this.data={...this.data,h:{...this.data.h,[e]:n}};else{const{[e]:t,...r}=this.data.h;this.data={...this.data,h:r}}return this}emitErrorWithMessage(e,t,r){const n=l(e,r,t);return this.emit(p,n)}emitError(e,t){const r=l(e,t);return this.emit(p,r)}},t.UUID=r,t.expiresInDays=function(e){return u(e,864e5)},t.expiresInHours=function(e){return u(e,36e5)},t.isArray=a,t.isFunction=function(e){return!!e&&"function"==typeof e},t.isNonEmpty=function(e){return o(e)&&s(e).length>0},t.isObject=c,t.isRecord=function(e){return c(e)},t.isString=d,t.isUUID=function(e){return!!e&&n.test(s(e))},t.nonNull=o,t.onNonNull=function(e,t){return null!=e?t(e):e},t.safeToString=function(e){return"object"==typeof e?JSON.stringify(e):""+e},t.strEqualsIgnoreCase=function(e,t){return d(e)&&d(t)&&s(e.toLowerCase())===s(t.toLowerCase())},t.trim=s,t.wrapError=l},6062:(e,t,r)=>{"use strict";var n=r(4698);r(5704),r(4960);const i=n.LiveConnect,o=n.StandardLiveConnect,a=n.MinimalLiveConnect;t.consts=n.consts,t.eventBus=n.eventBus,t.LiveConnect=i,t.MinimalLiveConnect=a,t.StandardLiveConnect=o},4698:(e,t,r)=>{"use strict";var n=r(5704),i=r(4960);class o{url;timeout;calls;eventBus;retries;constructor(e){this.url=e.collectorUrl??"https://rp.liadm.com",this.timeout=e.ajaxTimeout??0,this.calls=e.callHandler,this.eventBus=e.eventBus,this.retries=e.ajaxRetries??3}callBakers(e){try{const t=JSON.parse(e).bakers;if(n.isArray(t))for(let e=0;e<t.length;e++)this.calls.pixelGet(`${t[e]}?dtstmp=${Date.now()}`)}catch(t){this.eventBus.emitErrorWithMessage("CallBakers",`Error while calling bakers with ${e}`,t)}}sendState(e,t,r,i){if(e.sendsPixel()){i&&n.isFunction(i)&&i();const o=e.asQuery().add("dtstmp",Date.now(),{prepend:!0}).toQueryString();r(`${this.url}/${t}${o}`)}}sendAjax(e,t={}){this.sendState(e,"j",(r=>{const i=o=>{this.calls.ajaxGet(r,(e=>{t.onLoad&&n.isFunction(t.onLoad)&&t.onLoad(),this.callBakers(e)}),(r=>{o<=0?(this.sendPixel(e,t),this.eventBus.emitError("AjaxFailed",r)):i(o-1)}),this.timeout)};i(this.retries)}),t.onPreSend)}sendPixel(e,t={}){this.sendState(e,"p",(e=>this.calls.pixelGet(e,t.onLoad)),t.onPreSend)}}const a="__li__evt_bus",s=n.ERRORS_CHANNEL,d="lips",c="pre_lips",u="_li_duid",l="https://idx.liadm.com/idex",p=[];var f=Object.freeze({__proto__:null,DEFAULT_IDEX_AJAX_TIMEOUT:5e3,DEFAULT_IDEX_URL:l,DEFAULT_REQUESTED_ATTRIBUTES:p,ERRORS_PREFIX:s,EVENT_BUS_NAMESPACE:a,PEOPLE_VERIFIED_LS_ENTRY:u,PIXEL_SENT_PREFIX:d,PRELOAD_PIXEL:c});const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function v(e){const t=function(e){e=`${e}`;for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let t="";for(let n=0;n<e.length;n+=3){const i=[void 0,void 0,void 0,void 0];i[0]=e.charCodeAt(n)>>2,i[1]=(3&e.charCodeAt(n))<<4,e.length>n+2?(i[1]|=e.charCodeAt(n+1)>>4,i[2]=(15&e.charCodeAt(n+1))<<2,i[2]|=e.charCodeAt(n+2)>>6,i[3]=63&e.charCodeAt(n+2)):e.length>n+1&&(i[1]|=e.charCodeAt(n+1)>>4,i[2]=(15&e.charCodeAt(n+1))<<2);for(let e=0;e<i.length;e++){const n=i[e];t+=void 0===n?"=":(r=n)>=0&&r<64?g[r]:void 0}}var r;return t}(e);return t||""}const m=/[+/]|=+$/g,b={"+":"-","/":"_"};function h(e){return b[e]||""}function y(e){let t=null;const r=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt("0x"+t,16))));try{t=window&&n.isFunction(window.btoa)?window.btoa:v}catch(e){t=v}return t(r).replace(m,h)}const I=()=>/(\s+)?[a-f0-9]{32,64}(\s+)?/gi,E=new Map([[32,"md5"],[40,"sha1"],[64,"sha256"]]);function _(e){const t=A(e);return!!t&&E.has(t.length)}function A(e){const t=e.match(I());return t&&t.map(n.trim)[0]}function O(e){const t=e.toLowerCase();return{md5:i.md5(t),sha1:i.sha1(t),sha256:i.sha256(t)}}const S=()=>/\S+(@|%40)\S+\.\S+/;function T(e){return S().test(e)}function w(e){const t=e.match(S());return t&&t.map(n.trim)[0]}function C(e){const t=function(e){const t=[],r=new RegExp("([\\w\\d.+-]+(@|%40)[\\w\\d-]+.[\\w\\d.-]+)","g");let i=r.exec(e);for(;i;)t.push(n.trim(i[1])),i=r.exec(e);return t}(e),r=[];let i=e;for(let e=0;e<t.length;e++){const n=t[e],o=O(n);i=i.replace(n,o.md5),r.push(o)}return{stringWithoutRawEmails:i,hashesFromOriginalString:r}}function x(e,t){return"string"==typeof t&&T(n.trim(t))?"*********":t}function P(e){return function(e){return"false"!==e&&("true"===e||e)}(function(e){return"null"===e||"undefined"===e?null:e}(function(e){return isNaN(+e)?e:+e}(e)))}function D(e,t){if(t in e){const r=e[t];return n.isArray(r)?r.map((e=>P(j(e)))):P(j(r))}}function R(e){let t,r,i;const o={};return e&&-1!==(t=e.indexOf("?"))&&(r=e.slice(t+1))&&(-1===(i=r.indexOf("#"))||(r=r.slice(0,i)))?(r.split("&").forEach((function(e){if(e){let t;const r=e.split("=");t=r[0];const i=2===r.length?r[1]:"true";if("[]"===t.slice(-2)&&(t=t.slice(0,-2)),t in o){const e=o[t];n.isArray(e)?e.push(i):o[t]=[e,i]}else o[t]=i}})),o):o}function j(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)}class k{hash;host;hostname;pathname;port;protocol;search;constructor(e){const t=e.match(/^(https?\:\/\/)?(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(null===t)throw new TypeError(`Failed to parse URL: ${e}`);this.protocol=t[1]||"",this.host=t[2]||"",this.hostname=t[3]||"",this.port=t[4]||"",this.pathname=t[5]||"",this.search=t[6]||"",this.hash=t[7]||""}toString(){return`${this.protocol}${this.host}${this.pathname}${this.search}${this.hash}`}}const N=["items","itemids"],B=["email","emailhash","hash","hashedemail"];const U=[function(e){const t=e.eventSource||{},r=Object.keys(t);for(const i of r){const r=i.toLowerCase();if(B.indexOf(r)>-1){const r=n.trim(n.safeToString(t[i])),o=w(r),a=A(r);if(o){const t=O(j(o));return M({hashedEmail:[t.md5,t.sha1,t.sha256]},e)}if(a&&_(a))return M({hashedEmail:[a.toLowerCase()]},e)}}return e},function(e){const t=e.eventSource||{};return Object.keys(t).forEach((e=>{const r=e.toLowerCase(),i=t[e];N.indexOf(r)>-1&&n.isArray(i)&&i.length>10&&(i.length=10)})),{}}];function M(e,t){const r={};function i(e){return n.isObject(e)?e:{}}function o(e){return Object.keys(e)}const a=i(e),s=i(t);return o(a).forEach((e=>{r[e]=a[e]})),o(s).forEach((e=>{r[e]=s[e]})),r}class q{tuples;constructor(e=[]){this.tuples=e}add(e,t,r={}){const{stripEmpty:n=!0,prepend:i=!1}=r;return""===e||n&&""===t?this:i?(this.tuples.unshift([e,t]),this):(this.tuples.push([e,t]),this)}addOptional(e,t,r={}){return n.nonNull(t)?this.add(e,t,r):this}addParamsMap(e){return Object.keys(e).forEach((t=>{const r=e[t];n.nonNull(r)&&(n.isArray(r)?r.forEach((e=>this.add(t,e))):this.add(t,r))})),this}copy(){return new q(this.tuples.slice())}filteredCopy(e){return new q(this.tuples.filter((([t,r])=>e(t,r))))}toQueryString(){let e="";return this.tuples.forEach((([t,r])=>{const n=0===e.length?"?":"&";e=`${e}${n}${encodeURIComponent(t)}=${encodeURIComponent(r)}`})),e}}function V(e){return null===e?"":e}const L={full:"full",noPath:"no_path"};function F(e){if(void 0===e.pageUrl||0===e.pageUrl.length)return["",!1,[]];if(function(e){return!(void 0!==e.urlCollectionMode&&e.urlCollectionMode!==L.full||void 0!==e.queryParametersFilter&&""!==e.queryParametersFilter)}(e))return[e.pageUrl,!1,[]];const t=new k(e.pageUrl),r=function(e){const t=R(e),r=[];return Object.keys(t).forEach((e=>{r.push([e,D(t,e)])})),r}(t.search),n=function(e,t){return t.urlCollectionMode===L.noPath&&e.pathname.length>1}(t,e),i=function(e,t){if(void 0===t.queryParametersFilter||""===t.queryParametersFilter)return[];const r=new RegExp(t.queryParametersFilter);return e.map((e=>e[0])).filter((e=>r.test(e)))}(r,e);return n&&(t.pathname="/"),i.length>0&&(t.search=function(e,t){const r=e.filter((e=>-1===t.indexOf(e[0]))).map((e=>`${e[0]}=${e[1]}`));return r.length>0?`?${r.join("&")}`:""}(r,i)),[t.toString(),n,i]}function G(e){if(0!==e.length){const t=new k(e);return t.pathname="",t.search="",t.toString()}}const z=["setemail","setemailhash","sethashedemail"];class W{data;eventBus;constructor(e,t){this.data=W.safeFiddle(e,t),this.eventBus=t}static safeFiddle(e,t){try{return r=JSON.parse(JSON.stringify(e)),n.isObject(r.eventSource)?U.reduce((function(e,t){return M(e,t(e))}),r):r}catch(e){return console.error(e),t.emitErrorWithMessage("StateCombineWith","Error while extracting event data",e),{}}var r}combineWith(e){return new W(M(this.data,e),this.eventBus)}sendsPixel(){const e=n.isObject(this.data.eventSource)?this.data.eventSource:{},t=Object.keys(e).filter((e=>"eventname"===e.toLowerCase()||"event"===e.toLowerCase())),r=t&&t.length>=1&&t[0],i=r&&n.trim(e[r]);return!i||-1===z.indexOf(i.toLowerCase())}asQuery(){const e=this.data,t=(new q).addOptional("aid",e.appId).addOptional("did",e.distributorId).addOptional("se",n.onNonNull(e.eventSource,(e=>y(JSON.stringify(e,x))))).addOptional("duid",e.liveConnectId).addOptional("tv",e.trackerVersion);if(n.nonNull(e.pageUrl)){const[r,n,i]=F(e);t.add("pu",r).addOptional("pu_rp",n?"1":void 0).add("pu_rqp",i.join(","))}return t.addOptional("ae",n.onNonNull(e.errorDetails,(e=>y(JSON.stringify(e))))),n.isArray(e.retrievedIdentifiers)&&e.retrievedIdentifiers.forEach((e=>t.add(`ext_${e.name}`,e.value))),n.isArray(e.hashesFromIdentifiers)&&e.hashesFromIdentifiers.forEach((e=>t.add("scre",`${e.md5},${e.sha1},${e.sha256}`))),t.addOptional("li_did",e.decisionIds?.join(",")).addOptional("e",e.hashedEmail?.join(",")).addOptional("us_privacy",e.usPrivacyString).addOptional("wpn",e.wrapperName).addOptional("gdpr",n.onNonNull(e.gdprApplies,(e=>e?"1":"0"))).addOptional("gdpr_consent",e.gdprConsent).addOptional("refr",e.referrer).addOptional("gpp_s",e.gppString).addOptional("gpp_as",e.gppApplicableSections?.join(",")).addOptional("cd",e.cookieDomain).addOptional("ic",V(e.resolvedIdCookie),{stripEmpty:!1}).addOptional("c",e.contextElements),t}}function H(e=window){return Q((()=>e.top.document.referrer))}function Y(e=window){const t=Q((()=>e.location.ancestorOrigins))||[],r=[];let n,i=e;for(;i!==top;)r.push(i),i=i.parent;r.push(i);for(let e=r.length-1;e>=0&&!n;e--)n=Q((()=>r[e].location.href)),0!==e&&(n||(n=Q((()=>r[e-1].document.referrer))),n||(n=t[e-1]));return n}function K(e,t,r){if(!e&&t&&""!==t&&r){const e=function(e,t){const r=window.document.querySelectorAll(e);let n="";for(let e=0;e<r.length;e++){const i=n+C(r[e].outerHTML).stringWithoutRawEmails;if(!(J(i)<=t))return n;n=i}return n}(t,r);return y(e)}return""}function J(e){return Math.ceil(4*new Blob([e]).size/3)}function Q(e){try{return e()}catch(e){return}}const X=e=>({...e,pageUrl:Y(),referrer:H(),contextElements:K(e.privacyMode,e.contextSelectors,e.contextElementsLength)});function $(e){let t=[];e&&(n.isArray(e)?t=e:n.isString(e)&&(t=e.split(",")));for(let e=0;e<t.length;e++)t[e]=t[e].trim();return t}function Z(e,t){const r=[];let i=[];for(let o=0;o<e.length;o++){const a=e[o],s=t.getCookie(a)||t.getDataFromLocalStorage(a);if(s){const e=C(n.safeToString(s));r.push({name:a,value:e.stringWithoutRawEmails}),i=i.concat(e.hashesFromOriginalString)}}return{retrievedIdentifiers:r,hashesFromIdentifiers:ee(i)}}function ee(e){const t=new Set,r=[];for(let n=0;n<e.length;n++)t.has(e[n].md5)||(r.push(e[n]),t.add(e[n].md5));return r}const te=e=>({...e,privacyMode:!!e.gdprApplies||(e.gppApplicableSections??[]).indexOf(2)>-1});function re(e,t){if(e&&e.appId&&e.distributorId){const r=e.distributorId;delete e.distributorId,t.emitError("AppIdAndDistributorIdPresent",new Error(`Event contains both appId: ${e.appId} and distributorId: ${r}. Ignoring distributorId`))}return e}const ne="idCookie";class ie{eventBus;calls;idexConfig;externalIds;source;publisherId;url;timeout;requestedAttributes;query;privacyMode;resolvedIdCookie;generateIdCookie;peopleVerifiedId;pageUrl;constructor(e,t,r){const i=e||{identityResolutionConfig:{}};this.eventBus=r,this.calls=t,this.idexConfig=i.identityResolutionConfig||{},this.externalIds=i.retrievedIdentifiers||[],this.source=this.idexConfig.source||"unknown",this.publisherId=this.idexConfig.publisherId||"any",this.url=this.idexConfig.url||l,this.timeout=this.idexConfig.ajaxTimeout||i.ajaxTimeout||5e3,this.requestedAttributes=this.idexConfig.requestedAttributes||p,this.privacyMode=i.privacyMode??!1,this.resolvedIdCookie=i.resolvedIdCookie,this.generateIdCookie="generated"===this.idexConfig.idCookieMode,this.peopleVerifiedId=i.peopleVerifiedId,this.pageUrl=i.pageUrl,this.query=(new q).addOptional("duid",i.peopleVerifiedId).addOptional("us_privacy",i.usPrivacyString).addOptional("gdpr",n.onNonNull(i.gdprApplies,(e=>e?1:0))).addOptional("gdpr_consent",i.gdprConsent).addOptional("did",i.distributorId).addOptional("gpp_s",i.gppString).addOptional("gpp_as",i.gppApplicableSections?.join(",")).addOptional("cd",i.cookieDomain).addOptional("ic",V(i.resolvedIdCookie),{stripEmpty:!1}).addOptional("pu",n.onNonNull(i.pageUrl,G)),this.externalIds.forEach((e=>{this.query.add(e.name,e.value)})),this.requestedAttributes.forEach((e=>{this.query.add("resolve",e)}))}attributeResolutionAllowed(e){return"uid2"===e?!this.privacyMode:e!==ne}filterParams(e){return e.filteredCopy(((e,t)=>"resolve"!==e||!!n.isString(t)&&this.attributeResolutionAllowed(t)))}enrichExtraIdentifiers(e,t){const r=t.tuples.filter((([e])=>"resolve"===e)).map((([,e])=>e));const n={...e};var i;return i=ne,r.indexOf(i)>-1&&(this.generateIdCookie&&this.peopleVerifiedId?n[ne]=this.peopleVerifiedId:this.resolvedIdCookie&&(n[ne]=this.resolvedIdCookie)),n}responseReceived(e,t){return(r,i)=>{let o={};if(r)try{const e=JSON.parse(r);n.isObject(e)&&(o=e)}catch(e){console.error("Error parsing response",e),this.eventBus.emitError("IdentityResolverParser",e)}const a=function(e){if(n.isObject(e)&&"getResponseHeader"in e&&n.isFunction(e.getResponseHeader)){const t=e.getResponseHeader("expires");if(t)return new Date(t)}}(i);e(this.enrichExtraIdentifiers(o,t),{expiresAt:a})}}buildUrl(e){return`${this.url}/${this.source}/${this.publisherId}${this.filterParams(e).toQueryString()}`}getUrl(e){const t=this.query.copy().addParamsMap(e??{});return this.buildUrl(t)}resolve(e,t,r){try{const n=this.query.copy().addParamsMap(r??{});this.calls.ajaxGet(this.buildUrl(n),this.responseReceived(e,n),t,this.timeout)}catch(e){console.error("IdentityResolve",e),t&&n.isFunction(t)&&t(e),this.eventBus&&this.eventBus.emitError("IdentityResolve",e)}}}function oe(e){return"number"==typeof e&&e>=0?new n.ReplayEmitter(e):new n.ReplayEmitter(5)}function ae(e){n.isFunction(e.emitErrorWithMessage)&&n.isFunction(e.emitError)||(e.emitErrorWithMessage=function(t,r,i={}){const o=n.wrapError(t,r,i);return e.emit(n.ERRORS_CHANNEL,o)},e.emitError=function(t,r){return e.emitErrorWithMessage(t,r.message,r)})}function se(e=5){return oe(e)}function de(e){const t=window[e].eventBus||window[a];return ae(t),t}var ce=Object.freeze({__proto__:null,GlobalEventBus:function(e,t,r){try{return window||r(new Error("Bus can only be attached to the window, which is not present")),window&&!window[e]&&(window[e]=oe(t)),ae(window[e]),window[e]}catch(e){console.error("events.bus.init",e),r(e)}},LocalEventBus:se,getAvailableBus:de});const ue="_li_dcdm_c";function le(e){const t=e.getCookie(ue);if(t)return t;const r=document.domain||document.location&&document.location.host||window&&window.location&&window.location.host||"localhost",n=r.split(".");for(let t=n.length;t>0;t--){const r=`.${n.slice(t-1,n.length).join(".")}`;if(e.setCookie(ue,r,void 0,"Lax",r),e.getCookie(ue))return r}return`.${r}`}const pe={cookie:"cookie",localStorage:"ls",none:"none",disabled:"disabled"},fe=e=>{const t=e.privacyMode?pe.disabled:e.storageStrategy||pe.cookie;return{...e,storageStrategy:t}},ge=n.expiresInDays(30),ve="li_did",me="lidids.",be=(e,t,r)=>r.indexOf(e)===t,he=e=>e&&n.trim(e).length>0;function ye(e,t){return r=>{function i(e,r){try{return r()}catch(r){return t.emitErrorWithMessage("DecisionsResolve",e,r),[]}}const o=i("Error while extracting new decision ids",(()=>[].concat(r.pageUrl&&function(e,t){return D(R(e),t)}(r.pageUrl,ve)||[]).map(n.trim).filter(he).filter(n.isUUID).filter(be))),a=i("Error while retrieving stored decision ids",(()=>e.findSimilarCookies(me).map(n.trim).filter(he).filter(n.isUUID)));return o.forEach((n=>{try{(i=n)&&e.setCookie(`${me}${i}`,i,ge,"Lax",r.cookieDomain)}catch(e){t.emitErrorWithMessage("DecisionsResolve","Error while storing new decision id",e)}var i})),{...r,decisionIds:o.concat(a).filter(be)}}}const Ie="0123456789ABCDEFGHJKMNPQRSTVWXYZ",Ee=Ie.length,_e=Math.pow(2,48)-1,Ae=10,Oe=16,Se=function(){const e="undefined"!=typeof window?window:null,t=e&&(e.crypto||e.msCrypto);if(t)return()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]/255};return()=>Math.random()}();function Te(e,t){if(e>_e)throw function(e){const t=new Error(e);return t.source="Ulid",t}("cannot encode time greater than "+_e);let r,n="";for(;t>0;t--)r=e%Ee,n=Ie.charAt(r)+n,e=(e-r)/Ee;return n}function we(){let e=Math.floor(Se()*Ee);return e===Ee&&(e=Ee-1),Ie.charAt(e)}function Ce(){return Te(Date.now(),Ae)+function(e){let t="";for(;e>0;e--)t=we()+t;return t}(Oe)}const xe="_lc2_fpi";function Pe(e,t){return r=>{let n;const o=e.get(xe);if(o)n=o.data;else{const o=t.getCookie(xe);if(o)e.set(xe,o),n=o;else{const t=`${function(e,t=12){return i.sha1(e.replace(/^\./,"")).substring(0,t)}(r.cookieDomain)}--${Ce()}`.toLocaleLowerCase();e.set(xe,t),n=e.get(xe)?.data}}return n&&t.setDataInLocalStorage(u,n),{...r,liveConnectId:n,peopleVerifiedId:n}}}const De=120,Re={errorDetails:{message:"Unknown message",name:"Unknown name"}};function je(e){try{const t=1*e;return isNaN(t)?void 0:t}catch{}}function ke(e){try{return n.isString(e)&&e.length&&e.length>De?`${e.substr(0,De)}...`:`${e}`}catch{}}const Ne=()=>{};class Be{obj;name;errors;eventBus;constructor(e,t,r){this.obj=e,this.name=t,this.errors=[],this.eventBus=r}wrap(e){if(n.isObject(this.obj)){const t=this.obj[e];if(n.isFunction(t))return(...r)=>{try{return t.call(this.obj,...r)}catch(t){this.eventBus.emitErrorWithMessage(this.name,`Failed calling ${e}`,t)}}}return this.errors.push(e),Ne}reportErrors(){this.errors.length>0&&this.eventBus.emitErrorWithMessage(this.name,`The functions '${JSON.stringify(this.errors)}' were not provided`)}}const Ue=()=>{};function Me(e,t,r){return n.strEqualsIgnoreCase(t,pe.disabled)?Ue:e.wrap(r)}function qe(e,t,r){return n.strEqualsIgnoreCase(t,pe.none)?Ue:Me(e,t,r)}class Ve{minimalFunctions;constructor(e,t){this.minimalFunctions={getCookie:Me(t,e,"getCookie"),getDataFromLocalStorage:Me(t,e,"getDataFromLocalStorage"),localStorageIsEnabled:qe(t,e,"localStorageIsEnabled")}}static make(e,t,r){const n=new Be(t,"ReadOnlyStorageHandler",r),i=new Ve(e,n);return n.reportErrors(),i}localStorageIsEnabled(){return!!this.minimalFunctions.localStorageIsEnabled()}getCookie(e){return this.minimalFunctions.getCookie(e)||null}getDataFromLocalStorage(e){return this.minimalFunctions.getDataFromLocalStorage(e)||null}}class Le extends Ve{storageStrategy;functions;constructor(e,t){super(e,t),this.storageStrategy=e,this.functions={setCookie:qe(t,e,"setCookie"),removeDataFromLocalStorage:qe(t,e,"removeDataFromLocalStorage"),setDataInLocalStorage:qe(t,e,"setDataInLocalStorage"),findSimilarCookies:Me(t,e,"findSimilarCookies")}}static make(e,t,r){const n=new Be(t,"StorageHandler",r),i=new Le(e,n);return n.reportErrors(),i}setCookie(e,t,r,n,i){this.functions.setCookie(e,t,r,n,i)}setDataInLocalStorage(e,t){this.functions.setDataInLocalStorage(e,t)}removeDataFromLocalStorage(e){this.functions.removeDataFromLocalStorage(e)}findSimilarCookies(e){return this.functions.findSimilarCookies(e)||[]}}class Fe extends Error{constructor(e){super(e),this.name="ParseError"}}class Ge{handler;cookieDomain;eventBus;constructor(e){this.handler=e.storageHandler,this.cookieDomain=e.cookieDomain,this.eventBus=e.eventBus}deleteCookie(e){this.handler.setCookie(e,"",new Date(0),"Lax",this.cookieDomain)}parseMetaRecord(e){const t=JSON.parse(e);if(!n.isObject(t))throw new Fe("Meta record is not an object");let r;if("e"in t&&(r=new Date(t.e),isNaN(r.getTime())))throw new Fe("Invalid expiresAt");if(!("w"in t))throw new Fe("Missing writtenAt");const i=new Date(t.w);if(isNaN(i.getTime()))throw new Fe("Invalid writtenAt");return{expiresAt:r,writtenAt:i}}serializeMetaRecord(e){let t;return e.expiresAt&&(t=e.expiresAt.getTime()),JSON.stringify({w:e.writtenAt.getTime(),e:t})}getCookieRecord(e,t){const r=this.handler.getCookie(t);if(!r||0===r.length)return null;let n;try{n=this.parseMetaRecord(r)}catch(r){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from cookies",r),this.deleteCookie(e),this.deleteCookie(t),null}const i=n.expiresAt;if(i&&i.getTime()<=Date.now())return null;const o=this.handler.getCookie(e);return o?{data:o,meta:n}:null}getLSRecord(e,t){const r=this.handler.getDataFromLocalStorage(t);if(!r||0===r.length)return null;let n;try{n=this.parseMetaRecord(r)}catch(r){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from ls",r),this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null}const i=n.expiresAt;if(i&&i.getTime()<=Date.now())return this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null;const o=this.handler.getDataFromLocalStorage(e);return o?{data:o,meta:n}:null}get(e){const t=ze(e),r=this.getCookieRecord(e,t),n=this.getLSRecord(e,t);return r&&n?r.meta.writtenAt.getTime()===n.meta.writtenAt.getTime()?r:r.meta.writtenAt>n.meta.writtenAt?(this.handler.setDataInLocalStorage(e,r.data),this.handler.setDataInLocalStorage(t,this.serializeMetaRecord(r.meta)),r):(this.handler.setCookie(e,n.data,n.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(t,this.serializeMetaRecord(n.meta),n.meta.expiresAt,"Lax",this.cookieDomain),n):r?(this.handler.setDataInLocalStorage(e,r.data),this.handler.setDataInLocalStorage(t,this.serializeMetaRecord(r.meta)),r):n?(this.handler.setCookie(e,n.data,n.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(t,this.serializeMetaRecord(n.meta),n.meta.expiresAt,"Lax",this.cookieDomain),n):null}set(e,t,r){const i=ze(e),o=this.serializeMetaRecord({writtenAt:new Date,expiresAt:r});this.handler.setDataInLocalStorage(e,t),this.handler.setDataInLocalStorage(i,o);const a=r||n.expiresInDays(730);this.handler.setCookie(e,t,a,"Lax",this.cookieDomain),this.handler.setCookie(i,o,a,"Lax",this.cookieDomain)}}function ze(e){return`${e}_meta`}const We=()=>{};function He(e,t,r){return t?We:e.wrap(r)}class Ye{functions;constructor(e,t,r){const n=new Be(e,"CallHandler",t);this.functions={ajaxGet:He(n,r,"ajaxGet"),pixelGet:He(n,r,"pixelGet")},n.reportErrors()}ajaxGet(e,t,r,n){this.functions.ajaxGet(e,t,r,n)}pixelGet(e,t){this.functions.pixelGet(e,t)}}function Ke(e){return t=>"cookie"===t.idCookie?.strategy&&"string"==typeof t.idCookie?.name?{...t,resolvedIdCookie:e.getCookie(t.idCookie.name)}:"localStorage"===t.idCookie?.strategy&&"string"==typeof t.idCookie?.name?{...t,resolvedIdCookie:e.getDataFromLocalStorage(t.idCookie.name)}:t}const Je={};function Qe(e,t,r,i){if(e&&n.isObject(e))if("config"in e)i.emitErrorWithMessage("StrayConfig","Received a config after LC has already been initialised",new Error(JSON.stringify(e)));else{const n=new W(r,i),o=n.combineWith({eventSource:e});Je.hashedEmail=Je.hashedEmail||o.data.hashedEmail;const a=M({eventSource:e},Je),s=()=>i.emit(c,"0"),u=()=>i.emit(d,r);t.sendAjax(n.combineWith(a),{onPreSend:s,onLoad:u})}else i.emitErrorWithMessage("EventNotAnObject","Received event was not an object",new Error(e))}function Xe(e,t,r,i){try{const a={...re(e,i),identifiersToResolve:e.identifiersToResolve||[],contextSelectors:e.contextSelectors||"",contextElementsLength:e.contextElementsLength||0},s=X(fe(te(a))),d=new Ye(r,i,s.privacyMode),c=Le.make(s.storageStrategy,t,i),u=function(e){return t=>({...t,cookieDomain:le(e)})}(c)(s),l=new Ge({storageHandler:c,eventBus:i,cookieDomain:u.cookieDomain}),p=Ke(c)(Pe(l,c)(ye(c,i)(function(e,t){return r=>{try{return{...r,...Z($(r.identifiersToResolve),e)}}catch(e){return t.emitError("IdentifiersEnricher",e),{...r,retrievedIdentifiers:[],hashesFromIdentifiers:[]}}}}(c,i)(u)))),f=new o({collectorUrl:a.collectorUrl,ajaxTimeout:a.ajaxTimeout,eventBus:i,callHandler:d});!function(e,t,r){try{r.on(n.ERRORS_CHANNEL,(i=>{var o;t.sendPixel(new W({...e,...(o=i,n.isRecord(o)?{errorDetails:{message:ke(o.message)||"",name:ke(o.name)||"",stackTrace:ke(o.stack),lineNumber:je(o.lineNumber),columnNumber:je(o.columnNumber),fileName:ke(o.fileName)}}:Re)},r))}))}catch(e){console.error("handlers.error.register",e)}}(p,f,i);const g=new ie(p,d,i),v=(...e)=>function(e,t,r,i){try{e.forEach((e=>{const o=e;n.isArray(o)?o.forEach((e=>Qe(e,t,r,i))):Qe(o,t,r,i)}))}catch(e){console.error("Error sending events",e),i.emitErrorWithMessage("LCPush","Failed sending an event",e)}}(e,f,p,i);return{push:v,fire:()=>v({}),peopleVerifiedId:p.peopleVerifiedId,ready:!0,resolve:g.resolve.bind(g),resolutionCallUrl:g.getUrl.bind(g),config:a,eventBus:i,storageHandler:c,cache:l}}catch(e){console.error(e),i.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}}function $e(e,t,r,i){const o=window[e.globalVarName]||[],a=function(e){try{if(window&&window[e.globalVarName]&&window[e.globalVarName].ready){const t=window[e.globalVarName].config&&function(e,t){if(e.appId!==t.appId||e.wrapperName!==t.wrapperName||e.collectorUrl!==t.collectorUrl)return{appId:[e.appId,t.appId],wrapperName:[e.wrapperName,t.wrapperName],collectorUrl:[e.collectorUrl,t.collectorUrl]}}(window[e.globalVarName].config,e);if(t){const r=new Error;r.name="ConfigSent",r.message="Additional configuration received";const n=de(e.globalVarName);window[e.globalVarName].eventBus=n,n.emitErrorWithMessage("LCDuplication",JSON.stringify(t),r)}return window[e.globalVarName]}}catch(e){console.error("Could not initialize error bus")}}(e)||Xe(e,t,r,i)||o;if(n.isArray(o))for(let e=0;e<o.length;e++)a.push(o[e]);return window[a.config.globalVarName]=a,window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter((e=>e.config.globalVarName===a.config.globalVarName)).length&&window.liQ_instances.push(a),a}function Ze(e,t,r,i){const o=n.isObject(e)&&e||{},a=i||se();let s;try{s=o.globalVarName?$e(o,t,r,a):function(e,t,r,n){const i=Xe(e,t,r,n);return window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(i),i}(o,t,r,a)}catch(e){console.error(e),a.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}return s}function et(e,t){const r=n.isArray(e)?e:n.safeToString(e).split(","),i=[];for(let e=0;e<r.length;e++){const a=n.trim(r[e]),s=t.getCookie(a)||t.getDataFromLocalStorage(a);!s||(o=n.safeToString(s),S().test(o))||T(n.safeToString(s))||i.push({name:a,value:n.safeToString(s)})}var o;return i}function tt(e,t,r,n,i){try{const o={...re(e,n),identifiersToResolve:e.identifiersToResolve||[]},a=fe(te(o)),s=Ve.make(a.storageStrategy,t,n),d=new Ye(r,n,a.privacyMode),c=function(e,t){return r=>{try{return{...r,retrievedIdentifiers:et(r.identifiersToResolve,e)}}catch(e){return t.emitError("IdentifiersEnrich",e),{...r,retrievedIdentifiers:[]}}}}(s,n)(Ke(s)(function(e,t){return r=>{try{return{...r,peopleVerifiedId:r.peopleVerifiedId||e.getDataFromLocalStorage(u)||void 0}}catch(e){return t.emitError("PeopleVerifiedEnrich",e),r}}}(s,n)(a))),l=new ie(c,d,n);return{push:e=>i(e),fire:()=>i({}),peopleVerifiedId:c.peopleVerifiedId,ready:!0,resolve:l.resolve.bind(l),resolutionCallUrl:l.getUrl.bind(l),config:o,eventBus:n,storageHandler:s}}catch(e){console.error(e)}}function rt(e,t,r,i){const o=n.isObject(e)&&e||{},a=i||se();try{return o.globalVarName?function(e,t,r,n){const i=window[e.globalVarName]=window[e.globalVarName]||[],o=tt(e,t,r,n,i.push.bind(i));return window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter((e=>e.config.globalVarName===o.config.globalVarName)).length&&window.liQ_instances.push(o),o}(o,t,r,a):function(e,t,r,n){const i=tt(e,t,r,n,(()=>{}));return window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(i),i}(o,t,r,a)}catch(e){console.error(e)}return{}}t.LiveConnect=function(e,t,r,i,o){const a="minimal"===i,s=o||se();return(a?rt:Ze)(n.isObject(e)&&e||{},t,r,s)},t.MinimalLiveConnect=rt,t.QueryBuilder=q,t.StandardLiveConnect=Ze,t.StorageHandlerBackedCache=Ge,t.WrappedStorageHandler=Le,t.consts=f,t.encodeIdCookie=V,t.eventBus=ce},4960:(e,t,r)=>{"use strict";r.r(t),r.d(t,{md5:()=>o,sha1:()=>a,sha256:()=>f});for(var n=[],i=0;i<64;)n[i]=0|4294967296*Math.sin(++i%Math.PI);function o(e){var t,r,o,a=[t=1732584193,r=4023233417,~t,~r],s=[],d=unescape(encodeURI(e))+"",c=d.length;for(e=--c/4+2|15,s[--e]=8*c;~c;)s[c>>2]|=d.charCodeAt(c)<<8*c--;for(i=d=0;i<e;i+=16){for(c=a;d<64;c=[o=c[3],t+((o=c[0]+[t&r|~t&o,o&t|~o&r,t^r^o,r^(t|~o)][c=d>>4]+n[d]+~~s[i|15&[d,5*d+1,3*d+5,7*d][c]])<<(c=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*c+d++%4])|o>>>-c),t,r])t=0|c[1],r=c[2];for(d=4;d;)a[--d]+=c[d]}for(e="";d<32;)e+=(a[d>>3]>>4*(1^d++)&15).toString(16);return e}function a(e){var t,r,n,i,o,a=[],s=[r=1732584193,n=4023233417,~r,~n,3285377520],d=[],c=unescape(encodeURI(e))+"",u=c.length;for(d[e=--u/4+2|15]=8*u;~u;)d[u>>2]|=c.charCodeAt(u)<<8*~u--;for(t=u=0;t<e;t+=16){for(r=s;u<80;r=[r[4]+(a[u]=u<16?~~d[t+u]:2*c|c<0)+1518500249+[n&i|~n&o,c=341275144+(n^i^o),882459459+(n&i|n&o|i&o),c+1535694389][u++/5>>2]+((c=r[0])<<5|c>>>27),c,n<<30|n>>>2,i,o])c=a[u-3]^a[u-8]^a[u-14]^a[u-16],n=r[1],i=r[2],o=r[3];for(u=5;u;)s[--u]+=r[u]}for(c="";u<40;)c+=(s[u>>3]>>4*(7-u++)&15).toString(16);return c}for(var s,d=18,c=[],u=[];d>1;d--)for(s=d;s<320;)c[s+=d]=1;function l(e,t){return 4294967296*Math.pow(e,1/t)|0}for(s=0;s<64;)c[++d]||(u[s]=l(d,2),c[s++]=l(d,3));function p(e,t){return e>>>t|e<<-t}function f(e){var t=u.slice(d=s=0,8),r=[],n=unescape(encodeURI(e))+"",i=n.length;for(r[e=--i/4+2|15]=8*i;~i;)r[i>>2]|=n.charCodeAt(i)<<8*~i--;for(i=[];d<e;d+=16){for(l=t.slice();s<64;l.unshift(n+(p(n=l[0],2)^p(n,13)^p(n,22))+(n&l[1]^l[1]&l[2]^l[2]&n)))l[3]+=n=0|(i[s]=s<16?~~r[s+d]:(p(n=i[s-2],17)^p(n,19)^n>>>10)+i[s-7]+(p(n=i[s-15],7)^p(n,18)^n>>>3)+i[s-16])+l.pop()+(p(n=l[4],6)^p(n,11)^p(n,25))+(n&l[5]^~n&l[6])+c[s++];for(s=8;s;)t[--s]+=l[s]}for(n="";s<64;)n+=(t[s>>3]>>4*(7-s++)&15).toString(16);return n}},5404:e=>{"use strict";e.exports=JSON.parse('{"JSON_MAPPING":{"PL_CODE":"code","PL_SIZE":"sizes","PL_BIDS":"bids","BD_BIDDER":"bidder","BD_ID":"paramsd","BD_PL_ID":"placementId","ADSERVER_TARGETING":"adserverTargeting","BD_SETTING_STANDARD":"standard"},"FLOOR_SKIPPED_REASON":{"NOT_FOUND":"not_found","RANDOM":"random"},"DEBUG_MODE":"pbjs_debug","STATUS":{"GOOD":1},"CB":{"TYPE":{"ALL_BIDS_BACK":"allRequestedBidsBack","AD_UNIT_BIDS_BACK":"adUnitBidsBack","BID_WON":"bidWon","REQUEST_BIDS":"requestBids"}},"EVENTS":{"AUCTION_INIT":"auctionInit","AUCTION_TIMEOUT":"auctionTimeout","AUCTION_END":"auctionEnd","BID_ADJUSTMENT":"bidAdjustment","BID_TIMEOUT":"bidTimeout","BID_REQUESTED":"bidRequested","BID_RESPONSE":"bidResponse","BID_REJECTED":"bidRejected","NO_BID":"noBid","SEAT_NON_BID":"seatNonBid","BID_WON":"bidWon","BIDDER_DONE":"bidderDone","BIDDER_ERROR":"bidderError","SET_TARGETING":"setTargeting","BEFORE_REQUEST_BIDS":"beforeRequestBids","BEFORE_BIDDER_HTTP":"beforeBidderHttp","REQUEST_BIDS":"requestBids","ADD_AD_UNITS":"addAdUnits","AD_RENDER_FAILED":"adRenderFailed","AD_RENDER_SUCCEEDED":"adRenderSucceeded","TCF2_ENFORCEMENT":"tcf2Enforcement","AUCTION_DEBUG":"auctionDebug","BID_VIEWABLE":"bidViewable","STALE_RENDER":"staleRender","BILLABLE_EVENT":"billableEvent","VAST_EXCEEDED_LIMIT":"vastExceededLimit","BID_ACCEPTED":"bidAccepted"},"AD_RENDER_FAILED_REASON":{"PREVENT_WRITING_ON_MAIN_DOCUMENT":"preventWritingOnMainDocument","NO_AD":"noAd","EXCEPTION":"exception","CANNOT_FIND_AD":"cannotFindAd","MISSING_DOC_OR_ADID":"missingDocOrAdid"},"EVENT_ID_PATHS":{"bidWon":"adUnitCode"},"GRANULARITY_OPTIONS":{"LOW":"low","MEDIUM":"medium","HIGH":"high","AUTO":"auto","DENSE":"dense","CUSTOM":"custom"},"TARGETING_KEYS":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","SOURCE":"hb_source","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_ID":"hb_cache_id","CACHE_HOST":"hb_cache_host","ADOMAIN":"hb_adomain","ACAT":"hb_acat","CRID":"hb_crid","DSP":"hb_dsp","INTERSTITIAL":"hb_instl"},"DEFAULT_TARGETING_KEYS":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_HOST":"hb_cache_host"},"NATIVE_KEYS":{"title":"hb_native_title","body":"hb_native_body","body2":"hb_native_body2","privacyLink":"hb_native_privacy","privacyIcon":"hb_native_privicon","sponsoredBy":"hb_native_brand","image":"hb_native_image","icon":"hb_native_icon","clickUrl":"hb_native_linkurl","displayUrl":"hb_native_displayurl","cta":"hb_native_cta","rating":"hb_native_rating","address":"hb_native_address","downloads":"hb_native_downloads","likes":"hb_native_likes","phone":"hb_native_phone","price":"hb_native_price","salePrice":"hb_native_saleprice","rendererUrl":"hb_renderer_url","adTemplate":"hb_adTemplate"},"S2S":{"SRC":"s2s","DEFAULT_ENDPOINT":"https://prebid.adnxs.com/pbs/v1/openrtb2/auction","SYNCED_BIDDERS_KEY":"pbjsSyncs"},"BID_STATUS":{"BID_TARGETING_SET":"targetingSet","RENDERED":"rendered","BID_REJECTED":"bidRejected"},"REJECTION_REASON":{"INVALID":"Bid has missing or invalid properties","INVALID_REQUEST_ID":"Invalid request ID","BIDDER_DISALLOWED":"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes","FLOOR_NOT_MET":"Bid does not meet price floor","CANNOT_CONVERT_CURRENCY":"Unable to convert currency"},"PREBID_NATIVE_DATA_KEYS_TO_ORTB":{"body":"desc","body2":"desc2","sponsoredBy":"sponsored","cta":"ctatext","rating":"rating","address":"address","downloads":"downloads","likes":"likes","phone":"phone","price":"price","salePrice":"saleprice","displayUrl":"displayurl"},"NATIVE_ASSET_TYPES":{"sponsored":1,"desc":2,"rating":3,"likes":4,"downloads":5,"price":6,"saleprice":7,"phone":8,"address":9,"desc2":10,"displayurl":11,"ctatext":12},"NATIVE_IMAGE_TYPES":{"ICON":1,"MAIN":3},"NATIVE_KEYS_THAT_ARE_NOT_ASSETS":["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],"FLOOR_VALUES":{"NO_DATA":"noData","AD_UNIT":"adUnit","SET_CONFIG":"setConfig","FETCH":"fetch","SUCCESS":"success","ERROR":"error","TIMEOUT":"timeout"}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(7236);__webpack_require__(7593),__webpack_require__(5001),__webpack_require__(4748),__webpack_require__(9763),__webpack_require__(4153),__webpack_require__(902),__webpack_require__(8768),__webpack_require__(5570),__webpack_require__(6459),__webpack_require__(2821),__webpack_require__(4645),__webpack_require__(3003),__webpack_require__(2233),__webpack_require__(6038),__webpack_require__(9248),__webpack_require__(4331),__webpack_require__(7906),__webpack_require__(271),__webpack_require__(1980),__webpack_require__(6279),__webpack_require__(3515),__webpack_require__(3504),__webpack_require__(8976),__webpack_require__(7919),__webpack_require__(5839),__webpack_require__(4632),__webpack_require__(9543),__webpack_require__(7652),__webpack_require__(7384),__webpack_require__(858),__webpack_require__(5923),__webpack_require__(8521),__webpack_require__(8558),__webpack_require__(2779),__webpack_require__(8144),__webpack_require__(5905),__webpack_require__(8346),__webpack_require__(3133),__webpack_require__(4778),__webpack_require__(699);e.Ay.processQueue()})()})();